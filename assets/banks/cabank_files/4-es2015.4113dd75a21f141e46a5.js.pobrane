(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"+jIX":function(e,t,a){"use strict";a.d(t,"a",function(){return p});var n=a("wd/R"),r=a("LRne"),i=a("ZQBd"),c=a("8Y7J"),s=a("MXWy"),o=a("NAEP"),y=a("zLWW");let p=(()=>{class e{constructor(e,t,a,n){this.productHelper=e,this.accountHelper=t,this.systemParameterService=a,this.routeDataService=n}toDebitAccountTree(e,t,a,n){const r=this.productHelper.ccaListToAccountEntryList(t),i=this.productHelper.saListToAccountEntryList(a),c=n.filter(e=>e.accountFlags.indexOf("PAYMENT_SAVING_PROGRAM_OUT_DEBIT")>=0),s=this.productHelper.psoListToAccountEntryList(c);return this.accountHelper.toAccountEntryDTOTreeNotSorted(e).concat(r.map(e=>({account:e,children:[]}))).concat(i.map(e=>({account:e,children:[]}))).concat(s.map(e=>({account:e,children:[]})))}updateDebitAccountTransferInternalEnabledFlag(e){return this.accountHelper.flattenAccountEntryDTOTree(e).forEach(e=>{const t=e.accountFlags.indexOf("PAYMENT_INTERNAL_DEBIT")>=0||e.accountFlags.indexOf("PAYMENT_SAVINGS_OUT_DEBIT")>=0||e.accountFlags.indexOf("PAYMENT_SAVING_PROGRAM_OUT_DEBIT")>=0;e.isDisabled=!t}),Object(r.a)(e)}updateDebitAccountTransferDomesticEnabledFlag(e){return this.accountHelper.flattenAccountEntryDTOTree(e).forEach(e=>{const t=e.accountFlags.indexOf("PAYMENT_DOMESTIC_DEBIT")>=0;e.isDisabled=!t}),Object(r.a)(e)}updateDebitAccountTransferSystemEuropeanEnabledFlag(e){return this.accountHelper.flattenAccountEntryDTOTree(e).forEach(e=>{const t=e.accountFlags.indexOf("PAYMENT_SYSTEM_EUROPEAN_DEBIT")>=0;e.isDisabled=!t}),Object(r.a)(e)}updateDebitAccountTransferSystemInternationalEnabledFlag(e){return this.accountHelper.flattenAccountEntryDTOTree(e).forEach(e=>{const t=e.accountFlags.indexOf("PAYMENT_SYSTEM_INTERNATIONAL_DEBIT")>=0;e.isDisabled=!t}),Object(r.a)(e)}updateDebitAccountTransferPrepaidEnabledFlag(e){return this.accountHelper.flattenAccountEntryDTOTree(e).forEach(e=>{const t=e.accountFlags.indexOf("PREPAID")>=0;e.isDisabled=!t}),Object(r.a)(e)}updateDebitAccountTransferRepaymentEnabledFlag(e){return this.accountHelper.flattenAccountEntryDTOTree(e).forEach(e=>{const t=e.accountFlags.indexOf("CREDIT_CARD_REPAYMENT_DEBIT")>=0||e.accountFlags.indexOf("LOAN_REPAYMENT_DEBIT")>=0;e.isDisabled=!t}),Object(r.a)(e)}updateDebitAccountTransferTaxEnabledFlag(e){return this.accountHelper.flattenAccountEntryDTOTree(e).forEach(e=>{const t=e.accountFlags.indexOf("PAYMENT_TAX_DEBIT")>=0;e.isDisabled=!t}),Object(r.a)(e)}updateDebitAccountTransferTfiEnabledFlag(e){return this.accountHelper.flattenAccountEntryDTOTree(e).forEach(e=>{const t=e.accountFlags.indexOf("PAYMENT_TFI_DEBIT")>=0;e.isDisabled=!t}),Object(r.a)(e)}updateDebitAccountTransferVatEnabledFlag(e){const t=this.accountHelper.flattenAccountEntryDTOTree(e),a=t.filter(e=>e.vatAccIndicator).length;return t.forEach(e=>{e.isDisabled=!(a>1&&e.vatAccIndicator)}),Object(r.a)(e)}updateDebitAccountTransferSplitEnabledFlag(e){return this.accountHelper.flattenAccountEntryDTOTree(e).forEach(e=>{const t=e.accountFlags.indexOf("PAYMENT_SPLIT_DEBIT")>=0;e.isDisabled=!t}),Object(r.a)(e)}updateDebitAccountTransferOnlineEnabledFlag(e){return this.accountHelper.flattenAccountEntryDTOTree(e).forEach(e=>{const t=e.accountFlags.indexOf("PAYMENT_ONLINE_DEBIT")>=0;e.isDisabled=!t}),Object(r.a)(e)}updateCreditAccountTransferInternalEnabledFlag(e,t){const a=this.accountHelper.flattenAccountEntryDTOTree(t),n=this.systemParameterService.getPaymentOwnExchangeCurrencyExcluded();return a.forEach(t=>{let a=(e.isAccount||e.isCreditCardAccount)&&t.accountFlags.indexOf("PAYMENT_INTERNAL_CREDIT")>=0&&e.nrbNumber!==t.nrbNumber&&n.indexOf(e.currency+"/"+t.currency)<0;a=a||e.isSavingAccount&&t.nrbNumber===e.parentNrbNumber,t.isDisabled=!a}),t}updateCreditAccountTransferRepaymentEnabledFlag(e,t){return t}updateDebitAccountBundleEnabledFlag(e){return this.accountHelper.flattenAccountEntryDTOTree(e).forEach(e=>{const t=e.accountFlags.indexOf("PAYMENT_TAX_DEBIT")>=0;e.isDisabled=!t}),Object(r.a)(e)}calendarDayToNumber(e){return["MON","TUE","WED","THU","FRI","SAT","SUN"].indexOf(e)+1}numberToCalendarDay(e){return Number(e)>=1&&Number(e)<=7?["MON","TUE","WED","THU","FRI","SAT","SUN"][Number(e)-1]:"MON"}getFirstWorkingDay(e,t){let a=n(e);for(;!this.isWorkingDay(a.toDate(),t);)a=a.add(1,"day");return a.toDate()}getNthWorkingDay(e,t,a){let r=n(e),i=0;for(;i<a;)r=r.add(1,"day"),this.isWorkingDay(r.toDate(),t)&&i++;return r.toDate()}isWorkingDay(e,t){const a=n(e).endOf("day"),r=a.isoWeekday();let i=!0;return i&&t&&t.nonWorkingDaysOfTheWeek&&t.nonWorkingDaysOfTheWeek.length>0&&(i=i&&-1===t.nonWorkingDaysOfTheWeek.map(this.calendarDayToNumber).indexOf(r)),i&&t&&t.nonWorkingDays&&t.nonWorkingDays.length>0&&(i=i&&!t.nonWorkingDays.some(e=>n(e).endOf("day").isSame(a))),i}navigateToTransferModification(e){let t=[];if(e.paymentDefinition.paymentInternal||e.paymentDefinition.paymentSavingsOut)t=["/transfers/internal"];else if(e.paymentDefinition.paymentSystem&&!e.paymentDefinition.paymentSystem.isInternational)t=["/transfers/european"];else if(e.paymentDefinition.paymentSystem&&e.paymentDefinition.paymentSystem.isInternational)t=["/transfers/international"];else if(e.paymentDefinition.paymentSplit)t=["/transfers/split"];else if(e.paymentDefinition.creditCardRepayment||e.paymentDefinition.loanRepayment)t=["/transfers/repayment"];else if(e.paymentDefinition.paymentTax)t=["/transfers/tax"];else{if(!e.paymentDefinition.paymentTfi)throw new Error("Empty payment definition from server!");t=["/transfers/tfi"]}this.routeDataService.navigateWithRouteData(i.a.modifyPayment,e.paymentDefinition,t)}}return e.\u0275fac=function(t){return new(t||e)(c.Wb(s.a),c.Wb(o.a),c.Wb(y.a),c.Wb(i.b))},e.\u0275prov=c.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},BdrW:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a("8Y7J"),r=a("cUpR");let i=(()=>{class e{constructor(e){this.domSanitizer=e}checkVPSize(){const e=$(window).outerWidth();return e<768?0:e<1160?1:2}animateScrollTo(e,t="top",a=0){const n=e instanceof jQuery?e:$(e).eq(0);if(!n.length)return!1;const r=$(n).offset().top,i=$(n).outerHeight(),c=($(window).scrollTop(),$("header").height()),s=window.innerHeight;let o=0;switch(t){case"bottom":o=r-(s-i);break;default:o=r-c}$("html, body").animate({scrollTop:o+a})}escapeHtml(e){return document.createElement("div").appendChild(document.createTextNode(e)).parentNode.innerHTML}sanitizeHtml(e){return this.domSanitizer.sanitize(n.H.HTML,e)}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(r.b))},e.\u0275prov=n.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},UUuo:function(e,t,a){"use strict";a.d(t,"a",function(){return h}),a.d(t,"b",function(){return b});var n=a("cp0P"),r=a("lJxs"),i=a("ZoBx"),c=a("ZQBd"),s=a("8Y7J"),o=a("bWdP"),y=a("iInd"),p=a("NAEP"),u=a("V7XX"),l=a("mmCL"),m=a("MXWy"),T=a("+jIX"),d=a("cpG6"),f=a("TSSN");class h{}let b=(()=>{class e{constructor(e,t,a,n,r,i,c,s,o,y){this.snapshotCacheService=e,this.routeDataService=t,this.router=a,this.accountHelper=n,this.formatHelper=r,this.paymentHelper=i,this.productHelper=c,this.transfersHelper=s,this.modalAlertService=o,this.translateService=y}reset(){this.snapshotCacheService.invalidateEntriesWithKeyPrefix(e.cacheKeyPrefix)}getPaymentTemplateList(e){return this.getFullPaymentTemplateList().pipe(Object(r.a)(t=>t.filter(t=>{let a=!e.nrbNumbers||0===e.nrbNumbers.length||e.nrbNumbers.includes(t.nrbNumber);return a=a&&(!e.paymentTypeCodes||0===e.paymentTypeCodes.length||e.paymentTypeCodes.includes(t.paymentTypeCode)),a=a&&(!e.searchedText||this.matchPaymentTemplateBySearchedText(t,e.searchedText)),a})))}matchPaymentTemplateBySearchedText(e,t){const a=t.toLowerCase();return e.beneficiaryName&&e.beneficiaryName.toLowerCase().indexOf(a)>=0||e.customBeneficiaryName.toLowerCase().indexOf(a)>=0||e.defaultTitle&&e.defaultTitle.toLowerCase().indexOf(a)>=0||e.beneficiaryAccountNumber&&e.beneficiaryAccountNumber.toLowerCase().indexOf(a)>=0}getFullPaymentTemplateList(){return this.snapshotCacheService.getPaymentTemplateList({},e.cacheKeyPrefix,this.translateService.currentLang,e.cacheMaxAge)}toRecipientDTO(e){return{paymentTemplateDTO:e,id:e.id,shortName:e.customBeneficiaryName,shortNameHtml:e.customBeneficiaryName,fullName:e.beneficiaryName,fullNameHtml:e.beneficiaryName,isTrusted:e.trustedBeneficiary}}gotoRecipientTransfer(e){e&&(e.dto&&i.a.isBeneficiaryPaymentTypeSystem(e.dto.paymentTemplateDTO.paymentTypeCode)?this.routeDataService.navigateWithRouteData(c.a.beneficiaryPayment,e,e.dto.paymentTemplateDTO.isInternational?["/transfers/international"]:["/transfers/european"]):e.dto&&i.a.isBeneficiaryPaymentTypePrepaid(e.dto.paymentTemplateDTO.paymentTypeCode)?this.routeDataService.navigateWithRouteData(c.a.beneficiaryPayment,e,["/transfers/prepaid"]):e.dto&&i.a.isBeneficiaryPaymentTypeTax(e.dto.paymentTemplateDTO.paymentTypeCode)?this.routeDataService.navigateWithRouteData(c.a.beneficiaryPayment,e,["/transfers/tax"]):e.dto&&i.a.isBeneficiaryPaymentTypeTfi(e.dto.paymentTemplateDTO.paymentTypeCode)?this.routeDataService.navigateWithRouteData(c.a.beneficiaryPayment,e,["/transfers/tfi"]):e.dto&&i.a.isBeneficiaryPaymentTypeSplit(e.dto.paymentTemplateDTO.paymentTypeCode)?this.routeDataService.navigateWithRouteData(c.a.beneficiaryPayment,e,["/transfers/split"]):e.dto?this.modalAlertService.showNextStageInfo():(e.name&&e.name.length>0||e.debitNrbNumber&&e.debitNrbNumber.length>0)&&this.routeDataService.navigateWithRouteData(c.a.beneficiaryPayment,e,["/transfers/european"]))}gotoRecipientPaymentOrder(e){e&&this.routeDataService.navigateWithRouteData(c.a.beneficiaryPaymentOrder,e,["/payment-orders/domestic"])}getDebitAccountTree(){return Object(n.a)([this.getAccountList(),this.getCreditCardAccountList()]).pipe(Object(r.a)(e=>this.toDebitAccountTree(e[0],e[1])))}getAccountList(){return this.snapshotCacheService.getAccountList(e.cacheKeyPrefix,e.cacheMaxAge)}getCreditCardAccountList(){return this.snapshotCacheService.getCreditCardAccountList(e.cacheKeyPrefix,e.cacheMaxAge)}toDebitAccountTree(e,t){const a=this.productHelper.ccaListToAccountEntryList(t);return this.accountHelper.toAccountEntryDTOTreeNotSorted(e).concat(a.map(e=>({account:e,children:[]})))}getPaymentTemplateAccounts(e,t){return t.reduce((t,a)=>{if(!t.find(e=>e.nrbNumber===a.nrbNumber)){const n=e.find(e=>e.account.nrbNumber===a.nrbNumber);t.push({accountName:n&&n.account.productName?n.account.productName:"",nrbNumber:a.nrbNumber})}return t},[])}}return e.cacheKeyPrefix="Recipients",e.cacheMaxAge=36e5,e.\u0275fac=function(t){return new(t||e)(s.Wb(o.a),s.Wb(c.b),s.Wb(y.d),s.Wb(p.a),s.Wb(u.a),s.Wb(l.a),s.Wb(m.a),s.Wb(T.a),s.Wb(d.b),s.Wb(f.d))},e.\u0275prov=s.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},ZoBx:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a("8Y7J"),r=a("zLWW");let i=(()=>{class e{constructor(e){this.systemParameterService=e}static getBeneficiaryPaymentAllTypes(){return["DOMT","NCPY","CURR","TOPU","US","SPLT","TFI"]}static getBeneficiaryPaymentDomesticTypes(){return["DOMT","NCPY"]}static getBeneficiaryPaymentSystemTypes(){return["DOMT","NCPY","CURR"]}static getBeneficiaryPaymentSplitTypes(){return["DOMT","SPLT"]}static getBeneficiaryPaymentPrepaidTypes(){return["TOPU"]}static getBeneficiaryPaymentTaxTypes(){return["US"]}static getBeneficiaryPaymentVatTypes(){return["SPLT"]}static getBeneficiaryPaymentTfiTypes(){return["TFI"]}static getBeneficiaryPaymentNonCashTypes(){return["NCPY"]}static isBeneficiaryPaymentTypeSystem(t){return e.getBeneficiaryPaymentSystemTypes().indexOf(t)>=0}static isBeneficiaryPaymentTypeSplit(t){return e.getBeneficiaryPaymentSplitTypes().indexOf(t)>=0}static isBeneficiaryPaymentTypePrepaid(t){return e.getBeneficiaryPaymentPrepaidTypes().indexOf(t)>=0}static isBeneficiaryPaymentTypeTax(t){return e.getBeneficiaryPaymentTaxTypes().indexOf(t)>=0}static isBeneficiaryPaymentTypeVat(t){return e.getBeneficiaryPaymentVatTypes().indexOf(t)>=0}static isBeneficiaryPaymentTypeTfi(t){return e.getBeneficiaryPaymentTfiTypes().indexOf(t)>=0}static isBeneficiaryPaymentTypeNonCash(t){return e.getBeneficiaryPaymentNonCashTypes().indexOf(t)>=0}static isBeneficiaryPaymentTypeCash(t){return!e.isBeneficiaryPaymentTypeNonCash(t)}isRecipientSystemEuropeanEnabled(){return this.areAllowedTemplateTypes(e.getBeneficiaryPaymentSystemTypes())}isRecipientSystemInternationalEnabled(){return this.areAllowedTemplateTypes(e.getBeneficiaryPaymentSystemTypes())}isRecipientPrepaidEnabled(){return this.areAllowedTemplateTypes(e.getBeneficiaryPaymentPrepaidTypes())}isRecipientTaxEnabled(){return this.areAllowedTemplateTypes(e.getBeneficiaryPaymentTaxTypes())}isRecipientVatEnabled(){return this.areAllowedTemplateTypes(e.getBeneficiaryPaymentVatTypes())}isRecipientTfiEnabled(){return this.areAllowedTemplateTypes(e.getBeneficiaryPaymentTfiTypes())}isRecipientSplitEnabled(){return this.areAllowedTemplateTypes(e.getBeneficiaryPaymentSplitTypes())}areAllowedTemplateTypes(e){const t=this.systemParameterService.getPaymentTemplatesTypes();return!!t&&t.some(t=>e.includes(t))}isBeneficiaryPaymentTypeEditAllowed(t){const a=t.paymentTypeCode,n=t.isInternational;return e.isBeneficiaryPaymentTypeCash(a)&&(e.isBeneficiaryPaymentTypeSystem(a)&&!n&&this.isRecipientSystemEuropeanEnabled()||e.isBeneficiaryPaymentTypeSystem(a)&&n&&this.isRecipientSystemInternationalEnabled()||e.isBeneficiaryPaymentTypeSplit(a)&&this.isRecipientSplitEnabled()||e.isBeneficiaryPaymentTypePrepaid(a)&&this.isRecipientPrepaidEnabled()||e.isBeneficiaryPaymentTypeTax(a)&&this.isRecipientTaxEnabled()||e.isBeneficiaryPaymentTypeVat(a)&&this.isRecipientVatEnabled()||e.isBeneficiaryPaymentTypeTfi(a)&&this.isRecipientTfiEnabled())}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(r.a))},e.\u0275prov=n.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},cmCE:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a("8Y7J"),r=a("FW47"),i=a("TSSN"),c=a("X22t");let s=(()=>{class e{constructor(e,t,a){this.principalService=e,this.translateService=t,this.dictionaryService=a}getParticipationTypeName(e){return e?this.principalService.isSoho()&&"INDD"===e?this.translateService.instant("funds.commercial"):this.dictionaryService.getEntryValue("TFI_PARTICIPATION_TYPE",e):""}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(r.c),n.Wb(i.d),n.Wb(c.a))},e.\u0275prov=n.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},mmCL:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a("8Y7J"),r=a("V7XX");let i=(()=>{class e{constructor(e){this.formatHelper=e}static getPaymentInternalTypes(){return["INTR"]}static getPaymentDomesticTypes(){return["DOMT","CCRP"]}static getPaymentPrepaidTypes(){return["TOPU"]}static getPaymentSplitTypes(){return["SPLT"]}static isPaymentTypeInternal(t){return e.getPaymentInternalTypes().indexOf(t)>=0}static isPaymentTypeDomestic(t){return e.getPaymentDomesticTypes().indexOf(t)>=0}static isPaymentTypePrepaid(t){return e.getPaymentPrepaidTypes().indexOf(t)>=0}static isPaymentTypeSplit(t){return e.getPaymentSplitTypes().indexOf(t)>=0}toDayPayments(e){const t=e.reduce((e,t)=>{const a=this.formatHelper.formatIsoDate(t.executionDate);return e.includes(a)||e.push(a),e},[]),a=e.reduce((e,t)=>{const a=this.formatHelper.formatIsoDate(t.executionDate);return e.has(a)||e.set(a,[]),e.get(a).push(this.toPaymentWrapper(t)),e},new Map);return t.map(e=>this.toPaymentDay(e,a.get(e)))}toPaymentDay(e,t){return{date:this.formatHelper.fromIsoDate(e),shortDateNameKey:this.getShortDayNameKey(this.formatHelper.fromIsoDate(e)),payments:t}}toPaymentWrapper(e){return{payment:e,isLoadingDetails:!1,isShowDetails:!1,fieldValueDetails:null,base64SafeId:this.formatHelper.toBase64SafeId(e.id)}}getShortDayNameKey(e){return"dict.day.short."+new Date(e).getDay()}wrapPaymentOrders(e){return e.map(e=>this.toPaymentOrderWrapper(e))}toPaymentOrderWrapper(e){return{paymentOrder:e,isLoadingDetails:!1,isShowDetails:!1,fieldValueDetails:null,scheduleDefinition:[],base64SafeId:this.formatHelper.toBase64SafeId(e.id)}}wrapPaymentTemplates(e){return e.map(e=>this.toPaymentTemplateWrapper(e))}toPaymentTemplateWrapper(e){return{recipient:e,base64SafeId:this.formatHelper.toBase64SafeId(e.id),iconClass:this.getIconClassName(e),isTransfer:"TOPU"!==e.paymentTypeCode,isTopup:"TOPU"===e.paymentTypeCode,isShowDetails:!1}}getIconClassName(e){let t="ca-menu-przelewy";switch(e.paymentTypeCode){case"DOMT":t="ca-menu-przelewy";break;case"SEPA":case"SWIFT":t="ca-transfer-currency";break;case"TOPU":t="ca-doladowanie-jednorazowe"}return t}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(r.a))},e.\u0275prov=n.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);