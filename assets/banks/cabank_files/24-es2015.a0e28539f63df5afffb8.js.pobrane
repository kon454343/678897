(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"4eO9":function(t,e,a){"use strict";a.r(e),a.d(e,"View360Module",function(){return Ii});var n=a("s7LF"),i=a("iInd"),c=a("PCNd"),s=a("8Y7J"),o=a("rsEA"),r=a("Rk0+"),l=a("yqp2"),d=a("SVse"),u=a("TSSN");const p=function(t){return{preloading:t}};let b=(()=>{class t{constructor(){this.optsSubmit=new s.n,this.state={isLoading:!1}}ngOnInit(){this.initForm(),this.reset()}reset(){this.initFormValues(),this.state.isLoading=!1}initForm(){this.optsForm=new n.k({show:new n.h(!this.optsData.personalization.view360.monthlySpent.hide),accounts:new n.h(this.optsData.personalization.view360.monthlySpent.accounts),ccAccounts:new n.h(this.optsData.personalization.view360.monthlySpent.ccAccounts),hideProxy:new n.h(this.optsData.personalization.view360.monthlySpent.hideProxy)})}initFormValues(){this.optsForm.patchValue({show:!this.optsData.personalization.view360.monthlySpent.hide,accounts:this.optsData.personalization.view360.monthlySpent.accounts,ccAccounts:this.optsData.personalization.view360.monthlySpent.ccAccounts,hideProxy:this.optsData.personalization.view360.monthlySpent.hideProxy})}submitOptsForm(){this.state.isLoading=!0,this.optsSubmit.emit({hide:!this.optsForm.value.show,accounts:this.optsForm.value.accounts,ccAccounts:this.optsForm.value.ccAccounts,hideProxy:this.optsForm.value.hideProxy})}filterByProductRole(t){return this.filterCurrentSelection(),t.filter(t=>!this.optsForm.value.hideProxy||!t.isProxyProduct)}filterCurrentSelection(){const t=this.optsData.options.accounts.filter(t=>!t.isProxyProduct),e=this.optsData.options.ccAccounts.filter(t=>!t.isProxyProduct);this.optsForm.patchValue({accounts:this.optsForm.value.accounts.filter(e=>!this.optsForm.value.hideProxy||t.filter(t=>t.nrbNumber===e).length>0),ccAccounts:this.optsForm.value.ccAccounts.filter(t=>!this.optsForm.value.hideProxy||e.filter(e=>e.nrbNumber===t).length>0)})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-monthly-spent-opts"]],inputs:{optsData:"optsData"},outputs:{optsSubmit:"optsSubmit"},decls:47,vars:56,consts:[[1,"container-fluid"],[1,"opts-header"],["id","scheduledPaymentsOptsTitle",1,"opts-title","h4"],[1,"opts-subtitle","h6"],[1,"opts-body"],[1,"form-vertical",3,"formGroup"],[1,"form-group"],["id","monthlySpentPersonalizationAccountsLabel"],[3,"formControlName","options","multiple","dataTitle","dataCountSelectedText","labelledby","dataWidth"],["id","monthlySpentPersonalizationCardsLabel"],[1,"mt-3"],[1,"btn-checkbox-ip"],["type","checkbox",3,"formControlName"],[1,"mb-1","mt-3"],["href","javascript:void(null);",1,"help-info","help-info-md",3,"appTlpTooltip","tlpPlacement"],[1,"ca","ca-question"],[1,"show-hide"],[3,"formControlName"],[1,"opts-footer"],[1,"buttons","text-right"],["href","javascript:void(null);",1,"btn","btn-primary","btn-lg",3,"ngClass","click"]],template:function(t,e){1&t&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Sb(2,"h2",2),s.Gc(3),s.dc(4,"translate"),s.Sb(5,"span",3),s.Gc(6),s.dc(7,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Sb(8,"div",4),s.Sb(9,"form",5),s.Sb(10,"div",6),s.Sb(11,"p"),s.Gc(12),s.dc(13,"translate"),s.Rb(),s.Sb(14,"label",7),s.Gc(15),s.dc(16,"translate"),s.Rb(),s.Nb(17,"app-selectpicker-accounts",8),s.dc(18,"translate"),s.dc(19,"translate"),s.Rb(),s.Sb(20,"div",6),s.Sb(21,"label",9),s.Gc(22),s.dc(23,"translate"),s.Rb(),s.Nb(24,"app-selectpicker-accounts",8),s.dc(25,"translate"),s.dc(26,"translate"),s.Rb(),s.Sb(27,"p",10),s.Gc(28),s.dc(29,"translate"),s.Sb(30,"span",11),s.Nb(31,"input",12),s.Nb(32,"i"),s.Rb(),s.Rb(),s.Sb(33,"div",6),s.Sb(34,"p",13),s.Gc(35),s.dc(36,"translate"),s.Sb(37,"a",14),s.dc(38,"translate"),s.Nb(39,"i",15),s.Rb(),s.Rb(),s.Sb(40,"p",16),s.Nb(41,"app-hide-show-checkbox",17),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(42,"div",18),s.Sb(43,"div",19),s.Sb(44,"a",20),s.Zb("click",function(){return e.submitOptsForm()}),s.Gc(45),s.dc(46,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&t&&(s.zb(3),s.Ic("",s.ec(4,28,"settings.personalization.monthly-spent.title")," "),s.zb(3),s.Hc(s.ec(7,30,"settings.personalization.monthly-spent.subtitle")),s.zb(3),s.jc("formGroup",e.optsForm),s.zb(3),s.Hc(s.ec(13,32,"settings.personalization.monthly-spent.info")),s.zb(3),s.Hc(s.ec(16,34,"settings.personalization.accounts.label")),s.zb(2),s.jc("formControlName","accounts")("options",e.filterByProductRole(e.optsData.options.accounts))("multiple",!0)("dataTitle",s.ec(18,36,"settings.personalization.accounts.choose.label"))("dataCountSelectedText",s.ec(19,38,"settings.personalization.accounts.selected.label")+" ({0})")("labelledby","monthlySpentPersonalizationAccountsLabel")("dataWidth","100%"),s.zb(5),s.Hc(s.ec(23,40,"settings.personalization.cards.label")),s.zb(2),s.jc("formControlName","ccAccounts")("options",e.filterByProductRole(e.optsData.options.ccAccounts))("multiple",!0)("dataTitle",s.ec(25,42,"settings.personalization.cards.choose.label"))("dataCountSelectedText",s.ec(26,44,"settings.personalization.cards.selected.label")+" ({0})")("labelledby","monthlySpentPersonalizationCardsLabel")("dataWidth","100%"),s.zb(4),s.Ic(" ",s.ec(29,46,"settings.personalization.hide.proxy.products.label")," "),s.zb(3),s.jc("formControlName","hideProxy"),s.zb(4),s.Ic("",s.ec(36,48,"settings.personalization.monthly-spent.hide.label")," "),s.zb(2),s.jc("appTlpTooltip",s.ec(38,50,"settings.personalization.monthly-spent.hide.hint"))("tlpPlacement","top"),s.zb(4),s.jc("formControlName","show"),s.zb(3),s.jc("ngClass",s.pc(54,p,e.state.isLoading)),s.zb(1),s.Hc(s.ec(46,52,"settings.personalization.save.label")))},directives:[n.F,n.u,n.l,o.a,n.t,n.j,n.a,r.a,l.a,d.k],pipes:[u.c],encapsulation:2,changeDetection:0}),t})();var m=a("75EC"),h=a("DH9u"),f=a("V6Ot"),g=a("z2+Z"),v=a("9iZ4"),y=a("kyhl"),w=a("N5T3");const S=function(t){return{preload:t}};function R(t,e){if(1&t&&(s.Sb(0,"div",10),s.Nb(1,"i",11),s.Sb(2,"p"),s.Gc(3),s.dc(4,"translate"),s.Rb(),s.Rb()),2&t){const t=s.cc();s.jc("ngClass",s.pc(5,S,t.state.isPreloadChart))("@showAfterPreloadAnimation",t.state.isPreloadChart),s.zb(3),s.Hc(s.ec(4,3,"view360.myExpenses.empty.label"))}}function C(t,e){if(1&t&&(s.Qb(0),s.Sb(1,"li",28),s.Sb(2,"dl"),s.Sb(3,"dt"),s.Gc(4),s.dc(5,"translate"),s.dc(6,"categoryName"),s.Rb(),s.Sb(7,"dd"),s.Sb(8,"span",29),s.Sb(9,"span",21),s.Gc(10),s.dc(11,"amount"),s.Rb(),s.Gc(12,"\xa0"),s.Sb(13,"span",22),s.Gc(14),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Nb(15,"div",30),s.Rb(),s.Pb()),2&t){const t=e.$implicit,a=s.cc(3);s.zb(1),s.jc("ngClass",a.getCategoryClass(t.argumentCode)),s.zb(3),s.Hc("-1"===t.argumentCode?s.ec(5,4,"view360.myExpenses.category.other"):s.ec(6,6,t.argumentCode)),s.zb(6),s.Hc(s.ec(11,8,t.value)),s.zb(4),s.Hc(a.chartData.summary.currency)}}function P(t,e){if(1&t&&(s.Qb(0),s.Sb(1,"li",28),s.Sb(2,"span"),s.Gc(3),s.dc(4,"translate"),s.dc(5,"categoryName"),s.Rb(),s.Sb(6,"span",29),s.Sb(7,"span",21),s.Gc(8),s.dc(9,"amount"),s.Rb(),s.Gc(10,"\xa0"),s.Sb(11,"span",22),s.Gc(12),s.Rb(),s.Rb(),s.Rb(),s.Pb()),2&t){const t=e.$implicit,a=s.cc(3);s.zb(1),s.jc("ngClass",a.getCategoryClass(t.argumentCode)),s.zb(2),s.Ic("","-1"===t.argumentCode?s.ec(4,4,"view360.myExpenses.category.other"):s.ec(5,6,t.argumentCode),"\xa0"),s.zb(5),s.Hc(s.ec(9,8,t.value)),s.zb(4),s.Hc(a.chartData.summary.currency)}}function z(t,e){if(1&t&&(s.Sb(0,"div",17),s.Sb(1,"div",18),s.Sb(2,"dl",19),s.Sb(3,"dt"),s.Gc(4),s.dc(5,"translate"),s.Rb(),s.Sb(6,"dd"),s.Sb(7,"span",20),s.Sb(8,"span",21),s.Gc(9),s.dc(10,"amount"),s.Rb(),s.Gc(11,"\xa0"),s.Sb(12,"span",22),s.Gc(13),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(14,"ul",23),s.Ec(15,C,16,10,"ng-container",24),s.Rb(),s.Rb(),s.Sb(16,"div",25),s.Sb(17,"div"),s.Sb(18,"p"),s.Gc(19),s.dc(20,"translate"),s.Rb(),s.Sb(21,"span",20),s.Sb(22,"span",21),s.Gc(23),s.dc(24,"amount"),s.Rb(),s.Gc(25,"\xa0"),s.Sb(26,"span",22),s.Gc(27),s.Rb(),s.Rb(),s.Rb(),s.Sb(28,"ul",23),s.Ec(29,P,13,10,"ng-container",24),s.Rb(),s.Rb(),s.Sb(30,"div",26),s.Sb(31,"a",27),s.Sb(32,"span"),s.Gc(33),s.dc(34,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&t){const t=s.cc(2);s.zb(4),s.Hc(s.ec(5,10,"view360.myExpenses.summary.label")),s.zb(5),s.Hc(s.ec(10,12,t.chartData.summary.amount)),s.zb(4),s.Hc(t.chartData.summary.currency),s.zb(2),s.jc("ngForOf",t.chartData.chartPoints),s.zb(4),s.Hc(s.ec(20,14,"view360.myExpenses.summary.label")),s.zb(4),s.Hc(s.ec(24,16,t.chartData.summary.amount)),s.zb(4),s.Hc(t.chartData.summary.currency),s.zb(2),s.jc("ngForOf",t.chartData.chartPoints),s.zb(2),s.jc("routerLink","/history-analisys"),s.zb(2),s.Hc(s.ec(34,18,"view360.myExpenses.pfm.link"))}}function x(t,e){if(1&t&&(s.Sb(0,"div",12),s.Sb(1,"div",13),s.Sb(2,"div",14),s.Nb(3,"app-category-spent-chart",15),s.Rb(),s.Rb(),s.Ec(4,z,35,20,"div",16),s.Rb()),2&t){const t=s.cc();s.jc("ngClass",s.pc(5,S,t.state.isPreloadChart))("@showAfterPreloadAnimation",t.state.isPreloadChart)("hidden",t.chartData&&t.chartData.chartPoints&&0===t.chartData.chartPoints.length),s.zb(3),s.jc("chartData",t.chartData.chartPoints),s.zb(1),s.jc("ngIf",t.chartData.summary)}}let A=(()=>{class t{constructor(t,e,a){this.changeDetectorRef=t,this.pfmLayoutHelper=e,this.translateService=a,this.termChange=new s.n,this.optsForm=new n.k({}),this.subscriptions=[],this.state={isPreloadChart:!0,isEmptyChart:!1,termRadioOptions:[{key:"month",i18text:"view360.myExpenses.last.month"},{key:"quarter",i18text:"view360.myExpenses.last.quart"},{key:"year",i18text:"view360.myExpenses.last.year"}]},this.initForm()}ngOnInit(){this.optsForm.patchValue({termSelect:this.chartData.selectedTerm,termRadio:this.chartData.selectedTerm})}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}ngOnChanges(t){t.chartData&&!h.a.isNullOrUndefined(t.chartData.currentValue)&&(this.optsForm.enable(),this.state.isEmptyChart=t.chartData.currentValue.chartPoints&&0===t.chartData.currentValue.chartPoints.length,this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges(),setTimeout(()=>{this.state.isPreloadChart=!1,this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()}))}initForm(){this.optsForm=new n.k({termSelect:new n.h(null,n.D.requiredTrue),termRadio:new n.h(null,n.D.requiredTrue)}),this.subscriptions.push(this.optsForm.get("termSelect").valueChanges.subscribe(t=>{this.state.isPreloadChart||(this.state.isPreloadChart=!0,this.optsForm.patchValue({termRadio:t},{onlySelf:!0,emitEvent:!1}),this.optsForm.get("termSelect").disable(),this.termChange.emit(t),this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges())})),this.subscriptions.push(this.optsForm.get("termRadio").valueChanges.subscribe(t=>{this.state.isPreloadChart||(this.state.isPreloadChart=!0,this.optsForm.patchValue({termSelect:t},{onlySelf:!0,emitEvent:!1}),this.optsForm.get("termRadio").disable(),this.termChange.emit(t),jQuery(".termRadio legend").focus(),this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges())}))}getCategoryClass(t){return this.pfmLayoutHelper.getPfmCategoryClassByCode(t)}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(s.h),s.Mb(f.a),s.Mb(u.d))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-monthly-spent-view"]],inputs:{chartData:"chartData"},outputs:{termChange:"termChange"},features:[s.xb],decls:28,vars:25,consts:[[3,"formGroup"],["id","myExpensesLabel",1,"d-inline","h4"],[1,"d-inline-block","d-md-none","my-2"],[3,"formControlName","labelledby","options","dataWidth"],[1,"filter-checkboxes-horz-group","d-none","d-md-inline-flex","flex-row","flex-wrap","align-items-start","justify-content-start"],[1,"filter-checkbox"],["type","radio","tabindex","0","aria-atomic","true","aria-controls","legend",3,"formControlName","value"],[1,"name"],["class","history-details-mini empty-history pt-5",3,"ngClass",4,"ngIf"],["class","row equal-gutters mt-4",3,"ngClass","hidden",4,"ngIf"],[1,"history-details-mini","empty-history","pt-5",3,"ngClass"],[1,"ca","ca-history"],[1,"row","equal-gutters","mt-4",3,"ngClass","hidden"],[1,"col-12","col-lg-8"],[2,"margin","0 auto","max-width","410px"],[3,"chartData"],["class","col-12 col-lg-4","id","legend","aria-live","polite",4,"ngIf"],["id","legend","aria-live","polite",1,"col-12","col-lg-4"],["aria-hidden","true",1,"legend"],[1,"summary"],[1,"amount","amount-xl"],[1,"number"],[1,"currency"],[1,"d-none","d-lg-block"],[4,"ngFor","ngForOf"],[1,"sr-only","legend"],[1,"text-right","mt-4","mt-md-2"],["href","javascript:void(null);",1,"text-link",3,"routerLink"],[3,"ngClass"],[1,"amount"],[1,"ca","icon"]],template:function(t,e){1&t&&(s.Sb(0,"div"),s.Sb(1,"form",0),s.Sb(2,"h2",1),s.Gc(3),s.dc(4,"translate"),s.Rb(),s.Sb(5,"div",2),s.Nb(6,"app-selectpicker",3),s.Rb(),s.Sb(7,"div",4),s.Sb(8,"label",5),s.Nb(9,"input",6),s.Sb(10,"em",7),s.Sb(11,"span"),s.Gc(12),s.dc(13,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Sb(14,"label",5),s.Nb(15,"input",6),s.Sb(16,"em",7),s.Sb(17,"span"),s.Gc(18),s.dc(19,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Sb(20,"label",5),s.Nb(21,"input",6),s.Sb(22,"em",7),s.Sb(23,"span"),s.Gc(24),s.dc(25,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Ec(26,R,5,7,"div",8),s.Ec(27,x,5,7,"div",9),s.Rb()),2&t&&(s.zb(1),s.jc("formGroup",e.optsForm),s.zb(2),s.Hc(s.ec(4,17,"view360.myExpenses.title.label")),s.zb(3),s.jc("formControlName","termSelect")("labelledby","myExpensesLabel")("options",e.state.termRadioOptions)("dataWidth","200px"),s.zb(3),s.jc("formControlName","termRadio")("value","month"),s.zb(3),s.Hc(s.ec(13,19,"view360.myExpenses.last.month")),s.zb(3),s.jc("formControlName","termRadio")("value","quarter"),s.zb(3),s.Hc(s.ec(19,21,"view360.myExpenses.last.quart")),s.zb(3),s.jc("formControlName","termRadio")("value","year"),s.zb(3),s.Hc(s.ec(25,23,"view360.myExpenses.last.year")),s.zb(2),s.jc("ngIf",e.state.isEmptyChart),s.zb(1),s.jc("ngIf",!e.state.isEmptyChart))},directives:[n.F,n.u,n.l,g.a,n.t,n.j,n.z,n.c,d.m,d.k,v.a,d.l,i.g],pipes:[u.c,y.a,w.a],encapsulation:2,data:{animation:[m.l]},changeDetection:0}),t})();var D=a("cp0P"),k=a("xy7A"),T=a("LRne"),O=a("5+tZ"),N=a("lJxs"),F=a("JIr8"),I=a("u6dq"),L=a("FW47"),E=a("6rCG"),j=a("bWdP"),H=a("X22t"),G=a("JwjH"),M=a("zLWW"),V=a("4mbc"),_=a("MXWy"),B=a("dJD9"),U=a("AcII"),Y=a("O+J8"),Q=a("HO8t");let W=(()=>{class t{constructor(t,e,a,n,i,c,s,o,r,l,d,u){this.principalService=t,this.apiService=e,this.snapshotCacheService=a,this.dictionaryService=n,this.personalisationService=i,this.systemParameterService=c,this.productSummaryHelper=s,this.productHelper=o,this.appErrorHandler=r,this.timerService=l,this.fundsService=d,this.permissionService=u}reset(){this.snapshotCacheService.invalidateEntriesWithKeyPrefix(t.cacheKeyPrefix),this.isInsuranceConsentGivenRecently=!1}resetAfterInsuranceConsent(){this.snapshotCacheService.invalidateEntriesWithKeyPrefix(t.cacheKeyPrefix),this.isInsuranceConsentGivenRecently=!0}resetScheduledPayments(){this.snapshotCacheService.invalidateGetPaymentList360View(t.cacheKeyPrefix)}resetHistoryMini(){this.snapshotCacheService.invalidateGetOperationHistory360ViewKey(t.cacheKeyPrefix)}resetCategoriesChart(){this.snapshotCacheService.invalidateGetCategoriesChart(t.cacheKeyPrefix)}resetMonthlyExpensesChart(){this.snapshotCacheService.invalidateGetMonthlyExpensesChart(t.cacheKeyPrefix)}getInsuranceConsentGivenRecently(){return this.isInsuranceConsentGivenRecently}getProductLists(){return Object(D.a)([this.getAccountList(),this.getCreditCardAccountList(),this.getCreditCardAccountList().pipe(Object(O.b)(t=>t.length>0?Object(D.a)(t.map(t=>this.getCreditCardAccountDetails(t.nrbNumber))):Object(T.a)([]))),this.getLoanList(),this.getDepositList(),this.getSavingAccountList(),this.getSavingProgramList(),this.getView360InvestmentsList(),this.getInsuranceList(),this.getInsuranceList().pipe(Object(O.b)(()=>this.getStructuredProductList())),this.getFundIkeList()]).pipe(Object(O.b)(t=>Object(T.a)(this.toProductLists(t))))}toProductLists(t){return{accountList:t[0],creditCardAccountList:t[1],creditCardAccountDetailsList:t[2],loanList:t[3],depositList:t[4],savingAccountList:t[5],savingProgramList:t[6],fundList:t[7].isFundsAvailable?t[7].list:[],insuranceList:{insurances:t[8].insurances||[],insuranceAccessUserConsent:t[8].insuranceAccessUserConsent,allNotFilteredInsurancesCount:t[8].insurancesCount},structuredProductList:{structuredProducts:t[9].structuredProduct||[],insuranceAccessUserConsent:t[9].insuranceAccessUserConsent,allNotFilteredStructuredProductsCount:t[9].structuredProductCount},fundIkeList:t[10]}}getDefaultProduct(){const t=this.principalService.getContextConfigurationDTO().hasAnyActiveProduct,e=this.principalService.getContextConfigurationDTO().hasAnyNotActiveProduct;return t||e?!t&&e?Object(T.a)({showNotActiveProduct:!0}):Object(D.a)([this.getAccountList(),this.getCreditCardAccountList(),this.getLoanList(),this.personalisationService.getPersonalisation()]).pipe(Object(O.b)(t=>this.toDefaultProduct(t[0],t[1],t[2],t[3].view360.defaultProduct))):Object(T.a)({showNoProduct:!0})}toDefaultProduct(t,e,a,n){const i=this.isPersonalisationDefaultProductValid(n,t,e,a)?n:this.getDefaultProductSettingsAsFirstProductFromList(t,e,a);return i&&i.type===I.a.ACCOUNT?this.toAccountAsDefaultProduct(i.nrbNumber):i&&i.type===I.a.CREDIT_CARD_ACCOUNT?this.toCreditCardAsDefaultProduct(i.nrbNumber,e):i&&i.type===I.a.LOAN?this.toLoanAsDefaultProduct(i.nrbNumber,a):Object(T.a)({showNoProduct:!0})}isPersonalisationDefaultProductValid(t,e,a,n){let i=void 0!==t;return i=i&&[I.a.ACCOUNT,I.a.CREDIT_CARD_ACCOUNT,I.a.LOAN].indexOf(t.type)>=0,i=i&&(t.type!==I.a.ACCOUNT||e.some(e=>e.nrbNumber===t.nrbNumber)),i=i&&(t.type!==I.a.CREDIT_CARD_ACCOUNT||a.some(e=>e.nrbNumber===t.nrbNumber)),i=i&&(t.type!==I.a.LOAN||n.some(e=>e.nrbNumber===t.nrbNumber)),i}getDefaultProductSettingsAsFirstProductFromList(t,e,a){return t.length>0?{nrbNumber:t[0].nrbNumber,type:I.a.ACCOUNT}:e.length>0?{nrbNumber:e[0].nrbNumber,type:I.a.CREDIT_CARD_ACCOUNT}:a.length>0?{nrbNumber:a[0].nrbNumber,type:I.a.LOAN}:void 0}toAccountAsDefaultProduct(t){return this.getAccountDetails(t).pipe(Object(N.a)(t=>({accountDetailsDTO:t})))}toCreditCardAsDefaultProduct(t,e){const a=e.find(e=>e.nrbNumber===t);return this.getCreditCardAccountDetails(t).pipe(Object(N.a)(t=>({creditCard:{creditCardAccountDTO:a,creditCardAccountDetailsDTO:t}})))}toLoanAsDefaultProduct(t,e){return Object(T.a)({loanDTO:e.find(e=>e.nrbNumber===t)})}getMyFinances(){return Object(D.a)([this.personalisationService.getPersonalisation(),this.getProductLists()]).pipe(Object(O.b)(t=>Object(T.a)(this.toMyFinances(t))))}toMyFinances(t){const e=t[0].view360.myFinances,a=t[1],n=this.filterMyFinancesAccounts(e.accounts,e.hideProxy,a.accountList),i=this.filterMyFinancesAccounts(e.ccAccounts,e.hideProxy,a.creditCardAccountList),c=i.map(t=>t.nrbNumber),s=a.creditCardAccountDetailsList.filter(t=>c.indexOf(t.nrbNumber)>=0),o=this.filterMyFinancesAccounts(e.loans,e.hideProxy,a.loanList),r=this.filterMyFinancesSavingAccounts(e.savings,e.hideProxy,a.accountList,a.depositList),l=this.filterMyFinancesSavingAccounts(e.savings,e.hideProxy,a.accountList,a.savingAccountList),d=this.filterMyFinancesSavingAccounts(e.savings,e.hideProxy,a.accountList,a.savingProgramList),u=this.filterMyFinancesFunds(e.funds,a.fundList),p=this.filterMyFinancesInsurances(e.insurances,a.insuranceList.insurances),b=this.filterMyFinancesStructuredProducts(e.structuredProducts,a.structuredProductList.structuredProducts),m=this.filterMyFinancesFundsIke(e.fundsIke,a.fundIkeList);return{filteredProductLists:{accountList:n,creditCardAccountList:i,creditCardAccountDetailsList:s,loanList:o,depositList:r,savingAccountList:l,savingProgramList:d,fundList:u,insuranceList:{insurances:p,insuranceAccessUserConsent:a.insuranceList.insuranceAccessUserConsent,allNotFilteredInsurancesCount:a.insuranceList.allNotFilteredInsurancesCount},structuredProductList:{structuredProducts:b,insuranceAccessUserConsent:a.structuredProductList.insuranceAccessUserConsent,allNotFilteredStructuredProductsCount:a.structuredProductList.allNotFilteredStructuredProductsCount},fundIkeList:m},accountSummary:this.productSummaryHelper.toAccountSummary(n),creditCardAccountSummary:this.productSummaryHelper.toCreditCardSummary(s),loanSummary:this.productSummaryHelper.toLoanSummary(o.filter(t=>!this.systemParameterService.getLoanRevlGlobalLimit().includes(t.productTypeCode))),savingSummary:this.productSummaryHelper.toSavingSummary(r,l,d),savingDepositSummary:this.productSummaryHelper.toSavingDepositSummary(r),savingAccountSummary:this.productSummaryHelper.toSavingAccountSummary(l),savingProgramSummary:this.productSummaryHelper.toSavingProgramSummary(d),fundSummary:this.productSummaryHelper.toFundSummary(u),structuredProductSummary:this.productSummaryHelper.toStructuredProductSummary(b),insuranceSummary:this.productSummaryHelper.toInsuranceSummary(p),fundIkeSummary:this.productSummaryHelper.toFundIkeSummary(m),defaultProduct:t[0].view360.defaultProduct}}filterMyFinancesAccounts(t,e,a){return a.filter(a=>{let n=!0;return n=n&&(!t||0===t.length||t.indexOf(a.nrbNumber)>=0),n=n&&(!e||"OWNR"===a.roleTypeCode),n})}filterMyFinancesSavingAccounts(t,e,a,n){return n.filter(n=>{let i=!0;if(i=i&&(!t||0===t.length||t.indexOf(n.nrbNumber)>=0),i&&e){const t=a.filter(t=>t.nrbNumber===n.parentNrbNumber)[0].roleTypeCode;i=i&&"OWNR"===t}return i})}filterMyFinancesFunds(t,e){return e.filter(e=>!t||0===t.length||t.indexOf(e.umbrellaFund.id)>=0)}filterMyFinancesInsurances(t,e){return e.filter(e=>!t||0===t.length||t.indexOf(e.id)>=0)}filterMyFinancesStructuredProducts(t,e){return e.filter(e=>!t||0===t.length||t.indexOf(e.id)>=0)}filterMyFinancesFundsIke(t,e){return e.filter(e=>!t||0===t.length||t.indexOf(e.id)>=0)}getOptsData(){return Object(D.a)([this.personalisationService.getPersonalisation(),this.getProductLists()]).pipe(Object(O.b)(t=>Object(T.a)(this.toOptsData(t))))}toOptsData(t){const e=t[1];return{personalization:t[0],options:{accounts:this.toAccountOptionsByType([I.a.ACCOUNT],e),ccAccounts:this.toAccountOptionsByType([I.a.CREDIT_CARD_ACCOUNT],e),loans:this.toAccountOptionsByType([I.a.LOAN],e),savings:this.toAccountOptionsByType([I.a.DEPOSIT,I.a.SAVING_ACCOUNT,I.a.SAVING_PROGRAM],e),funds:this.toAccountOptionsByType([I.a.FUND],e),fundsIke:this.toAccountOptionsByType([I.a.FUND_IKE],e),insurances:this.toAccountOptionsByType([I.a.INSURANCE],e),structuredProducts:this.toAccountOptionsByType([I.a.STRUCTURED_PRODUCT],e)}}}toAccountOptionsByType(t,e){return[].concat(e.accountList.map(t=>({nrbNumber:t.nrbNumber,name:this.productHelper.getAccountName(t),type:I.a.ACCOUNT,availFunds:t.availFunds,isProxyProduct:"PRXY"===t.roleTypeCode}))).concat(e.creditCardAccountList.map(t=>({nrbNumber:t.nrbNumber,name:this.productHelper.getCreditCardAccountName(t),type:I.a.CREDIT_CARD_ACCOUNT,availFunds:t.availFunds,isProxyProduct:"PRXY"===t.roleTypeCode}))).concat(e.loanList.map(t=>({nrbNumber:t.nrbNumber,name:this.productHelper.getLoanName(t),type:I.a.LOAN,availFunds:t.bookBalance,isProxyProduct:"PRXY"===t.roleTypeCode}))).concat(e.depositList.map(t=>({nrbNumber:t.nrbNumber,name:this.productHelper.getSavingName(t),type:I.a.DEPOSIT,availFunds:t.balance}))).concat(e.savingAccountList.map(t=>({nrbNumber:t.nrbNumber,name:this.productHelper.getSavingName(t),type:I.a.SAVING_ACCOUNT,availFunds:t.balance}))).concat(e.savingProgramList.map(t=>({nrbNumber:t.nrbNumber,name:this.productHelper.getSavingName(t),type:I.a.SAVING_PROGRAM,availFunds:t.balance}))).concat(e.fundList.map(t=>({nrbNumber:t.umbrellaFund.id,name:t.umbrellaFund.name,type:I.a.FUND,availFunds:t.umbrellaFund.totalValue}))).concat(e.insuranceList.insurances.map(t=>({nrbNumber:t.id,name:this.productHelper.getInsuranceName(t),type:I.a.INSURANCE,policyNumber:t.policyNumber}))).concat(e.structuredProductList.structuredProducts.map(t=>({nrbNumber:t.id,name:this.productHelper.getInsuranceName(t),type:I.a.STRUCTURED_PRODUCT,policyNumber:t.policyNumber,availFunds:t.investmentAmount}))).concat(e.fundIkeList.map(t=>({nrbNumber:t.id,name:this.productHelper.getFundIkeName(t),type:I.a.FUND_IKE,policyNumber:t.nrbNumber,availFunds:t.amount}))).filter(e=>t.indexOf(e.type)>=0)}getAccountList(){return this.snapshotCacheService.getAccountList(t.cacheKeyPrefix,t.cacheMaxAge)}getAccountListSnapshot(){return this.snapshotCacheService.getAccountListSnapshot()}getAccountDetails(e){return this.snapshotCacheService.getAccountDetails(e,t.cacheKeyPrefix,t.cacheMaxAge)}getCreditCardAccountList(){return this.snapshotCacheService.getCreditCardAccountList(t.cacheKeyPrefix,t.cacheMaxAge)}getCreditCardAccountListSnapshot(){return this.snapshotCacheService.getCreditCardAccountListSnapshot()}getCreditCardAccountDetails(e){return this.snapshotCacheService.getCreditCardAccountDetails(e,t.cacheKeyPrefix,t.cacheMaxAge)}getLoanList(){return this.snapshotCacheService.getLoanList(t.cacheKeyPrefix,t.cacheMaxAge)}getDepositList(){return this.snapshotCacheService.getDepositList(t.cacheKeyPrefix,t.cacheMaxAge)}getSavingAccountList(){return this.snapshotCacheService.getSavingAccountList(t.cacheKeyPrefix,t.cacheMaxAge)}getSavingProgramList(){return this.snapshotCacheService.getSavingProgramList(t.cacheKeyPrefix,t.cacheMaxAge)}getView360InvestmentsList(){return this.principalService.hasTfiAccess()?Object(D.a)([this.getInvestmentList(),this.getInvestmentList().pipe(Object(O.b)(()=>this.getFundRegisterList()))]).pipe(Object(O.b)(t=>Object(T.a)(this.fundsService.toFundsProgramsRegistersList(t[0],t[1])))):Object(T.a)({list:[],isFundsAvailable:!1})}getFundIkeList(){return this.permissionService.hasRetirementInsuranceAccess()&&this.permissionService.isPensionInsuranceEnabled()?this.snapshotCacheService.getFundIkeList(t.cacheKeyPrefix,t.cacheMaxAge).pipe(Object(N.a)(t=>t.retirementInsurance)):Object(T.a)([])}getInvestmentList(){return this.snapshotCacheService.getInvestmentList(t.cacheKeyPrefix,t.cacheMaxAge)}getFundRegisterList(){return this.snapshotCacheService.getFundRegisterList(t.cacheKeyPrefix,t.cacheMaxAge)}getInsuranceList(){return this.snapshotCacheService.getInsuranceList(t.cacheKeyPrefix,t.cacheMaxAge)}getStructuredProductList(){return this.snapshotCacheService.getStructuredProductList(t.cacheKeyPrefix,t.cacheMaxAge)}getPaymentList360View(){return this.snapshotCacheService.getPaymentList360View(t.cacheKeyPrefix,t.cacheMaxAge).pipe(Object(F.a)(t=>(this.appErrorHandler.handleApplicationError(t),Object(T.a)({header:{status:"OK"},payments:[],summary:{totalAmounts:[],totalCount:0}}))))}getOperationHistory360View(){return this.snapshotCacheService.getOperationHistory360View(t.cacheKeyPrefix,t.cacheMaxAge).pipe(Object(F.a)(t=>(this.appErrorHandler.handleApplicationError(t),Object(T.a)([]))))}getMonthlyExpensesChart(){return this.snapshotCacheService.getMonthlyExpensesChart(t.cacheKeyPrefix,t.cacheMaxAge)}getCategoriesChartForView360(e){return this.snapshotCacheService.getCategoriesChartForView360(e,t.cacheKeyPrefix,t.cacheMaxAge)}getCategoryListSnapshot(){return this.snapshotCacheService.getCategoryListSnapshot()}}return t.cacheKeyPrefix="View360",t.cacheMaxAge=36e5,t.\u0275fac=function(e){return new(e||t)(s.Wb(L.c),s.Wb(E.a),s.Wb(j.a),s.Wb(H.a),s.Wb(G.a),s.Wb(M.a),s.Wb(V.a),s.Wb(_.a),s.Wb(B.a),s.Wb(U.a),s.Wb(Y.a),s.Wb(Q.a))},t.\u0275prov=s.Ib({token:t,factory:t.\u0275fac}),t})();const Z=["viewOptsSwitch"],K=["view360MonthlySpentOpts"];function J(t,e){if(1&t){const t=s.Tb();s.Qb(0,4),s.Sb(1,"app-view360-monthly-spent-opts",5,6),s.Zb("optsSubmit",function(e){return s.xc(t),s.cc().onOptsSubmit(e)}),s.Rb(),s.Pb()}if(2&t){const t=s.cc();s.zb(1),s.jc("optsData",t.state.data.optsData)}}function q(t,e){if(1&t){const t=s.Tb();s.Qb(0,7),s.Sb(1,"app-view360-monthly-spent-view",8),s.Zb("termChange",function(e){return s.xc(t),s.cc().onTermChange(e)}),s.Rb(),s.Pb()}if(2&t){const t=s.cc();s.zb(1),s.jc("chartData",t.state.data.chartData)}}let X=(()=>{class t{constructor(t,e,a){this.changeDetectorRef=t,this.view360Service=e,this.personalisationService=a,this.display="block",this.subscriptions=[],this.state={isDataLoaded:!1,data:{optsData:null,chartData:{chartPoints:null,summary:null,selectedTerm:"month"}}}}ngOnInit(){this.state.isDataLoaded=!1,this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges(),this.subscriptions.push(k.a.minExecutionTime(Object(D.a)([this.view360Service.getAccountListSnapshot(),this.view360Service.getCreditCardAccountListSnapshot(),this.view360Service.getOptsData(),this.view360Service.getCategoriesChartForView360(this.getChartParameters(this.state.data.chartData.selectedTerm))])).subscribe(t=>{const e=[].concat(t[0]).concat(t[1]);this.state.data.optsData=t[2],this.display=e.length>0?this.state.data.optsData.personalization.view360.monthlySpent.hide?"none":"block":"none",this.state.data.chartData={chartPoints:t[3].chartData,summary:t[3].summaryAmount,selectedTerm:this.state.data.chartData.selectedTerm},this.state.isDataLoaded=!0,this.viewOptsSwitch.switchAfterDataLoaded(),this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()}))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}onOptsCancel(){this.view360MonthlySpentOpts.reset()}onOptsSubmit(t){this.viewOptsSwitch.switchAfterOuterOptsSubmit(),this.view360Service.resetCategoriesChart(),this.personalisationService.updateMonthlySpent(t).subscribe(()=>{this.ngOnInit()})}getChartParameters(t){switch(t){case"month":return 1;case"quarter":return 3;case"year":return 12}return 1}onTermChange(t){this.subscriptions.push(k.a.minExecutionTime(this.view360Service.getCategoriesChartForView360(this.getChartParameters(t))).subscribe(e=>{this.state.data.chartData={chartPoints:e.chartData,summary:e.summaryAmount,selectedTerm:t},this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()}))}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(s.h),s.Mb(W),s.Mb(G.a))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-monthly-spent"]],viewQuery:function(t,e){if(1&t&&(s.Oc(Z,!0),s.Oc(K,!0)),2&t){let t;s.tc(t=s.ac())&&(e.viewOptsSwitch=t.first),s.tc(t=s.ac())&&(e.view360MonthlySpentOpts=t.first)}},hostVars:2,hostBindings:function(t,e){2&t&&s.Dc("display",e.display)},decls:4,vars:4,consts:[[3,"mainHtmlId","optsHtmlId","optsCancel"],["viewOptsSwitch",""],["viewType","opts",4,"ngIf"],["viewType","view",4,"ngIf"],["viewType","opts"],[3,"optsData","optsSubmit"],["view360MonthlySpentOpts",""],["viewType","view"],[3,"chartData","termChange"]],template:function(t,e){1&t&&(s.Sb(0,"app-view360-view-opts-switch",0,1),s.Zb("optsCancel",function(){return e.onOptsCancel()}),s.Ec(2,J,3,1,"ng-container",2),s.Ec(3,q,2,1,"ng-container",3),s.Rb()),2&t&&(s.jc("mainHtmlId","monthlySpent")("optsHtmlId","monthlySpentOpts"),s.zb(2),s.jc("ngIf",e.state.isDataLoaded),s.zb(1),s.jc("ngIf",e.state.isDataLoaded))},styles:["#monthlySpent .card-bg{min-height:422px}.theme-default #monthlySpent .card-bg{background-color:hsla(0,0%,91%,.9)}.theme-hicontrast #monthlySpent .card-bg{background-color:hsla(0,0%,100%,.15)}#monthlySpent form h2{margin-right:.75rem;vertical-align:middle}#monthlySpent form h2~div{vertical-align:middle}#monthlySpent .filter-checkboxes-horz-group .filter-checkbox{margin:7px}#monthlySpent .filter-checkboxes-horz-group .filter-checkbox em{padding:0 .66rem 0 1rem}#monthlySpent .legend{text-align:right}#monthlySpent .legend dl{margin-bottom:.75rem}#monthlySpent .legend dl dt{font-size:.75rem;font-weight:600;margin:0 0 -.25em;padding:0}#monthlySpent .legend dl dd{margin:0;padding:0;font-size:.875rem}.theme-default #monthlySpent .legend dl dd{color:#a8212a}.theme-hicontrast #monthlySpent .legend dl dd{color:inherit}#monthlySpent .legend dl.summary{border:1px solid transparent;margin-right:45px;padding-bottom:.5rem}#monthlySpent .legend dl.summary dt{font-size:1rem}#monthlySpent .legend dl.summary dd{font-size:1.125rem}#monthlySpent .legend ul{margin:0 0 1.25rem;padding:0}#monthlySpent .legend ul li{list-style:none none outside;margin:0;padding:0 45px 0 0;position:relative}#monthlySpent .legend ul li .ca.icon{position:absolute;right:0;top:-.25rem;display:block;width:40px;text-align:center;font-size:32px}@media (max-width:1159.98px){#monthlySpent .legend{margin:1.5rem auto 0;text-align:center}#monthlySpent .legend dl.summary{margin-right:0}}@media (min-width:768px){.theme-default #monthlySpent .legend dl.summary,.theme-hicontrast #monthlySpent .legend dl.summary{border-bottom-color:#999}}@media (max-width:1159.98px){#monthlySpent{width:100%}}"],encapsulation:2,changeDetection:0}),t})();var tt=a("fA0W"),et=a("pLZG"),at=a("thZx"),nt=a("XwgE"),it=a("GS7A");function ct(t,e){if(1&t){const t=s.Tb();s.Sb(0,"button",6),s.Zb("click",function(){return s.xc(t),s.cc(2).toggleOpts()}),s.dc(1,"translate"),s.Rb()}if(2&t){const t=s.cc(2);s.Ab("aria-label",s.ec(1,1,t.state.showOpts?"view360.optsSwitch.close."+t.mainHtmlId:"view360.optsSwitch.open."+t.mainHtmlId))}}function st(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div",7),s.Zb("@optsAnimation.done",function(){return s.xc(t),s.cc(2).onOptsAnimationDone()}),s.hc(1),s.Rb()}if(2&t){const t=s.cc(2);s.jc("@optsAnimation",void 0)("id",t.optsHtmlId)}}function ot(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div",8),s.Zb("@viewAnimation.done",function(){return s.xc(t),s.cc(2).onViewAnimationDone()}),s.hc(1,1),s.Rb()}if(2&t){const t=s.cc(2);s.jc("@viewAnimation",t.state.viewAnimationState)}}function rt(t,e){if(1&t&&(s.Qb(0),s.Ec(1,ct,2,3,"button",3),s.Ec(2,st,2,2,"div",4),s.Ec(3,ot,2,1,"div",5),s.Pb()),2&t){const t=s.cc();s.zb(1),s.jc("ngIf",!t.state.isAnimating),s.zb(1),s.jc("ngIf",t.state.showOpts),s.zb(1),s.jc("ngIf",t.state.showView)}}const lt=[[["","viewType","opts"]],[["","viewType","view"]]],dt=function(t,e){return{preload:t,"opts-mode":e}},ut=function(t){return{overflow:t}},pt=["[viewType=opts]","[viewType=view]"];let bt=(()=>{class t{constructor(t){this.changeDetectorRef=t,this.optsCancel=new s.n,this.state={isPreloading:!0,isAnimating:!0,showView:!1,viewAnimationState:"",showOpts:!1}}ngOnInit(){}switchAfterDataLoaded(){this.state.isPreloading=!1,this.state.viewAnimationState="firstShow",this.state.showView=!0,this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()}switchAfterOuterOptsSubmit(){this.state.isPreloading=!0,this.state.isAnimating=!0,this.state.showView=!1,this.state.showOpts=!1,this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()}toggleOpts(){this.state.showOpts&&this.optsCancel.emit(),this.state.isAnimating=!0,this.state.showView&&(this.state.showView=!1),this.state.showOpts&&(this.state.showOpts=!1),this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()}onViewAnimationDone(){this.state.showView||(this.state.showOpts=!0,this.state.viewAnimationState="show"),this.state.showView&&(this.state.isAnimating=!1),this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()}onOptsAnimationDone(){this.state.showOpts||(this.state.showView=!0),this.state.showOpts&&(this.state.isAnimating=!1),this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(s.h))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-view-opts-switch"]],inputs:{mainHtmlId:"mainHtmlId",optsHtmlId:"optsHtmlId"},outputs:{optsCancel:"optsCancel"},ngContentSelectors:pt,decls:3,vars:9,consts:[[1,"card",3,"id","ngClass","ngStyle"],[1,"card-bg"],[4,"ngIf"],["class","opts ca ca-cog2",3,"click",4,"ngIf"],["class","card-opts collapse show",3,"id",4,"ngIf"],["class","card-inner",4,"ngIf"],[1,"opts","ca","ca-cog2",3,"click"],[1,"card-opts","collapse","show",3,"id"],[1,"card-inner"]],template:function(t,e){1&t&&(s.ic(lt),s.Sb(0,"div",0),s.Sb(1,"div",1),s.Ec(2,rt,4,3,"ng-container",2),s.Rb(),s.Rb()),2&t&&(s.jc("id",e.mainHtmlId)("ngClass",s.qc(4,dt,e.state.isPreloading,e.state.showOpts))("ngStyle",s.pc(7,ut,e.state.isAnimating?"hidden":"visible")),s.zb(2),s.jc("ngIf",!e.state.isPreloading))},directives:[d.k,d.n,d.m],pipes:[u.c],encapsulation:2,data:{animation:[Object(it.l)("viewAnimation",[Object(it.k)("void => firstShow",Object(m.f)("1000ms linear")),Object(it.k)("void => show",Object(m.e)("350ms ease-in-out")),Object(it.k)(":leave",Object(m.h)("350ms ease-in-out"))]),Object(it.l)("optsAnimation",[Object(it.k)(":enter",Object(m.d)("350ms ease-in-out")),Object(it.k)(":leave",Object(m.i)("350ms ease-in-out"))])]},changeDetection:0}),t})();var mt=a("mJiO");function ht(t,e){if(1&t&&(s.Qb(0),s.Nb(1,"app-selectpicker-accounts",11),s.Pb()),2&t){const t=s.cc();s.zb(1),s.jc("formControlName","nrb")("options",t.state.accountOptions)("labelledby","product.label")("dataWidth","100%")}}function ft(t,e){1&t&&(s.Qb(0),s.Nb(1,"app-dropdown",18),s.dc(2,"translate"),s.Pb()),2&t&&(s.zb(1),s.jc("formControlName","noProduct")("labelId","product.label")("promptText",s.ec(2,3,"settings.personalization.default-product.noProducts.label")))}const gt=function(t){return{preloading:t}};let vt=(()=>{class t{constructor(t){this.changeDetectorRef=t,this.optsSubmit=new s.n,this.subscriptions=[],this.state={isLoading:!1,productTypeOptions:[],accountOptions:[]}}ngOnInit(){this.initForm(),this.reset()}reset(){this.state.productTypeOptions=this.toProductTypeOptions(),this.state.accountOptions=this.toAccountOptions(this.getDefaultProductType(this.defaultProduct)),this.optsForm.patchValue({type:this.getDefaultProductType(this.defaultProduct),nrb:this.getDefaultProductNrbNumber(this.defaultProduct)},{emitEvent:!1}),this.state.isLoading=!1}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}toProductTypeOptions(){return[{key:I.a.ACCOUNT,i18text:"settings.personalization.default-product.account.option"},{key:I.a.LOAN,i18text:"settings.personalization.default-product.loan.option"},{key:I.a.CREDIT_CARD_ACCOUNT,i18text:"settings.personalization.default-product.creditCard.option"}]}toAccountOptions(t){return[].concat(this.optsData.options.accounts).concat(this.optsData.options.ccAccounts).concat(this.optsData.options.loans).filter(e=>e.type===t)}initForm(){this.optsForm=new n.k({type:new n.h(null,n.D.required),nrb:new n.h(null,n.D.required),noProduct:new n.h({value:null,disabled:!0})}),this.subscriptions.push(this.optsForm.get("type").valueChanges.subscribe(t=>{this.state.accountOptions=this.toAccountOptions(I.a[t]),setTimeout(()=>{this.optsForm.patchValue({nrb:this.state.accountOptions.length>0?this.state.accountOptions[0].nrbNumber:null}),this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()})}))}getDefaultProductType(t){return t.accountDetailsDTO?I.a.ACCOUNT:t.creditCard?I.a.CREDIT_CARD_ACCOUNT:t.loanDTO?I.a.LOAN:null}getDefaultProductNrbNumber(t){return t.accountDetailsDTO?t.accountDetailsDTO.nrbNumber:t.creditCard?t.creditCard.creditCardAccountDetailsDTO.nrbNumber:t.loanDTO?t.loanDTO.nrbNumber:null}submitOptsForm(){this.state.isLoading=!0,this.optsSubmit.emit({type:I.a[this.optsForm.value.type],nrbNumber:this.optsForm.value.nrb})}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(s.h))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-default-product-opts"]],inputs:{defaultProduct:"defaultProduct",optsData:"optsData"},outputs:{optsSubmit:"optsSubmit"},decls:34,vars:33,consts:[[1,"container-fluid"],[1,"opts-header"],["id","defaultProductOptsTitle",1,"opts-title","h4"],[1,"opts-subtitle","h6"],[1,"opts-body"],["href","javascript:void(null);",1,"help-info","help-info-md",3,"appTlpTooltip","tlpPlacement"],[1,"ca","ca-question"],[1,"row","form-horizontal",3,"formGroup"],[1,"col-12","col-lg-5"],[1,"form-group"],["id","defaultProductTypeLabel"],[3,"formControlName","options","labelledby","dataWidth"],[1,"col-12","col-lg-7"],["id","product.label"],[4,"ngIf"],[1,"opts-footer"],[1,"buttons","text-right"],["data-dismiss","modal",1,"btn","btn-primary","btn-lg",3,"disabled","ngClass","click"],[3,"formControlName","labelId","promptText"]],template:function(t,e){1&t&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Sb(2,"h2",2),s.Gc(3),s.dc(4,"translate"),s.Sb(5,"span",3),s.Gc(6),s.dc(7,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Sb(8,"div",4),s.Sb(9,"p"),s.Gc(10),s.dc(11,"translate"),s.Sb(12,"a",5),s.dc(13,"translate"),s.Nb(14,"i",6),s.Rb(),s.Rb(),s.Sb(15,"form",7),s.Sb(16,"div",8),s.Sb(17,"div",9),s.Sb(18,"label",10),s.Gc(19),s.dc(20,"translate"),s.Rb(),s.Nb(21,"app-selectpicker",11),s.Rb(),s.Rb(),s.Sb(22,"div",12),s.Sb(23,"div",9),s.Sb(24,"label",13),s.Gc(25),s.dc(26,"translate"),s.Rb(),s.Ec(27,ht,2,4,"ng-container",14),s.Ec(28,ft,3,5,"ng-container",14),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(29,"div",15),s.Sb(30,"div",16),s.Sb(31,"button",17),s.Zb("click",function(){return e.submitOptsForm()}),s.Gc(32),s.dc(33,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&t&&(s.zb(3),s.Ic("",s.ec(4,17,"settings.personalization.default-product.title")," "),s.zb(3),s.Hc(s.ec(7,19,"settings.personalization.default-product.subtitle")),s.zb(4),s.Ic("",s.ec(11,21,"settings.personalization.default-product.info")," "),s.zb(2),s.jc("appTlpTooltip",s.ec(13,23,"settings.personalization.default-product.web.infotip.view360.default.product"))("tlpPlacement","top"),s.zb(3),s.jc("formGroup",e.optsForm),s.zb(4),s.Hc(s.ec(20,25,"settings.personalization.default-product.type.label")),s.zb(2),s.jc("formControlName","type")("options",e.state.productTypeOptions)("labelledby","defaultProductTypeLabel")("dataWidth","100%"),s.zb(4),s.Hc(s.ec(26,27,"settings.personalization.default-product.product.label")),s.zb(2),s.jc("ngIf",e.state.accountOptions.length>0),s.zb(1),s.jc("ngIf",0===e.state.accountOptions.length),s.zb(3),s.jc("disabled",!e.optsForm.valid)("ngClass",s.pc(31,gt,e.state.isLoading)),s.zb(1),s.Ic("",s.ec(33,29,"settings.personalization.save.label")," "))},directives:[r.a,n.F,n.u,n.l,g.a,n.t,n.j,d.m,d.k,o.a,mt.a],pipes:[u.c],encapsulation:2,changeDetection:0}),t})();var yt=a("cpG6"),wt=a("MRYv");function St(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div",3),s.Sb(1,"a",4),s.Zb("click",function(){return s.xc(t),s.cc().sendEximeeNewAccount()}),s.Sb(2,"span",5),s.Nb(3,"i",6),s.Rb(),s.Nb(4,"span",7),s.dc(5,"translate"),s.Rb(),s.Rb()}2&t&&(s.zb(4),s.jc("innerHTML",s.ec(5,1,"view360.defaultProduct.none.openAccount.link"),s.yc))}let Rt=(()=>{class t{constructor(t,e,a){this.modalAlertService=t,this.eximeeService=e,this.principalService=a}ngOnInit(){}sendEximeeNewAccount(){this.eximeeService.gotoEximee("KO","/web-ca24/home",null)}checkEximeeLink(){return this.principalService.isDetal()}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(yt.b),s.Mb(wt.a),s.Mb(L.c))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-default-product-none"]],decls:6,vars:4,consts:[[1,"row","no-gutters"],[1,"col-12","no-product-cta"],["class","col-12 pay-cta mt-3",4,"ngIf"],[1,"col-12","pay-cta","mt-3"],["href","javascript:void(null);",1,"",3,"click"],[1,"btn","btn-round"],[1,"ca","ca-arrow-link"],[2,"text-decoration","none",3,"innerHTML"]],template:function(t,e){1&t&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Gc(2),s.dc(3,"translate"),s.Rb(),s.Rb(),s.Sb(4,"div",0),s.Ec(5,St,6,3,"div",2),s.Rb()),2&t&&(s.zb(2),s.Ic(" ",s.ec(3,2,"view360.defaultProduct.none.info")," "),s.zb(3),s.jc("ngIf",e.checkEximeeLink()))},directives:[d.m],pipes:[u.c],encapsulation:2}),t})(),Ct=(()=>{class t{constructor(t){this.systemParameterService=t,this.state={data:{noAccountPhone:t.getWebNoAccountPhone()}}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(M.a))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-default-product-not-active"]],decls:13,vars:7,consts:[[1,"row","no-gutters"],[1,"col-12","no-product-cta"],[1,"col-12","text-right","mt-3"],[1,"infoline"],[1,"ca","ca-infoline"],[1,"number"]],template:function(t,e){1&t&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Gc(2),s.dc(3,"translate"),s.Rb(),s.Rb(),s.Sb(4,"div",0),s.Sb(5,"div",2),s.Sb(6,"p",3),s.Nb(7,"i",4),s.Gc(8),s.dc(9,"translate"),s.Nb(10,"br"),s.Sb(11,"span",5),s.Gc(12),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&t&&(s.zb(2),s.Ic(" ",s.ec(3,3,"view360.defaultProduct.notActive.info")," "),s.zb(6),s.Ic(" ",s.ec(9,5,"view360.defaultProduct.notActive.helpline"),""),s.zb(4),s.Hc(e.state.data.noAccountPhone))},pipes:[u.c],encapsulation:2}),t})();var Pt=a("ZoBx"),zt=a("UUuo"),xt=a("JAmJ"),At=a("8Z9a"),Dt=a("WpYH"),kt=a("9ACH");const Tt=["openFundsButton"];function Ot(t,e){1&t&&(s.Nb(0,"button",19),s.dc(1,"translate")),2&t&&s.Ab("aria-label",s.ec(1,1,"view360.defaultProduct.account.funds.details"))}function Nt(t,e){if(1&t){const t=s.Tb();s.Sb(0,"a",29),s.Zb("click",function(){return s.xc(t),s.cc(3).sendEximeeUpdateLimit()}),s.Sb(1,"span"),s.Gc(2),s.dc(3,"translate"),s.Rb(),s.Rb()}if(2&t){const t=s.cc(3);s.jc("tabindex",t.state.fundsOpened?0:-1),s.zb(2),s.Hc(s.ec(3,2,"view360.defaultProduct.account.creditLimitExpand.label"))}}function Ft(t,e){if(1&t&&(s.Sb(0,"div",22,23),s.Sb(2,"dl"),s.Sb(3,"dt"),s.Gc(4),s.dc(5,"translate"),s.Rb(),s.Sb(6,"dd",24),s.Sb(7,"span",5),s.Gc(8),s.dc(9,"amount"),s.Rb(),s.Gc(10,"\xa0"),s.Sb(11,"span",6),s.Gc(12),s.Rb(),s.Rb(),s.Rb(),s.Sb(13,"dl"),s.Sb(14,"dt"),s.Gc(15),s.dc(16,"translate"),s.Rb(),s.Sb(17,"dd",25),s.Sb(18,"span",5),s.Gc(19),s.dc(20,"amount"),s.Rb(),s.Gc(21,"\xa0"),s.Sb(22,"span",6),s.Gc(23),s.Rb(),s.Rb(),s.Rb(),s.Sb(24,"dl"),s.Sb(25,"dt"),s.Gc(26),s.dc(27,"translate"),s.Rb(),s.Sb(28,"dd",26),s.Sb(29,"span",5),s.Gc(30),s.dc(31,"amount"),s.Rb(),s.Gc(32,"\xa0"),s.Sb(33,"span",6),s.Gc(34),s.Rb(),s.Rb(),s.Rb(),s.Sb(35,"div",27),s.Ec(36,Nt,4,4,"a",28),s.Rb(),s.Rb()),2&t){const t=s.cc(2);s.zb(4),s.Hc(s.ec(5,10,"view360.defaultProduct.account.ownFunds.label")),s.zb(4),s.Hc(s.ec(9,12,t.getOwnAmount())),s.zb(4),s.Hc(t.accountDetailsDTO.availFunds.currency),s.zb(3),s.Hc(s.ec(16,14,"view360.defaultProduct.account.holdsTotal.label")),s.zb(4),s.Hc(s.ec(20,16,t.accountDetailsDTO.holdsAmount.amount)),s.zb(4),s.Hc(t.accountDetailsDTO.holdsAmount.currency),s.zb(3),s.Hc(s.ec(27,18,"view360.defaultProduct.account.creditLimit.label")),s.zb(4),s.Hc(s.ec(31,20,t.accountDetailsDTO.overdraftLimit.amount)),s.zb(4),s.Hc(t.accountDetailsDTO.overdraftLimit.currency),s.zb(2),s.jc("ngIf",t.hasAccountActiveAccess()&&t.checkEximeeLink)}}function It(t,e){if(1&t&&(s.Sb(0,"div",20),s.Ec(1,Ft,37,22,"div",21),s.Rb()),2&t){const t=s.cc();s.zb(1),s.jc("ngIf",t.accountDetailsDTO.overdraftLimit)}}function Lt(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div",30),s.Sb(1,"p",31),s.Gc(2),s.dc(3,"translate"),s.Rb(),s.Sb(4,"form",32),s.Zb("ngSubmit",function(){return s.xc(t),s.cc().onBeneficiarySubmit()}),s.Nb(5,"app-recipient-input-form",33),s.dc(6,"translate"),s.dc(7,"translate"),s.Sb(8,"button",34),s.dc(9,"translate"),s.Nb(10,"i",35),s.Rb(),s.Rb(),s.Rb()}if(2&t){const t=s.cc();s.zb(2),s.Hc(s.ec(3,9,"view360.defaultProduct.account.payment.label")),s.zb(2),s.jc("formGroup",t.beneficiaryForm),s.zb(1),s.jc("formControlName","beneficiary")("paymentTypeCodes",t.getBeneficiaryPaymentTypes())("nrbNumber",t.accountDetailsDTO.nrbNumber)("ariaTitle",s.ec(6,11,"view360.defaultProduct.account.payment.title"))("placeholder",s.ec(7,13,"view360.defaultProduct.account.beneficiary.placeholder")),s.zb(3),s.jc("appPiwikClickable","greeting/buttonBeneficiaryPayment"),s.Ab("aria-label",s.ec(9,15,"view360.defaultProduct.account.payment.submit"))}}const Et=function(t){return{open:t}};let jt=(()=>{class t{constructor(t,e,a,n,i,c,s,o,r){this.ngZone=t,this.changeDetectorRef=e,this.eximeeService=a,this.principalService=n,this.router=i,this.productHelper=c,this.recipientsService=s,this.permissionService=o,this.modalAlertService=r,this.state={fundsOpened:!1,openFundsButtonNativeElement:null}}set openFundsElementRef(t){this.initOpenFundsBootstrapEvents(t)}ngOnInit(){this.beneficiaryForm=new n.k({beneficiary:new n.h(null,[])})}initOpenFundsBootstrapEvents(t){t&&(this.state.openFundsButtonNativeElement=t.nativeElement,jQuery(t.nativeElement).on("show.bs.collapse",()=>{this.ngZone.run(()=>{this.state.fundsOpened=!0,this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()})}),jQuery(t.nativeElement).on("hidden.bs.collapse",()=>{this.ngZone.run(()=>{this.state.fundsOpened=!1,this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()})}))}onClick(t){this.state.openFundsButtonNativeElement&&!this.state.openFundsButtonNativeElement.contains(t)&&jQuery(this.state.openFundsButtonNativeElement).collapse("hide")}getOwnAmount(){return this.accountDetailsDTO.availFunds.amount-(this.accountDetailsDTO.overdraftLimit?this.accountDetailsDTO.overdraftLimit.amount:0)}onAccountDetailsLinkClick(){this.router.navigate(["/products/accounts",this.accountDetailsDTO.nrbNumber])}getAccountName(){return this.productHelper.getAccountName(this.accountDetailsDTO)}checkEximeeLink(){return null!=this.accountDetailsDTO.interestRate&&this.principalService.isDetal()}sendEximeeUpdateLimit(){this.eximeeService.gotoEximee("ILKZL","/web-ca24/products/accounts",this.accountDetailsDTO.nrbNumber)}onBeneficiarySubmit(){const t=this.beneficiaryForm.value.beneficiary?this.beneficiaryForm.value.beneficiary:{dto:null,name:null};t&&!t.dto&&(t.debitNrbNumber=this.accountDetailsDTO.nrbNumber),this.recipientsService.gotoRecipientTransfer(t)}hasAccountActiveAccess(){return this.permissionService.hasAccountActiveAccess()}hasPaymentActiveAccess(){return this.permissionService.hasPaymentActiveAccess()}getBeneficiaryPaymentTypes(){return Pt.a.getBeneficiaryPaymentAllTypes()}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(s.z),s.Mb(s.h),s.Mb(wt.a),s.Mb(L.c),s.Mb(i.d),s.Mb(_.a),s.Mb(zt.b),s.Mb(Q.a),s.Mb(yt.b))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-default-product-account"]],viewQuery:function(t,e){if(1&t&&s.Oc(Tt,!0),2&t){let t;s.tc(t=s.ac())&&(e.openFundsElementRef=t.first)}},hostBindings:function(t,e){1&t&&s.Zb("click",function(t){return e.onClick(t.target)},!1,s.vc)},inputs:{accountDetailsDTO:"accountDetailsDTO"},decls:31,vars:25,consts:[[1,"row","no-gutters","limits-type-2"],[1,"col-12"],[1,"av-outer"],[1,"av",3,"ngClass"],[1,"amount"],[1,"number"],[1,"currency"],["class","ca ca-caret collapsed","role","tab","data-toggle","collapse","data-target","#accountAvailableDetails","aria-expanded","false","aria-controls","accountAvailableDetails","id","accountAvailableDetailsHeading",4,"ngIf"],["class","ext",4,"ngIf"],[1,"row","no-gutters"],[1,"col-12","col-lg-6","mb-3","mb-lg-0"],["id","clipboardnumber",1,"clipboard",3,"appClipboardTooltip","copyTitle","copiedTitle"],[1,"number",3,"innerHTML"],[1,"ca","ca-copy"],[1,"mb-2","product-name"],[1,""],[1,"mb-0"],["href","javascript:void(null);",1,"base-link",3,"appPiwikClickable","click"],["class","col-12 col-lg-6 quick-transfer",4,"ngIf"],["role","tab","data-toggle","collapse","data-target","#accountAvailableDetails","aria-expanded","false","aria-controls","accountAvailableDetails","id","accountAvailableDetailsHeading",1,"ca","ca-caret","collapsed"],[1,"ext"],["id","accountAvailableDetails","class","collapse",4,"ngIf"],["id","accountAvailableDetails",1,"collapse"],["openFundsButton",""],[1,"color-own","amount","amount-md"],[1,"color-lock","amount","amount-md"],[1,"color-lim","amount","amount-md"],[1,"text-right"],["href","javascript:void(null);","class","text-link-sm",3,"tabindex","click",4,"ngIf"],["href","javascript:void(null);",1,"text-link-sm",3,"tabindex","click"],[1,"col-12","col-lg-6","quick-transfer"],[1,"mb-1","font-weight-bold"],[1,"home-recipient-input-form-container",3,"formGroup","ngSubmit"],["id","beneficiary",2,"width","100%",3,"formControlName","paymentTypeCodes","nrbNumber","ariaTitle","placeholder"],[1,"btn","btn-round",3,"appPiwikClickable"],[1,"ca","ca-arrow-link"]],template:function(t,e){1&t&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Sb(2,"div",2),s.Sb(3,"div",3),s.Sb(4,"div",4),s.Sb(5,"span",5),s.Gc(6),s.dc(7,"amount"),s.Rb(),s.Gc(8,"\xa0"),s.Sb(9,"span",6),s.Gc(10),s.Rb(),s.Ec(11,Ot,2,3,"button",7),s.Rb(),s.Ec(12,It,2,1,"div",8),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(13,"div",9),s.Sb(14,"div",10),s.Sb(15,"div"),s.Sb(16,"button",11),s.dc(17,"translate"),s.dc(18,"translate"),s.Nb(19,"span",12),s.dc(20,"nrbDecorated"),s.Nb(21,"i",13),s.Rb(),s.Rb(),s.Sb(22,"p",14),s.Sb(23,"span",15),s.Gc(24),s.Rb(),s.Rb(),s.Sb(25,"p",16),s.Sb(26,"a",17),s.Zb("click",function(){return e.onAccountDetailsLinkClick()}),s.Sb(27,"span"),s.Gc(28),s.dc(29,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Ec(30,Lt,11,17,"div",18),s.Rb()),2&t&&(s.zb(3),s.jc("ngClass",s.pc(23,Et,e.state.fundsOpened)),s.zb(3),s.Hc(s.ec(7,13,e.accountDetailsDTO.availFunds.amount)),s.zb(4),s.Hc(e.accountDetailsDTO.availFunds.currency),s.zb(1),s.jc("ngIf",e.accountDetailsDTO.overdraftLimit),s.zb(1),s.jc("ngIf",e.accountDetailsDTO.overdraftLimit),s.zb(4),s.jc("appClipboardTooltip",e.accountDetailsDTO.nrbNumber)("copyTitle",s.ec(17,15,"clipboardTooltip.copyTitle"))("copiedTitle",s.ec(18,17,"clipboardTooltip.copiedTitle")),s.zb(3),s.jc("innerHTML",s.ec(20,19,e.accountDetailsDTO.nrbNumber),s.yc),s.zb(5),s.Hc(e.getAccountName()),s.zb(2),s.jc("appPiwikClickable","greeting/buttonAccounts"),s.zb(2),s.Hc(s.ec(29,21,"view360.defaultProduct.account.details.link")),s.zb(2),s.jc("ngIf",e.hasPaymentActiveAccess()))},directives:[d.k,d.m,xt.a,At.a,n.F,n.u,n.l,Dt.a,n.t,n.j],pipes:[y.a,u.c,kt.a],styles:[".home-recipient-input-form-container .length-indicator {display: none}"],encapsulation:2}),t})();var Ht=a("ZQBd"),Gt=a("PJJw"),Mt=a("0+e1");const Vt=["openFundsButton"];function $t(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div",21),s.Sb(1,"a",22),s.Zb("click",function(){return s.xc(t),s.cc().sendEximeeUpdateLimit()}),s.Sb(2,"span"),s.Gc(3),s.dc(4,"translate"),s.Rb(),s.Rb(),s.Rb()}if(2&t){const t=s.cc();s.zb(1),s.jc("tabindex",t.state.fundsOpened?0:-1),s.zb(2),s.Hc(s.ec(4,2,"view360.defaultProduct.account.creditLimitExpand.label"))}}function _t(t,e){if(1&t&&(s.Sb(0,"div",23),s.Sb(1,"div",24),s.Sb(2,"p"),s.Gc(3),s.dc(4,"translate"),s.Rb(),s.Sb(5,"p",4),s.Sb(6,"span",5),s.Gc(7),s.dc(8,"amount"),s.Rb(),s.Gc(9,"\xa0"),s.Sb(10,"span",6),s.Gc(11),s.Rb(),s.Rb(),s.Sb(12,"p",25),s.Sb(13,"time",26),s.Gc(14),s.dc(15,"translate"),s.dc(16,"appDate"),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&t){const t=s.cc();s.zb(3),s.Hc(s.ec(4,5,"view360.defaultProduct.card.minRepay.label")),s.zb(4),s.Hc(s.ec(8,7,t.state.data.dto.lastStmtRequiredMinRepayment.amount)),s.zb(4),s.Hc(t.state.data.dto.lastStmtRequiredMinRepayment.currency),s.zb(3),s.Jc(" ",s.ec(15,9,"view360.defaultProduct.card.to.label")," ",s.ec(16,11,t.state.data.dto.lastStmtRepaymentDueDate)," ")}}function Bt(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div",27),s.Sb(1,"a",28),s.Zb("click",function(){return s.xc(t),s.cc().onCardRepaymentClick()}),s.Sb(2,"span",29),s.Nb(3,"i",30),s.Rb(),s.Nb(4,"span",31),s.dc(5,"translate"),s.Rb(),s.Rb()}2&t&&(s.zb(4),s.jc("innerHTML",s.ec(5,1,"view360.defaultProduct.card.repay.link"),s.yc))}const Ut=function(t){return{open:t}};let Yt=(()=>{class t{constructor(t,e,a,n,i,c,s,o,r,l){this.ngZone=t,this.changeDetectorRef=e,this.eximeeService=a,this.principalService=n,this.router=i,this.productHelper=c,this.routeDataService=s,this.permissionService=o,this.systemParameterService=r,this.modalAlertService=l,this.state={isRepaymentVisible:!1,fundsOpened:!1,data:{dto:null},openFundsButtonNativeElement:null}}set openFundsElementRef(t){this.initOpenFundsBootstrapEvents(t)}initOpenFundsBootstrapEvents(t){t&&(this.state.openFundsButtonNativeElement=t.nativeElement,jQuery(t.nativeElement).on("show.bs.collapse",()=>{this.ngZone.run(()=>{this.state.fundsOpened=!0,this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()})}),jQuery(t.nativeElement).on("hidden.bs.collapse",()=>{this.ngZone.run(()=>{this.state.fundsOpened=!1,this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()})}))}onClick(t){this.state.openFundsButtonNativeElement&&!this.state.openFundsButtonNativeElement.contains(t)&&jQuery(this.state.openFundsButtonNativeElement).collapse("hide")}ngOnInit(){this.state.data.dto=this.creditCard.creditCardAccountDetailsDTO,this.state.isRepaymentVisible=this.creditCard.creditCardAccountDTO.accountFlags.indexOf("CREDIT_CARD_REPAYMENT_CREDIT")>=0&&this.permissionService.hasCreditCardAccountActiveAccess()}onCardDetailsLinkClick(){this.router.navigate(["/products/cards",this.state.data.dto.nrbNumber])}sendEximeeUpdateLimit(){this.eximeeService.gotoEximee("ZLKK","/web-ca24/home",null)}getCreditCardAccountName(){return this.productHelper.getCreditCardAccountName(this.state.data.dto)}onCardRepaymentClick(){this.routeDataService.navigateWithRouteData(Ht.a.creditCardOrLoanRepayment,{creditAcc:this.state.data.dto.nrbNumber,amount:null,repaymentType:Gt.b.CC_ANY,isLoanRepayment:!1},["/transfers/repayment"])}changeLimitsAvailable(){return!h.a.isNullOrUndefined(this.state.data.dto)&&!this.systemParameterService.getCcaUpdateLimitNotAvailable().includes(this.state.data.dto.productTypeCode)}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(s.z),s.Mb(s.h),s.Mb(wt.a),s.Mb(L.c),s.Mb(i.d),s.Mb(_.a),s.Mb(Ht.b),s.Mb(Q.a),s.Mb(M.a),s.Mb(yt.b))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-default-product-card"]],viewQuery:function(t,e){if(1&t&&s.Oc(Vt,!0),2&t){let t;s.tc(t=s.ac())&&(e.openFundsElementRef=t.first)}},hostBindings:function(t,e){1&t&&s.Zb("click",function(t){return e.onClick(t.target)},!1,s.vc)},inputs:{creditCard:"creditCard"},decls:33,vars:25,consts:[[1,"row","no-gutters","limits-type-2"],[1,"col-12"],[1,"av-outer"],[1,"av",3,"ngClass"],[1,"amount"],[1,"number"],[1,"currency"],["role","tab","data-toggle","collapse","data-target","#accountAvailableDetails","aria-expanded","false","aria-controls","accountAvailableDetails","id","accountAvailableDetailsHeading",1,"ca","ca-caret","collapsed"],["id","accountAvailableDetails",1,"collapse","ext"],["openFundsButton",""],["class","text-right",4,"ngIf"],[1,"row","no-gutters"],[1,"col-12","col-lg-6","mb-3","mb-lg-0"],["id","clipboardnumber",1,"clipboard",3,"appClipboardTooltip","copyTitle","copiedTitle"],[1,"number",3,"innerHTML"],[1,"ca","ca-copy"],[1,"mb-2","product-name"],[1,"mb-0"],["href","javascript:void(null);",1,"base-link",3,"appPiwikClickable","click"],["class","col-12 col-sm-6 col-lg-3",4,"ngIf"],["class","col-12 col-sm-6 col-md-auto ml-md-auto ml-lg-0 col-lg-3 pay-cta",4,"ngIf"],[1,"text-right"],["href","javascript:void(null);",1,"text-link-sm",3,"tabindex","click"],[1,"col-12","col-sm-6","col-lg-3"],[1,"upcoming-payment"],[1,"date"],["datetime",""],[1,"col-12","col-sm-6","col-md-auto","ml-md-auto","ml-lg-0","col-lg-3","pay-cta"],["href","javascript:void(null);",1,"",3,"click"],[1,"btn","btn-round"],[1,"ca","ca-arrow-link"],[2,"text-decoration","none",3,"innerHTML"]],template:function(t,e){1&t&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Sb(2,"div",2),s.Sb(3,"div",3),s.Sb(4,"div",4),s.Sb(5,"span",5),s.Gc(6),s.dc(7,"amount"),s.Rb(),s.Gc(8,"\xa0"),s.Sb(9,"span",6),s.Gc(10),s.Rb(),s.Nb(11,"button",7),s.Rb(),s.Sb(12,"div",8,9),s.Ec(14,$t,5,4,"div",10),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(15,"div",11),s.Sb(16,"div",12),s.Sb(17,"div"),s.Sb(18,"button",13),s.dc(19,"translate"),s.dc(20,"translate"),s.Nb(21,"span",14),s.dc(22,"nrbDecorated"),s.Nb(23,"i",15),s.Rb(),s.Rb(),s.Sb(24,"p",16),s.Gc(25),s.Rb(),s.Sb(26,"p",17),s.Sb(27,"a",18),s.Zb("click",function(){return e.onCardDetailsLinkClick()}),s.Sb(28,"span"),s.Gc(29),s.dc(30,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Ec(31,_t,17,13,"div",19),s.Ec(32,Bt,6,3,"div",20),s.Rb()),2&t&&(s.zb(3),s.jc("ngClass",s.pc(23,Ut,e.state.fundsOpened)),s.zb(3),s.Hc(s.ec(7,13,e.state.data.dto.availFunds.amount)),s.zb(4),s.Hc(e.state.data.dto.availFunds.currency),s.zb(4),s.jc("ngIf",e.changeLimitsAvailable()),s.zb(4),s.jc("appClipboardTooltip",e.state.data.dto.nrbNumber)("copyTitle",s.ec(19,15,"clipboardTooltip.copyTitle"))("copiedTitle",s.ec(20,17,"clipboardTooltip.copiedTitle")),s.zb(3),s.jc("innerHTML",s.ec(22,19,e.state.data.dto.nrbNumber),s.yc),s.zb(4),s.Hc(e.getCreditCardAccountName()),s.zb(2),s.jc("appPiwikClickable","greeting/buttonCards"),s.zb(2),s.Hc(s.ec(30,21,"view360.defaultProduct.card.details.link")),s.zb(2),s.jc("ngIf",e.state.data.dto.lastStmtRepaymentDueDate&&e.state.data.dto.lastStmtRequiredMinRepayment),s.zb(1),s.jc("ngIf",e.state.isRepaymentVisible))},directives:[d.k,d.m,xt.a,At.a],pipes:[y.a,u.c,kt.a,Mt.a],encapsulation:2}),t})();var Qt=a("46Zc"),Wt=a("55p7");function Zt(t,e){if(1&t&&(s.Sb(0,"button",15),s.dc(1,"translate"),s.dc(2,"translate"),s.Nb(3,"span",16),s.dc(4,"nrbDecorated"),s.Nb(5,"i",17),s.Rb()),2&t){const t=s.cc();s.jc("appClipboardTooltip",t.loanDTO.nrbNumber)("copyTitle",s.ec(1,4,"clipboardTooltip.copyTitle"))("copiedTitle",s.ec(2,6,"clipboardTooltip.copiedTitle")),s.zb(3),s.jc("innerHTML",s.ec(4,8,t.loanDTO.nrbNumber),s.yc)}}function Kt(t,e){if(1&t&&(s.Nb(0,"span",16),s.dc(1,"nrbShort")),2&t){const t=s.cc();s.jc("innerHTML",s.ec(1,1,t.loanDTO.nrbNumber),s.yc)}}function Jt(t,e){if(1&t&&(s.Sb(0,"div",18),s.Sb(1,"div",19),s.Sb(2,"p"),s.Gc(3),s.dc(4,"translate"),s.Rb(),s.Sb(5,"p",4),s.Sb(6,"span",5),s.Gc(7),s.dc(8,"amount"),s.Rb(),s.Gc(9,"\xa0"),s.Sb(10,"span",6),s.Gc(11),s.Rb(),s.Rb(),s.Sb(12,"p",20),s.Sb(13,"time",21),s.Gc(14),s.dc(15,"appDate"),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&t){const t=s.cc();s.zb(3),s.Hc(s.ec(4,4,t.state.isRevlPartnerLoan?"view360.defaultProduct.loan.installment.revl.label":"view360.defaultProduct.loan.installment.label")),s.zb(4),s.Hc(s.ec(8,6,null==t.loanDTO.nextPayAmount?null:t.loanDTO.nextPayAmount.amount)),s.zb(4),s.Hc(null==t.loanDTO.nextPayAmount?null:t.loanDTO.nextPayAmount.currency),s.zb(3),s.Ic(" ",s.ec(15,8,t.loanDTO.nextPayDate)," ")}}function qt(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div",22),s.Sb(1,"a",23),s.Zb("click",function(){return s.xc(t),s.cc().onLoanRepaymentClick()}),s.Sb(2,"span",24),s.Nb(3,"i",25),s.Rb(),s.Nb(4,"span",26),s.dc(5,"translate"),s.Rb(),s.Rb()}2&t&&(s.zb(4),s.jc("innerHTML",s.ec(5,1,"view360.defaultProduct.loan.repay.link"),s.yc))}let Xt=(()=>{class t{constructor(t,e,a,n,i){this.router=t,this.productHelper=e,this.loanHelper=a,this.routeDataService=n,this.permissionService=i,this.state={isRepaymentSectionVisible:!1,isRepaymentButtonVisible:!1,isRevlPartnerLoan:!1,data:{dto:null}}}ngOnInit(){this.state.data.dto=this.loanDTO,this.state.isRepaymentSectionVisible=this.loanHelper.isRepaymentSectionVisible(this.loanDTO),this.state.isRepaymentButtonVisible=this.loanDTO.loanFlags.indexOf("LOAN_REPAYMENT")>=0&&this.permissionService.hasLoanActiveAccess(),this.state.isRevlPartnerLoan=this.loanHelper.isRevlPartnerLoan(this.loanDTO.productTypeCode)}onLoanDetailsLinkClick(){this.router.navigate(["/products/loans",this.loanDTO.nrbNumber])}getLoanName(){return this.productHelper.getLoanName(this.loanDTO)}onLoanRepaymentClick(){this.routeDataService.navigateWithRouteData(Ht.a.creditCardOrLoanRepayment,{creditAcc:this.state.data.dto.nrbNumber,amount:null,repaymentType:Gt.b.LO_CURRENT_REPAYMENT,isLoanRepayment:!0},["/transfers/repayment"])}isShortNrb(t){return t.loanFlags.includes("LOAN_CASH_DETAILS_DISABLE")}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(i.d),s.Mb(_.a),s.Mb(Qt.a),s.Mb(Ht.b),s.Mb(Q.a))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-default-product-loan"]],inputs:{loanDTO:"loanDTO"},decls:25,vars:13,consts:[[1,"row","no-gutters"],[1,"col-12"],[1,"av-outer"],[1,"av"],[1,"amount"],[1,"number"],[1,"currency"],[1,"col-12","col-lg-6","mb-3","mb-lg-0"],["class","clipboard","id","clipboardnumber",3,"appClipboardTooltip","copyTitle","copiedTitle",4,"ngIf"],["class","number",3,"innerHTML",4,"ngIf"],[1,"mb-2","product-name"],[1,"mb-0"],["href","javascript:void(null);",1,"base-link",3,"appPiwikClickable","click"],["class","col-12 col-sm-6 col-lg-3",4,"ngIf"],["class","col-12 col-sm-6 col-md-auto ml-md-auto ml-lg-0 col-lg-3 pay-cta",4,"ngIf"],["id","clipboardnumber",1,"clipboard",3,"appClipboardTooltip","copyTitle","copiedTitle"],[1,"number",3,"innerHTML"],[1,"ca","ca-copy"],[1,"col-12","col-sm-6","col-lg-3"],[1,"upcoming-payment"],[1,"date"],["datetime",""],[1,"col-12","col-sm-6","col-md-auto","ml-md-auto","ml-lg-0","col-lg-3","pay-cta"],["href","javascript:void(null);",1,"",3,"click"],[1,"btn","btn-round"],[1,"ca","ca-arrow-link"],[2,"text-decoration","none",3,"innerHTML"]],template:function(t,e){1&t&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Sb(2,"div",2),s.Sb(3,"div",3),s.Sb(4,"div",4),s.Sb(5,"span",5),s.Gc(6),s.dc(7,"amount"),s.Rb(),s.Gc(8,"\xa0"),s.Sb(9,"span",6),s.Gc(10),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(11,"div",0),s.Sb(12,"div",7),s.Sb(13,"div"),s.Ec(14,Zt,6,10,"button",8),s.Ec(15,Kt,2,3,"span",9),s.Rb(),s.Sb(16,"p",10),s.Gc(17),s.Rb(),s.Sb(18,"p",11),s.Sb(19,"a",12),s.Zb("click",function(){return e.onLoanDetailsLinkClick()}),s.Sb(20,"span"),s.Gc(21),s.dc(22,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Ec(23,Jt,16,10,"div",13),s.Ec(24,qt,6,3,"div",14),s.Rb()),2&t&&(s.zb(6),s.Hc(s.ec(7,9,e.loanDTO.bookBalance.amount)),s.zb(4),s.Hc(e.loanDTO.bookBalance.currency),s.zb(4),s.jc("ngIf",!e.isShortNrb(e.state.data.dto)),s.zb(1),s.jc("ngIf",e.isShortNrb(e.state.data.dto)),s.zb(2),s.Hc(e.getLoanName()),s.zb(2),s.jc("appPiwikClickable","greeting/buttonLoans"),s.zb(2),s.Hc(s.ec(22,11,"view360.defaultProduct.loan.details.link")),s.zb(2),s.jc("ngIf",e.state.isRepaymentSectionVisible),s.zb(1),s.jc("ngIf",e.state.isRepaymentButtonVisible))},directives:[d.m,At.a,xt.a],pipes:[y.a,u.c,kt.a,Wt.a,Mt.a],encapsulation:2}),t})();const te=["viewOptsSwitch"],ee=["view360DefaultProductOpts"];function ae(t,e){if(1&t){const t=s.Tb();s.Qb(0,5),s.Sb(1,"app-view360-default-product-opts",6,7),s.Zb("optsSubmit",function(e){return s.xc(t),s.cc().onOptsSubmit(e)}),s.Rb(),s.Pb()}if(2&t){const t=s.cc();s.zb(1),s.jc("defaultProduct",t.state.data.defaultProduct)("optsData",t.state.data.optsData)}}function ne(t,e){1&t&&s.Nb(0,"app-view360-default-product-none")}function ie(t,e){1&t&&s.Nb(0,"app-view360-default-product-not-active")}function ce(t,e){if(1&t&&s.Nb(0,"app-view360-default-product-account",13),2&t){const t=s.cc(2);s.jc("accountDetailsDTO",t.state.data.defaultProduct.accountDetailsDTO)}}function se(t,e){if(1&t&&s.Nb(0,"app-view360-default-product-card",14),2&t){const t=s.cc(2);s.jc("creditCard",t.state.data.defaultProduct.creditCard)}}function oe(t,e){if(1&t&&s.Nb(0,"app-view360-default-product-loan",15),2&t){const t=s.cc(2);s.jc("loanDTO",t.state.data.defaultProduct.loanDTO)}}function re(t,e){if(1&t&&(s.Qb(0,8),s.Sb(1,"h2",9),s.Gc(2),s.dc(3,"translate"),s.dc(4,"translate"),s.Rb(),s.Ec(5,ne,1,0,"app-view360-default-product-none",4),s.Ec(6,ie,1,0,"app-view360-default-product-not-active",4),s.Ec(7,ce,1,1,"app-view360-default-product-account",10),s.Ec(8,se,1,1,"app-view360-default-product-card",11),s.Ec(9,oe,1,1,"app-view360-default-product-loan",12),s.Pb()),2&t){const t=s.cc();s.zb(2),s.Kc("",s.ec(3,8,t.state.data.greetingPrefixKey)," ",t.state.data.firstName,"",s.ec(4,10,t.state.data.greetingSuffixKey),""),s.zb(3),s.jc("ngIf",t.state.data.defaultProduct.showNoProduct),s.zb(1),s.jc("ngIf",t.state.data.defaultProduct.showNotActiveProduct),s.zb(1),s.jc("ngIf",t.state.data.defaultProduct.accountDetailsDTO),s.zb(1),s.jc("ngIf",t.state.data.defaultProduct.creditCard),s.zb(1),s.jc("ngIf",t.state.data.defaultProduct.loanDTO)}}function le(t,e){1&t&&(s.Sb(0,"div"),s.Sb(1,"div",16),s.Sb(2,"div",17),s.Sb(3,"h5",18),s.Nb(4,"i",19),s.Sb(5,"span"),s.Gc(6),s.dc(7,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&t&&(s.zb(6),s.Hc(s.ec(7,1,"view360.defaultProduct.loan.overdueAmount.label")))}let de=(()=>{class t{constructor(t,e,a,n,i,c){this.changeDetectorRef=t,this.principalService=e,this.view360Service=a,this.personalizationService=n,this.translateService=i,this.appDateService=c,this.subscriptions=[],this.state={isDataLoaded:!1,data:{greetingPrefixKey:null,greetingSuffixKey:null,defaultProduct:{},firstName:this.getLocativeFirstName(),optsData:null}}}getLocativeFirstName(){return"PL"===this.translateService.currentLang.toUpperCase()?this.principalService.getUserConfigurationDTO().locativeFirstName:h.a.capitalize(this.principalService.getUser().firstName,[" ","-"])}ngOnInit(){this.state.isDataLoaded=!1,this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges(),this.subscriptions.push(k.a.minExecutionTime(Object(D.a)([this.view360Service.getDefaultProduct(),this.view360Service.getOptsData()])).subscribe(t=>{this.state.data.greetingPrefixKey=this.getGreetingPrefixKey(),this.state.data.greetingSuffixKey=this.getGreetingSuffixKey(t[0]),this.state.data.defaultProduct=t[0],this.state.data.optsData=t[1],this.state.isDataLoaded=!0,this.viewOptsSwitch.switchAfterDataLoaded(),this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()}))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}getGreetingPrefixKey(){const t=this.appDateService.browserNow().getHours();return t>=6&&t<18?"view360.defaultProduct.greeting.day":"view360.defaultProduct.greeting.night"}getGreetingSuffixKey(t){return t.showNoProduct?"view360.defaultProduct.none.greeting":t.showNotActiveProduct?"view360.defaultProduct.notActive.greeting":t.accountDetailsDTO?"view360.defaultProduct.account.greeting":t.creditCard?"view360.defaultProduct.card.greeting":t.loanDTO?"view360.defaultProduct.loan.greeting":""}onOptsCancel(){this.view360DefaultProductOpts.reset()}onOptsSubmit(t){this.viewOptsSwitch.switchAfterOuterOptsSubmit(),this.personalizationService.updateDefaultProduct(t).subscribe(()=>{this.ngOnInit()})}isLoanDueBalanceWarning(){return this.state.data.defaultProduct.loanDTO&&this.state.data.defaultProduct.loanDTO.dueBalance&&0!==this.state.data.defaultProduct.loanDTO.dueBalance.amount}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(s.h),s.Mb(L.c),s.Mb(W),s.Mb(G.a),s.Mb(u.d),s.Mb(nt.a))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-default-product"]],viewQuery:function(t,e){if(1&t&&(s.Oc(te,!0),s.Oc(ee,!0)),2&t){let t;s.tc(t=s.ac())&&(e.viewOptsSwitch=t.first),s.tc(t=s.ac())&&(e.view360DefaultProductOpts=t.first)}},decls:5,vars:5,consts:[[3,"mainHtmlId","optsHtmlId","optsCancel"],["viewOptsSwitch",""],["viewType","opts",4,"ngIf"],["viewType","view",4,"ngIf"],[4,"ngIf"],["viewType","opts"],[3,"defaultProduct","optsData","optsSubmit"],["view360DefaultProductOpts",""],["viewType","view"],[1,"h4"],[3,"accountDetailsDTO",4,"ngIf"],[3,"creditCard",4,"ngIf"],[3,"loanDTO",4,"ngIf"],[3,"accountDetailsDTO"],[3,"creditCard"],[3,"loanDTO"],[1,"warning-block","default-product-warning-block"],[1,"col-12"],[1,"pl-5","pr-4","py-3","m-0","font-600"],[1,"ca","ca-ostrzezenie2"]],template:function(t,e){1&t&&(s.Sb(0,"app-view360-view-opts-switch",0,1),s.Zb("optsCancel",function(){return e.onOptsCancel()}),s.Ec(2,ae,3,2,"ng-container",2),s.Ec(3,re,10,12,"ng-container",3),s.Rb(),s.Ec(4,le,8,3,"div",4)),2&t&&(s.jc("mainHtmlId","defaultProduct")("optsHtmlId","defaultProductOpts"),s.zb(2),s.jc("ngIf",e.state.isDataLoaded),s.zb(1),s.jc("ngIf",e.state.isDataLoaded),s.zb(1),s.jc("ngIf",e.isLoanDueBalanceWarning()))},directives:[bt,d.m,vt,Rt,Ct,jt,Yt,Xt],pipes:[u.c],styles:["#defaultProduct{z-index:1}#defaultProduct .card-bg{min-height:211px}.theme-default #defaultProduct .card-bg{background-color:#009597;color:#fff}.theme-hicontrast #defaultProduct .card-bg{background-color:#002a2b;color:#fff}#defaultProduct .card-bg .clipboard .ca.ca-copy{color:inherit}#defaultProduct .quick-transfer{display:flex;flex-flow:column nowrap;justify-content:center}#defaultProduct .quick-transfer p{font-size:.875rem;margin-bottom:0}#defaultProduct .av-outer{height:3.125rem}#defaultProduct .av-outer .av{margin-bottom:0}#defaultProduct .av-outer .av.open{z-index:2}#defaultProduct .av>.amount{font-weight:700;line-height:3.125rem;height:3.125rem;overflow:hidden;font-size:1.4375rem}#defaultProduct .av>.amount .number{font-size:inherit}#defaultProduct .av>.amount .currency{font-size:1.125rem}.theme-default #defaultProduct .av>.amount .ca,.theme-hicontrast #defaultProduct .av>.amount .ca{color:hsla(0,0%,100%,.8)}.theme-default #defaultProduct .av>.amount .ca:focus,.theme-default #defaultProduct .av>.amount .ca:hover,.theme-hicontrast #defaultProduct .av>.amount .ca:focus,.theme-hicontrast #defaultProduct .av>.amount .ca:hover{color:hsla(0,0%,100%,.6)}#defaultProduct .av .ext .amount.amount-sm,#defaultProduct .av .ext .amount.amount-sm .currency{font-size:.75rem}.theme-default #defaultProduct .av.open{color:#4a4e51}.theme-hicontrast #defaultProduct .av.open{color:#fff}.theme-default #defaultProduct .av.open>.amount .ca,.theme-hicontrast #defaultProduct .av.open>.amount .ca{color:#c8c8c8}.theme-default #defaultProduct .av.open>.amount .ca:focus,.theme-default #defaultProduct .av.open>.amount .ca:hover,.theme-hicontrast #defaultProduct .av.open>.amount .ca:focus,.theme-hicontrast #defaultProduct .av.open>.amount .ca:hover{color:#d8d8d8}#defaultProduct .upcoming-payment{display:inline-block}#defaultProduct .upcoming-payment p{margin:0;text-align:left;font-size:.875rem}#defaultProduct .upcoming-payment p.amount{margin-top:.25rem;white-space:nowrap;font-weight:700;line-height:1.5rem}#defaultProduct .upcoming-payment p.amount .number{font-size:1.125rem}#defaultProduct .upcoming-payment p.amount .currency{font-size:.875rem}#defaultProduct .upcoming-payment p.date{font-size:.75rem}#defaultProduct .upcoming-payment p time{font-weight:500}#defaultProduct .pay-cta a{color:inherit;text-transform:uppercase;font-weight:600;line-height:1.25em;font-size:1rem;padding:.333rem 3.5rem .33rem 0;margin-top:1.25rem;display:block;text-align:right;white-space:nowrap}#defaultProduct .pay-cta a .btn-round{float:right;width:3rem;height:3rem;line-height:2.75rem;padding:0 0 .125em .0625em;color:#009597;margin:-3px -3.5rem 0 .5rem}.theme-default #defaultProduct .pay-cta a .btn-round{background:#fff;color:#009597}.theme-hicontrast #defaultProduct .pay-cta a .btn-round{background:#fff;color:#002a2b}.theme-default #defaultProduct .pay-cta a:focus .btn-round,.theme-default #defaultProduct .pay-cta a:hover .btn-round,.theme-hicontrast #defaultProduct .pay-cta a:focus .btn-round,.theme-hicontrast #defaultProduct .pay-cta a:hover .btn-round{background:hsla(0,0%,100%,.9);color:#009597}.theme-default #defaultProduct .pay-cta a:focus .btn-round,.theme-hicontrast #defaultProduct .pay-cta a:focus .btn-round{box-shadow:0 0 0 3px hsla(0,0%,100%,.4)}#defaultProduct .no-product-cta{font-size:1rem;font-weight:300}#defaultProduct .infoline{padding-left:59.995px;position:relative;margin-bottom:.25rem;text-align:left;display:inline-block;font-weight:400}#defaultProduct .infoline .number{font-weight:700;display:inline-block;margin-top:-.25em;font-size:36px;text-align:left}#defaultProduct .infoline .ca{position:absolute;width:65px;text-align:right;display:block;top:-11.999px;left:-11.999px;font-size:65px}@media (max-width:767.98px){#defaultProduct .infoline{font-size:.875rem;padding-left:52.495625px}#defaultProduct .infoline .ca{width:64px;width:56.875px;font-size:4rem;font-size:56.875px;top:-10.499125px;left:-10.499125px}#defaultProduct .infoline .number{font-size:31.5px}}#defaultProduct .product-name{margin-top:-.125rem}#defaultProduct .clipboard,#defaultProduct .product-name{font-weight:300}#defaultProduct .base-link,#defaultProduct .clipboard,#defaultProduct .display-link,#defaultProduct .product-name{font-size:.875rem}#defaultProduct .clipboard{color:inherit}#defaultProduct .clipboard:focus,#defaultProduct .clipboard:hover{color:inherit;background:#00aeb1}#defaultProduct .base-link,#defaultProduct .display-link{font-weight:600}.theme-default #defaultProduct .base-link{color:inherit}#defaultProduct .opts{color:hsla(0,0%,100%,.67)}#defaultProduct .opts:active,#defaultProduct .opts:focus,#defaultProduct .opts:hover{box-shadow:none;color:#fff;outline:0}@media (max-width:767.98px){#defaultProduct .av>.amount{line-height:2.5rem;height:2.5rem;font-size:1.5rem}#defaultProduct .av>.amount .number{font-size:1.5rem}#defaultProduct .av>.amount .currency{font-size:1.125rem}}"],encapsulation:2,changeDetection:0}),t})();var ue=a("rgUv"),pe=a("eTq9"),be=a("V7XX"),me=a("SGjj"),he=a("YKbY");const fe=["svgView360"];function ge(t,e){if(1&t&&(s.bc(),s.Nb(0,"g")),2&t){const t=e.$implicit;s.Ab("data-class","v360-"+t.type)("data-name",t.name)("data-name-count",t.nameCount)("data-show-lines",t.showLines)("data-text",t.text)("data-show-gate",t.showGate)("data-active",t.active)("data-cta",t.cta)("data-cta-active",t.ctaActive)}}let ve=(()=>{class t{constructor(t,e,a,n,i,c,o,r,l,d,u,p,b){this.changeDetectorRef=t,this.translateService=e,this.formatHelper=a,this.zone=n,this.modalAlertService=i,this.appStateService=c,this.router=o,this.permissionService=r,this.eximeeService=l,this.systemParameterService=d,this.principalService=u,this.piwikService=p,this.view360Service=b,this.insuranceAgreement=new s.n,this.subscriptions=[]}ngOnInit(){this.state={svgData:[],eventNamespace:".View360MyFinancesSvgComponent"},this.updateStateWithMyFinances(this.myFinances),this.subscriptions.push(this.appStateService.themeChange.subscribe(()=>{this.zone.runOutsideAngular(()=>$(document).trigger("view360.rebuild.ca"))}))}ngAfterViewInit(){this.initSvg360View(),this.initSvgClickHandler()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),$(document).off("ca.active"+this.state.eventNamespace),$(document).off("ca.activecta"+this.state.eventNamespace),$(document).off("ca.activegate"+this.state.eventNamespace)}initSvg360View(){const t=jQuery(this.svgView360.nativeElement);t[0].view360=!0,t.on("click","a",function(t){return!1}),get_max_views(),this.zone.runOutsideAngular(()=>{view360(this.svgView360.nativeElement,this.appStateService.isThemeHiContrast())})}updateStateWithMyFinances(t){const e=this.toProductSvgData(t),a=this.toCtaSvgData(t);this.state.svgData=[].concat(e).concat(a),this.view360Service.getInsuranceConsentGivenRecently()?this.state.svgData.filter(t=>"insurances"===t.type).forEach(t=>t.active=!0):e.length>0&&(e[0].active=!0),this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()}toProductSvgData(t){const e=[];this.permissionService.hasAccountPassiveAccess()&&e.push(this.toSvgData("accounts","view360.myFinances.svg.accounts.label",t.accountSummary,t.filteredProductLists.accountList.length)),this.permissionService.hasCreditCardAccountPassiveAccess()&&e.push(this.toSvgData("cards","view360.myFinances.svg.cards.label",t.creditCardAccountSummary,t.filteredProductLists.creditCardAccountDetailsList.length)),this.permissionService.hasLoanPassiveAccess()&&e.push(this.toSvgData("loans","view360.myFinances.svg.loans.label",t.loanSummary,t.filteredProductLists.loanList.length)),this.permissionService.hasSavingsPassiveAccess()&&(this.permissionService.hasSavingsAccountPassiveAccess()||this.permissionService.hasDepositPassiveAccess()||this.permissionService.hasSavingProgramPassiveAccess())&&e.push(this.toSvgData("savings","view360.myFinances.svg.savings.label",t.savingSummary,this.myFinances.filteredProductLists.depositList.length+t.filteredProductLists.savingAccountList.length+this.myFinances.filteredProductLists.savingProgramList.length));const a=this.permissionService.hasInvestmentFundPassiveAccess()&&this.principalService.hasTfiAccess(),n=this.permissionService.hasInsurancePassiveAccess()&&this.permissionService.isSystemStatusInsuranceEnabled(),i=this.permissionService.hasRetirementInsuranceAccess()&&this.permissionService.isPensionInsuranceEnabled();if(a||n||i){const c=n?t.structuredProductSummary:[],s=i?t.fundIkeSummary:[],o=a?t.filteredProductLists.fundList.length:0,r=n?t.filteredProductLists.structuredProductList.structuredProducts.length:0,l=i?t.filteredProductLists.fundIkeList.length:0;let d=0;d+=o>0?1:0,d+=r>0?1:0,d+=l>0?1:0,e.push(this.toSvgData("funds","view360.myFinances.svg.funds.label",(a?t.fundSummary:[]).slice(0,1).concat(c.slice(0,1)).concat(s.slice(0,1)),o+r+l,d>2?2:d))}return n&&e.push(this.toSvgData("insurances","view360.myFinances.svg.insurances.label",t.insuranceSummary,t.filteredProductLists.insuranceList.allNotFilteredInsurancesCount,0,!0!==t.filteredProductLists.insuranceList.insuranceAccessUserConsent)),e.filter(t=>t.show)}toCtaSvgData(t){const e=t.filteredProductLists.accountList.length>0,a=t.filteredProductLists.creditCardAccountDetailsList.length>0,n=t.filteredProductLists.loanList.length>0,i=t.filteredProductLists.depositList.length>0||t.filteredProductLists.savingAccountList.length>0||t.filteredProductLists.savingProgramList.length>0,c=t.filteredProductLists.insuranceList.allNotFilteredInsurancesCount>0;let s=[];return e||a||n||i||c?!e||a||n||i||c?e||a||!n||i||c?e||!a||n||i||c?(e||a||n||!i||c)&&(e||s.push("accounts"),a||s.push("cards"),n||s.push("loans"),i||s.push("savings"),c||s.push("insurances")):s=["accounts","loans","insurances"]:s=["accounts","cards","insurances"]:s=["cards","loans","savings","insurances"]:s=["accounts","cards","loans","insurances"],this.permissionService.hasAccountPassiveAccess()||s.splice(s.indexOf("accounts"),1),this.permissionService.hasCreditCardAccountPassiveAccess()||s.splice(s.indexOf("cards"),1),this.permissionService.hasLoanPassiveAccess()||s.splice(s.indexOf("loans"),1),this.permissionService.hasDepositCreateAccess()&&this.permissionService.hasSavingsPassiveAccess()||s.splice(s.indexOf("savings"),1),this.permissionService.hasInsurancePassiveAccess()||s.splice(s.indexOf("insurances"),1),this.permissionService.isSystemStatusInsuranceEnabled()||s.splice(s.indexOf("insurances"),1),s.map(t=>this.toSvgCtaData(t,"view360.myFinances.svg."+t+".cta.label","insurances"===t))}toSvgData(t,e,a,n,i=1,c=!1){return{show:n>0,type:t,name:this.translateService.instant(e),nameCount:n,showLines:i,text:i>0?this.toStringSummary(a):"",showGate:c,active:!1,cta:!1,ctaActive:!1}}toSvgCtaData(t,e,a){return{show:!0,type:t,name:"",text:this.translateService.instant(e),active:!1,cta:!0,ctaActive:a}}toStringSummary(t){return["[",t.map(t=>['["',this.formatHelper.formatAmount(t.amount),' ", "',t.currency,'"]'].join("")).reduce((t,e)=>t+", "+e,"").substr(1),"]"].join("")}initSvgClickHandler(){this.initActiveHandler(),this.initActiveCtaHandler(),this.initActiveGateHandler()}initActiveHandler(){const t=this.piwikService,e=this.myFinances.filteredProductLists.insuranceList.allNotFilteredInsurancesCount>0;$(document).on("ca.active"+this.state.eventNamespace,function(a,n){if(!n.load)switch(n.class){case"v360-accounts":t.registerButtonClick("myFinances/buttonCircleAccounts",!0);break;case"v360-loans":t.registerButtonClick("myFinances/buttonCircleLoans",!0);break;case"v360-cards":t.registerButtonClick("myFinances/buttonCircleCards",!0);break;case"v360-savings":t.registerButtonClick("myFinances/buttonCircleSavings",!0);break;case"v360-funds":t.registerButtonClick("myFinances/buttonCircleFunds",!0);break;case"v360-insurances":e&&t.registerButtonClick("myFinances/buttonCircleInsurances",!0)}})}initActiveCtaHandler(){const t=this.eximeeService,e=this.router,a=this.piwikService,n=this.insuranceAgreement,i=!0===this.myFinances.filteredProductLists.insuranceList.insuranceAccessUserConsent;$(document).on("ca.activecta"+this.state.eventNamespace,function(c,s){switch(s.class){case"v360-accounts":a.registerButtonClick("myFinances/buttonCircleAccountsOffer",!0),t.gotoEximee("KO","/web-ca24/home",null);break;case"v360-loans":a.registerButtonClick("myFinances/buttonCircleLoansOffer",!0),t.gotoEximee("GOT","/web-ca24/home",null);break;case"v360-cards":a.registerButtonClick("myFinances/buttonCircleCardsOffer",!0),t.gotoEximee("KK","/web-ca24/home",null);break;case"v360-savings":a.registerButtonClick("myFinances/buttonCircleSavingsOffer",!0),e.navigate(["/deposit-add"]);break;case"v360-funds":break;case"v360-insurances":a.registerButtonClick("myFinances/buttonCircleInsurancesOffer",!0),i||n.next()}})}initActiveGateHandler(){const t=this.insuranceAgreement,e=this.piwikService;$(document).on("ca.activegate"+this.state.eventNamespace,function(a,n){switch(n.class){case"v360-insurances":e.registerButtonClick("myFinances/buttonCircleInsurances",!0),t.next()}})}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(s.h),s.Mb(u.d),s.Mb(be.a),s.Mb(s.z),s.Mb(yt.b),s.Mb(me.a),s.Mb(i.d),s.Mb(Q.a),s.Mb(wt.a),s.Mb(M.a),s.Mb(L.c),s.Mb(he.a),s.Mb(W))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-my-finances-svg"],["","app-view360-my-finances-svg",""]],viewQuery:function(t,e){if(1&t&&s.Oc(fe,!0),2&t){let t;s.tc(t=s.ac())&&(e.svgView360=t.first)}},inputs:{myFinances:"myFinances"},outputs:{insuranceAgreement:"insuranceAgreement"},decls:4,vars:1,consts:[["id","view360"],["svgView360",""],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(s.bc(),s.Sb(0,"svg",0,1),s.Sb(2,"defs"),s.Ec(3,ge,1,9,"g",2),s.Rb(),s.Rb()),2&t&&(s.zb(3),s.jc("ngForOf",e.state.svgData))},directives:[d.l],encapsulation:2,changeDetection:0}),t})();var ye=a("d82w"),we=a("0E6W");function Se(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div",2),s.Sb(1,"div",3),s.Sb(2,"div",4),s.Nb(3,"p",5),s.dc(4,"translate"),s.Rb(),s.Sb(5,"button",6),s.Zb("click",function(e){return s.xc(t),s.cc(2).hideConsentMessage(e)}),s.Rb(),s.Rb(),s.Rb()}2&t&&(s.jc("@expandCollapseAnimation",void 0),s.zb(3),s.jc("innerHTML",s.ec(4,2,"insurances.details.alerts.consent.given"),s.yc))}function Re(t,e){1&t&&(s.Qb(0),s.Sb(1,"div",7),s.Sb(2,"p",8),s.Gc(3),s.dc(4,"translate"),s.Rb(),s.Sb(5,"p",9),s.Gc(6),s.dc(7,"translate"),s.Rb(),s.Sb(8,"a",10),s.Sb(9,"span",11),s.Sb(10,"span",12),s.Gc(11),s.dc(12,"translate"),s.Rb(),s.Nb(13,"i",13),s.Rb(),s.Rb(),s.Rb(),s.Pb()),2&t&&(s.zb(3),s.Ic(" ",s.ec(4,4,"view360.myFinances.insurances.empty.title.label")," "),s.zb(3),s.Ic(" ",s.ec(7,6,"view360.myFinances.insurances.empty.prompt.label")," "),s.zb(2),s.jc("routerLink","/offer/products"),s.zb(3),s.Hc(s.ec(12,8,"view360.myFinances.insurances.empty.button.label")))}function Ce(t,e){1&t&&s.Nb(0,"i",21)}function Pe(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div",23),s.Sb(1,"a",29),s.Zb("click",function(){s.xc(t);const e=s.cc(2).$implicit;return s.cc(3).onInsurancePaymentClick(e.insurance)}),s.Gc(2),s.dc(3,"translate"),s.Rb(),s.Rb()}2&t&&(s.zb(2),s.Ic(" ",s.ec(3,1,"view360.myFinances.insurances.pay.button")," "))}function ze(t,e){if(1&t&&(s.Sb(0,"div",22),s.Sb(1,"div",23),s.Sb(2,"p",17),s.Gc(3),s.dc(4,"translate"),s.Rb(),s.Sb(5,"p",24),s.Sb(6,"span",25),s.Gc(7),s.dc(8,"amount"),s.Rb(),s.Gc(9,"\xa0"),s.Sb(10,"span",26),s.Gc(11),s.Rb(),s.Rb(),s.Sb(12,"p",27),s.Gc(13),s.dc(14,"appDate"),s.Rb(),s.Rb(),s.Ec(15,Pe,4,3,"div",28),s.Rb()),2&t){const t=s.cc().$implicit,e=s.cc(3);s.zb(3),s.Hc(s.ec(4,5,"view360.myFinances.insurances.nextPayment.label")),s.zb(4),s.Hc(s.ec(8,7,t.insurance.premiumAmount.amount)),s.zb(4),s.Hc(t.insurance.premiumAmount.currency),s.zb(2),s.Hc(s.ec(14,9,t.insurance.premiumPaymentDate)),s.zb(2),s.jc("ngIf",e.isPaymentDueWarning(t.insurance))}}function xe(t,e){1&t&&s.Nb(0,"i",21)}function Ae(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div",23),s.Sb(1,"a",29),s.Zb("click",function(){s.xc(t);const e=s.cc(2).$implicit;return s.cc(5).onInsurancePaymentClick(e)}),s.Gc(2),s.dc(3,"translate"),s.Rb(),s.Rb()}2&t&&(s.zb(2),s.Ic(" ",s.ec(3,1,"view360.myFinances.insurances.pay.button")," "))}function De(t,e){if(1&t&&(s.Sb(0,"div",22),s.Sb(1,"div",23),s.Sb(2,"p",17),s.Gc(3),s.dc(4,"translate"),s.Rb(),s.Sb(5,"p",24),s.Sb(6,"span",25),s.Gc(7),s.dc(8,"amount"),s.Rb(),s.Gc(9,"\xa0"),s.Sb(10,"span",26),s.Gc(11),s.Rb(),s.Rb(),s.Sb(12,"p",27),s.Gc(13),s.dc(14,"appDate"),s.Rb(),s.Rb(),s.Ec(15,Ae,4,3,"div",28),s.Rb()),2&t){const t=s.cc().$implicit,e=s.cc(5);s.zb(3),s.Hc(s.ec(4,5,"view360.myFinances.insurances.nextPayment.label")),s.zb(4),s.Hc(s.ec(8,7,t.premiumAmount.amount)),s.zb(4),s.Hc(t.premiumAmount.currency),s.zb(2),s.Hc(s.ec(14,9,t.premiumPaymentDate)),s.zb(2),s.jc("ngIf",e.isPaymentDueWarning(t))}}function ke(t,e){if(1&t){const t=s.Tb();s.Sb(0,"li",32),s.Sb(1,"a",16),s.Zb("click",function(){s.xc(t);const a=e.$implicit;return s.cc(5).onInsuranceClick(a)}),s.Sb(2,"p",17),s.Gc(3),s.Ec(4,xe,1,0,"i",18),s.Rb(),s.Sb(5,"p"),s.Gc(6),s.dc(7,"translate"),s.Sb(8,"strong"),s.Gc(9),s.dc(10,"dictValue"),s.Rb(),s.Rb(),s.Rb(),s.Ec(11,De,16,11,"div",19),s.Rb()}if(2&t){const t=e.$implicit,a=s.cc(5);s.zb(3),s.Ic(" ",a.getInsuranceName(t)," \xa0"),s.zb(1),s.jc("ngIf",a.isPaymentDueWarning(t)),s.zb(2),s.Ic("",s.ec(7,5,"view360.myFinances.insurances.status.label"),"\xa0"),s.zb(3),s.Hc(s.fc(10,7,t.insuranceStatusCode,"INSURANCE_STATUS")),s.zb(2),s.jc("ngIf",a.isPaymentSectionVisible(t))}}function Te(t,e){if(1&t&&(s.Sb(0,"ul",30),s.Ec(1,ke,12,10,"li",31),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(1),s.jc("ngForOf",t.children)}}function Oe(t,e){if(1&t){const t=s.Tb();s.Sb(0,"li"),s.Sb(1,"a",16),s.Zb("click",function(){s.xc(t);const a=e.$implicit;return s.cc(3).onInsuranceClick(a.insurance)}),s.Sb(2,"p",17),s.Gc(3),s.Ec(4,Ce,1,0,"i",18),s.Rb(),s.Sb(5,"p"),s.Gc(6),s.dc(7,"translate"),s.Sb(8,"strong"),s.Gc(9),s.dc(10,"dictValue"),s.Rb(),s.Rb(),s.Rb(),s.Ec(11,ze,16,11,"div",19),s.Ec(12,Te,2,1,"ul",20),s.Rb()}if(2&t){const t=e.$implicit,a=s.cc(3);s.zb(3),s.Ic(" ",a.getInsuranceName(t.insurance),"\xa0"),s.zb(1),s.jc("ngIf",a.isPaymentDueWarning(t.insurance)),s.zb(2),s.Ic("",s.ec(7,6,"view360.myFinances.insurances.status.label"),"\xa0"),s.zb(3),s.Hc(s.fc(10,8,t.insurance.insuranceStatusCode,"INSURANCE_STATUS")),s.zb(2),s.jc("ngIf",a.isPaymentSectionVisible(t.insurance)),s.zb(1),s.jc("ngIf",t.children.length>0)}}function Ne(t,e){if(1&t&&(s.Qb(0),s.Sb(1,"p"),s.Gc(2),s.dc(3,"translate"),s.Rb(),s.Sb(4,"ul",14),s.Ec(5,Oe,13,11,"li",15),s.Rb(),s.Pb()),2&t){const t=s.cc(2);s.zb(2),s.Hc(s.ec(3,2,"view360.myFinances.insurances.title.label")),s.zb(3),s.jc("ngForOf",t.state.data.insuranceTree)}}function Fe(t,e){if(1&t&&(s.Qb(0),s.Ec(1,Se,6,4,"div",1),s.Ec(2,Re,14,10,"ng-container",0),s.Ec(3,Ne,6,4,"ng-container",0),s.Pb()),2&t){const t=s.cc();s.zb(1),s.jc("ngIf",t.state.isConsentMessageShown),s.zb(1),s.jc("ngIf",0===t.state.data.insuranceTree.length),s.zb(1),s.jc("ngIf",t.state.data.insuranceTree.length>0)}}let Ie=(()=>{class t{constructor(t,e,a,n,i,c,s,o,r){this.productHelper=t,this.dictionaryService=e,this.router=a,this.systemParameterService=n,this.view360Service=i,this.insuranceHelper=c,this.routeDataService=s,this.modalAlertService=o,this.translateService=r,this.state={isConsentMessageShown:this.view360Service.getInsuranceConsentGivenRecently(),data:{insuranceAccessUserConsent:!1,insuranceList:[],insuranceTree:[]}}}ngOnInit(){this.state.data.insuranceAccessUserConsent=this.myFinances.filteredProductLists.insuranceList.insuranceAccessUserConsent,this.state.data.insuranceList=this.myFinances.filteredProductLists.insuranceList.insurances,this.state.data.insuranceTree=this.insuranceHelper.toInsuranceTree(this.myFinances.filteredProductLists.insuranceList.insurances)}hideConsentMessage(t){t.stopPropagation(),this.state.isConsentMessageShown=!1}getInsuranceName(t){return this.productHelper.getInsuranceName(t)}isPaymentDueWarning(t){return t.insuranceStatusCode===this.systemParameterService.getWebInsuranceStatusPaymentEnable()}isPaymentSectionVisible(t){return t.premiumAmount&&t.premiumPaymentDate}onInsuranceClick(t){this.router.navigate(["products/insurances",t.id])}onInsurancePaymentClick(t){this.modalAlertService.showWarningOkCancel("",this.translateService.instant("view360.myFinances.insurances.alert.pay.message"),"",this.translateService.instant("view360.myFinances.insurances.alert.pay.ok.button")).subscribe(e=>{if(e){const e=this.dictionaryService.getEntryValue("INSURANCE_COMPANY_IDENTIFIER",t.insuranceCompanyCode);this.routeDataService.navigateWithRouteData(Ht.a.insurancePayment,{creditAcc:t.nrbNumber,beneficiaryName:e,title:t.policyNumber,amount:t.premiumAmount.amount,currency:t.premiumAmount.currency},["/transfers/european"])}})}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(_.a),s.Mb(H.a),s.Mb(i.d),s.Mb(M.a),s.Mb(W),s.Mb(ye.a),s.Mb(Ht.b),s.Mb(yt.b),s.Mb(u.d))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-my-finances-insurances"],["","app-view360-my-finances-insurances",""]],inputs:{myFinances:"myFinances"},decls:1,vars:1,consts:[[4,"ngIf"],["class","py-4",4,"ngIf"],[1,"py-4"],[1,"alert","alert-success","my-0"],[1,"alert-inner"],[1,"m-0",3,"innerHTML"],["type","button",1,"ca","ca-close",3,"click"],[1,"mt-x2"],[1,"h4","color-header","mb-3"],[1,"font-400","mb-x2"],[1,"banner-bar","small-text","icon-left","bg-insurance",3,"routerLink"],[1,"banner-inner",2,"text-decoration","none !important"],[1,"label",2,"text-decoration","none !important"],[1,"ca","ca-menu-ubezpieczenia",2,"font-size","2.75rem","margin","-0.5rem 0"],[1,"acc-tree2"],[4,"ngFor","ngForOf"],["href","javascript:void(null);",1,"acc",3,"click"],[1,"name"],["class","ca ca-ostrzezenie3 font-300",4,"ngIf"],["class","row my-2 no-gutters",4,"ngIf"],["class","acc-tree2 mt-2",4,"ngIf"],[1,"ca","ca-ostrzezenie3","font-300"],[1,"row","my-2","no-gutters"],[1,"col-12","col-lg-6"],[1,"amount"],[1,"number"],[1,"currency"],[1,"due"],["class","col-12 col-lg-6",4,"ngIf"],["href","javascript:void(null);",1,"btn","btn-primary",3,"click"],[1,"acc-tree2","mt-2"],["class","pending",4,"ngFor","ngForOf"],[1,"pending"]],template:function(t,e){1&t&&s.Ec(0,Fe,4,3,"ng-container",0),2&t&&s.jc("ngIf",e.state.data.insuranceAccessUserConsent)},directives:[d.m,i.g,d.l],pipes:[u.c,we.a,y.a,Mt.a],encapsulation:2,data:{animation:[m.a]}}),t})();var Le=a("QuwU");function Ee(t,e){if(1&t&&(s.Sb(0,"p",8),s.Sb(1,"span",1),s.Gc(2),s.dc(3,"amount"),s.Rb(),s.Gc(4,"\xa0"),s.Sb(5,"span",2),s.Gc(6),s.Rb(),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(2),s.Hc(s.ec(3,2,t.amount)),s.zb(4),s.Hc(t.currency)}}function je(t,e){if(1&t&&(s.Qb(0),s.Ec(1,Ee,7,4,"p",7),s.Pb()),2&t){const t=e.index;s.zb(1),s.jc("ngIf",t>0)}}function He(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div",19),s.Sb(1,"a",20),s.Zb("click",function(){s.xc(t);const e=s.cc(2).$implicit;return s.cc().onCardRepaymentClick(e)}),s.Gc(2),s.dc(3,"translate"),s.Rb(),s.Rb()}2&t&&(s.zb(1),s.jc("appPiwikClickable","myFinances/buttonCards"),s.zb(1),s.Ic(" ",s.ec(3,2,"view360.myFinances.cards.repay.button")," "))}function Ge(t,e){if(1&t&&(s.Qb(0),s.Sb(1,"div",14),s.Sb(2,"div",15),s.Sb(3,"p",10),s.Gc(4),s.dc(5,"translate"),s.Rb(),s.Sb(6,"p",16),s.Gc(7),s.dc(8,"appDate"),s.Rb(),s.Rb(),s.Sb(9,"div",15),s.Sb(10,"p",10),s.Gc(11),s.dc(12,"translate"),s.Rb(),s.Sb(13,"p",17),s.Sb(14,"span",1),s.Gc(15),s.dc(16,"amount"),s.Rb(),s.Gc(17,"\xa0"),s.Sb(18,"span",2),s.Gc(19),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Ec(20,He,4,4,"div",18),s.Pb()),2&t){const t=s.cc().$implicit,e=s.cc();s.zb(4),s.Hc(s.ec(5,6,"view360.myFinances.cards.repaymentDate.label")),s.zb(3),s.Hc(s.ec(8,8,t.lastStmtRepaymentDueDate)),s.zb(4),s.Hc(s.ec(12,10,"view360.myFinances.cards.repayment.label")),s.zb(4),s.Hc(s.ec(16,12,t.lastStmtRequiredMinRepayment.amount)),s.zb(4),s.Hc(t.lastStmtRequiredMinRepayment.currency),s.zb(1),s.jc("ngIf",e.isRepaymentVisible(t))}}function Me(t,e){if(1&t){const t=s.Tb();s.Sb(0,"li"),s.Sb(1,"a",9),s.Zb("click",function(){s.xc(t);const a=e.$implicit;return s.cc().onCreditCardAccountClick(a.nrbNumber)}),s.Sb(2,"p",10),s.Gc(3),s.Rb(),s.Nb(4,"p",11),s.dc(5,"nrbDecorated"),s.Sb(6,"p",12),s.Sb(7,"span",1),s.Gc(8),s.dc(9,"amount"),s.Rb(),s.Gc(10,"\xa0"),s.Sb(11,"span",2),s.Gc(12),s.Rb(),s.Rb(),s.Rb(),s.Ec(13,Ge,21,14,"ng-container",13),s.Rb()}if(2&t){const t=e.$implicit,a=s.cc();s.zb(1),s.jc("appPiwikClickable","myFinances/buttonCards"),s.zb(2),s.Hc(a.getCreditCardAccountName(t)),s.zb(1),s.jc("innerHTML",s.ec(5,6,t.nrbNumber),s.yc),s.zb(4),s.Hc(s.ec(9,8,t.availFunds.amount)),s.zb(4),s.Hc(t.availFunds.currency),s.zb(1),s.jc("ngIf",t.lastStmtRepaymentDueDate&&t.lastStmtRequiredMinRepayment)}}let Ve=(()=>{class t{constructor(t,e,a,n,i){this.router=t,this.productHelper=e,this.routeDataService=a,this.modalAlertService=n,this.permissionService=i,this.state={data:{creditCardAccountSummary:[],creditCardAccountList:[],creditCardAccountDetailsList:[]}}}ngOnInit(){this.state.data.creditCardAccountSummary=this.myFinances.creditCardAccountSummary,this.state.data.creditCardAccountList=this.myFinances.filteredProductLists.creditCardAccountList,this.state.data.creditCardAccountDetailsList=this.myFinances.filteredProductLists.creditCardAccountDetailsList}getCreditCardAccountName(t){return this.productHelper.getCreditCardAccountName(t)}onCreditCardAccountClick(t){this.router.navigate(["products/cards",t])}isRepaymentVisible(t){const e=this.state.data.creditCardAccountList.find(e=>e.nrbNumber===t.nrbNumber);return!!this.permissionService.hasCreditCardAccountActiveAccess()&&e.accountFlags.indexOf("CREDIT_CARD_REPAYMENT_CREDIT")>=0}onCardRepaymentClick(t){this.routeDataService.navigateWithRouteData(Ht.a.creditCardOrLoanRepayment,{creditAcc:t.nrbNumber,amount:null,repaymentType:Gt.b.CC_ANY,isLoanRepayment:!1},["/transfers/repayment"])}showNextStageInfo(){this.modalAlertService.showNextStageInfo()}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(i.d),s.Mb(_.a),s.Mb(Ht.b),s.Mb(yt.b),s.Mb(Q.a))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-my-finances-cards"],["","app-view360-my-finances-cards",""]],inputs:{myFinances:"myFinances"},decls:15,vars:9,consts:[[1,"amount-lg"],[1,"number"],[1,"currency"],[4,"ngFor","ngForOf"],[1,"acc-tree2"],[1,"banner"],["placeholderId","START_4_1"],["class","amount-sm",4,"ngIf"],[1,"amount-sm"],["href","javascript:void(null);",1,"acc",3,"appPiwikClickable","click"],[1,"name"],[1,"number","account-number",3,"innerHTML"],[1,"amount"],[4,"ngIf"],[1,"row","my-2"],[1,"col-12","col-lg-6"],[1,"due"],[1,"amount-xs"],["class","text-center mt-2",4,"ngIf"],[1,"text-center","mt-2"],["href","javascript:void(null);",1,"btn","btn-primary",3,"appPiwikClickable","click"]],template:function(t,e){1&t&&(s.Sb(0,"p"),s.Gc(1),s.dc(2,"translate"),s.Rb(),s.Sb(3,"p",0),s.Sb(4,"span",1),s.Gc(5),s.dc(6,"amount"),s.Rb(),s.Gc(7,"\xa0"),s.Sb(8,"span",2),s.Gc(9),s.Rb(),s.Rb(),s.Ec(10,je,2,1,"ng-container",3),s.Sb(11,"ul",4),s.Ec(12,Me,14,10,"li",3),s.Rb(),s.Sb(13,"div",5),s.Nb(14,"app-banner",6),s.Rb()),2&t&&(s.zb(1),s.Hc(s.ec(2,5,"view360.myFinances.cards.title.label")),s.zb(4),s.Hc(s.ec(6,7,e.state.data.creditCardAccountSummary[0].amount)),s.zb(4),s.Hc(e.state.data.creditCardAccountSummary[0].currency),s.zb(1),s.jc("ngForOf",e.state.data.creditCardAccountSummary),s.zb(2),s.jc("ngForOf",e.state.data.creditCardAccountDetailsList))},directives:[d.l,Le.a,d.m,At.a],pipes:[u.c,y.a,kt.a,Mt.a],encapsulation:2,changeDetection:0}),t})();function $e(t,e){if(1&t&&(s.Sb(0,"p",8),s.Sb(1,"span",1),s.Gc(2),s.dc(3,"amount"),s.Rb(),s.Gc(4,"\xa0"),s.Sb(5,"span",2),s.Gc(6),s.Rb(),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(2),s.Hc(s.ec(3,2,t.amount)),s.zb(4),s.Hc(t.currency)}}function _e(t,e){if(1&t&&(s.Qb(0),s.Ec(1,$e,7,4,"p",7),s.Pb()),2&t){const t=e.index;s.zb(1),s.jc("ngIf",t>0)}}function Be(t,e){1&t&&s.Nb(0,"i",16)}function Ue(t,e){if(1&t&&(s.Nb(0,"p",17),s.dc(1,"nrbDecorated")),2&t){const t=s.cc().$implicit;s.jc("innerHTML",s.ec(1,1,t.loan.nrbNumber),s.yc)}}function Ye(t,e){if(1&t&&(s.Nb(0,"p",17),s.dc(1,"nrbShort")),2&t){const t=s.cc().$implicit;s.jc("innerHTML",s.ec(1,1,t.loan.nrbNumber),s.yc)}}function Qe(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div",19),s.Sb(1,"a",22),s.Zb("click",function(){s.xc(t);const e=s.cc(2).$implicit;return s.cc().onLoanRepaymentClick(e.loan)}),s.Gc(2),s.dc(3,"translate"),s.Rb(),s.Rb()}2&t&&(s.zb(1),s.jc("appPiwikClickable","myFinances/buttonLoans"),s.zb(1),s.Ic(" ",s.ec(3,2,"view360.myFinances.loans.pay.button")," "))}function We(t,e){if(1&t&&(s.Qb(0),s.Sb(1,"div",18),s.Sb(2,"div",19),s.Sb(3,"p",10),s.Gc(4),s.dc(5,"translate"),s.Rb(),s.Sb(6,"p",13),s.Sb(7,"span",1),s.Gc(8),s.dc(9,"amount"),s.Rb(),s.Gc(10,"\xa0"),s.Sb(11,"span",2),s.Gc(12),s.Rb(),s.Rb(),s.Sb(13,"p",20),s.Gc(14),s.dc(15,"appDate"),s.Rb(),s.Rb(),s.Ec(16,Qe,4,4,"div",21),s.Rb(),s.Pb()),2&t){const t=s.cc().$implicit,e=s.cc();s.zb(4),s.Hc(s.ec(5,5,e.isRevlPartnerLoan(t.loan.productTypeCode)?"view360.myFinances.loans.installment.revl.label":e.isInformingList(t.loan.productTypeCode)?"view360.myFinances.loans.installment.informingList.label":"view360.myFinances.loans.installment.label")),s.zb(4),s.Hc(s.ec(9,7,t.loan.nextPayAmount.amount)),s.zb(4),s.Hc(t.loan.nextPayAmount.currency),s.zb(2),s.Hc(s.ec(15,9,t.loan.nextPayDate)),s.zb(2),s.jc("ngIf",e.isRepaymentButtonVisible(t.loan))}}function Ze(t,e){1&t&&s.Nb(0,"i",16)}function Ke(t,e){if(1&t&&(s.Nb(0,"p",17),s.dc(1,"nrbDecorated")),2&t){const t=s.cc().$implicit;s.jc("innerHTML",s.ec(1,1,t.nrbNumber),s.yc)}}function Je(t,e){if(1&t&&(s.Nb(0,"p",17),s.dc(1,"nrbShort")),2&t){const t=s.cc().$implicit;s.jc("innerHTML",s.ec(1,1,t.nrbNumber),s.yc)}}function qe(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div",19),s.Sb(1,"a",22),s.Zb("click",function(){s.xc(t);const e=s.cc(2).$implicit;return s.cc(3).onLoanRepaymentClick(e)}),s.Gc(2),s.dc(3,"translate"),s.Rb(),s.Rb()}2&t&&(s.zb(1),s.jc("appPiwikClickable","myFinances/buttonLoans"),s.zb(1),s.Ic(" ",s.ec(3,2,"view360.myFinances.loans.pay.button")," "))}function Xe(t,e){if(1&t&&(s.Qb(0),s.Sb(1,"div",18),s.Sb(2,"div",19),s.Sb(3,"p",10),s.Gc(4),s.dc(5,"translate"),s.Rb(),s.Sb(6,"p",13),s.Sb(7,"span",1),s.Gc(8),s.dc(9,"amount"),s.Rb(),s.Gc(10,"\xa0"),s.Sb(11,"span",2),s.Gc(12),s.Rb(),s.Rb(),s.Sb(13,"p",20),s.Gc(14),s.dc(15,"appDate"),s.Rb(),s.Rb(),s.Ec(16,qe,4,4,"div",21),s.Rb(),s.Pb()),2&t){const t=s.cc().$implicit,e=s.cc(3);s.zb(4),s.Hc(s.ec(5,5,e.isRevlPartnerLoan(t.productTypeCode)?"view360.myFinances.loans.installment.revl.label":e.isInformingList(t.productTypeCode)?"view360.myFinances.loans.installment.informingList.label":"view360.myFinances.loans.installment.label")),s.zb(4),s.Hc(s.ec(9,7,t.nextPayAmount.amount)),s.zb(4),s.Hc(t.nextPayAmount.currency),s.zb(2),s.Hc(s.ec(15,9,t.nextPayDate)),s.zb(2),s.jc("ngIf",e.isRepaymentButtonVisible(t))}}function ta(t,e){if(1&t){const t=s.Tb();s.Sb(0,"li"),s.Sb(1,"a",9),s.Zb("click",function(){s.xc(t);const a=e.$implicit;return s.cc(3).onLoanClick(a.nrbNumber)}),s.Sb(2,"p",10),s.Gc(3),s.Ec(4,Ze,1,0,"i",11),s.Rb(),s.Ec(5,Ke,2,3,"p",12),s.Ec(6,Je,2,3,"p",12),s.Sb(7,"p",13),s.Sb(8,"span",1),s.Gc(9),s.dc(10,"amount"),s.Rb(),s.Gc(11,"\xa0"),s.Sb(12,"span",2),s.Gc(13),s.Rb(),s.Rb(),s.Rb(),s.Ec(14,Xe,17,11,"ng-container",14),s.Rb()}if(2&t){const t=e.$implicit,a=s.cc(3);s.zb(1),s.jc("appPiwikClickable","myFinances/buttonLoans"),s.zb(2),s.Ic("",a.getLoanName(t)," "),s.zb(1),s.jc("ngIf",a.isDueBalanceWarning(t)),s.zb(1),s.jc("ngIf",!a.isShortNrb(t)),s.zb(1),s.jc("ngIf",a.isShortNrb(t)),s.zb(3),s.Hc(s.ec(10,8,t.bookBalance.amount)),s.zb(4),s.Hc(t.bookBalance.currency),s.zb(1),s.jc("ngIf",a.isRepaymentSectionVisible(t))}}function ea(t,e){if(1&t&&(s.Sb(0,"ul",4),s.Ec(1,ta,15,10,"li",3),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(1),s.jc("ngForOf",t.children)}}function aa(t,e){if(1&t){const t=s.Tb();s.Sb(0,"li"),s.Sb(1,"a",9),s.Zb("click",function(){s.xc(t);const a=e.$implicit;return s.cc().onLoanClick(a.loan.nrbNumber)}),s.Sb(2,"p",10),s.Gc(3),s.Ec(4,Be,1,0,"i",11),s.Rb(),s.Ec(5,Ue,2,3,"p",12),s.Ec(6,Ye,2,3,"p",12),s.Sb(7,"p",13),s.Sb(8,"span",1),s.Gc(9),s.dc(10,"amount"),s.Rb(),s.Gc(11,"\xa0"),s.Sb(12,"span",2),s.Gc(13),s.Rb(),s.Rb(),s.Rb(),s.Ec(14,We,17,11,"ng-container",14),s.Ec(15,ea,2,1,"ul",15),s.Rb()}if(2&t){const t=e.$implicit,a=s.cc();s.zb(1),s.jc("appPiwikClickable","myFinances/buttonLoans"),s.zb(2),s.Ic("",a.getLoanName(t.loan)," "),s.zb(1),s.jc("ngIf",a.isDueBalanceWarning(t.loan)),s.zb(1),s.jc("ngIf",!a.isShortNrb(t.loan)),s.zb(1),s.jc("ngIf",a.isShortNrb(t.loan)),s.zb(3),s.Hc(s.ec(10,9,t.loan.bookBalance.amount)),s.zb(4),s.Hc(t.loan.bookBalance.currency),s.zb(1),s.jc("ngIf",a.isRepaymentSectionVisible(t.loan)),s.zb(1),s.jc("ngIf",t.children.length>0)}}let na=(()=>{class t{constructor(t,e,a,n,i,c,s){this.router=t,this.productHelper=e,this.loanHelper=a,this.routeDataService=n,this.modalAlertService=i,this.permissionService=c,this.systemParameterService=s,this.state={data:{loanSummary:[],loanList:[],loanTree:[]}}}ngOnInit(){this.state.data.loanSummary=this.myFinances.loanSummary,this.state.data.loanList=this.myFinances.filteredProductLists.loanList,this.state.data.loanTree=this.loanHelper.toView360LoanTree(this.myFinances.filteredProductLists.loanList)}getLoanName(t){return this.productHelper.getLoanName(t)}onLoanClick(t){this.router.navigate(["products/loans",t])}isRepaymentSectionVisible(t){return this.loanHelper.isRepaymentSectionVisible(t)}isRepaymentButtonVisible(t){const e=this.state.data.loanList.find(e=>e.nrbNumber===t.nrbNumber);return!!this.systemParameterService.getLoanDetailsRepaymentEnable().includes(e.productTypeCategoryCode)&&!!this.permissionService.hasLoanActiveAccess()&&e.loanFlags.indexOf("LOAN_REPAYMENT")>=0}onLoanRepaymentClick(t){this.routeDataService.navigateWithRouteData(Ht.a.creditCardOrLoanRepayment,{creditAcc:t.nrbNumber,amount:null,repaymentType:Gt.b.LO_CURRENT_REPAYMENT,isLoanRepayment:!0},["/transfers/repayment"])}showNextStageInfo(){this.modalAlertService.showNextStageInfo()}isDueBalanceWarning(t){return t.dueBalance&&0!==t.dueBalance.amount}isRevlPartnerLoan(t){return this.loanHelper.isRevlPartnerLoan(t)}isShortNrb(t){return t.loanFlags.includes("LOAN_CASH_DETAILS_DISABLE")}isInformingList(t){return this.loanHelper.isInformingList(t)}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(i.d),s.Mb(_.a),s.Mb(Qt.a),s.Mb(Ht.b),s.Mb(yt.b),s.Mb(Q.a),s.Mb(M.a))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-my-finances-loans"],["","app-view360-my-finances-loans",""]],inputs:{myFinances:"myFinances"},decls:15,vars:9,consts:[[1,"amount-lg"],[1,"number"],[1,"currency"],[4,"ngFor","ngForOf"],[1,"acc-tree2"],[1,"banner"],["placeholderId","START_5_1"],["class","amount-sm",4,"ngIf"],[1,"amount-sm"],["href","javascript:void(null);",1,"acc",3,"appPiwikClickable","click"],[1,"name"],["class","ca ca-ostrzezenie3 font-300",4,"ngIf"],["class","number account-number",3,"innerHTML",4,"ngIf"],[1,"amount"],[4,"ngIf"],["class","acc-tree2",4,"ngIf"],[1,"ca","ca-ostrzezenie3","font-300"],[1,"number","account-number",3,"innerHTML"],[1,"row","my-2","no-gutters"],[1,"col-12","col-lg-6"],[1,"due"],["class","col-12 col-lg-6",4,"ngIf"],["href","javascript:void(null);",1,"btn","btn-primary",3,"appPiwikClickable","click"]],template:function(t,e){1&t&&(s.Sb(0,"p"),s.Gc(1),s.dc(2,"translate"),s.Rb(),s.Sb(3,"p",0),s.Sb(4,"span",1),s.Gc(5),s.dc(6,"amount"),s.Rb(),s.Gc(7,"\xa0"),s.Sb(8,"span",2),s.Gc(9),s.Rb(),s.Rb(),s.Ec(10,_e,2,1,"ng-container",3),s.Sb(11,"ul",4),s.Ec(12,aa,16,11,"li",3),s.Rb(),s.Sb(13,"div",5),s.Nb(14,"app-banner",6),s.Rb()),2&t&&(s.zb(1),s.Hc(s.ec(2,5,"view360.myFinances.loans.title.label")),s.zb(4),s.Hc(s.ec(6,7,e.state.data.loanSummary[0].amount)),s.zb(4),s.Hc(e.state.data.loanSummary[0].currency),s.zb(1),s.jc("ngForOf",e.state.data.loanSummary),s.zb(2),s.jc("ngForOf",e.state.data.loanTree))},directives:[d.l,Le.a,d.m,At.a],pipes:[u.c,y.a,kt.a,Wt.a,Mt.a],encapsulation:2,changeDetection:0}),t})();var ia=a("NAEP");function ca(t,e){if(1&t&&(s.Sb(0,"p",9),s.Sb(1,"span",1),s.Gc(2),s.dc(3,"amount"),s.Rb(),s.Gc(4,"\xa0"),s.Sb(5,"span",2),s.Gc(6),s.Rb(),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(2),s.Hc(s.ec(3,2,t.amount)),s.zb(4),s.Hc(t.currency)}}function sa(t,e){if(1&t&&(s.Qb(0,9),s.Ec(1,ca,7,4,"p",10),s.Pb()),2&t){const t=e.index;s.zb(1),s.jc("ngIf",t>0)}}function oa(t,e){if(1&t){const t=s.Tb();s.Sb(0,"li",24),s.Sb(1,"a",25),s.Zb("click",function(){s.xc(t);const a=e.$implicit;return s.cc(4).onAccountClick(a.account.nrbNumber)}),s.Sb(2,"div",26),s.Nb(3,"div",27),s.Sb(4,"div",28),s.Sb(5,"div",12),s.Gc(6),s.Rb(),s.Nb(7,"div",29),s.dc(8,"nrbDecorated"),s.Sb(9,"div",14),s.Sb(10,"span",1),s.Gc(11),s.dc(12,"amount"),s.Rb(),s.Gc(13,"\xa0"),s.Sb(14,"span",2),s.Gc(15),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb()}if(2&t){const t=e.$implicit;s.zb(1),s.jc("appPiwikClickable","myFinances/buttonAccounts"),s.zb(5),s.Hc(t.account.productName),s.zb(1),s.jc("innerHTML",s.ec(8,5,t.account.nrbNumber),s.yc),s.zb(4),s.Hc(s.ec(12,7,t.account.availFunds.amount)),s.zb(4),s.Hc(t.account.availFunds.currency)}}function ra(t,e){if(1&t&&(s.Sb(0,"p",14),s.Sb(1,"span",1),s.Gc(2),s.dc(3,"amount"),s.Rb(),s.Gc(4,"\xa0"),s.Sb(5,"span",2),s.Gc(6),s.Rb(),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(2),s.Hc(s.ec(3,2,null==t.availFunds?null:t.availFunds.amount)),s.zb(4),s.Hc(null==t.availFunds?null:t.availFunds.currency)}}function la(t,e){if(1&t&&(s.Sb(0,"span",2),s.Gc(1),s.Rb()),2&t){const t=e.$implicit,a=e.index,n=s.cc().$implicit;s.zb(1),s.Jc("",t,"",a===n.currencies.length-1?"":", ","")}}function da(t,e){if(1&t&&(s.Sb(0,"li",17),s.Sb(1,"ul",18),s.Ec(2,oa,16,9,"li",19),s.Rb(),s.Sb(3,"button",20),s.Sb(4,"p",12),s.Gc(5),s.Sb(6,"span",21),s.Gc(7),s.Rb(),s.Rb(),s.Ec(8,ra,7,4,"p",22),s.Sb(9,"p",14),s.Ec(10,la,2,2,"span",23),s.Rb(),s.Rb(),s.Rb()),2&t){const t=e.$implicit;s.zb(2),s.jc("ngForOf",t.children),s.zb(3),s.Hc(t.name),s.zb(2),s.Ic(" (",t.children.length,")"),s.zb(1),s.jc("ngIf","FOREIGN"!==t.type),s.zb(2),s.jc("ngForOf",t.currencies)}}function ua(t,e){if(1&t){const t=s.Tb();s.Sb(0,"li"),s.Sb(1,"a",11),s.Zb("click",function(){s.xc(t);const a=e.$implicit;return s.cc(3).onAccountClick(a.account.nrbNumber)}),s.Sb(2,"p",12),s.Gc(3),s.Rb(),s.Nb(4,"p",13),s.dc(5,"nrbDecorated"),s.Sb(6,"p",14),s.Sb(7,"span",1),s.Gc(8),s.dc(9,"amount"),s.Rb(),s.Gc(10,"\xa0"),s.Sb(11,"span",2),s.Gc(12),s.Rb(),s.Rb(),s.Rb(),s.Rb()}if(2&t){const t=e.$implicit;s.zb(1),s.jc("appPiwikClickable","myFinances/buttonAccounts"),s.zb(2),s.Hc(t.account.productName),s.zb(1),s.jc("innerHTML",s.ec(5,5,t.account.nrbNumber),s.yc),s.zb(4),s.Hc(s.ec(9,7,t.account.availFunds.amount)),s.zb(4),s.Hc(t.account.availFunds.currency)}}function pa(t,e){if(1&t&&(s.Sb(0,"ul",4),s.Ec(1,da,11,5,"li",16),s.Ec(2,ua,13,9,"li",5),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(1),s.jc("ngForOf",t.groups),s.zb(1),s.jc("ngForOf",t.children)}}function ba(t,e){if(1&t){const t=s.Tb();s.Sb(0,"li"),s.Sb(1,"a",11),s.Zb("click",function(){s.xc(t);const a=e.$implicit;return s.cc().onAccountClick(a.account.nrbNumber)}),s.Sb(2,"p",12),s.Gc(3),s.Rb(),s.Nb(4,"p",13),s.dc(5,"nrbDecorated"),s.Sb(6,"p",14),s.Sb(7,"span",1),s.Gc(8),s.dc(9,"amount"),s.Rb(),s.Gc(10,"\xa0"),s.Sb(11,"span",2),s.Gc(12),s.Rb(),s.Rb(),s.Rb(),s.Ec(13,pa,3,2,"ul",15),s.Rb()}if(2&t){const t=e.$implicit;s.zb(1),s.jc("appPiwikClickable","myFinances/buttonAccounts"),s.zb(2),s.Hc(t.account.productName),s.zb(1),s.jc("innerHTML",s.ec(5,6,t.account.nrbNumber),s.yc),s.zb(4),s.Hc(s.ec(9,8,t.account.availFunds.amount)),s.zb(4),s.Hc(t.account.availFunds.currency),s.zb(1),s.jc("ngIf",t.groups.length>0||t.children.length>0)}}function ma(t,e){1&t&&(s.Sb(0,"div",30),s.Sb(1,"a",31),s.Sb(2,"span"),s.Gc(3),s.dc(4,"translate"),s.Rb(),s.Rb(),s.Rb()),2&t&&(s.zb(1),s.jc("routerLink","/products/accounts"),s.zb(2),s.Hc(s.ec(4,2,"view360.myFinances.accounts.fullList.link")))}let ha=(()=>{class t{constructor(t,e){this.accountHelper=t,this.router=e,this.state={showMore:!1,data:{accountSummary:[],accountTree:[]}}}ngOnInit(){this.state.data.accountSummary=this.myFinances.accountSummary,this.state.data.accountTree=this.accountHelper.toView360AccountEntryDTOTreeSorted(this.myFinances.filteredProductLists.accountList,this.myFinances.defaultProduct&&"ACCOUNT"===this.myFinances.defaultProduct.type?this.myFinances.defaultProduct.nrbNumber:null),this.state.showMore=this.state.data.accountTree&&this.myFinances.filteredProductLists.accountList.length!==this.accountHelper.flattenView360AccountEntryDTOTree(this.state.data.accountTree).length}onAccountClick(t){this.router.navigate(["products/accounts",t])}navigateTo(t){this.router.navigate([t])}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(ia.a),s.Mb(i.d))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-my-finances-accounts"],["","app-view360-my-finances-accounts",""]],inputs:{myFinances:"myFinances"},decls:16,vars:10,consts:[[1,"amount-lg"],[1,"number"],[1,"currency"],["class","amount-sm",4,"ngFor","ngForOf"],[1,"acc-tree2"],[4,"ngFor","ngForOf"],["class","text-right mt-4 mt-md-2 mb-5",4,"ngIf"],[1,"banner"],["placeholderId","START_3_1"],[1,"amount-sm"],["class","amount-sm",4,"ngIf"],["href","javascript:void(null);",1,"acc",3,"appPiwikClickable","click"],[1,"name"],[1,"number","account-number",3,"innerHTML"],[1,"amount"],["class","acc-tree2",4,"ngIf"],["class","dropdown-accounts",4,"ngFor","ngForOf"],[1,"dropdown-accounts"],["aria-labelledby","helperAccountsButton-dummyNumber","x-placement","bottom-start",1,"dropdown-menu",2,"position","absolute","will-change","transform","top","0px","left","0px","transform","translate3d(32px, 64px, 0px)"],["class","dropdown-item",4,"ngFor","ngForOf"],["data-toggle","dropdown","id","helperAccountsButton-dummyNumber","aria-expanded","false",1,"acc"],[1,"font-400"],["class","amount",4,"ngIf"],["class","currency",4,"ngFor","ngForOf"],[1,"dropdown-item"],["href","javascript:void(null);",3,"appPiwikClickable","click"],[1,"account"],[1,"account-type","account-type1"],[1,"account-inner"],[1,"account-number",3,"innerHTML"],[1,"text-right","mt-4","mt-md-2","mb-5"],["href","javascript:void(null);",1,"text-link-sm",3,"routerLink"]],template:function(t,e){1&t&&(s.Sb(0,"p"),s.Gc(1),s.dc(2,"translate"),s.Rb(),s.Sb(3,"p",0),s.Sb(4,"span",1),s.Gc(5),s.dc(6,"amount"),s.Rb(),s.Gc(7,"\xa0"),s.Sb(8,"span",2),s.Gc(9),s.Rb(),s.Rb(),s.Ec(10,sa,2,1,"ng-container",3),s.Sb(11,"ul",4),s.Ec(12,ba,14,10,"li",5),s.Rb(),s.Ec(13,ma,5,4,"div",6),s.Sb(14,"div",7),s.Nb(15,"app-banner",8),s.Rb()),2&t&&(s.zb(1),s.Ic(" ",s.ec(2,6,"view360.myFinances.accounts.title.label"),"\n"),s.zb(4),s.Hc(s.ec(6,8,e.state.data.accountSummary[0].amount)),s.zb(4),s.Hc(e.state.data.accountSummary[0].currency),s.zb(1),s.jc("ngForOf",e.state.data.accountSummary),s.zb(2),s.jc("ngForOf",e.state.data.accountTree),s.zb(1),s.jc("ngIf",e.state.showMore))},directives:[d.l,d.m,Le.a,At.a,i.g],pipes:[u.c,y.a,kt.a],encapsulation:2,changeDetection:0}),t})();function fa(t,e){if(1&t&&(s.Sb(0,"p",9),s.Sb(1,"span",1),s.Gc(2),s.dc(3,"amount"),s.Rb(),s.Gc(4,"\xa0"),s.Sb(5,"span",2),s.Gc(6),s.Rb(),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(2),s.Hc(s.ec(3,2,t.amount)),s.zb(4),s.Hc(t.currency)}}function ga(t,e){if(1&t&&(s.Qb(0),s.Ec(1,fa,7,4,"p",8),s.Pb()),2&t){const t=e.index;s.zb(1),s.jc("ngIf",t>0)}}function va(t,e){if(1&t&&(s.Sb(0,"p",13),s.Sb(1,"span",1),s.Gc(2),s.dc(3,"amount"),s.Rb(),s.Gc(4,"\xa0"),s.Sb(5,"span",2),s.Gc(6),s.Rb(),s.Rb()),2&t){const t=e.$implicit;s.zb(2),s.Hc(s.ec(3,2,t.amount)),s.zb(4),s.Hc(t.currency)}}function ya(t,e){if(1&t&&(s.Sb(0,"li"),s.Sb(1,"a",10),s.Sb(2,"p",11),s.Gc(3),s.dc(4,"translate"),s.Rb(),s.Ec(5,va,7,4,"p",12),s.Rb(),s.Rb()),2&t){const t=s.cc();s.zb(1),s.jc("routerLink","/products/savings/deposits")("appPiwikClickable","myFinances/buttonDeposits"),s.zb(2),s.Jc("",s.ec(4,5,"view360.myFinances.savings.deposits.label")," (",t.state.data.depositList.length,")"),s.zb(2),s.jc("ngForOf",t.state.data.savingDepositSummary)}}function wa(t,e){if(1&t&&(s.Sb(0,"p",13),s.Sb(1,"span",1),s.Gc(2),s.dc(3,"amount"),s.Rb(),s.Gc(4,"\xa0"),s.Sb(5,"span",2),s.Gc(6),s.Rb(),s.Rb()),2&t){const t=e.$implicit;s.zb(2),s.Hc(s.ec(3,2,t.amount)),s.zb(4),s.Hc(t.currency)}}function Sa(t,e){if(1&t&&(s.Sb(0,"li"),s.Sb(1,"a",10),s.Sb(2,"p",11),s.Gc(3),s.dc(4,"translate"),s.Rb(),s.Ec(5,wa,7,4,"p",12),s.Rb(),s.Rb()),2&t){const t=s.cc();s.zb(1),s.jc("routerLink","/products/savings/accounts")("appPiwikClickable","myFinances/buttonSavingAccounts"),s.zb(2),s.Jc("",s.ec(4,5,"view360.myFinances.savings.accounts.label")," (",t.state.data.savingAccountList.length,")"),s.zb(2),s.jc("ngForOf",t.state.data.savingAccountSummary)}}function Ra(t,e){if(1&t&&(s.Sb(0,"p",13),s.Sb(1,"span",1),s.Gc(2),s.dc(3,"amount"),s.Rb(),s.Gc(4,"\xa0"),s.Sb(5,"span",2),s.Gc(6),s.Rb(),s.Rb()),2&t){const t=e.$implicit;s.zb(2),s.Hc(s.ec(3,2,t.amount)),s.zb(4),s.Hc(t.currency)}}function Ca(t,e){if(1&t&&(s.Sb(0,"li"),s.Sb(1,"a",10),s.Sb(2,"p",11),s.Gc(3),s.dc(4,"translate"),s.Rb(),s.Ec(5,Ra,7,4,"p",12),s.Rb(),s.Rb()),2&t){const t=s.cc();s.zb(1),s.jc("routerLink","/products/savings/programs")("appPiwikClickable","myFinances/buttonSavingPrograms"),s.zb(2),s.Jc("",s.ec(4,5,"view360.myFinances.savings.programs.label")," (",t.state.data.savingProgramList.length,")"),s.zb(2),s.jc("ngForOf",t.state.data.savingProgramSummary)}}let Pa=(()=>{class t{constructor(t){this.modalAlertService=t,this.state={data:{savingSummary:[],depositList:[],savingAccountList:[],savingProgramList:[],savingDepositSummary:[],savingAccountSummary:[],savingProgramSummary:[]}}}ngOnInit(){this.state.data.savingSummary=this.myFinances.savingSummary,this.state.data.depositList=this.myFinances.filteredProductLists.depositList,this.state.data.savingAccountList=this.myFinances.filteredProductLists.savingAccountList,this.state.data.savingProgramList=this.myFinances.filteredProductLists.savingProgramList,this.state.data.savingDepositSummary=this.myFinances.savingDepositSummary,this.state.data.savingAccountSummary=this.myFinances.savingAccountSummary,this.state.data.savingProgramSummary=this.myFinances.savingProgramSummary}showNextStageInfo(){this.modalAlertService.showNextStageInfo()}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(yt.b))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-my-finances-savings"],["","app-view360-my-finances-savings",""]],inputs:{myFinances:"myFinances"},decls:17,vars:11,consts:[[1,"amount-lg"],[1,"number"],[1,"currency"],[4,"ngFor","ngForOf"],[1,"acc-tree2"],[4,"ngIf"],[1,"banner"],["placeholderId","START_6_1"],["class","amount-sm",4,"ngIf"],[1,"amount-sm"],["href","javascript:void(null);",1,"acc",3,"routerLink","appPiwikClickable"],[1,"name"],["class","amount",4,"ngFor","ngForOf"],[1,"amount"]],template:function(t,e){1&t&&(s.Sb(0,"p"),s.Gc(1),s.dc(2,"translate"),s.Rb(),s.Sb(3,"p",0),s.Sb(4,"span",1),s.Gc(5),s.dc(6,"amount"),s.Rb(),s.Gc(7,"\xa0"),s.Sb(8,"span",2),s.Gc(9),s.Rb(),s.Rb(),s.Ec(10,ga,2,1,"ng-container",3),s.Sb(11,"ul",4),s.Ec(12,ya,6,7,"li",5),s.Ec(13,Sa,6,7,"li",5),s.Ec(14,Ca,6,7,"li",5),s.Rb(),s.Sb(15,"div",6),s.Nb(16,"app-banner",7),s.Rb()),2&t&&(s.zb(1),s.Hc(s.ec(2,7,"view360.myFinances.savings.title.label")),s.zb(4),s.Hc(s.ec(6,9,e.state.data.savingSummary[0].amount)),s.zb(4),s.Hc(e.state.data.savingSummary[0].currency),s.zb(1),s.jc("ngForOf",e.state.data.savingSummary),s.zb(2),s.jc("ngIf",e.state.data.savingDepositSummary.length>0),s.zb(1),s.jc("ngIf",e.state.data.savingAccountSummary.length>0),s.zb(1),s.jc("ngIf",e.state.data.savingProgramSummary.length>0))},directives:[d.l,d.m,Le.a,i.g,At.a],pipes:[u.c,y.a],encapsulation:2,changeDetection:0}),t})();var za=a("cmCE"),xa=a("ANok");function Aa(t,e){if(1&t&&(s.Sb(0,"p",7),s.Sb(1,"span",2),s.Gc(2),s.dc(3,"amount"),s.Rb(),s.Gc(4,"\xa0"),s.Sb(5,"span",3),s.Gc(6),s.Rb(),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(2),s.Hc(s.ec(3,2,t.amount)),s.zb(4),s.Hc(t.currency)}}function Da(t,e){if(1&t&&(s.Qb(0),s.Ec(1,Aa,7,4,"p",6),s.Pb()),2&t){const t=e.index;s.zb(1),s.jc("ngIf",t>0)}}function ka(t,e){if(1&t){const t=s.Tb();s.Sb(0,"li"),s.Sb(1,"a",10),s.Zb("click",function(){s.xc(t);const a=e.$implicit;return s.cc(4).onProgramClick(a)}),s.Sb(2,"p",11),s.Gc(3),s.Rb(),s.Sb(4,"p",12),s.Gc(5),s.Rb(),s.Sb(6,"p",13),s.Sb(7,"span",2),s.Gc(8),s.dc(9,"amount"),s.Rb(),s.Gc(10,"\xa0"),s.Sb(11,"span",3),s.Gc(12),s.Rb(),s.Rb(),s.Rb(),s.Rb()}if(2&t){const t=e.$implicit,a=s.cc(4);s.zb(1),s.jc("appPiwikClickable","myFinances/buttonFunds"),s.zb(2),s.Hc(t.program.name),s.zb(2),s.Hc(a.getParticipationTypeName(t.program.registryTypeCode)),s.zb(3),s.Hc(s.ec(9,5,t.program.totalValue.amount)),s.zb(4),s.Hc(t.program.totalValue.currency)}}function Ta(t,e){if(1&t&&(s.Sb(0,"ul",5),s.Ec(1,ka,13,7,"li",4),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(1),s.jc("ngForOf",t.programsList)}}function Oa(t,e){if(1&t&&(s.Sb(0,"li"),s.Sb(1,"p",8),s.Gc(2),s.Rb(),s.Ec(3,Ta,2,1,"ul",9),s.Rb()),2&t){const t=e.$implicit;s.zb(2),s.Hc(t.umbrellaFund.name),s.zb(1),s.jc("ngIf",t.programsList.length>0)}}function Na(t,e){if(1&t&&(s.Qb(0),s.Sb(1,"p"),s.Gc(2),s.dc(3,"translate"),s.Rb(),s.Sb(4,"p",1),s.Sb(5,"span",2),s.Gc(6),s.dc(7,"amount"),s.Rb(),s.Gc(8,"\xa0"),s.Sb(9,"span",3),s.Gc(10),s.Rb(),s.Rb(),s.Ec(11,Da,2,1,"ng-container",4),s.Sb(12,"ul",5),s.Ec(13,Oa,4,2,"li",4),s.Rb(),s.Pb()),2&t){const t=s.cc();s.zb(2),s.Hc(s.ec(3,5,"view360.myFinances.funds.title.label")),s.zb(4),s.Hc(s.ec(7,7,null==t.state.data.fundSummary[0]?null:t.state.data.fundSummary[0].amount)),s.zb(4),s.Hc(null==t.state.data.fundSummary[0]?null:t.state.data.fundSummary[0].currency),s.zb(1),s.jc("ngForOf",t.state.data.fundSummary),s.zb(2),s.jc("ngForOf",t.state.data.fundsList)}}function Fa(t,e){if(1&t&&(s.Sb(0,"p",7),s.Sb(1,"span",2),s.Gc(2),s.dc(3,"amount"),s.Rb(),s.Gc(4,"\xa0"),s.Sb(5,"span",3),s.Gc(6),s.Rb(),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(2),s.Hc(s.ec(3,2,t.amount)),s.zb(4),s.Hc(t.currency)}}function Ia(t,e){if(1&t&&(s.Qb(0),s.Ec(1,Fa,7,4,"p",6),s.Pb()),2&t){const t=e.index;s.zb(1),s.jc("ngIf",t>0)}}function La(t,e){1&t&&s.Nb(0,"i",18)}function Ea(t,e){if(1&t&&(s.Sb(0,"p",13),s.Sb(1,"span",2),s.Gc(2),s.dc(3,"amount"),s.Rb(),s.Gc(4,"\xa0"),s.Sb(5,"span",3),s.Gc(6),s.Rb(),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(2),s.Hc(s.ec(3,2,t.investmentAmount.amount)),s.zb(4),s.Hc(t.investmentAmount.currency)}}function ja(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div",23),s.Sb(1,"a",24),s.Zb("click",function(){s.xc(t);const e=s.cc(2).$implicit;return s.cc(2).onStructuredProductPaymentClick(e)}),s.Gc(2),s.dc(3,"translate"),s.Rb(),s.Rb()}2&t&&(s.zb(2),s.Ic(" ",s.ec(3,1,"view360.myFinances.structuredProducts.pay.button")," "))}function Ha(t,e){if(1&t&&(s.Sb(0,"div"),s.Sb(1,"div",19),s.Sb(2,"div",20),s.Sb(3,"p",11),s.Gc(4),s.dc(5,"translate"),s.Rb(),s.Sb(6,"p",21),s.Gc(7),s.dc(8,"appDate"),s.Rb(),s.Sb(9,"p",13),s.Sb(10,"span",2),s.Gc(11),s.dc(12,"amount"),s.Rb(),s.Gc(13,"\xa0"),s.Sb(14,"span",3),s.Gc(15),s.Rb(),s.Rb(),s.Rb(),s.Ec(16,ja,4,3,"div",22),s.Rb(),s.Rb()),2&t){const t=s.cc().$implicit,e=s.cc(2);s.zb(4),s.Hc(s.ec(5,5,"view360.myFinances.structuredProducts.nextPayment.label")),s.zb(3),s.Hc(s.ec(8,7,t.premiumPaymentDate)),s.zb(4),s.Hc(s.ec(12,9,t.premiumAmount.amount)),s.zb(4),s.Hc(t.premiumAmount.currency),s.zb(1),s.jc("ngIf",e.isPaymentDueWarning(t))}}function Ga(t,e){if(1&t){const t=s.Tb();s.Sb(0,"li"),s.Sb(1,"a",14),s.Zb("click",function(){s.xc(t);const a=e.$implicit;return s.cc(2).onStructuredProductClick(a)}),s.Sb(2,"p",11),s.Gc(3),s.Ec(4,La,1,0,"i",15),s.Rb(),s.Sb(5,"p",12),s.Gc(6),s.dc(7,"translate"),s.Sb(8,"strong",16),s.Gc(9),s.dc(10,"dictValue"),s.Rb(),s.Rb(),s.Ec(11,Ea,7,4,"p",17),s.Rb(),s.Ec(12,Ha,17,11,"div",0),s.Rb()}if(2&t){const t=e.$implicit,a=s.cc(2);s.zb(3),s.Ic("",a.getStructuredProductName(t)," \xa0"),s.zb(1),s.jc("ngIf",a.isPaymentDueWarning(t)),s.zb(2),s.Ic("",s.ec(7,6,"view360.myFinances.structuredProducts.status.label"),"\xa0"),s.zb(3),s.Hc(s.fc(10,8,t.insuranceStatusCode,"INSURANCE_STATUS")),s.zb(2),s.jc("ngIf",t.investmentAmount),s.zb(1),s.jc("ngIf",a.isPaymentSectionVisible(t))}}function Ma(t,e){if(1&t&&(s.Qb(0),s.Sb(1,"p"),s.Gc(2),s.dc(3,"translate"),s.Rb(),s.Sb(4,"p",1),s.Sb(5,"span",2),s.Gc(6),s.dc(7,"amount"),s.Rb(),s.Gc(8,"\xa0"),s.Sb(9,"span",3),s.Gc(10),s.Rb(),s.Rb(),s.Ec(11,Ia,2,1,"ng-container",4),s.Sb(12,"ul",5),s.Ec(13,Ga,13,11,"li",4),s.Rb(),s.Pb()),2&t){const t=s.cc();s.zb(2),s.Hc(s.ec(3,5,"view360.myFinances.structuredProducts.title.label")),s.zb(4),s.Hc(s.ec(7,7,null==t.state.data.structuredProductSummary[0]?null:t.state.data.structuredProductSummary[0].amount)),s.zb(4),s.Hc(null==t.state.data.structuredProductSummary[0]?null:t.state.data.structuredProductSummary[0].currency),s.zb(1),s.jc("ngForOf",t.state.data.structuredProductSummary),s.zb(2),s.jc("ngForOf",t.state.data.structuredProductList)}}function Va(t,e){if(1&t){const t=s.Tb();s.Sb(0,"li"),s.Sb(1,"a",10),s.Zb("click",function(){s.xc(t);const a=e.$implicit;return s.cc(2).onFundIkeClick(a)}),s.Sb(2,"p",11),s.Gc(3),s.Rb(),s.Sb(4,"p",12),s.Gc(5),s.dc(6,"iban"),s.Rb(),s.Sb(7,"p",13),s.Sb(8,"span",2),s.Gc(9),s.dc(10,"amount"),s.Rb(),s.Gc(11,"\xa0"),s.Sb(12,"span",3),s.Gc(13),s.Rb(),s.Rb(),s.Rb(),s.Rb()}if(2&t){const t=e.$implicit,a=s.cc(2);s.zb(1),s.jc("appPiwikClickable","myFinances/buttonFunds"),s.zb(2),s.Hc(a.getFundIkeName(t)),s.zb(2),s.Hc(s.ec(6,5,t.nrbNumber)),s.zb(4),s.Hc(s.ec(10,7,t.amount.amount)),s.zb(4),s.Hc(t.amount.currency)}}function $a(t,e){if(1&t&&(s.Qb(0),s.Sb(1,"p"),s.Gc(2),s.dc(3,"translate"),s.Rb(),s.Sb(4,"p",1),s.Sb(5,"span",2),s.Gc(6),s.dc(7,"amount"),s.Rb(),s.Gc(8,"\xa0"),s.Sb(9,"span",3),s.Gc(10),s.Rb(),s.Rb(),s.Sb(11,"ul",5),s.Ec(12,Va,14,9,"li",4),s.Rb(),s.Pb()),2&t){const t=s.cc();s.zb(2),s.Hc(s.ec(3,4,"view360.myFinances.funds-ike.title.label")),s.zb(4),s.Hc(s.ec(7,6,null==t.state.data.fundsIkeSummary[0]?null:t.state.data.fundsIkeSummary[0].amount)),s.zb(4),s.Hc(null==t.state.data.fundsIkeSummary[0]?null:t.state.data.fundsIkeSummary[0].currency),s.zb(2),s.jc("ngForOf",t.state.data.fundsIke)}}let _a=(()=>{class t{constructor(t,e,a,n,i,c){this.router=t,this.productHelper=e,this.dictionaryService=a,this.routeDataService=n,this.fundsHelper=i,this.systemParameterService=c,this.state={data:{fundSummary:[],fundsList:[],structuredProductSummary:[],structuredProductList:[],fundsIkeSummary:[],fundsIke:[]}}}ngOnInit(){this.state.data.fundSummary=this.myFinances.fundSummary,this.state.data.fundsList=this.myFinances.filteredProductLists.fundList,this.state.data.structuredProductSummary=this.myFinances.structuredProductSummary,this.state.data.structuredProductList=this.myFinances.filteredProductLists.structuredProductList.structuredProducts,this.state.data.fundsIkeSummary=this.myFinances.fundIkeSummary,this.state.data.fundsIke=this.myFinances.filteredProductLists.fundIkeList}onProgramClick(t){this.router.navigate(t.registerList&&0!==t.registerList.length?["products/funds",t.registerList[0].id]:["products/funds"])}onFundIkeClick(t){this.router.navigate(["products/funds-ike",t.id])}onStructuredProductClick(t){this.router.navigate(["products/funds-insurances",t.id])}getStructuredProductName(t){return this.productHelper.getInsuranceName(t)}getFundIkeName(t){return this.productHelper.getFundIkeName(t)}isPaymentDueWarning(t){return t.insuranceStatusCode===this.systemParameterService.getWebInsuranceStatusPaymentEnable()}isPaymentSectionVisible(t){return t.premiumAmount&&t.premiumPaymentDate}onStructuredProductPaymentClick(t){const e=this.dictionaryService.getEntryValue("INSURANCE_COMPANY_IDENTIFIER",t.insuranceCompanyCode);this.routeDataService.navigateWithRouteData(Ht.a.insurancePayment,{creditAcc:t.nrbNumber,beneficiaryName:e,title:t.policyNumber,amount:t.premiumAmount.amount,currency:t.premiumAmount.currency},["/transfers/european"])}getParticipationTypeName(t){return this.fundsHelper.getParticipationTypeName(t)}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(i.d),s.Mb(_.a),s.Mb(H.a),s.Mb(Ht.b),s.Mb(za.a),s.Mb(M.a))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-my-finances-funds"],["","app-view360-my-finances-funds",""]],inputs:{myFinances:"myFinances"},decls:3,vars:3,consts:[[4,"ngIf"],[1,"amount-lg"],[1,"number"],[1,"currency"],[4,"ngFor","ngForOf"],[1,"acc-tree2"],["class","amount-sm",4,"ngIf"],[1,"amount-sm"],[1,"name","font-lg","my-1"],["class","acc-tree2",4,"ngIf"],["href","javascript:void(null);",1,"acc",3,"appPiwikClickable","click"],[1,"name"],[1,"type"],[1,"amount"],["href","javascript:void(null);",1,"acc",3,"click"],["class","ca ca-ostrzezenie3 font-300",4,"ngIf"],[1,"font-600"],["class","amount",4,"ngIf"],[1,"ca","ca-ostrzezenie3","font-300"],[1,"row","equal-gutters","mt-3"],[1,"col-12","col-lg"],[1,"due"],["class","text-center col-12 col-lg-auto",4,"ngIf"],[1,"text-center","col-12","col-lg-auto"],["href","javascript:void(null);",1,"btn","btn-primary","mt-lg-0",3,"click"]],template:function(t,e){1&t&&(s.Ec(0,Na,14,9,"ng-container",0),s.Ec(1,Ma,14,9,"ng-container",0),s.Ec(2,$a,13,8,"ng-container",0)),2&t&&(s.jc("ngIf",e.state.data.fundSummary.length>0),s.zb(1),s.jc("ngIf",e.state.data.structuredProductSummary.length>0),s.zb(1),s.jc("ngIf",e.state.data.fundsIkeSummary.length>0))},directives:[d.m,d.l,At.a],pipes:[u.c,y.a,we.a,Mt.a,xa.a],encapsulation:2,changeDetection:0}),t})();const Ba=function(t){return{preloading:t}};let Ua=(()=>{class t{constructor(){this.optsSubmit=new s.n,this.subscriptions=[],this.state={isLoading:!1,options:{accounts:[],ccAccounts:[],loans:[],savings:[],fundsAndStructuredProducts:[],insurances:[]}}}ngOnInit(){const t=this.optsData.personalization.view360.myFinances.hideProxy;this.state.options.accounts=this.filterOptionsByProductRole(this.optsData.options.accounts,t),this.state.options.ccAccounts=this.filterOptionsByProductRole(this.optsData.options.ccAccounts,t),this.state.options.loans=this.filterOptionsByProductRole(this.optsData.options.loans,t),this.state.options.savings=this.optsData.options.savings,this.state.options.fundsAndStructuredProducts=this.optsData.options.funds.concat(this.optsData.options.structuredProducts).concat(this.optsData.options.fundsIke),this.state.options.insurances=this.optsData.options.insurances,this.initForm(),this.reset()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}reset(){this.initFormValues(),this.state.isLoading=!1}initForm(){this.optsForm=new n.k({accounts:new n.h([]),ccAccounts:new n.h([]),loans:new n.h([]),savings:new n.h([]),fundsAndStructuredProducts:new n.h([]),insurances:new n.h([]),hideProxy:new n.h(!1)}),this.subscriptions.push(this.optsForm.get("hideProxy").valueChanges.subscribe(t=>this.onHideProxyChange(t)))}initFormValues(){const t=this.optsData.personalization.view360.myFinances.hideProxy;this.optsForm.patchValue({accounts:this.filterAccountsByProductRole(this.optsData.personalization.view360.myFinances.accounts,t),ccAccounts:this.filterCCAccountsByProductRole(this.optsData.personalization.view360.myFinances.ccAccounts,t),loans:this.filterLoansByProductRole(this.optsData.personalization.view360.myFinances.loans,t),savings:this.optsData.personalization.view360.myFinances.savings,fundsAndStructuredProducts:this.optsData.personalization.view360.myFinances.funds.concat(this.optsData.personalization.view360.myFinances.structuredProducts).concat(this.optsData.personalization.view360.myFinances.fundsIke),insurances:this.optsData.personalization.view360.myFinances.insurances,hideProxy:t})}onHideProxyChange(t){t&&(this.state.options.accounts=this.filterOptionsByProductRole(this.optsData.options.accounts,t),this.state.options.ccAccounts=this.filterOptionsByProductRole(this.optsData.options.ccAccounts,t),this.state.options.loans=this.filterOptionsByProductRole(this.optsData.options.loans,t),this.optsForm.patchValue({accounts:this.filterAccountsByProductRole(this.optsForm.value.accounts,t),ccAccounts:this.filterCCAccountsByProductRole(this.optsForm.value.ccAccounts,t),loans:this.filterLoansByProductRole(this.optsForm.value.loans,t)}))}submitOptsForm(){this.state.isLoading=!0,this.optsSubmit.emit({accounts:this.optsForm.value.accounts,ccAccounts:this.optsForm.value.ccAccounts,loans:this.optsForm.value.loans,savings:this.optsForm.value.savings,funds:this.optsForm.value.fundsAndStructuredProducts.filter(t=>this.optsData.options.funds.find(e=>e.nrbNumber===t)),insurances:this.optsForm.value.insurances,structuredProducts:this.optsForm.value.fundsAndStructuredProducts.filter(t=>this.optsData.options.structuredProducts.find(e=>e.nrbNumber===t)),hideProxy:this.optsForm.value.hideProxy,fundsIke:this.optsForm.value.fundsAndStructuredProducts.filter(t=>this.optsData.options.fundsIke.find(e=>e.nrbNumber===t))})}filterOptionsByProductRole(t,e){return t.filter(t=>!e||!t.isProxyProduct)}filterAccountsByProductRole(t,e){const a=this.optsData.options.accounts.filter(t=>!t.isProxyProduct);return t.filter(t=>!e||a.filter(e=>e.nrbNumber===t).length>0)}filterCCAccountsByProductRole(t,e){const a=this.optsData.options.ccAccounts.filter(t=>!t.isProxyProduct);return t.filter(t=>!e||a.filter(e=>e.nrbNumber===t).length>0)}filterLoansByProductRole(t,e){const a=this.optsData.options.loans.filter(t=>!t.isProxyProduct);return t.filter(t=>!e||a.filter(e=>e.nrbNumber===t).length>0)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-my-finances-opts"]],inputs:{optsData:"optsData"},outputs:{optsSubmit:"optsSubmit"},decls:69,vars:104,consts:[[1,"container-fluid"],[1,"opts-header"],["id","myFinancesOptsTitle",1,"opts-title","h4"],[1,"opts-subtitle","h6"],[1,"opts-body"],[1,"row","form-vertical",3,"formGroup"],[1,"col-12","col-md-6"],[1,"form-group"],["id","settingsPersonalizationAccountsLabel"],[3,"formControlName","options","multiple","dataTitle","dataCountSelectedText","labelledby","dataWidth"],["id","settingsPersonalizationCardsLabel"],["id","settingsPersonalizationFundsLabel"],["id","settingsPersonalizationLoansLabel"],["id","settingsPersonalizationSavingsLabel"],["id","settingsPersonalizationInsurancesLabel"],[1,"col-12","mt-3"],[1,""],[1,"btn-checkbox-ip"],["type","checkbox",3,"formControlName"],[1,"opts-footer","text-right"],[1,"buttons"],["href","javascript:void(null);",1,"btn","btn-primary","btn-lg",3,"ngClass","click"]],template:function(t,e){1&t&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Sb(2,"h2",2),s.Gc(3),s.dc(4,"translate"),s.Sb(5,"span",3),s.Gc(6),s.dc(7,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Sb(8,"div",4),s.Sb(9,"p"),s.Gc(10),s.dc(11,"translate"),s.Rb(),s.Sb(12,"form",5),s.Sb(13,"div",6),s.Sb(14,"div",7),s.Sb(15,"label",8),s.Gc(16),s.dc(17,"translate"),s.Rb(),s.Nb(18,"app-selectpicker-accounts",9),s.dc(19,"translate"),s.dc(20,"translate"),s.Rb(),s.Sb(21,"div",7),s.Sb(22,"label",10),s.Gc(23),s.dc(24,"translate"),s.Rb(),s.Nb(25,"app-selectpicker-accounts",9),s.dc(26,"translate"),s.dc(27,"translate"),s.Rb(),s.Sb(28,"div",7),s.Sb(29,"label",11),s.Gc(30),s.dc(31,"translate"),s.Rb(),s.Nb(32,"app-selectpicker-accounts",9),s.dc(33,"translate"),s.dc(34,"translate"),s.Rb(),s.Rb(),s.Sb(35,"div",6),s.Sb(36,"div",7),s.Sb(37,"label",12),s.Gc(38),s.dc(39,"translate"),s.Rb(),s.Nb(40,"app-selectpicker-accounts",9),s.dc(41,"translate"),s.dc(42,"translate"),s.Rb(),s.Sb(43,"div",7),s.Sb(44,"label",13),s.Gc(45),s.dc(46,"translate"),s.Rb(),s.Nb(47,"app-selectpicker-accounts",9),s.dc(48,"translate"),s.dc(49,"translate"),s.Rb(),s.Sb(50,"div",7),s.Sb(51,"label",14),s.Gc(52),s.dc(53,"translate"),s.Rb(),s.Nb(54,"app-selectpicker-accounts",9),s.dc(55,"translate"),s.dc(56,"translate"),s.Rb(),s.Rb(),s.Sb(57,"div",15),s.Sb(58,"p",16),s.Gc(59),s.dc(60,"translate"),s.Sb(61,"span",17),s.Nb(62,"input",18),s.Nb(63,"i"),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(64,"div",19),s.Sb(65,"div",20),s.Sb(66,"a",21),s.Zb("click",function(){return e.submitOptsForm()}),s.Gc(67),s.dc(68,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&t&&(s.zb(3),s.Ic("",s.ec(4,56,"settings.personalization.my-finances.title")," "),s.zb(3),s.Hc(s.ec(7,58,"settings.personalization.my-finances.subtitle")),s.zb(4),s.Hc(s.ec(11,60,"settings.personalization.my-finances.info")),s.zb(2),s.jc("formGroup",e.optsForm),s.zb(4),s.Hc(s.ec(17,62,"settings.personalization.accounts.label")),s.zb(2),s.jc("formControlName","accounts")("options",e.state.options.accounts)("multiple",!0)("dataTitle",s.ec(19,64,"settings.personalization.accounts.choose.label"))("dataCountSelectedText",s.ec(20,66,"settings.personalization.accounts.selected.label")+" ({0})")("labelledby","settingsPersonalizationAccountsLabel")("dataWidth","100%"),s.zb(5),s.Hc(s.ec(24,68,"settings.personalization.cards.label")),s.zb(2),s.jc("formControlName","ccAccounts")("options",e.state.options.ccAccounts)("multiple",!0)("dataTitle",s.ec(26,70,"settings.personalization.cards.choose.label"))("dataCountSelectedText",s.ec(27,72,"settings.personalization.cards.selected.label")+" ({0})")("labelledby","settingsPersonalizationCardsLabel")("dataWidth","100%"),s.zb(5),s.Hc(s.ec(31,74,"settings.personalization.funds.label")),s.zb(2),s.jc("formControlName","fundsAndStructuredProducts")("options",e.state.options.fundsAndStructuredProducts)("multiple",!0)("dataTitle",s.ec(33,76,"settings.personalization.funds.choose.label"))("dataCountSelectedText",s.ec(34,78,"settings.personalization.funds.selected.label")+" ({0})")("labelledby","settingsPersonalizationFundsLabel")("dataWidth","100%"),s.zb(6),s.Hc(s.ec(39,80,"settings.personalization.loans.label")),s.zb(2),s.jc("formControlName","loans")("options",e.state.options.loans)("multiple",!0)("dataTitle",s.ec(41,82,"settings.personalization.loans.choose.label"))("dataCountSelectedText",s.ec(42,84,"settings.personalization.loans.selected.label")+" ({0})")("labelledby","settingsPersonalizationLoansLabel")("dataWidth","100%"),s.zb(5),s.Hc(s.ec(46,86,"settings.personalization.savings.label")),s.zb(2),s.jc("formControlName","savings")("options",e.state.options.savings)("multiple",!0)("dataTitle",s.ec(48,88,"settings.personalization.savings.choose.label"))("dataCountSelectedText",s.ec(49,90,"settings.personalization.savings.selected.label")+" ({0})")("labelledby","settingsPersonalizationSavingsLabel")("dataWidth","100%"),s.zb(5),s.Hc(s.ec(53,92,"settings.personalization.insurances.label")),s.zb(2),s.jc("formControlName","insurances")("options",e.state.options.insurances)("multiple",!0)("dataTitle",s.ec(55,94,"settings.personalization.insurances.choose.label"))("dataCountSelectedText",s.ec(56,96,"settings.personalization.insurances.selected.label")+" ({0})")("labelledby","settingsPersonalizationInsurancesLabel")("dataWidth","100%"),s.zb(5),s.Ic(" ",s.ec(60,98,"settings.personalization.hide.proxy.products.label")," "),s.zb(3),s.jc("formControlName","hideProxy"),s.zb(4),s.jc("ngClass",s.pc(102,Ba,e.state.isLoading)),s.zb(1),s.Hc(s.ec(68,100,"settings.personalization.save.label")))},directives:[n.F,n.u,n.l,o.a,n.t,n.j,n.a,d.k],pipes:[u.c],encapsulation:2,changeDetection:0}),t})();var Ya=a("GK2s"),Qa=a("u3pm");const Wa=["myFinancesCarousel"],Za=["view360MyFinancesOpts"],Ka=["insurancesConsentStep1"],Ja=["insurancesConsentStep2"];function qa(t,e){if(1&t){const t=s.Tb();s.Sb(0,"button",7),s.Zb("click",function(){return s.xc(t),s.cc(2).toggleView()}),s.dc(1,"translate"),s.Rb()}if(2&t){const t=s.cc(2);s.Ab("aria-label",s.ec(1,1,"opts"===t.state.currentStep?"view360.optsSwitch.close.myFinances":"view360.optsSwitch.open.myFinances"))}}const Xa=function(t){return{"only-ctas":t}};function tn(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div",15),s.Zb("insuranceAgreement",function(){return s.xc(t),s.cc(3).showInsuranceAgreement()}),s.Rb()}if(2&t){const t=s.cc(3);s.jc("myFinances",t.state.data.myFinances)("ngClass",s.pc(2,Xa,t.state.data.onlyCtas))}}function en(t,e){if(1&t&&s.Nb(0,"div",24),2&t){const t=s.cc(4);s.jc("myFinances",t.state.data.myFinances)}}function an(t,e){if(1&t&&s.Nb(0,"div",25),2&t){const t=s.cc(4);s.jc("myFinances",t.state.data.myFinances)}}function nn(t,e){if(1&t&&s.Nb(0,"div",26),2&t){const t=s.cc(4);s.jc("myFinances",t.state.data.myFinances)}}function cn(t,e){if(1&t&&s.Nb(0,"div",27),2&t){const t=s.cc(4);s.jc("myFinances",t.state.data.myFinances)}}function sn(t,e){if(1&t&&s.Nb(0,"div",28),2&t){const t=s.cc(4);s.jc("myFinances",t.state.data.myFinances)}}function on(t,e){if(1&t&&(s.Sb(0,"div",16),s.Nb(1,"button",17),s.Ec(2,en,1,1,"div",18),s.Ec(3,an,1,1,"div",19),s.Ec(4,nn,1,1,"div",20),s.Ec(5,cn,1,1,"div",21),s.Ec(6,sn,1,1,"div",22),s.Nb(7,"div",23),s.Rb()),2&t){const t=s.cc(3);s.zb(2),s.jc("ngIf",(null==t.state.data.myFinances?null:t.state.data.myFinances.creditCardAccountSummary.length)>0),s.zb(1),s.jc("ngIf",(null==t.state.data.myFinances?null:t.state.data.myFinances.loanSummary.length)>0),s.zb(1),s.jc("ngIf",(null==t.state.data.myFinances?null:t.state.data.myFinances.accountSummary.length)>0),s.zb(1),s.jc("ngIf",(null==t.state.data.myFinances?null:t.state.data.myFinances.savingSummary.length)>0),s.zb(1),s.jc("ngIf",(null==t.state.data.myFinances?null:t.state.data.myFinances.fundSummary.length)>0||(null==t.state.data.myFinances?null:t.state.data.myFinances.structuredProductSummary.length)>0||(null==t.state.data.myFinances?null:t.state.data.myFinances.fundIkeSummary.length)>0),s.zb(1),s.jc("myFinances",t.state.data.myFinances)}}function rn(t,e){if(1&t&&(s.Qb(0),s.Sb(1,"div",8),s.Sb(2,"h2",9),s.Gc(3),s.dc(4,"translate"),s.Rb(),s.Sb(5,"div",10),s.Ec(6,tn,1,4,"div",11),s.Ec(7,on,8,6,"div",12),s.Rb(),s.Sb(8,"p",13),s.Sb(9,"a",14),s.Sb(10,"span"),s.Gc(11),s.dc(12,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Pb()),2&t){const t=s.cc(2);s.zb(3),s.Hc(s.ec(4,5,"view360.myFinances.title.label")),s.zb(3),s.jc("ngIf",t.state.showSvg),s.zb(1),s.jc("ngIf",!t.state.data.onlyCtas),s.zb(2),s.jc("routerLink","/products/balance"),s.zb(2),s.Hc(s.ec(12,7,"view360.myFinances.balance.label"))}}function ln(t,e){if(1&t){const t=s.Tb();s.Sb(0,"app-view360-my-finances-opts",31,32),s.Zb("optsSubmit",function(e){return s.xc(t),s.cc(3).onOptsSubmit(e)}),s.Rb()}if(2&t){const t=s.cc(3);s.jc("optsData",t.state.data.optsData)}}function dn(t,e){if(1&t&&(s.Qb(0),s.Sb(1,"div",29),s.Ec(2,ln,2,1,"app-view360-my-finances-opts",30),s.Rb(),s.Pb()),2&t){const t=s.cc(2);s.zb(2),s.jc("ngIf",t.state.data.optsData)}}function un(t,e){if(1&t){const t=s.Tb();s.Qb(0),s.Sb(1,"div",33),s.Sb(2,"app-insurances-consent-step1",34,35),s.Zb("cancel",function(){return s.xc(t),s.cc(2).onInsuranceConsentStep1Cancel()})("complete",function(e){return s.xc(t),s.cc(2).onInsuranceConsentStep1Complete(e)}),s.Rb(),s.Rb(),s.Pb()}2&t&&(s.zb(2),s.jc("showCancelButton",!0))}function pn(t,e){if(1&t){const t=s.Tb();s.Qb(0),s.Sb(1,"div",36),s.Sb(2,"app-insurances-consent-step2",37,38),s.Zb("cancel",function(){return s.xc(t),s.cc(2).onInsuranceConsentStep2Cancel()})("complete",function(e){return s.xc(t),s.cc(2).onInsuranceConsentStep2Complete(e)}),s.Rb(),s.Rb(),s.Pb()}}function bn(t,e){if(1&t&&(s.Qb(0),s.Ec(1,qa,2,3,"button",3),s.Sb(2,"app-custom-carousel",4,5),s.Ec(4,rn,13,9,"ng-container",6),s.Ec(5,dn,3,1,"ng-container",6),s.Ec(6,un,4,1,"ng-container",6),s.Ec(7,pn,4,0,"ng-container",6),s.Rb(),s.Pb()),2&t){const t=s.cc();s.zb(1),s.jc("ngIf",!t.state.isAnimating),s.zb(1),s.jc("animationSpeedMs",350)}}const mn=function(t,e){return{preload:t,"opts-mode":e}},hn=function(t){return{overflow:t}};let fn=(()=>{class t{constructor(t,e,a,n){this.changeDetectorRef=t,this.view360Service=e,this.personalisationService=a,this.router=n,this.subscriptions=[],this.state={isPreload:!0,showSvg:!1,currentStep:"main",isAnimating:!1,data:{optsData:null,myFinances:null,onlyCtas:!1}}}ngOnInit(){this.state.isPreload=!0,this.state.showSvg=!1,this.state.isAnimating=!1,this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges(),this.subscriptions.push(k.a.minExecutionTime(Object(D.a)([this.view360Service.getOptsData(),this.view360Service.getMyFinances()])).subscribe(t=>{this.state.data.optsData=t[0],this.state.data.myFinances=t[1],this.state.data.onlyCtas=this.isOnlyCtas(t[1]),this.state.isPreload=!1,this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges(),setTimeout(()=>{this.state.showSvg=!0,this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()})}))}isOnlyCtas(t){return 0===t.filteredProductLists.insuranceList.allNotFilteredInsurancesCount&&0===[].concat(t.accountSummary).concat(t.creditCardAccountSummary).concat(t.loanSummary).concat(t.savingSummary).concat(t.fundSummary).concat(t.structuredProductSummary).length}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}toggleView(){"main"===this.state.currentStep?this.gotoStep("opts"):"opts"===this.state.currentStep?this.gotoStep("main"):"agreement1"===this.state.currentStep?this.onInsuranceConsentStep1Cancel():"agreement2"===this.state.currentStep&&this.onInsuranceConsentStep2Cancel()}onOptsSubmit(t){this.toggleView(),this.state.isPreload=!0,this.personalisationService.updateMyFinances(t).subscribe(()=>{this.ngOnInit()})}showInsuranceAgreement(){this.insurancesConsentStep1.resetStep1(),this.gotoStep("agreement1")}onInsuranceConsentStep1Cancel(){this.gotoStep("main")}onInsuranceConsentStep2Cancel(){this.gotoStep("agreement1")}onInsuranceConsentStep1Complete(t){this.insurancesConsentStep2.resetStep2(t),this.gotoStep("agreement2")}onInsuranceConsentStep2Complete(t){if(t.applicationError)throw this.gotoStep("main"),t.applicationError;this.view360Service.resetAfterInsuranceConsent(),this.ngOnInit(),this.state.currentStep="main"}gotoStep(t){this.state.isAnimating=!0,this.myFinancesCarousel.goto({main:0,opts:1,agreement1:2,agreement2:3}[t],()=>{this.state.currentStep=t},()=>{this.state.isAnimating=!1,this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()})}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(s.h),s.Mb(W),s.Mb(G.a),s.Mb(i.d))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-my-finances"]],viewQuery:function(t,e){if(1&t&&(s.Oc(Wa,!0),s.Oc(Za,!0),s.Oc(Ka,!0),s.Oc(Ja,!0)),2&t){let t;s.tc(t=s.ac())&&(e.myFinancesCarousel=t.first),s.tc(t=s.ac())&&(e.view360MyFinancesOpts=t.first),s.tc(t=s.ac())&&(e.insurancesConsentStep1=t.first),s.tc(t=s.ac())&&(e.insurancesConsentStep2=t.first)}},decls:3,vars:9,consts:[["id","myFinances",1,"card",3,"ngClass","ngStyle"],[1,"card-bg"],[4,"ngIf"],["class","opts ca ca-cog2",3,"click",4,"ngIf"],[3,"animationSpeedMs"],["myFinancesCarousel",""],[4,"appCustomCarouselItem"],[1,"opts","ca","ca-cog2",3,"click"],[1,"card-inner"],[1,"h4"],[1,"view360-wrapper"],["app-view360-my-finances-svg","","class","view360",3,"myFinances","ngClass","insuranceAgreement",4,"ngIf"],["class","view360-details tab-content back-xs back-sm back-md",4,"ngIf"],[1,"text-right","font-600","mt-md-4","mb-0"],["href","javascript:void(null);",3,"routerLink"],["app-view360-my-finances-svg","",1,"view360",3,"myFinances","ngClass","insuranceAgreement"],[1,"view360-details","tab-content","back-xs","back-sm","back-md"],[1,"ca","ca-close","d-lg-none"],["app-view360-my-finances-cards","","id","v360-cards-details","class","tab-pane","role","tabpanel",3,"myFinances",4,"ngIf"],["app-view360-my-finances-loans","","id","v360-loans-details","class","tab-pane","role","tabpanel",3,"myFinances",4,"ngIf"],["app-view360-my-finances-accounts","","id","v360-accounts-details","class","tab-pane","role","tabpanel",3,"myFinances",4,"ngIf"],["app-view360-my-finances-savings","","id","v360-savings-details","class","tab-pane","role","tabpanel",3,"myFinances",4,"ngIf"],["app-view360-my-finances-funds","","id","v360-funds-details","class","tab-pane","role","tabpanel",3,"myFinances",4,"ngIf"],["app-view360-my-finances-insurances","","id","v360-insurances-details","role","tabpanel",1,"tab-pane",3,"myFinances"],["app-view360-my-finances-cards","","id","v360-cards-details","role","tabpanel",1,"tab-pane",3,"myFinances"],["app-view360-my-finances-loans","","id","v360-loans-details","role","tabpanel",1,"tab-pane",3,"myFinances"],["app-view360-my-finances-accounts","","id","v360-accounts-details","role","tabpanel",1,"tab-pane",3,"myFinances"],["app-view360-my-finances-savings","","id","v360-savings-details","role","tabpanel",1,"tab-pane",3,"myFinances"],["app-view360-my-finances-funds","","id","v360-funds-details","role","tabpanel",1,"tab-pane",3,"myFinances"],["id","defaultProductOpts",1,"card-opts","collapse","show"],[3,"optsData","optsSubmit",4,"ngIf"],[3,"optsData","optsSubmit"],["view360MyFinancesOpts",""],["id","myFinancesInsurancesGate",1,"card-opts","settings-auth","collapse","show"],[3,"showCancelButton","cancel","complete"],["insurancesConsentStep1",""],[1,"card-opts","settings-auth","collapse","show"],[3,"cancel","complete"],["insurancesConsentStep2",""]],template:function(t,e){1&t&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Ec(2,bn,8,2,"ng-container",2),s.Rb(),s.Rb()),2&t&&(s.jc("ngClass",s.qc(4,mn,e.state.isPreload,"main"!==e.state.currentStep))("ngStyle",s.pc(7,hn,e.state.isAnimating?"hidden":"visible"))("@showAfterPreloadAnimation",e.state.isPreload),s.zb(2),s.jc("ngIf",!e.state.isPreload))},directives:[d.k,d.n,d.m,ue.a,pe.a,i.g,ve,Ie,Ve,na,ha,Pa,_a,Ua,Ya.a,Qa.a],pipes:[u.c],styles:['#myFinances .card-bg{min-height:438px}.theme-default #myFinances .card-bg{background-color:hsla(0,0%,96.1%,.9)}.theme-hicontrast #myFinances .card-bg{background-color:hsla(0,0%,100%,.1)}@media (max-width:1159.98px){#myFinances .back-md{opacity:0;z-index:-1;position:absolute!important;right:0}}.bg-cards{background-color:#8a264c}.theme-default .bg-cards{background:#8a264c}.theme-hicontrast .bg-cards{background:transparent}.bg-accounts{background-color:#009597}.theme-default .bg-accounts{background:#009597}.theme-hicontrast .bg-accounts{background:transparent}.bg-loans{background-color:#ec008c}.theme-default .bg-loans{background:#ec008c}.theme-hicontrast .bg-loans{background:transparent}.bg-savings{background-color:#00a651}.theme-default .bg-savings{background:#00a651}.theme-hicontrast .bg-savings{background:transparent}.bg-funds{background-color:#9ea700}.theme-default .bg-funds{background:#9ea700}.theme-hicontrast .bg-funds{background:transparent}.bg-insurances{background-color:#f47920}a.v360-banner{display:block;border-radius:4px;padding:.5rem 1rem}.theme-default a.v360-banner{color:#fff;box-shadow:none}.theme-hicontrast a.v360-banner{background:transparent;color:#fff;box-shadow:0 0 0 3px #fff}.theme-default a.v360-banner:active,.theme-default a.v360-banner:focus,.theme-default a.v360-banner:hover{color:#fff;box-shadow:0 0 0 3px rgba(0,0,0,.2)}.theme-hicontrast a.v360-banner:active,.theme-hicontrast a.v360-banner:focus,.theme-hicontrast a.v360-banner:hover{background:#fff;color:#000;box-shadow:0 0 0 3px #fff}.theme-hicontrast a.v360-banner{font-weight:600}.theme-hicontrast a.v360-banner strong{font-weight:700;font-size:1.25em}a.v360-banner .table{margin:0}a.v360-banner .table .table-cell{vertical-align:middle}a.v360-banner .table .table-cell.icon{padding-right:.5rem}a.v360-banner .table .table-cell.icon.ca{font-size:56px}a.v360-banner .table .table-cell.icon.ca:before{display:block;margin:-.375em 0 -.375em -.15em}a.v360-banner .table .table-cell.cta{width:100%}.view360-wrapper{transition:height .2s linear;position:relative}.view360-wrapper .view360-details{width:300px;transition:height .35s ease-in;will-change:height}.view360-wrapper .view360-details .tab-pane{opacity:1;max-width:100%;flex-basis:100%}.view360-wrapper .view360-details .tab-pane.animating{transition:opacity .15s linear}.view360-wrapper .view360-details .tab-pane.off{opacity:0}@media (max-width:767.98px){.view360-wrapper .view360{margin:0 -30px;overflow:hidden}.view360-wrapper .view360 svg#view360{width:calc(100% + 90px);margin:0 -45px}.view360-wrapper .view360 svg#view360.circles-count-1,.view360-wrapper .view360 svg#view360.circles-count-2,.view360-wrapper .view360 svg#view360.circles-count-3{margin:0 -90px 0 0}.view360-wrapper .view360 svg#view360.circles-count-4{margin:0 -60px 0 -30px}.view360-wrapper .view360.only-ctas{margin:0}.view360-wrapper .view360.only-ctas svg#view360{max-width:100%;margin:0}}@media (min-width:768px) and (max-width:1159.98px){.view360-wrapper .view360{margin:0 -30px;overflow:hidden}.view360-wrapper .view360 svg#view360{width:calc(100% + 90px);margin:0 -45px}.view360-wrapper .view360 svg#view360.circles-count-1,.view360-wrapper .view360 svg#view360.circles-count-2,.view360-wrapper .view360 svg#view360.circles-count-3{margin:0 -90px 0 0}.view360-wrapper .view360 svg#view360.circles-count-4{margin:0 -60px 0 -30px}.view360-wrapper .view360 svg#view360.circles-count-5{margin:0 -50px 0 -40px}.view360-wrapper .view360 svg#view360.circles-count-6{margin:0 -45px}.view360-wrapper .view360.only-ctas{margin:0}.view360-wrapper .view360.only-ctas svg#view360{max-width:100%;margin:0}}@media (min-width:1160px){.view360-wrapper{display:flex;flex-flow:row nowrap;align-items:center;justify-content:space-between}.view360-wrapper .view360{flex-basis:60%;width:60%;max-width:calc(100% - 250px);flex-grow:1;position:-webkit-sticky;position:sticky;top:0;bottom:0;margin:0 0 0 -35px}.view360-wrapper .view360.only-ctas{flex-basis:100%;width:100%;max-width:none;margin:0;position:static;padding:60px 0;display:flex;align-items:center;justify-content:center}.view360-wrapper .view360-details{flex-basis:40%;width:40%;min-width:280px;margin-right:0;min-height:480px;display:flex;flex-flow:row nowrap;align-items:center}}.view360-wrapper .view360-details p{margin:0}.view360-wrapper .view360-details .amount-lg{font-weight:700}.view360-wrapper .view360-details .amount-lg .number{font-size:1.125rem}.view360-wrapper .view360-details .amount-lg .currency{font-size:.875rem}.view360-wrapper .view360-details .amount-sm{font-weight:700}.view360-wrapper .view360-details .amount-sm .number{font-size:1rem}.view360-wrapper .view360-details .amount-sm .currency{font-size:.75rem}.view360-wrapper .view360-details .amount-xs{font-weight:700}.view360-wrapper .view360-details .amount-xs .number{font-size:.875rem}.view360-wrapper .view360-details .amount-xs .currency{font-size:.6875rem}.view360-wrapper .view360-details .acc-tree2{margin:1rem 0 3rem;padding:0}.view360-wrapper .view360-details .acc-tree2>li{list-style:none none outside;margin:0;display:block;background-repeat:repeat-y;background-position:0 0;padding:.375rem 0 .375rem 40px}.view360-wrapper .view360-details .acc-tree2>li.pending p{opacity:.8}.view360-wrapper .view360-details .acc-tree2>li>.acc{color:inherit;border:0;outline:0;text-align:left;border-radius:4px;padding:.4375rem 2rem .25rem .5rem;margin:0 0 -.5rem -.5rem;display:block;position:relative;width:100%}.theme-default .view360-wrapper .view360-details .acc-tree2>li>.acc,.theme-hicontrast .view360-wrapper .view360-details .acc-tree2>li>.acc{background:transparent;color:inherit}.view360-wrapper .view360-details .acc-tree2>li>.acc:after{content:"\\f008";font-family:cawebfont;position:absolute;right:9px;font-size:1.75rem;width:2rem;color:transparent;top:50%;height:3rem;text-align:center;margin-top:-1.375rem;line-height:2em}.view360-wrapper .view360-details .acc-tree2>li>.acc:focus,.view360-wrapper .view360-details .acc-tree2>li>.acc:hover{background:#fff}.theme-default .view360-wrapper .view360-details .acc-tree2>li>.acc:focus,.theme-default .view360-wrapper .view360-details .acc-tree2>li>.acc:hover{background:#fff;color:inherit}.theme-hicontrast .view360-wrapper .view360-details .acc-tree2>li>.acc:focus,.theme-hicontrast .view360-wrapper .view360-details .acc-tree2>li>.acc:hover{background:#fff;color:#000}.theme-default .view360-wrapper .view360-details .acc-tree2>li>.acc:focus:after,.theme-default .view360-wrapper .view360-details .acc-tree2>li>.acc:hover:after,.view360-wrapper .view360-details .acc-tree2>li>.acc:focus:after,.view360-wrapper .view360-details .acc-tree2>li>.acc:hover:after{color:#999}.theme-hicontrast .view360-wrapper .view360-details .acc-tree2>li>.acc:focus:after,.theme-hicontrast .view360-wrapper .view360-details .acc-tree2>li>.acc:hover:after{color:#000}.view360-wrapper .view360-details .acc-tree2>li>.acc[data-toggle=dropdown]:after{content:"\\f009"}.theme-default .view360-wrapper .view360-details .acc-tree2>li>.acc[data-toggle=dropdown]:after{color:#999}.theme-hicontrast .view360-wrapper .view360-details .acc-tree2>li>.acc[data-toggle=dropdown]:after{color:#000}.view360-wrapper .view360-details .acc-tree2>li .dropdown-menu[x-placement^=top]~.acc:after,.view360-wrapper .view360-details .acc-tree2>li>.acc[data-toggle=dropdown][aria-expanded=true]:after{content:"\\f007"}.view360-wrapper .view360-details .acc-tree2>li .dropdown-menu[x-placement^=top]~.acc[aria-expanded=true]:after{content:"\\f009"}.view360-wrapper .view360-details .acc-tree2>li.dropdown-accounts{position:relative}.view360-wrapper .view360-details .acc-tree2>li.dropdown-accounts .dropdown-menu{min-width:calc(100% - 40px);max-width:calc(100% - 40px);max-height:237px;overflow:auto}.view360-wrapper .view360-details .acc-tree2>li.dropdown-accounts .dropdown-menu .dropdown-item{position:relative;padding:0}.theme-default .view360-wrapper .view360-details .acc-tree2>li.dropdown-accounts .dropdown-menu .dropdown-item,.theme-hicontrast .view360-wrapper .view360-details .acc-tree2>li.dropdown-accounts .dropdown-menu .dropdown-item{background:transparent;color:inherit}.view360-wrapper .view360-details .acc-tree2>li.dropdown-accounts .dropdown-menu .dropdown-item:after{content:"\\f008";font-family:cawebfont;position:absolute;right:0;font-size:1.75rem;width:2rem;top:50%;height:3rem;text-align:center;margin-top:-1.375rem;line-height:2em}.theme-default .view360-wrapper .view360-details .acc-tree2>li.dropdown-accounts .dropdown-menu .dropdown-item:after{color:#999}.theme-hicontrast .view360-wrapper .view360-details .acc-tree2>li.dropdown-accounts .dropdown-menu .dropdown-item:after{color:#000}.theme-default .view360-wrapper .view360-details .acc-tree2>li.dropdown-accounts .dropdown-menu .dropdown-item .account{background:#f5f5f5;color:inherit}.theme-hicontrast .view360-wrapper .view360-details .acc-tree2>li.dropdown-accounts .dropdown-menu .dropdown-item .account{background:#000;color:inherit}.view360-wrapper .view360-details .acc-tree2>li.dropdown-accounts .dropdown-menu .dropdown-item:focus .account,.view360-wrapper .view360-details .acc-tree2>li.dropdown-accounts .dropdown-menu .dropdown-item:hover .account{background:#fff}.theme-default .view360-wrapper .view360-details .acc-tree2>li.dropdown-accounts .dropdown-menu .dropdown-item:focus .account,.theme-default .view360-wrapper .view360-details .acc-tree2>li.dropdown-accounts .dropdown-menu .dropdown-item:hover .account{background:#fff;color:inherit}.theme-hicontrast .view360-wrapper .view360-details .acc-tree2>li.dropdown-accounts .dropdown-menu .dropdown-item:focus .account,.theme-hicontrast .view360-wrapper .view360-details .acc-tree2>li.dropdown-accounts .dropdown-menu .dropdown-item:hover .account{background:#fff;color:#000}.view360-wrapper .view360-details .acc-tree2>li.dropdown-accounts .dropdown-menu .dropdown-item .account-inner{padding-bottom:.333rem;padding-right:2rem}.view360-wrapper .view360-details .acc-tree2>li.dropdown-accounts .dropdown-menu .dropdown-item .account-inner .account-number,.view360-wrapper .view360-details .acc-tree2>li.dropdown-accounts .dropdown-menu .dropdown-item .account-inner .name{overflow:hidden;text-overflow:ellipsis}.view360-wrapper .view360-details .acc-tree2>li.dropdown-accounts .dropdown-menu .dropdown-item .account-inner .account-number,.view360-wrapper .view360-details .acc-tree2>li.dropdown-accounts .dropdown-menu .dropdown-item .account-inner .name{font-size:.75rem}.view360-wrapper .view360-details .acc-tree2>li.dropdown-accounts .dropdown-menu .dropdown-item .account-inner .number{font-size:1rem}.view360-wrapper .view360-details .acc-tree2>li.dropdown-accounts .dropdown-menu .dropdown-item .account-inner .currency{font-size:.75rem}.view360-wrapper .view360-details .acc-tree2>li p{margin:0;font-weight:400;font-size:.875rem}.view360-wrapper .view360-details .acc-tree2>li p.name{font-weight:600}.view360-wrapper .view360-details .acc-tree2>li p.name .ca{font-size:.975rem;margin:0 -.125rem -.25rem -.1875rem;display:inline-block}.theme-default .view360-wrapper .view360-details .acc-tree2>li p.name .ca.ca-ostrzezenie3{color:#a8212a}.theme-hicontrast .view360-wrapper .view360-details .acc-tree2>li p.name .ca.ca-ostrzezenie3{color:#9c0}.view360-wrapper .view360-details .acc-tree2>li p.type{font-weight:400;font-size:.875rem}.view360-wrapper .view360-details .acc-tree2>li p.account-number .distinctive-part{font-weight:700}.view360-wrapper .view360-details .acc-tree2>li p.number{font-size:.75rem;line-height:1.5em}.view360-wrapper .view360-details .acc-tree2>li p.number .ellipsis{line-height:1.5em;display:inline-block}.view360-wrapper .view360-details .acc-tree2>li p.number .ellipsis+.common-part{display:none}.view360-wrapper .view360-details .acc-tree2>li p.amount{font-weight:700}.view360-wrapper .view360-details .acc-tree2>li p.amount .number{font-size:1rem}.view360-wrapper .view360-details .acc-tree2>li p.amount .currency{font-size:.75rem}.view360-wrapper .view360-details .acc-tree2>li p+p{margin-top:-.0625rem}.view360-wrapper .view360-details .acc-tree2 .acc-tree2{margin:0 0 0 .5rem}.view360-wrapper .view360-details .btn-primary{padding-left:2em;padding-right:2em}.theme-default .view360-wrapper .view360-details #v360-funds-details .acc-tree2>li{background-image:url(/web-ca24/v360-funds-line.7f03be11e8a20cbbdd61.png),url(/web-ca24/v360-funds-arrow.015a4b7641d3f2f8890b.png);background-position:0 28px,0 -4px;background-repeat:no-repeat,no-repeat}.theme-default .view360-wrapper .view360-details #v360-funds-details .acc-tree2>li:last-child{background-image:url(/web-ca24/v360-funds-arrow.015a4b7641d3f2f8890b.png);background-position:0 -4px;background-repeat:no-repeat}.theme-default .view360-wrapper .view360-details #v360-savings-details .acc-tree2>li{background-image:url(/web-ca24/v360-savings-line.875d2dec1d54b5397311.png),url(/web-ca24/v360-savings-arrow.e7abc97333732df2e909.png);background-position:0 28px,0 -4px;background-repeat:no-repeat,no-repeat}.theme-default .view360-wrapper .view360-details #v360-savings-details .acc-tree2>li:last-child{background-image:url(/web-ca24/v360-savings-arrow.e7abc97333732df2e909.png);background-position:0 -4px;background-repeat:no-repeat}.theme-default .view360-wrapper .view360-details #v360-cards-details .acc-tree2>li{background-image:url(/web-ca24/v360-cards-line.6f749ef49b3718591e51.png),url(/web-ca24/v360-cards-arrow.4066e995f8d410274aea.png);background-position:0 28px,0 -4px;background-repeat:no-repeat,no-repeat}.theme-default .view360-wrapper .view360-details #v360-cards-details .acc-tree2>li:last-child{background-image:url(/web-ca24/v360-cards-arrow.4066e995f8d410274aea.png);background-position:0 -4px;background-repeat:no-repeat}.theme-default .view360-wrapper .view360-details #v360-accounts-details .acc-tree2>li{background-image:url(/web-ca24/v360-accounts-line.46e3a14ee6dcdd9d5d51.png),url(/web-ca24/v360-accounts-arrow.66fc6646dfb8cc958152.png);background-position:0 28px,0 -4px;background-repeat:no-repeat,no-repeat}.theme-default .view360-wrapper .view360-details #v360-accounts-details .acc-tree2>li:last-child{background-image:url(/web-ca24/v360-accounts-arrow.66fc6646dfb8cc958152.png);background-position:0 -4px;background-repeat:no-repeat}.theme-default .view360-wrapper .view360-details #v360-loans-details .acc-tree2>li{background-image:url(/web-ca24/v360-loans-line.6b3153f561d4a7ba51de.png),url(/web-ca24/v360-loans-arrow.94809011b7ee8545d5cc.png);background-position:0 28px,0 -4px;background-repeat:no-repeat,no-repeat}.theme-default .view360-wrapper .view360-details #v360-loans-details .acc-tree2>li:last-child{background-image:url(/web-ca24/v360-loans-arrow.94809011b7ee8545d5cc.png);background-position:0 -4px;background-repeat:no-repeat}.theme-default .view360-wrapper .view360-details #v360-insurances-details .acc-tree2>li{background-image:url(/web-ca24/v360-insurances-line.2b16a79014dad3217e7d.png),url(/web-ca24/v360-insurances-arrow.74d36b4f359cb877364e.png);background-position:0 28px,0 -4px;background-repeat:no-repeat,no-repeat}.theme-default .view360-wrapper .view360-details #v360-insurances-details .acc-tree2>li:last-child{background-image:url(/web-ca24/v360-insurances-arrow.74d36b4f359cb877364e.png);background-position:0 -4px;background-repeat:no-repeat}.theme-hicontrast .view360-wrapper .view360-details .acc-tree2>li{background-image:url(/web-ca24/v360-hicontrast-line.6d5779451c564b79b0d0.png),url(/web-ca24/v360-hicontrast-arrow.a8c0058660faed3afae7.png);background-position:0 28px,0 -4px;background-repeat:no-repeat,no-repeat}.theme-hicontrast .view360-wrapper .view360-details .acc-tree2>li:last-child{background-image:url(/web-ca24/v360-hicontrast-arrow.a8c0058660faed3afae7.png);background-position:0 -4px;background-repeat:no-repeat}@media (max-width:1159.98px){.view360-wrapper .view360-details{width:100%;margin:0;min-height:400px;position:relative;display:flex;bottom:0;padding-bottom:1rem;align-items:center;justify-content:center}.view360-wrapper .view360-details .tab-pane{flex-basis:300px;width:100%}.view360-wrapper .view360-details>.ca.ca-close{background:none;border:0;position:absolute;right:-30px;top:-20px;text-align:center;line-height:44px;height:44px;width:44px;padding:0;cursor:pointer;font-size:2.75em}.theme-default .view360-wrapper .view360-details>.ca.ca-close,.theme-hicontrast .view360-wrapper .view360-details>.ca.ca-close{color:#999}}.view360-wrapper .view360-details .btn-primary{margin-top:1rem}svg#view360{width:100%}svg#view360 .link{cursor:pointer}svg#view360 .link circle{transition:fill .2s linear}svg#view360 .link .text-group{font-weight:700;font-family:Open Sans}.theme-default svg#view360 .link .text-group{fill:#fff}.theme-hicontrast svg#view360 .link .text-group{fill:#000}svg#view360 .link .text-group .ca{font-size:44px}svg#view360 .link .cta-mode+.text-group,svg#view360 .link .text-group .name{font-weight:400}svg#view360 .link .cta-mode+.text-group .ca{font-size:58px}svg#view360 .link .ca.plus{font-size:20px}.theme-default svg#view360 .link .ca.plus{fill:#fff}.theme-hicontrast svg#view360 .link .ca.plus{fill:#000}svg#view360 .link:focus,svg#view360 .link:hover{outline:0}svg#view360 .link .halo{opacity:0;transition:opacity .2s linear;-webkit-animation:rotate 32s linear 0s infinite forwards;animation:rotate 32s linear 0s infinite forwards;transform-origin:center center;position:relative}svg#view360 .link:focus .halo{opacity:.5}svg#view360 .active .link .halo{opacity:1}svg#view360 .active .link:focus .halo{opacity:.7}.theme-default svg#view360 .v360-funds.active .link circle{fill:#9ea700}.theme-default svg#view360 .v360-funds.active .link.cta-mode>circle.cta-mode{fill:none}.theme-default svg#view360 .v360-funds.active .link .halo{stroke:#9ea700;fill:none}.theme-default svg#view360 .v360-funds circle{fill:#9ea700}.theme-default svg#view360 .v360-funds .link .halo{stroke:#9ea700;fill:none}@media (min-width:1160px){.theme-default svg#view360 .v360-funds circle{fill:rgba(158,167,0,.7)}.theme-default svg#view360 .v360-funds .link .halo{stroke:rgba(158,167,0,.7)}}.theme-default svg#view360 .v360-funds circle.cta-mode+.text-group,.theme-default svg#view360 .v360-funds circle.cta-mode+.text-group+circle,.theme-default svg#view360 .v360-funds circle.gate-mode+.text-group{fill:#9ea700}.theme-default svg#view360 .v360-funds .link.cta-mode .halo,.theme-default svg#view360 .v360-funds .link.gate-mode .halo,.theme-default svg#view360 .v360-funds circle.cta-mode,.theme-default svg#view360 .v360-funds circle.gate-mode{stroke:#9ea700}.theme-default svg#view360 .v360-funds:not(.active) .link.cta-mode .halo,.theme-default svg#view360 .v360-funds:not(.active) .link.gate-mode .halo{fill:none;display:none}.theme-default svg#view360 .v360-savings.active .link circle{fill:#00a651}.theme-default svg#view360 .v360-savings.active .link.cta-mode>circle.cta-mode{fill:none}.theme-default svg#view360 .v360-savings.active .link .halo{stroke:#00a651;fill:none}.theme-default svg#view360 .v360-savings circle{fill:#00a651}.theme-default svg#view360 .v360-savings .link .halo{stroke:#00a651;fill:none}@media (min-width:1160px){.theme-default svg#view360 .v360-savings circle{fill:rgba(0,166,81,.7)}.theme-default svg#view360 .v360-savings .link .halo{stroke:rgba(0,166,81,.7)}}.theme-default svg#view360 .v360-savings circle.cta-mode+.text-group,.theme-default svg#view360 .v360-savings circle.cta-mode+.text-group+circle,.theme-default svg#view360 .v360-savings circle.gate-mode+.text-group{fill:#00a651}.theme-default svg#view360 .v360-savings .link.cta-mode .halo,.theme-default svg#view360 .v360-savings .link.gate-mode .halo,.theme-default svg#view360 .v360-savings circle.cta-mode,.theme-default svg#view360 .v360-savings circle.gate-mode{stroke:#00a651}.theme-default svg#view360 .v360-savings:not(.active) .link.cta-mode .halo,.theme-default svg#view360 .v360-savings:not(.active) .link.gate-mode .halo{fill:none;display:none}.theme-default svg#view360 .v360-cards.active .link circle{fill:#8a264c}.theme-default svg#view360 .v360-cards.active .link.cta-mode>circle.cta-mode{fill:none}.theme-default svg#view360 .v360-cards.active .link .halo{stroke:#8a264c;fill:none}.theme-default svg#view360 .v360-cards circle{fill:#8a264c}.theme-default svg#view360 .v360-cards .link .halo{stroke:#8a264c;fill:none}@media (min-width:1160px){.theme-default svg#view360 .v360-cards circle{fill:rgba(138,38,76,.75)}.theme-default svg#view360 .v360-cards .link .halo{stroke:rgba(138,38,76,.75)}}.theme-default svg#view360 .v360-cards circle.cta-mode+.text-group,.theme-default svg#view360 .v360-cards circle.cta-mode+.text-group+circle,.theme-default svg#view360 .v360-cards circle.gate-mode+.text-group{fill:#8a264c}.theme-default svg#view360 .v360-cards .link.cta-mode .halo,.theme-default svg#view360 .v360-cards .link.gate-mode .halo,.theme-default svg#view360 .v360-cards circle.cta-mode,.theme-default svg#view360 .v360-cards circle.gate-mode{stroke:#8a264c}.theme-default svg#view360 .v360-cards:not(.active) .link.cta-mode .halo,.theme-default svg#view360 .v360-cards:not(.active) .link.gate-mode .halo{fill:none;display:none}.theme-default svg#view360 .v360-accounts.active .link circle{fill:#009597}.theme-default svg#view360 .v360-accounts.active .link.cta-mode>circle.cta-mode{fill:none}.theme-default svg#view360 .v360-accounts.active .link .halo{stroke:#009597;fill:none}.theme-default svg#view360 .v360-accounts circle{fill:#009597}.theme-default svg#view360 .v360-accounts .link .halo{stroke:#009597;fill:none}@media (min-width:1160px){.theme-default svg#view360 .v360-accounts circle{fill:rgba(0,149,151,.8)}.theme-default svg#view360 .v360-accounts .link .halo{stroke:rgba(0,149,151,.8)}}.theme-default svg#view360 .v360-accounts circle.cta-mode+.text-group,.theme-default svg#view360 .v360-accounts circle.cta-mode+.text-group+circle,.theme-default svg#view360 .v360-accounts circle.gate-mode+.text-group{fill:#009597}.theme-default svg#view360 .v360-accounts .link.cta-mode .halo,.theme-default svg#view360 .v360-accounts .link.gate-mode .halo,.theme-default svg#view360 .v360-accounts circle.cta-mode,.theme-default svg#view360 .v360-accounts circle.gate-mode{stroke:#009597}.theme-default svg#view360 .v360-accounts:not(.active) .link.cta-mode .halo,.theme-default svg#view360 .v360-accounts:not(.active) .link.gate-mode .halo{fill:none;display:none}.theme-default svg#view360 .v360-loans.active .link circle{fill:#ec008c}.theme-default svg#view360 .v360-loans.active .link.cta-mode>circle.cta-mode{fill:none}.theme-default svg#view360 .v360-loans.active .link .halo{stroke:#ec008c;fill:none}.theme-default svg#view360 .v360-loans circle{fill:#ec008c}.theme-default svg#view360 .v360-loans .link .halo{stroke:#ec008c;fill:none}@media (min-width:1160px){.theme-default svg#view360 .v360-loans circle{fill:rgba(236,0,140,.7)}.theme-default svg#view360 .v360-loans .link .halo{stroke:rgba(236,0,140,.7)}}.theme-default svg#view360 .v360-loans circle.cta-mode+.text-group,.theme-default svg#view360 .v360-loans circle.cta-mode+.text-group+circle,.theme-default svg#view360 .v360-loans circle.gate-mode+.text-group{fill:#ec008c}.theme-default svg#view360 .v360-loans .link.cta-mode .halo,.theme-default svg#view360 .v360-loans .link.gate-mode .halo,.theme-default svg#view360 .v360-loans circle.cta-mode,.theme-default svg#view360 .v360-loans circle.gate-mode{stroke:#ec008c}.theme-default svg#view360 .v360-loans:not(.active) .link.cta-mode .halo,.theme-default svg#view360 .v360-loans:not(.active) .link.gate-mode .halo{fill:none;display:none}.theme-default svg#view360 .v360-insurances.active .link circle{fill:#f47920}.theme-default svg#view360 .v360-insurances.active .link.cta-mode>circle.cta-mode{fill:none}.theme-default svg#view360 .v360-insurances.active .link .halo{stroke:#f47920;fill:none}.theme-default svg#view360 .v360-insurances circle{fill:#f47920}.theme-default svg#view360 .v360-insurances .link .halo{stroke:#f47920;fill:none}@media (min-width:1160px){.theme-default svg#view360 .v360-insurances circle{fill:rgba(244,121,32,.7)}.theme-default svg#view360 .v360-insurances .link .halo{stroke:rgba(244,121,32,.7)}}.theme-default svg#view360 .v360-insurances circle.cta-mode+.text-group,.theme-default svg#view360 .v360-insurances circle.cta-mode+.text-group+circle,.theme-default svg#view360 .v360-insurances circle.gate-mode+.text-group{fill:#f47920}.theme-default svg#view360 .v360-insurances .link.cta-mode .halo,.theme-default svg#view360 .v360-insurances .link.gate-mode .halo,.theme-default svg#view360 .v360-insurances circle.cta-mode,.theme-default svg#view360 .v360-insurances circle.gate-mode{stroke:#f47920}.theme-default svg#view360 .v360-insurances:not(.active) .link.cta-mode .halo,.theme-default svg#view360 .v360-insurances:not(.active) .link.gate-mode .halo{fill:none;display:none}.theme-hicontrast svg#view360 g.active .link circle{fill:#fff}.theme-hicontrast svg#view360 g.active .link .halo{stroke:#fff;fill:none}.theme-hicontrast svg#view360 g circle{fill:#fff}.theme-hicontrast svg#view360 g .link .halo{stroke:#fff;fill:none}@media (min-width:1160px){.theme-hicontrast svg#view360 g circle{fill:hsla(0,0%,100%,.7)}.theme-hicontrast svg#view360 g .link .halo{stroke:hsla(0,0%,100%,.7)}}.theme-hicontrast svg#view360 g circle.cta-mode+.text-group,.theme-hicontrast svg#view360 g circle.cta-mode+.text-group+circle,.theme-hicontrast svg#view360 g circle.gate-mode+.text-group{fill:#fff}.theme-hicontrast svg#view360 g.active circle.cta-mode{fill:none}.theme-hicontrast svg#view360 g .link.cta-mode .halo,.theme-hicontrast svg#view360 g .link.gate-mode .halo,.theme-hicontrast svg#view360 g circle.cta-mode,.theme-hicontrast svg#view360 g circle.gate-mode{stroke:#fff}.theme-hicontrast svg#view360 g .link.cta-mode .halo,.theme-hicontrast svg#view360 g .link.gate-mode .halo{fill:none}svg#view360 .active .link:focus circle.cta-mode,svg#view360 .active .link:focus circle.gate-mode,svg#view360 .active .link:hover circle.cta-mode,svg#view360 .active .link:hover circle.gate-mode,svg#view360 .active .link circle.cta-mode,svg#view360 .active .link circle.gate-mode,svg#view360 .link:focus circle.cta-mode,svg#view360 .link:focus circle.gate-mode,svg#view360 .link:hover circle.cta-mode,svg#view360 .link:hover circle.gate-mode,svg#view360 .link circle.cta-mode,svg#view360 .link circle.gate-mode{fill:transparent;stroke-width:3}@-webkit-keyframes rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}'],encapsulation:2,data:{animation:[m.l]},changeDetection:0}),t})();function gn(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div"),s.Zb("@viewAnimation.done",function(){return s.xc(t),s.cc().onViewAnimationDone()}),s.Nb(1,"app-banner",3),s.Rb()}if(2&t){const t=s.cc();s.jc("@viewAnimation",t.state.viewAnimationState)}}const vn=function(t){return{preload:t}},yn=function(t){return{overflow:t}};let wn=(()=>{class t{constructor(t,e){this.modalAlertService=t,this.systemParameterService=e,this.state={isPreloading:!0,isAnimating:!1,viewAnimationState:"",showView:!1,friendsAndFamilyLink:e.getFriendsAndFamilyLink()}}ngOnInit(){setTimeout(()=>{this.state.isPreloading=!1,this.state.showView=!0,this.state.viewAnimationState="firstShow",this.state.showView=!0},1e3)}onViewAnimationDone(){this.state.showView&&(this.state.isAnimating=!1)}showNextStageInfo(){this.modalAlertService.showNextStageInfo()}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(yt.b),s.Mb(M.a))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-banner"]],decls:3,vars:7,consts:[["id","banner360",1,"card",3,"ngClass","ngStyle"],[1,"card-bg"],[4,"ngIf"],["placeholderId","START_2_1"]],template:function(t,e){1&t&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Ec(2,gn,2,1,"div",2),s.Rb(),s.Rb()),2&t&&(s.jc("ngClass",s.pc(3,vn,e.state.isPreloading))("ngStyle",s.pc(5,yn,e.state.isAnimating?"hidden":"visible")),s.zb(2),s.jc("ngIf",e.state.showView))},directives:[d.k,d.n,d.m,Le.a],styles:["#banner360.card{overflow:hidden;padding:0}#banner360.card img{display:block;width:100%;height:auto}#banner360.card .card-bg{overflow:hidden}@media (max-width:767.98px){#banner360.card{display:none}}@media (min-width:768px) and (max-width:991.98px){#banner360.card{overflow:hidden;transition:opacity .1s linear}#banner360.card a img{display:block;width:100%;height:100%}}"],encapsulation:2,data:{animation:[Object(it.l)("viewAnimation",[Object(it.k)("void => firstShow",Object(m.f)("1000ms linear"))])]}}),t})();const Sn=function(t){return{preloading:t}};let Rn=(()=>{class t{constructor(){this.optsSubmit=new s.n,this.state={isLoading:!1,options:{historyAccounts:[]}}}ngOnInit(){this.state.options.historyAccounts=this.optsData.options.accounts.concat(this.optsData.options.ccAccounts),this.initForm(),this.reset()}reset(){this.initFormValues(),this.state.isLoading=!1}initForm(){this.optsForm=new n.k({accounts:new n.h(this.getInitialAccounts()),hideHolds:new n.h(this.optsData.personalization.view360.history.hideHolds)})}initFormValues(){this.optsForm.patchValue({accounts:this.getInitialAccounts(),hideHolds:this.optsData.personalization.view360.history.hideHolds})}getInitialAccounts(){return this.optsData.personalization.view360.history.accounts.concat(this.optsData.personalization.view360.history.ccAccounts).filter(t=>this.state.options.historyAccounts.map(t=>t.nrbNumber).indexOf(t)>=0)}submitOptsForm(){this.state.isLoading=!0,this.optsSubmit.emit({accounts:this.optsForm.value.accounts.filter(t=>this.optsData.options.accounts.find(e=>e.nrbNumber===t)),ccAccounts:this.optsForm.value.accounts.filter(t=>this.optsData.options.ccAccounts.find(e=>e.nrbNumber===t)),hideHolds:this.optsForm.value.hideHolds})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-history-mini-opts"]],inputs:{optsData:"optsData"},outputs:{optsSubmit:"optsSubmit"},decls:35,vars:38,consts:[[1,"container-fluid"],[1,"opts-header"],["id","historyMiniOptsTitle",1,"opts-title","h4"],[1,"opts-subtitle","h6"],[1,"opts-body"],[3,"formGroup"],["id","historyMiniSettings"],[1,"form-group"],["id","settingsPersonalizationAccountsCardsLabel"],[3,"formControlName","options","multiple","dataTitle","dataCountSelectedText","labelledby","dataWidth"],[1,"mb-1","mt-3"],["href","javascript:void(null);",1,"help-info","help-info-md",3,"appTlpTooltip","tlpPlacement"],[1,"ca","ca-question"],[1,"btn-checkbox-ip"],["type","checkbox",3,"formControlName"],[1,"opts-footer"],[1,"buttons","text-right"],["href","javascript:void(null);",1,"btn","btn-primary","btn-lg",3,"ngClass","click"]],template:function(t,e){1&t&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Sb(2,"h2",2),s.Gc(3),s.dc(4,"translate"),s.Sb(5,"span",3),s.Gc(6),s.dc(7,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Sb(8,"div",4),s.Sb(9,"form",5),s.Sb(10,"p"),s.Gc(11),s.dc(12,"translate"),s.Rb(),s.Sb(13,"div",6),s.Sb(14,"div",7),s.Sb(15,"label",8),s.Gc(16),s.dc(17,"translate"),s.Rb(),s.Nb(18,"app-selectpicker-accounts",9),s.dc(19,"translate"),s.dc(20,"translate"),s.Rb(),s.Sb(21,"p",10),s.Gc(22),s.dc(23,"translate"),s.Sb(24,"a",11),s.dc(25,"translate"),s.Nb(26,"i",12),s.Rb(),s.Rb(),s.Sb(27,"span",13),s.Nb(28,"input",14),s.Nb(29,"i"),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(30,"div",15),s.Sb(31,"div",16),s.Sb(32,"a",17),s.Zb("click",function(){return e.submitOptsForm()}),s.Gc(33),s.dc(34,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&t&&(s.zb(3),s.Ic("",s.ec(4,18,"settings.personalization.history-mini.title")," "),s.zb(3),s.Hc(s.ec(7,20,"settings.personalization.history-mini.subtitle")),s.zb(3),s.jc("formGroup",e.optsForm),s.zb(2),s.Hc(s.ec(12,22,"settings.personalization.history-mini.info")),s.zb(5),s.Hc(s.ec(17,24,"settings.personalization.accounts.cards.label")),s.zb(2),s.jc("formControlName","accounts")("options",e.state.options.historyAccounts)("multiple",!0)("dataTitle",s.ec(19,26,"settings.personalization.accounts.cards.choose.label"))("dataCountSelectedText",s.ec(20,28,"settings.personalization.accounts.cards.selected.label")+" ({0})")("labelledby","settingsPersonalizationAccountsCardsLabel")("dataWidth","100%"),s.zb(4),s.Hc(s.ec(23,30,"settings.personalization.history-mini.hide.holds.label")),s.zb(2),s.jc("appTlpTooltip",s.ec(25,32,"settings.personalization.hideHolds.tooltip"))("tlpPlacement","top"),s.zb(4),s.jc("formControlName","hideHolds"),s.zb(4),s.jc("ngClass",s.pc(36,Sn,e.state.isLoading)),s.zb(1),s.Hc(s.ec(34,34,"settings.personalization.save.label")))},directives:[n.F,n.u,n.l,o.a,n.t,n.j,r.a,n.a,d.k],pipes:[u.c],encapsulation:2}),t})();var Cn=a("Y0x6");function Pn(t,e){1&t&&(s.Sb(0,"div",3),s.Nb(1,"i",4),s.Sb(2,"p"),s.Gc(3),s.dc(4,"translate"),s.Rb(),s.Rb()),2&t&&(s.zb(3),s.Hc(s.ec(4,1,"view360.historyMini.empty.label")))}function zn(t,e){if(1&t&&(s.Sb(0,"p",32),s.Gc(1),s.dc(2,"dictValue"),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(1),s.Hc(t.operation.shortDescription?t.operation.shortDescription:s.fc(2,1,t.categoryCode,t.categoryDictionary))}}function xn(t,e){if(1&t&&(s.Sb(0,"p",33),s.Gc(1),s.dc(2,"dictValue"),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(1),s.Hc(s.fc(2,1,t.categoryCode,t.categoryDictionary))}}function An(t,e){if(1&t&&(s.Sb(0,"p",33),s.Gc(1),s.dc(2,"dictValue"),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(1),s.Hc(s.fc(2,1,t.operation.paymentTypeCode,"PAYMENT_TYPE"))}}function Dn(t,e){if(1&t&&(s.Sb(0,"p",33),s.Gc(1),s.dc(2,"dictValue"),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(1),s.Hc(s.fc(2,1,t.operation.paymentSystemCode,"PAYMENT_SYSTEM"))}}function kn(t,e){if(1&t&&(s.Sb(0,"p",34),s.Sb(1,"span",35),s.Gc(2),s.dc(3,"dictValue"),s.Rb(),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(2),s.Hc(s.fc(3,1,t.paymentStatusShortCode,"PAYMENT_STATUS_SHORT"))}}function Tn(t,e){if(1&t&&(s.Sb(0,"p",34),s.Sb(1,"span",36),s.Gc(2),s.dc(3,"dictValue"),s.Rb(),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(2),s.Hc(s.fc(3,1,t.paymentStatusShortCode,"PAYMENT_STATUS_SHORT"))}}function On(t,e){1&t&&(s.Sb(0,"p",34),s.Sb(1,"span",37),s.Gc(2),s.dc(3,"translate"),s.Rb(),s.Rb()),2&t&&(s.zb(2),s.Hc(s.ec(3,1,"view360.historyMini.hold.label")))}function Nn(t,e){if(1&t&&(s.Sb(0,"del"),s.Sb(1,"span",38),s.Gc(2),s.dc(3,"amount"),s.Rb(),s.Gc(4,"\xa0"),s.Sb(5,"span",39),s.Gc(6),s.Rb(),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(2),s.Hc(s.ec(3,2,t.operation.amount.amount)),s.zb(4),s.Hc(t.operation.amount.currency)}}function Fn(t,e){if(1&t&&(s.Qb(0),s.Sb(1,"span",38),s.Gc(2),s.dc(3,"amount"),s.Rb(),s.Gc(4,"\xa0"),s.Sb(5,"span",39),s.Gc(6),s.Rb(),s.Pb()),2&t){const t=s.cc().$implicit;s.zb(2),s.Hc(s.ec(3,2,t.operation.amount.amount)),s.zb(4),s.Hc(t.operation.amount.currency)}}function In(t,e){if(1&t&&(s.Sb(0,"p",32),s.Gc(1),s.dc(2,"dictValue"),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(1),s.Hc(t.operation.shortDescription?t.operation.shortDescription:s.fc(2,1,t.categoryCode,t.categoryDictionary))}}function Ln(t,e){if(1&t&&(s.Sb(0,"p",33),s.Gc(1),s.dc(2,"dictValue"),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(1),s.Hc(s.fc(2,1,t.categoryCode,t.categoryDictionary))}}function En(t,e){if(1&t&&(s.Sb(0,"p",33),s.Gc(1),s.dc(2,"dictValue"),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(1),s.Hc(s.fc(2,1,t.operation.paymentTypeCode,"PAYMENT_TYPE"))}}function jn(t,e){if(1&t&&(s.Sb(0,"p",33),s.Gc(1),s.dc(2,"dictValue"),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(1),s.Hc(s.fc(2,1,t.operation.paymentSystemCode,"PAYMENT_SYSTEM"))}}function Hn(t,e){if(1&t&&(s.Sb(0,"p",34),s.Sb(1,"span",35),s.Gc(2),s.dc(3,"dictValue"),s.Rb(),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(2),s.Hc(s.fc(3,1,t.paymentStatusShortCode,"PAYMENT_STATUS_SHORT"))}}function Gn(t,e){if(1&t&&(s.Sb(0,"p",34),s.Sb(1,"span",36),s.Gc(2),s.dc(3,"dictValue"),s.Rb(),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(2),s.Hc(s.fc(3,1,t.paymentStatusShortCode,"PAYMENT_STATUS_SHORT"))}}function Mn(t,e){1&t&&(s.Sb(0,"p",34),s.Sb(1,"span",37),s.Gc(2),s.dc(3,"translate"),s.Rb(),s.Rb()),2&t&&(s.zb(2),s.Hc(s.ec(3,1,"view360.historyMini.hold.label")))}function Vn(t,e){if(1&t&&(s.Sb(0,"del"),s.Sb(1,"span",38),s.Gc(2),s.dc(3,"amount"),s.Rb(),s.Gc(4,"\xa0"),s.Sb(5,"span",39),s.Gc(6),s.Rb(),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(2),s.Hc(s.ec(3,2,t.operation.amount.amount)),s.zb(4),s.Hc(t.operation.amount.currency)}}function $n(t,e){if(1&t&&(s.Qb(0),s.Sb(1,"span",38),s.Gc(2),s.dc(3,"amount"),s.Rb(),s.Gc(4,"\xa0"),s.Sb(5,"span",39),s.Gc(6),s.Rb(),s.Pb()),2&t){const t=s.cc().$implicit;s.zb(2),s.Hc(s.ec(3,2,t.operation.amount.amount)),s.zb(4),s.Hc(t.operation.amount.currency)}}function _n(t,e){if(1&t){const t=s.Tb();s.Sb(0,"li"),s.Sb(1,"dl",10),s.Sb(2,"dt",11),s.Sb(3,"p",12),s.Gc(4),s.dc(5,"translate"),s.Rb(),s.Sb(6,"p",13),s.Gc(7),s.dc(8,"appDate"),s.Rb(),s.Sb(9,"p",14),s.Gc(10),s.dc(11,"appDate"),s.Rb(),s.Rb(),s.Sb(12,"dd"),s.Sb(13,"ul"),s.Sb(14,"li",15),s.Nb(15,"a",16),s.Sb(16,"div",17),s.Sb(17,"div",18),s.Ec(18,zn,3,4,"p",19),s.Ec(19,xn,3,4,"p",20),s.Ec(20,An,3,4,"p",20),s.Ec(21,Dn,3,4,"p",20),s.Rb(),s.Sb(22,"div",21),s.Sb(23,"p"),s.Nb(24,"i"),s.Rb(),s.Rb(),s.Sb(25,"div",22),s.Ec(26,kn,4,4,"p",23),s.Ec(27,Tn,4,4,"p",23),s.Ec(28,On,4,3,"p",23),s.Sb(29,"p",24),s.Ec(30,Nn,7,4,"del",25),s.Ec(31,Fn,7,4,"ng-container",25),s.Rb(),s.Rb(),s.Rb(),s.Sb(32,"div",26),s.Sb(33,"div",27),s.Sb(34,"div",28),s.Sb(35,"a",29),s.Zb("click",function(){s.xc(t);const a=e.$implicit;return s.cc(2).onOperationDetailsClick(a)}),s.Sb(36,"span"),s.Gc(37),s.dc(38,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(39,"div",30),s.Sb(40,"div"),s.Sb(41,"p",12),s.Gc(42),s.dc(43,"translate"),s.Rb(),s.Sb(44,"p",13),s.Gc(45),s.dc(46,"appDate"),s.Rb(),s.Sb(47,"p",14),s.Gc(48),s.dc(49,"appDate"),s.Rb(),s.Rb(),s.Sb(50,"div",31),s.Sb(51,"div",18),s.Ec(52,In,3,4,"p",19),s.Ec(53,Ln,3,4,"p",20),s.Ec(54,En,3,4,"p",20),s.Ec(55,jn,3,4,"p",20),s.Rb(),s.Sb(56,"div",22),s.Ec(57,Hn,4,4,"p",23),s.Ec(58,Gn,4,4,"p",23),s.Ec(59,Mn,4,3,"p",23),s.Sb(60,"p",24),s.Ec(61,Vn,7,4,"del",25),s.Ec(62,$n,7,4,"ng-container",25),s.Rb(),s.Rb(),s.Rb(),s.Sb(63,"div",26),s.Sb(64,"div",27),s.Sb(65,"div",28),s.Sb(66,"a",29),s.Zb("click",function(){s.xc(t);const a=e.$implicit;return s.cc(2).onOperationDetailsClick(a)}),s.Sb(67,"span"),s.Gc(68),s.dc(69,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb()}if(2&t){const t=e.$implicit,a=s.cc(2);s.zb(4),s.Hc(s.ec(5,36,t.shortDateNameKey)),s.zb(3),s.Hc(s.fc(8,38,t.date,"DD.MM")),s.zb(3),s.Hc(s.fc(11,41,t.date,"YYYY")),s.zb(4),s.jc("ngClass",t.typeClass),s.Ab("data-target","#trdetails"+t.base64SafeId),s.zb(4),s.jc("ngIf",t.operation.shortDescription||t.isTransaction),s.zb(1),s.jc("ngIf",t.isTransaction&&t.operation.shortDescription||t.isHold),s.zb(1),s.jc("ngIf",t.isPayment),s.zb(1),s.jc("ngIf",a.checkPaymentType(t)),s.zb(1),s.jc("ngClass",t.pfmOperationClass),s.zb(2),s.Db("ca icon ",t.isSplit?"ca-divide":"PAYMENT"==t.operation.type?"ca-transakcja-brak":t.isCategorized?"":"ca-transakcja-oczekuje",""),s.zb(2),s.jc("ngIf",t.isRejected),s.zb(1),s.jc("ngIf",t.isCancelled),s.zb(1),s.jc("ngIf",t.isHold),s.zb(2),s.jc("ngIf",t.isRejected||t.isCancelled),s.zb(1),s.jc("ngIf",!t.isRejected&&!t.isCancelled),s.zb(1),s.jc("id","trdetails"+t.base64SafeId),s.zb(5),s.Hc(s.ec(38,44,"view360.historyMini.details.link")),s.zb(5),s.Hc(s.ec(43,46,t.shortDateNameKey)),s.zb(3),s.Hc(s.fc(46,48,t.date,"DD.MM")),s.zb(3),s.Hc(s.fc(49,51,t.date,"YYYY")),s.zb(2),s.jc("ngClass",t.typeClass),s.Ab("data-target","#trdetails"+t.base64SafeId),s.zb(2),s.jc("ngIf",t.operation.shortDescription||t.isTransaction),s.zb(1),s.jc("ngIf",t.isTransaction&&t.operation.shortDescription||t.isHold),s.zb(1),s.jc("ngIf",t.isPayment),s.zb(1),s.jc("ngIf",a.checkPaymentType(t)),s.zb(2),s.jc("ngIf",t.isRejected),s.zb(1),s.jc("ngIf",t.isCancelled),s.zb(1),s.jc("ngIf",t.isHold),s.zb(2),s.jc("ngIf",t.isRejected||t.isCancelled),s.zb(1),s.jc("ngIf",!t.isRejected&&!t.isCancelled),s.zb(1),s.jc("id","trdetails"+t.base64SafeId),s.zb(5),s.Hc(s.ec(69,54,"view360.historyMini.details.link"))}}function Bn(t,e){if(1&t&&(s.Sb(0,"div",5),s.Sb(1,"ul",6),s.Ec(2,_n,70,56,"li",7),s.Rb(),s.Sb(3,"p",8),s.Sb(4,"a",9),s.Sb(5,"span"),s.Gc(6),s.dc(7,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&t){const t=s.cc();s.zb(2),s.jc("ngForOf",t.state.data.operations),s.zb(2),s.jc("appPiwikClickable","history/buttonHistory"),s.zb(2),s.Hc(s.ec(7,3,"view360.historyMini.history.link"))}}let Un=(()=>{class t{constructor(t,e,a,n){this.elementRef=t,this.view360Service=e,this.operationHelper=a,this.routeDataService=n,this.state={data:{operations:[]},isEmptyList:!1}}ngOnInit(){this.state.data.operations=this.operationHelper.toOperationDataWrappers(this.operations,"DESC"),this.state.isEmptyList=0===this.state.data.operations.length}ngAfterViewInit(){this.subscribeToBootstrapEvents()}ngOnDestroy(){this.unsubscribeFromBootstrapEvents()}onOperationDetailsClick(t){Object(D.a)([this.view360Service.getAccountListSnapshot(),this.view360Service.getCreditCardAccountListSnapshot()]).subscribe(e=>{const a=[].concat(e[0]).concat(e[1]).filter(e=>e.nrbNumber===t.operation.nrbNumber).map(t=>t.id);1===a.length&&this.routeDataService.navigateWithRouteData(Ht.a.history,{accId:a[0],opId:t.operation.id},["/history"])})}subscribeToBootstrapEvents(){jQuery(this.elementRef.nativeElement).on("show.bs.collapse",".tr-details",function(){const t=jQuery(this).siblings(".tr-basic").find(".tr-description"),e=jQuery(this).siblings(".tr-basic").find(".tr-title"),a=jQuery(this).siblings(".tr-basic").find(".tr-account");t.removeClass("short"),t.css({height:"auto"}),t.css({height:"21px"}),setTimeout(function(){const n=a.outerHeight(!0),i=e.outerHeight(!0);setTimeout(function(){t.animate({height:n+i+"px"},250)},0)},0),jQuery(this).parents("#historyMini").find(".tr-details.show, .tr-details.collapsing").each(function(){jQuery(this).collapse("hide")})}),jQuery(this.elementRef.nativeElement).on("hide.bs.collapse",".tr-details",function(){const t=jQuery(this).siblings(".tr-basic").find(".tr-description");t.animate({height:"21px"},250,function(){t.addClass("short")})}),jQuery(this.elementRef.nativeElement).on("hidden.bs.collapse",".tr-details",function(){jQuery(this).parents(".tr-type").addClass("short")})}unsubscribeFromBootstrapEvents(){jQuery(this.elementRef.nativeElement).off()}checkPaymentType(t){return["SEPA","SORB","SWFT","EXEL"].includes(t.operation.paymentSystemCode)&&t.isPayment}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(s.l),s.Mb(W),s.Mb(Cn.a),s.Mb(Ht.b))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-history-mini-view"]],inputs:{operations:"operations"},decls:5,vars:5,consts:[[1,"h4"],["class","history-details-mini empty-history",4,"ngIf"],["class","history-details-mini",4,"ngIf"],[1,"history-details-mini","empty-history"],[1,"ca","ca-history"],[1,"history-details-mini"],[1,"history-details-list"],[4,"ngFor","ngForOf"],[1,"history-more-mini"],["href","javascript:void(null);","routerLink","/history",3,"appPiwikClickable"],["aria-hidden","true"],[1,"tr-date"],[1,"tr-weekday","fr"],[1,"tr-daymonth"],[1,"tr-year"],["role","button","data-toggle","collapse","aria-expanded","false",1,"tr-type",3,"ngClass"],["href","javascript:void(0);",1,"kb-anchor"],[1,"tr-basic"],[1,"tr-description","short"],["class","tr-account",4,"ngIf"],["class","tr-title",4,"ngIf"],[1,"tr-category",3,"ngClass"],[1,"tr-amount"],["class","labels",4,"ngIf"],[1,"value"],[4,"ngIf"],["role","tabpanel",1,"tr-details","collapse",3,"id"],[1,"row"],[1,"col-12","text-right"],["href","javascript:void(null);",1,"display-link",3,"click"],[1,"sr-only"],["role","button","data-toggle","collapse","aria-expanded","false",3,"ngClass"],[1,"tr-account"],[1,"tr-title"],[1,"labels"],[1,"label","label-rejected"],[1,"label","label-cancelled"],[1,"label","label-default"],[1,"number"],[1,"currency"]],template:function(t,e){1&t&&(s.Sb(0,"h2",0),s.Gc(1),s.dc(2,"translate"),s.Rb(),s.Ec(3,Pn,5,3,"div",1),s.Ec(4,Bn,8,5,"div",2)),2&t&&(s.zb(1),s.Hc(s.ec(2,3,"view360.historyMini.title.label")),s.zb(2),s.jc("ngIf",e.state.isEmptyList),s.zb(1),s.jc("ngIf",!e.state.isEmptyList))},directives:[d.m,d.l,i.g,At.a,d.k],pipes:[u.c,Mt.a,we.a,y.a],encapsulation:2,changeDetection:0}),t})();const Yn=["viewOptsSwitch"],Qn=["view360HistoryMiniOpts"];function Wn(t,e){if(1&t){const t=s.Tb();s.Qb(0,4),s.Sb(1,"app-view360-history-mini-opts",5,6),s.Zb("optsSubmit",function(e){return s.xc(t),s.cc().onOptsSubmit(e)}),s.Rb(),s.Pb()}if(2&t){const t=s.cc();s.zb(1),s.jc("optsData",t.state.data.optsData)}}function Zn(t,e){if(1&t&&(s.Qb(0,7),s.Nb(1,"app-view360-history-mini-view",8),s.Pb()),2&t){const t=s.cc();s.zb(1),s.jc("operations",t.state.data.operations)}}let Kn=(()=>{class t{constructor(t,e){this.view360Service=t,this.personalisationService=e,this.subscriptions=[],this.state={isDataLoaded:!1,data:{optsData:null,operations:null}}}ngOnInit(){this.state.isDataLoaded=!1,this.subscriptions.push(k.a.minExecutionTime(Object(D.a)([this.view360Service.getOptsData(),this.view360Service.getOperationHistory360View()])).subscribe(t=>{this.state.data.optsData=t[0],this.state.data.operations=t[1],this.state.isDataLoaded=!0,this.viewOptsSwitch.switchAfterDataLoaded()}))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}onOptsCancel(){this.view360HistoryMiniOpts.reset()}onOptsSubmit(t){this.viewOptsSwitch.switchAfterOuterOptsSubmit(),this.view360Service.resetHistoryMini(),this.personalisationService.updateHistory(t).subscribe(()=>{this.ngOnInit()})}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(W),s.Mb(G.a))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-history-mini"]],viewQuery:function(t,e){if(1&t&&(s.Oc(Yn,!0),s.Oc(Qn,!0)),2&t){let t;s.tc(t=s.ac())&&(e.viewOptsSwitch=t.first),s.tc(t=s.ac())&&(e.view360HistoryMiniOpts=t.first)}},decls:4,vars:4,consts:[[3,"mainHtmlId","optsHtmlId","optsCancel"],["viewOptsSwitch",""],["viewType","opts",4,"ngIf"],["viewType","view",4,"ngIf"],["viewType","opts"],[3,"optsData","optsSubmit"],["view360HistoryMiniOpts",""],["viewType","view"],[3,"operations"]],template:function(t,e){1&t&&(s.Sb(0,"app-view360-view-opts-switch",0,1),s.Zb("optsCancel",function(){return e.onOptsCancel()}),s.Ec(2,Wn,3,1,"ng-container",2),s.Ec(3,Zn,2,1,"ng-container",3),s.Rb()),2&t&&(s.jc("mainHtmlId","historyMini")("optsHtmlId","historyMiniOpts"),s.zb(2),s.jc("ngIf",e.state.isDataLoaded),s.zb(1),s.jc("ngIf",e.state.isDataLoaded))},directives:[bt,d.m,Rn,Un],styles:['#historyMini .card-bg{min-height:250px}.theme-default #historyMini .card-bg{background-color:hsla(0,0%,100%,.9)}.theme-hicontrast #historyMini .card-bg{background-color:hsla(0,0%,100%,.05)}.history-details-mini{padding:0;margin:0}.history-details-mini .history-details-list{background-position:3.25rem 0;background-size:1px auto}.history-details-mini .history-details-list li dl{margin-bottom:0}.history-details-mini .history-details-list li dd>ul .tr-type{cursor:pointer;display:block;padding-top:.5rem;padding-bottom:.5rem}.history-details-mini .history-details-list li dd>ul .tr-type+.tr-type{margin-top:.25rem}.history-details-mini .history-details-list li dd>ul .tr-type p{font-size:.875rem}.history-details-mini .history-details-list li dd>ul .tr-type .tr-basic{display:block}.history-details-mini .history-details-list li dd>ul .tr-type .tr-basic:after{content:"";clear:both;display:block;font-size:0;overflow:hidden;line-height:0}.history-details-mini .history-details-list li dd>ul .tr-type .tr-basic>div{display:block;padding:.125rem 1rem}.history-details-mini .history-details-list li dd>ul .tr-type .tr-basic>div.tr-amount,.history-details-mini .history-details-list li dd>ul .tr-type .tr-basic>div.tr-category,.history-details-mini .history-details-list li dd>ul .tr-type .tr-basic>div.tr-description{width:auto}.history-details-mini .history-details-list li dd>ul .tr-type .tr-basic>div.tr-amount,.history-details-mini .history-details-list li dd>ul .tr-type .tr-basic>div.tr-description{width:calc(100% - 3rem);padding-right:0;float:left}.history-details-mini .history-details-list li dd>ul .tr-type .tr-basic>div.tr-description .tr-title{display:none}.history-details-mini .history-details-list li dd>ul .tr-type .tr-basic>div.tr-category{float:right;margin-top:.75rem;padding-right:.25rem;padding-left:0}.history-details-mini .history-details-list li dd>ul .tr-type .tr-basic>div.tr-category span{display:none}.history-details-mini .history-details-list li dd>ul .tr-type .tr-basic>div.tr-amount{text-align:left;min-width:0}.history-details-mini .history-details-list li dd>ul .tr-type .tr-basic>div.tr-amount .value{float:none}.history-details-mini .history-details-list li dd>ul .tr-type .tr-basic>div.tr-amount .label{padding-top:.125rem;padding-bottom:.125rem;line-height:.75rem;margin:0 0 .5rem;font-size:.625rem}.history-details-mini .history-details-list li dd>ul .tr-type .tr-details{line-height:1.5rem;font-size:.8125rem;padding-top:0;padding-bottom:0}.history-details-mini .history-details-list li dd>ul .tr-type .tr-details dl{padding:1rem 0}.history-details-mini .history-details-list li dd>ul .tr-type .tr-details .tr-operations a{text-align:left;margin:.375rem 0}.history-details-mini .history-details-list li dt.tr-date{width:4rem;padding:.5rem 1rem .5rem 0}.theme-default .history-details-mini .history-details-list li dt.tr-date{color:#999}.theme-hicontrast .history-details-mini .history-details-list li dt.tr-date{color:#d8d8d8}.history-details-mini .history-details-list li dt.tr-date p{text-align:center;font-size:.875rem}.history-details-mini .history-details-list li dt.tr-date p.tr-weekday{font-weight:600}.history-details-mini .history-details-list li dt.tr-date p.tr-daymonth{font-weight:700}.history-details-mini .history-details-list li dt.tr-date p.tr-year{font-weight:600}.history-details-mini .history-details-list li dd>ul li.tr-type .tr-basic>div.tr-description{overflow:hidden;will-change:height}.history-details-mini .history-details-list li dd>ul li.tr-type .tr-basic>div.tr-description .tr-title{margin-bottom:.25rem;font-size:.75rem;font-weight:600}.theme-default .history-details-mini .history-details-list li dd>ul li.tr-type .tr-basic>div.tr-description .tr-title,.theme-hicontrast .history-details-mini .history-details-list li dd>ul li.tr-type .tr-basic>div.tr-description .tr-title{color:#999}.history-details-mini .history-details-list li dd>ul li.tr-type .tr-basic>div.tr-description.short{box-sizing:border-box;height:1.5357em}.history-details-mini .history-details-list li dd>ul li.tr-type .tr-basic>div.tr-description.short .tr-account{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.history-details-mini .history-details-list li dd>ul li.tr-type .tr-basic>div.tr-description.short .tr-title{height:0;overflow:hidden;margin-bottom:0}.history-details-mini .history-details-list li dd>ul li.tr-type[aria-expanded=true] .tr-basic>div.tr-description .tr-account{white-space:normal}.history-details-mini .history-details-list li dd>ul li.tr-type[aria-expanded=true] .tr-basic>div.tr-description .tr-account,.history-details-mini .history-details-list li dd>ul li.tr-type[aria-expanded=true] .tr-basic>div.tr-description .tr-title{display:block}.history-details-mini .history-more-mini{text-align:right;font-weight:600;font-size:.875rem;margin:1rem 0 0}.theme-default .history-details-mini .history-more-mini a{color:#007e90}.theme-hicontrast .history-details-mini .history-more-mini a{color:#9c0}.theme-default .history-details-mini .history-more-mini a:focus,.theme-default .history-details-mini .history-more-mini a:hover{color:#006675}.theme-hicontrast .history-details-mini .history-more-mini a:focus,.theme-hicontrast .history-details-mini .history-more-mini a:hover{color:#ad1}.history-details-mini.empty-history{min-height:12.75rem;display:flex;align-items:center;juztify-content:center;flex-flow:column nowrap}.history-details-mini.empty-history .ca{font-size:4rem}.theme-default .history-details-mini.empty-history .ca,.theme-hicontrast .history-details-mini.empty-history .ca{color:#9c0}.history-details-mini.empty-history p{font-size:1.125rem;font-weight:300;text-align:center}'],encapsulation:2}),t})();var Jn=a("vkgz");const qn=function(t){return{preloading:t}};let Xn=(()=>{class t{constructor(){this.optsSubmit=new s.n,this.state={isLoading:!1}}ngOnInit(){this.initForm(),this.reset()}reset(){this.initFormValues(),this.state.isLoading=!1}initForm(){this.optsForm=new n.k({accounts:new n.h(this.optsData.personalization.view360.calendar.accounts),ccAccounts:new n.h(this.optsData.personalization.view360.calendar.ccAccounts),hideProxy:new n.h(this.optsData.personalization.view360.calendar.hideProxy),show:new n.h(!this.optsData.personalization.view360.calendar.hide)})}initFormValues(){this.optsForm.patchValue({accounts:this.optsData.personalization.view360.calendar.accounts,ccAccounts:this.optsData.personalization.view360.calendar.ccAccounts,hideProxy:this.optsData.personalization.view360.calendar.hideProxy,show:!this.optsData.personalization.view360.calendar.hide})}submitOptsForm(){this.state.isLoading=!0,this.optsSubmit.emit({accounts:this.optsForm.value.accounts,ccAccounts:this.optsForm.value.ccAccounts,hideProxy:this.optsForm.value.hideProxy,hide:!this.optsForm.value.show})}filterByProductRole(t){return this.filterCurrentSelection(),t.filter(t=>!this.optsForm.value.hideProxy||!t.isProxyProduct)}filterCurrentSelection(){const t=this.optsData.options.accounts.filter(t=>!t.isProxyProduct),e=this.optsData.options.ccAccounts.filter(t=>!t.isProxyProduct);this.optsForm.patchValue({accounts:this.optsForm.value.accounts.filter(e=>!this.optsForm.value.hideProxy||t.filter(t=>t.nrbNumber===e).length>0),ccAccounts:this.optsForm.value.ccAccounts.filter(t=>!this.optsForm.value.hideProxy||e.filter(e=>e.nrbNumber===t).length>0)})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-financial-calendar-opts"]],inputs:{optsData:"optsData"},outputs:{optsSubmit:"optsSubmit"},decls:50,vars:55,consts:[[1,"container-fluid"],[1,"opts-header"],["id","scheduledPaymentsOptsTitle",1,"opts-title","h4"],[1,"opts-subtitle","h6"],[1,"opts-body"],[1,"row","form-vertical",3,"formGroup"],[1,"col-12","col-md-6"],[1,"form-group"],["id","financialCalendarPersonalizationAccountsLabel"],[3,"formControlName","options","multiple","dataTitle","dataCountSelectedText","labelledby","dataWidth"],["id","financialCalendarPersonalizationCardsLabel"],[1,"mt-3"],[1,"btn-checkbox-ip"],["type","checkbox",3,"formControlName"],[1,"mb-1","mt-3"],[1,"show-hide","mb-1"],[3,"formControlName"],[1,"mt-1"],[1,"opts-footer"],[1,"buttons","text-right"],["href","javascript:void(null);",1,"btn","btn-primary","btn-lg",3,"ngClass","click"]],template:function(t,e){1&t&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Sb(2,"h2",2),s.Gc(3),s.dc(4,"translate"),s.Sb(5,"span",3),s.Gc(6),s.dc(7,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Sb(8,"div",4),s.Sb(9,"p"),s.Gc(10),s.dc(11,"translate"),s.Rb(),s.Sb(12,"form",5),s.Sb(13,"div",6),s.Sb(14,"div",7),s.Sb(15,"label",8),s.Gc(16),s.dc(17,"translate"),s.Rb(),s.Nb(18,"app-selectpicker-accounts",9),s.dc(19,"translate"),s.dc(20,"translate"),s.Rb(),s.Rb(),s.Sb(21,"div",6),s.Sb(22,"div",7),s.Sb(23,"label",10),s.Gc(24),s.dc(25,"translate"),s.Rb(),s.Nb(26,"app-selectpicker-accounts",9),s.dc(27,"translate"),s.dc(28,"translate"),s.Rb(),s.Rb(),s.Sb(29,"div",6),s.Sb(30,"p",11),s.Gc(31),s.dc(32,"translate"),s.Sb(33,"span",12),s.Nb(34,"input",13),s.Nb(35,"i"),s.Rb(),s.Rb(),s.Rb(),s.Sb(36,"div",6),s.Sb(37,"p",14),s.Gc(38),s.dc(39,"translate"),s.Rb(),s.Sb(40,"p",15),s.Nb(41,"app-hide-show-checkbox",16),s.Rb(),s.Sb(42,"p",17),s.Gc(43),s.dc(44,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(45,"div",18),s.Sb(46,"div",19),s.Sb(47,"a",20),s.Zb("click",function(){return e.submitOptsForm()}),s.Gc(48),s.dc(49,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&t&&(s.zb(3),s.Ic("",s.ec(4,27,"settings.personalization.financial-calendar.title")," "),s.zb(3),s.Hc(s.ec(7,29,"settings.personalization.financial-calendar.subtitle")),s.zb(4),s.Hc(s.ec(11,31,"settings.personalization.financial-calendar.info")),s.zb(2),s.jc("formGroup",e.optsForm),s.zb(4),s.Hc(s.ec(17,33,"settings.personalization.accounts.label")),s.zb(2),s.jc("formControlName","accounts")("options",e.filterByProductRole(e.optsData.options.accounts))("multiple",!0)("dataTitle",s.ec(19,35,"settings.personalization.accounts.choose.label"))("dataCountSelectedText",s.ec(20,37,"settings.personalization.accounts.selected.label")+" ({0})")("labelledby","financialCalendarPersonalizationAccountsLabel")("dataWidth","100%"),s.zb(6),s.Hc(s.ec(25,39,"settings.personalization.cards.label")),s.zb(2),s.jc("formControlName","ccAccounts")("options",e.filterByProductRole(e.optsData.options.ccAccounts))("multiple",!0)("dataTitle",s.ec(27,41,"settings.personalization.cards.choose.label"))("dataCountSelectedText",s.ec(28,43,"settings.personalization.cards.selected.label")+" ({0})")("labelledby","financialCalendarPersonalizationCardsLabel")("dataWidth","100%"),s.zb(5),s.Ic(" ",s.ec(32,45,"settings.personalization.hide.proxy.products.label")," "),s.zb(3),s.jc("formControlName","hideProxy"),s.zb(4),s.Hc(s.ec(39,47,"settings.personalization.financial-calendar.hide.label")),s.zb(3),s.jc("formControlName","show"),s.zb(2),s.Hc(s.ec(44,49,"settings.personalization.financial-calendar.hide.hint")),s.zb(4),s.jc("ngClass",s.pc(53,qn,e.state.isLoading)),s.zb(1),s.Hc(s.ec(49,51,"settings.personalization.save.label")))},directives:[n.F,n.u,n.l,o.a,n.t,n.j,n.a,l.a,d.k],pipes:[u.c],encapsulation:2,changeDetection:0}),t})();var ti=a("xgIS");const ei=["chartContainer"],ai=["before"],ni=["after"];function ii(t,e){if(1&t&&(s.Sb(0,"tr"),s.Sb(1,"td"),s.Gc(2),s.Rb(),s.Sb(3,"td"),s.Gc(4),s.Rb(),s.Rb()),2&t){const t=e.$implicit,a=e.index,n=s.cc();s.zb(2),s.Kc(" ",n.state.data.monthDesc[a]," ",n.state.data.currentYear," : ",t,"PLN"),s.zb(2),s.Kc("",n.state.data.monthDesc[a]," ",n.state.data.previousYear," : ",n.state.data.chartData2[a],"PLN")}}const ci=function(t){return{width:t}};let si=(()=>{class t{constructor(t,e,a,n,i){this.formatHelper=t,this.zone=e,this.translateService=a,this.appStateService=n,this.appDateService=i,this.subscriptions=[],this.state={isScreenMdDown:this.appStateService.isMdDown(),chartOptions:{lastTwelveMonthsFlag:!1},data:{previousYear:null,currentYear:null,chartData1:[],chartData2:[],monthDesc:[]}},this.subscriptions.push(this.appStateService.themeChange.subscribe(()=>{this.onThemeChange()})),this.subscriptions.push(this.appStateService.screenContainerSizeChange.subscribe(()=>{this.onScreenContainerSizeChange()}))}ngOnInit(){setTimeout(()=>{this.updateChart(this.formatHelper)})}ngAfterViewInit(){this.initChartScrollHandler()}onThemeChange(){this.updateChart(this.formatHelper)}onScreenContainerSizeChange(){this.state.isScreenMdDown=this.appStateService.isMdDown()}onLastTwelveMonthsFlagChange(){this.updateChart(this.formatHelper)}generateChartDataStructure(t,e,a){function n(t){return t?t.value:0}const i=[];for(let c=0;c<=11;c++){const s=(c+a)%12+1,o=s>a?this.appDateService.momentNow().add(-2,"year").format("YYYY"):e,r=s>a?e:t;i.push({month:this.translateService.instant("dict.month.roman."+s),monthDesc:this.translateService.instant("dict.month."+s),year1:o,year2:r,amount1:n(this.chartData.filter(t=>t.seriesCode===o&&t.argumentCode===s.toString())[0]),amount2:n(this.chartData.filter(t=>t.seriesCode===r&&t.argumentCode===s.toString())[0])})}return i}updateChart(t){this.zone.runOutsideAngular(()=>{function e(e){return t.formatAmount(e)}this.state.data.currentYear=this.appDateService.momentNow().format("YYYY"),this.state.data.previousYear=this.appDateService.momentNow().add(-1,"year").format("YYYY");const a=this.state.chartOptions.lastTwelveMonthsFlag?+this.appDateService.momentNow().format("MM"):12,n=this.generateChartDataStructure(this.state.data.currentYear,this.state.data.previousYear,a),i=n.map(function(t){return t.month});this.state.data.chartData1=n.map(function(t){return t.amount1}),this.state.data.chartData2=n.map(function(t){return t.amount2}),this.state.data.monthDesc=n.map(function(t){return t.monthDesc});const c=n.reduce((t,e)=>Math.max(e.amount1,e.amount2,t),0);Highcharts.chart(this.chartRef.nativeElement,{chart:{type:"column"},title:{text:""},xAxis:{categories:i,labels:{style:null},plotLines:[{color:12!==a?"#999999":null,value:12-a-1+.5,width:2}],plotBands:[{className:12!==a?"plot-band":"plot-band-invisible",from:12-a-1+.5,to:12}]},yAxis:{title:"",tickInterval:c/3.2,endOnTick:!1,labels:{enabled:!1}},credits:{enabled:!1},exporting:{enabled:!1},series:[{name:this.state.data.previousYear,data:this.state.data.chartData1,showInLegend:!1,color:this.appStateService.isThemeHiContrast()?"#99CC00":"#006675"},{name:this.state.data.currentYear,data:this.state.data.chartData2,showInLegend:!1,color:this.appStateService.isThemeHiContrast()?"#F5F5F5":"#007E90"}],plotOptions:{series:{pointPadding:0,borderWidth:0}},tooltip:{useHTML:!0,formatter:function(){const t=i.indexOf(this.x),a=n[t].monthDesc,c=n[t].year2,s=n[t].amount2;return`\n                        <table class="financial-calendar-legend">\n                            <tr>\n                                <td><div class="rectangle s1 small"></div></td>\n                                <td>${a} ${n[t].year1}: </td>\n                                <td class="text-right"><span class="amount">${e(n[t].amount1)}</span>&nbsp;<span class="currency">PLN</span></td>\n                            </tr>\n                            <tr>\n                                <td><div class="rectangle s2 small"></div></td>\n                                <td>${a} ${c}: </td>\n                                <td class="text-right"><span class="amount">${e(s)}</span>&nbsp;<span class="currency">PLN</span></td>\n                            </tr>\n                        </table>\n                    `}}})})}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}initChartScrollHandler(){const t=jQuery(this.chartRef.nativeElement).parent();Object(ti.a)(this.before.nativeElement,"click").subscribe(()=>t.animate({scrollLeft:"-=300"},350)),Object(ti.a)(this.after.nativeElement,"click").subscribe(()=>t.animate({scrollLeft:"+=300"},350)),Object(ti.a)(t,"scroll").subscribe(()=>this.chartScrollHandler()),this.chartScrollHandler()}chartScrollHandler(){const t=this.chartRef.nativeElement,e=jQuery(t).parent();if(!e.hasClass("chart"))return!1;const a=e.parents(".chart-wrapper").eq(0),n=t.scrollWidth,i=a.width(),c=e.scrollLeft();c>0?a.addClass("left-btn-visible"):a.removeClass("left-btn-visible"),c<=n-i?a.addClass("right-btn-visible"):a.removeClass("right-btn-visible")}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(be.a),s.Mb(s.z),s.Mb(u.d),s.Mb(me.a),s.Mb(nt.a))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-financial-calendar-view"]],viewQuery:function(t,e){if(1&t&&(s.Oc(ei,!0),s.Oc(ai,!0),s.Oc(ni,!0)),2&t){let t;s.tc(t=s.ac())&&(e.chartRef=t.first),s.tc(t=s.ac())&&(e.before=t.first),s.tc(t=s.ac())&&(e.after=t.first)}},inputs:{chartData:"chartData"},decls:36,vars:22,consts:[[1,"row","equal-gutters","justify-content-between"],[1,"col-12","col-md-auto"],[1,"h4"],[1,"col-12","col-md-auto","justify-self-end"],[1,"legend"],[1,"current"],[1,"filter-checkboxes-horz-group","d-inline-flex","flex-row","flex-wrap","align-items-start","justify-content-start"],[1,"filter-checkbox"],["type","radio","name","optradio","aria-describedby","table-desc",3,"ngModel","value","checked","ngModelChange","change"],[1,"name"],[1,"past"],[1,"label"],[1,"chart-wrapper"],["aria-hidden","true",1,"chart"],[1,"financial-calendar-chart",3,"ngStyle"],["chartContainer",""],[1,"before"],["before",""],[1,"after"],["after",""],[1,"sr-only","legend"],["id","table-desc",1,"financial-calendar-legend"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Sb(2,"h2",2),s.Gc(3),s.dc(4,"translate"),s.Rb(),s.Rb(),s.Sb(5,"div",3),s.Sb(6,"ul",4),s.Sb(7,"li",5),s.Sb(8,"div",6),s.Sb(9,"label",7),s.Sb(10,"input",8),s.Zb("ngModelChange",function(t){return e.state.chartOptions.lastTwelveMonthsFlag=t})("change",function(){return e.onLastTwelveMonthsFlagChange()}),s.Rb(),s.Sb(11,"em",9),s.Sb(12,"span"),s.Gc(13),s.dc(14,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Sb(15,"label",7),s.Sb(16,"input",8),s.Zb("ngModelChange",function(t){return e.state.chartOptions.lastTwelveMonthsFlag=t})("change",function(){return e.onLastTwelveMonthsFlagChange()}),s.Rb(),s.Sb(17,"em",9),s.Sb(18,"span"),s.Gc(19),s.dc(20,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(21,"li",10),s.Sb(22,"div",11),s.Gc(23),s.dc(24,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(25,"div",12),s.Sb(26,"div",13),s.Nb(27,"div",14,15),s.Rb(),s.Nb(29,"button",16,17),s.Nb(31,"button",18,19),s.Sb(33,"div",20),s.Sb(34,"table",21),s.Ec(35,ii,5,6,"tr",22),s.Rb(),s.Rb(),s.Rb()),2&t&&(s.zb(3),s.Hc(s.ec(4,12,"view360.financialCalendar.title.label")),s.zb(7),s.jc("ngModel",e.state.chartOptions.lastTwelveMonthsFlag)("value",!1)("checked",!e.state.chartOptions.lastTwelveMonthsFlag),s.zb(3),s.Hc(s.ec(14,14,"view360.financialCalendar.current.year")),s.zb(3),s.jc("ngModel",e.state.chartOptions.lastTwelveMonthsFlag)("value",!0)("checked",e.state.chartOptions.lastTwelveMonthsFlag),s.zb(3),s.Hc(s.ec(20,16,"view360.financialCalendar.last12.months")),s.zb(4),s.Hc(s.ec(24,18,"view360.financialCalendar.previous12.months")),s.zb(4),s.jc("ngStyle",s.pc(20,ci,e.state.isScreenMdDown?"200%":"100%")),s.zb(8),s.jc("ngForOf",e.state.data.chartData1))},directives:[n.z,n.c,n.t,n.w,d.n,d.l],pipes:[u.c],styles:[".financial-calendar-chart{height:200px}.financial-calendar-chart .highcharts-background{fill:transparent;stroke-width:0px}.financial-calendar-chart .highcharts-axis-line{stroke:#999}.financial-calendar-chart .highcharts-axis-labels{fill:#999;font-size:14px}.financial-calendar-chart .highcharts-xaxis-grid .highcharts-grid-line{stroke-width:0}.financial-calendar-chart .highcharts-yaxis-grid .highcharts-grid-line{stroke-width:1;stroke:#999}.financial-calendar-chart .highcharts-yaxis{stroke-width:0}.financial-calendar-chart .highcharts-tick{stroke:#999}.financial-calendar-chart .plot-band{fill:#e3e4e6}.financial-calendar-chart .plot-band-invisible{fill:transparent}"],encapsulation:2}),t})();const oi=["viewOptsSwitch"],ri=["view360FinancialCalendarOpts"];function li(t,e){if(1&t){const t=s.Tb();s.Qb(0,4),s.Sb(1,"app-view360-financial-calendar-opts",5,6),s.Zb("optsSubmit",function(e){return s.xc(t),s.cc().onOptsSubmit(e)}),s.Rb(),s.Pb()}if(2&t){const t=s.cc();s.zb(1),s.jc("optsData",t.state.data.optsData)}}function di(t,e){if(1&t&&(s.Qb(0,7),s.Nb(1,"app-view360-financial-calendar-view",8),s.Pb()),2&t){const t=s.cc();s.zb(1),s.jc("chartData",t.state.data.chartData)}}let ui=(()=>{class t{constructor(t,e){this.view360Service=t,this.personalisationService=e,this.display="block",this.subscriptions=[],this.state={isDataLoaded:!1,data:{optsData:null,chartData:null}}}ngOnInit(){this.state.isDataLoaded=!1,this.subscriptions.push(k.a.minExecutionTime(this.view360Service.getOptsData().pipe(Object(Jn.a)(t=>{this.state.data.optsData=t}),Object(O.b)(t=>t.personalization.view360.calendar.hide?Object(T.a)([]):this.view360Service.getMonthlyExpensesChart()))).subscribe(t=>{this.state.data.chartData=t,this.state.data.chartData.length>0?(this.display=this.state.data.optsData.personalization.view360.calendar.hide?"none":"block",this.state.isDataLoaded=!0,this.viewOptsSwitch.switchAfterDataLoaded()):this.display="none"}))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}onOptsCancel(){this.view360FinancialCalendarOpts.reset()}onOptsSubmit(t){this.viewOptsSwitch.switchAfterOuterOptsSubmit(),this.view360Service.resetMonthlyExpensesChart(),this.personalisationService.updateCalendar(t).subscribe(()=>{this.ngOnInit()})}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(W),s.Mb(G.a))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-financial-calendar"]],viewQuery:function(t,e){if(1&t&&(s.Oc(oi,!0),s.Oc(ri,!0)),2&t){let t;s.tc(t=s.ac())&&(e.viewOptsSwitch=t.first),s.tc(t=s.ac())&&(e.view360FinancialCalendarOpts=t.first)}},hostVars:2,hostBindings:function(t,e){2&t&&s.Dc("display",e.display)},decls:4,vars:4,consts:[[3,"mainHtmlId","optsHtmlId","optsCancel"],["viewOptsSwitch",""],["viewType","opts",4,"ngIf"],["viewType","view",4,"ngIf"],["viewType","opts"],[3,"optsData","optsSubmit"],["view360FinancialCalendarOpts",""],["viewType","view"],[3,"chartData"]],template:function(t,e){1&t&&(s.Sb(0,"app-view360-view-opts-switch",0,1),s.Zb("optsCancel",function(){return e.onOptsCancel()}),s.Ec(2,li,3,1,"ng-container",2),s.Ec(3,di,2,1,"ng-container",3),s.Rb()),2&t&&(s.jc("mainHtmlId","financialCalendar")("optsHtmlId","scheduledPaymentsOpts"),s.zb(2),s.jc("ngIf",e.state.isDataLoaded),s.zb(1),s.jc("ngIf",e.state.isDataLoaded))},directives:[bt,d.m,Xn,si],styles:['#financialCalendar{width:100%}.theme-default #financialCalendar .card-bg{background-color:hsla(0,0%,96.1%,.9)}.theme-hicontrast #financialCalendar .card-bg{background-color:hsla(0,0%,100%,.1)}#financialCalendar .filter-checkboxes-horz-group .filter-checkbox{margin:8px}#financialCalendar .filter-checkboxes-horz-group .filter-checkbox em{padding:0 1rem 0 1.125rem}#financialCalendar .legend{padding:0;margin:0}#financialCalendar .legend li{list-style:none none outside;font-weight:600;padding-left:2.875rem}#financialCalendar .legend li:before{float:left;width:1.875rem;height:1.875rem;margin:1rem 1rem 0 -2.875rem;content:""}.theme-default #financialCalendar .legend li.current:before{background:#007e90}.theme-hicontrast #financialCalendar .legend li.current:before{background:#f5f5f5}.theme-default #financialCalendar .legend li.past:before{background:#006675}.theme-hicontrast #financialCalendar .legend li.past:before{background:#9c0}#financialCalendar .legend li.past .label{line-height:60px;padding:0 .875rem}@media (max-width:767.98px){#financialCalendar .chart-wrapper{position:relative;margin:0 -1.5rem}#financialCalendar .chart-wrapper .after,#financialCalendar .chart-wrapper .before{font-family:cawebfont;font-size:32px;width:1.5rem;position:absolute;border:0;outline:0;box-shadow:none;top:0;bottom:0;display:flex;padding:0;overflow:hidden;align-items:center;justify-content:center;opacity:0;transition:opacity .2s linear;cursor:pointer}.theme-default #financialCalendar .chart-wrapper .after,.theme-default #financialCalendar .chart-wrapper .before{color:#007e90}.theme-hicontrast #financialCalendar .chart-wrapper .after,.theme-hicontrast #financialCalendar .chart-wrapper .before{color:#9c0}#financialCalendar .chart-wrapper .after:before,#financialCalendar .chart-wrapper .before:before{display:block;margin:0 -.25em}#financialCalendar .chart-wrapper .before{left:0}.theme-default #financialCalendar .chart-wrapper .before{background:linear-gradient(270deg,hsla(0,0%,96.1%,0),hsla(0,0%,96.1%,.9))}.theme-hicontrast #financialCalendar .chart-wrapper .before{background:linear-gradient(270deg,rgba(25,25,25,0),rgba(25,25,25,.9))}#financialCalendar .chart-wrapper .before:before{content:"\\f00a"}#financialCalendar .chart-wrapper .after{right:0}.theme-default #financialCalendar .chart-wrapper .after{background:linear-gradient(90deg,hsla(0,0%,96.1%,0),hsla(0,0%,96.1%,.9))}.theme-hicontrast #financialCalendar .chart-wrapper .after{background:linear-gradient(90deg,rgba(25,25,25,0),rgba(25,25,25,.9))}#financialCalendar .chart-wrapper .after:before{content:"\\f008"}#financialCalendar .chart-wrapper.left-btn-visible .before,#financialCalendar .chart-wrapper.right-btn-visible .after{opacity:1}#financialCalendar .chart-wrapper .chart{overflow:auto;padding:0 1.5rem}}@media (min-width:768px){#financialCalendar .chart-wrapper .after,#financialCalendar .chart-wrapper .before{display:none}}'],encapsulation:2}),t})();const pi=function(t){return{preloading:t}};let bi=(()=>{class t{constructor(t){this.productHelper=t,this.optsSubmit=new s.n,this.state={isLoading:!1}}ngOnInit(){this.initForm(),this.reset()}reset(){this.initFormValues(),this.state.isLoading=!1}initForm(){this.optsForm=new n.k({accounts:new n.h(this.optsData.personalization.view360.payments.accounts),ccAccounts:new n.h(this.optsData.personalization.view360.payments.ccAccounts),show:new n.h(!this.optsData.personalization.view360.payments.hide)})}initFormValues(){this.optsForm.patchValue({accounts:this.optsData.personalization.view360.payments.accounts,ccAccounts:this.optsData.personalization.view360.payments.ccAccounts,show:!this.optsData.personalization.view360.payments.hide})}submitOptsForm(){this.state.isLoading=!0,this.optsSubmit.emit({accounts:this.optsForm.value.accounts,ccAccounts:this.optsForm.value.ccAccounts,hide:!this.optsForm.value.show})}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(_.a))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-scheduled-payments-opts"]],inputs:{optsData:"optsData"},outputs:{optsSubmit:"optsSubmit"},decls:41,vars:52,consts:[[1,"container-fluid"],[1,"opts-header"],["id","scheduledPaymentsOptsTitle",1,"opts-title","h4"],[1,"opts-subtitle","h6"],[1,"opts-body"],[3,"formGroup"],["id","scheduledPaymentsSettings",1,"my-5"],[1,"form-group"],["id","scheduledPaymentsAccountsLabel"],[3,"formControlName","options","multiple","dataTitle","dataCountSelectedText","labelledby","dataWidth"],["id","scheduledPaymentsCardsLabel"],[1,"mb-1","mt-3"],["href","javascript:void(null);",1,"help-info","help-info-md",3,"appTlpTooltip","tlpPlacement"],[1,"ca","ca-question"],[1,"font-md"],[3,"formControlName"],[1,"opts-footer"],[1,"buttons","text-right"],["href","javascript:void(null);",1,"btn","btn-primary","btn-lg",3,"ngClass","click"]],template:function(t,e){1&t&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Sb(2,"h2",2),s.Gc(3),s.dc(4,"translate"),s.Sb(5,"span",3),s.Gc(6),s.dc(7,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Sb(8,"div",4),s.Sb(9,"p"),s.Gc(10),s.dc(11,"translate"),s.Rb(),s.Sb(12,"form",5),s.Sb(13,"div",6),s.Sb(14,"div",7),s.Sb(15,"label",8),s.Gc(16),s.dc(17,"translate"),s.Rb(),s.Nb(18,"app-selectpicker-accounts",9),s.dc(19,"translate"),s.dc(20,"translate"),s.Rb(),s.Sb(21,"div",7),s.Sb(22,"label",10),s.Gc(23),s.dc(24,"translate"),s.Rb(),s.Nb(25,"app-selectpicker-accounts",9),s.dc(26,"translate"),s.dc(27,"translate"),s.Rb(),s.Sb(28,"p",11),s.Gc(29),s.dc(30,"translate"),s.Sb(31,"a",12),s.dc(32,"translate"),s.Nb(33,"i",13),s.Rb(),s.Rb(),s.Sb(34,"p",14),s.Nb(35,"app-hide-show-checkbox",15),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(36,"div",16),s.Sb(37,"div",17),s.Sb(38,"a",18),s.Zb("click",function(){return e.submitOptsForm()}),s.Gc(39),s.dc(40,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&t&&(s.zb(3),s.Ic("",s.ec(4,26,"settings.personalization.scheduled-payments.title")," "),s.zb(3),s.Hc(s.ec(7,28,"settings.personalization.scheduled-payments.subtitle")),s.zb(4),s.Hc(s.ec(11,30,"settings.personalization.scheduled-payments.info")),s.zb(2),s.jc("formGroup",e.optsForm),s.zb(4),s.Hc(s.ec(17,32,"settings.personalization.accounts.label")),s.zb(2),s.jc("formControlName","accounts")("options",e.optsData.options.accounts)("multiple",!0)("dataTitle",s.ec(19,34,"settings.personalization.accounts.choose.label"))("dataCountSelectedText",s.ec(20,36,"settings.personalization.accounts.selected.label")+" ({0})")("labelledby","scheduledPaymentsAccountsLabel")("dataWidth","100%"),s.zb(5),s.Hc(s.ec(24,38,"settings.personalization.cards.label")),s.zb(2),s.jc("formControlName","ccAccounts")("options",e.optsData.options.ccAccounts)("multiple",!0)("dataTitle",s.ec(26,40,"settings.personalization.cards.choose.label"))("dataCountSelectedText",s.ec(27,42,"settings.personalization.cards.selected.label")+" ({0})")("labelledby","scheduledPaymentsCardsLabel")("dataWidth","100%"),s.zb(4),s.Ic("",s.ec(30,44,"settings.personalization.scheduled-payments.hide.label")," "),s.zb(2),s.jc("appTlpTooltip",s.ec(32,46,"settings.personalization.scheduled-payments.hide.hint"))("tlpPlacement","top"),s.zb(4),s.jc("formControlName","show"),s.zb(3),s.jc("ngClass",s.pc(50,pi,e.state.isLoading)),s.zb(1),s.Hc(s.ec(40,48,"settings.personalization.save.label")))},directives:[n.F,n.u,n.l,o.a,n.t,n.j,r.a,l.a,d.k],pipes:[u.c],encapsulation:2,changeDetection:0}),t})();function mi(t,e){1&t&&(s.Sb(0,"div",3),s.Nb(1,"i",4),s.Sb(2,"p"),s.Gc(3),s.dc(4,"translate"),s.Rb(),s.Rb()),2&t&&(s.zb(3),s.Hc(s.ec(4,1,"view360.scheduledPayments.empty.label")))}function hi(t,e){if(1&t&&(s.Sb(0,"div",17),s.Gc(1),s.dc(2,"translate"),s.Rb()),2&t){const t=s.cc(2);s.zb(1),s.Jc("",s.ec(2,2,"view360.scheduledPayments.total.label")," (",t.state.data.totalCount,"):")}}function fi(t,e){if(1&t&&(s.Sb(0,"strong",22),s.Sb(1,"span",23),s.Gc(2),s.dc(3,"amount"),s.Rb(),s.Gc(4,"\xa0"),s.Sb(5,"span",24),s.Gc(6),s.Rb(),s.Rb()),2&t){const t=e.$implicit;s.zb(2),s.Hc(s.ec(3,2,t.amount)),s.zb(4),s.Hc(t.currency)}}function gi(t,e){if(1&t&&(s.Sb(0,"div",18),s.Sb(1,"span",19),s.Ec(2,fi,7,4,"strong",20),s.Rb(),s.Nb(3,"i",21),s.Rb()),2&t){const t=s.cc(2);s.zb(2),s.jc("ngForOf",t.state.data.summary)}}function vi(t,e){if(1&t&&(s.Sb(0,"div"),s.Gc(1),s.dc(2,"dictValue"),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(1),s.Hc(s.fc(2,1,t.paymentTypeCode,"PAYMENT_TYPE"))}}function yi(t,e){if(1&t&&(s.Sb(0,"div"),s.Gc(1),s.dc(2,"dictValue"),s.dc(3,"dictValue"),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(1),s.Jc(" ",s.fc(2,2,t.paymentTypeCode,"PAYMENT_TYPE"),"\xa0- \xa0",s.fc(3,5,t.paymentSystemCode,"PAYMENT_SYSTEM")," ")}}function wi(t,e){if(1&t&&(s.Sb(0,"p"),s.Gc(1),s.dc(2,"dictValue"),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(1),s.Hc(s.fc(2,1,t.paymentTypeCode,"PAYMENT_TYPE"))}}function Si(t,e){if(1&t&&(s.Sb(0,"p"),s.Gc(1),s.dc(2,"dictValue"),s.dc(3,"dictValue"),s.Rb()),2&t){const t=s.cc().$implicit;s.zb(1),s.Jc(" ",s.fc(2,2,t.paymentTypeCode,"PAYMENT_TYPE"),"\xa0- \xa0",s.fc(3,5,t.paymentSystemCode,"PAYMENT_SYSTEM")," ")}}function Ri(t,e){if(1&t){const t=s.Tb();s.Sb(0,"li",25),s.Zb("click",function(){s.xc(t);const a=e.$implicit;return s.cc(2).onPaymentClick(a)}),s.Sb(1,"dl",26),s.Sb(2,"dt"),s.Sb(3,"time"),s.dc(4,"appDate"),s.Sb(5,"em"),s.Gc(6),s.dc(7,"translate"),s.Rb(),s.Nb(8,"br"),s.Sb(9,"strong"),s.Gc(10),s.dc(11,"appDate"),s.Rb(),s.Gc(12),s.dc(13,"appDate"),s.Rb(),s.Rb(),s.Sb(14,"dd"),s.Ec(15,vi,3,4,"div",27),s.Ec(16,yi,4,8,"div",27),s.Sb(17,"div",22),s.Sb(18,"span",23),s.Gc(19),s.dc(20,"amount"),s.Rb(),s.Gc(21,"\xa0"),s.Sb(22,"span",24),s.Gc(23),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(24,"div",28),s.Sb(25,"time"),s.dc(26,"appDate"),s.Sb(27,"em"),s.Gc(28),s.dc(29,"translate"),s.Rb(),s.Nb(30,"br"),s.Sb(31,"strong"),s.Gc(32),s.dc(33,"appDate"),s.Rb(),s.Gc(34),s.dc(35,"appDate"),s.Rb(),s.Sb(36,"div"),s.Ec(37,wi,3,4,"p",27),s.Ec(38,Si,4,8,"p",27),s.Sb(39,"span",23),s.Gc(40),s.dc(41,"amount"),s.Rb(),s.Gc(42,"\xa0"),s.Sb(43,"span",24),s.Gc(44),s.Rb(),s.Rb(),s.Rb(),s.Rb()}if(2&t){const t=e.$implicit,a=s.cc(2);s.zb(3),s.Ab("datetime",s.fc(4,16,t.executionDate,"YYYY-MM-DD")),s.zb(3),s.Hc(s.ec(7,19,a.getDayNameKey(t.executionDate))),s.zb(4),s.Hc(s.fc(11,21,t.executionDate,"DD.MM.")),s.zb(2),s.Ic("",s.fc(13,24,t.executionDate,"YYYY")," "),s.zb(3),s.jc("ngIf",!a.checkPaymentSystemCode(t)),s.zb(1),s.jc("ngIf",a.checkPaymentSystemCode(t)),s.zb(3),s.Hc(s.ec(20,27,t.amount.amount)),s.zb(4),s.Hc(t.amount.currency),s.zb(2),s.Ab("datetime",s.fc(26,29,t.executionDate,"YYYY-MM-DD")),s.zb(3),s.Hc(s.ec(29,32,a.getDayNameKey(t.executionDate))),s.zb(4),s.Hc(s.fc(33,34,t.executionDate,"DD.MM.")),s.zb(2),s.Ic("",s.fc(35,37,t.executionDate,"YYYY")," "),s.zb(3),s.jc("ngIf",!a.checkPaymentSystemCode(t)),s.zb(1),s.jc("ngIf",a.checkPaymentSystemCode(t)),s.zb(2),s.Hc(s.ec(41,40,t.amount.amount)),s.zb(4),s.Hc(t.amount.currency)}}function Ci(t,e){if(1&t&&(s.Sb(0,"div",5),s.Sb(1,"button",6),s.Sb(2,"div",7),s.Nb(3,"i",8),s.Sb(4,"h6"),s.Sb(5,"div",9),s.Gc(6),s.dc(7,"appDate"),s.dc(8,"appDate"),s.Rb(),s.Ec(9,hi,3,4,"div",10),s.Rb(),s.Rb(),s.Ec(10,gi,4,1,"div",11),s.Rb(),s.Sb(11,"div",12),s.Sb(12,"ul",13),s.Ec(13,Ri,45,42,"li",14),s.Rb(),s.Rb(),s.Sb(14,"p",15),s.Sb(15,"a",16),s.Sb(16,"span"),s.Gc(17),s.dc(18,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&t){const t=s.cc();s.zb(6),s.Jc("",s.ec(7,8,t.state.startDate)," - ",s.ec(8,10,t.state.endDate),""),s.zb(3),s.jc("ngIf",t.state.showTotal),s.zb(1),s.jc("ngIf",t.state.showSummary),s.zb(1),s.jc("ngClass",t.state.showSummary?"panel-collapse collapse":""),s.zb(2),s.jc("ngForOf",t.state.data.list),s.zb(2),s.jc("routerLink","/payments/single"),s.zb(2),s.Hc(s.ec(18,12,"view360.scheduledPayments.fullList.link"))}}let Pi=(()=>{class t{constructor(t,e,a,n,i){this.changeDetectorRef=t,this.systemParameterService=e,this.formatHelper=a,this.routeDataService=n,this.appDateService=i,this.state={showTotal:!0,showSummary:!0,startDate:null,endDate:null,data:{list:[],summary:[],totalCount:0},isEmptyList:!0}}ngOnInit(){}ngOnChanges(t){t.paymentListResult&&!h.a.isNullOrUndefined(t.paymentListResult.currentValue)&&this.updateState(t.paymentListResult.currentValue)}updateState(t){this.state.showTotal=t.payments.length>1,this.state.showSummary=t.payments.length>1,this.state.startDate=this.appDateService.now(),this.state.endDate=this.formatHelper.addDays(this.appDateService.now(),this.systemParameterService.getWebPaymentListMaxDayOffset()),this.state.data.list=t.payments,this.state.data.summary=t.summary.totalAmounts,this.state.data.totalCount=t.summary.totalCount,this.state.isEmptyList=0===t.payments.length,this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()}getDayNameKey(t){return"dict.day."+(this.formatHelper.formatDate(t)===this.formatHelper.formatDate(this.formatHelper.addDays(this.appDateService.now(),1))?"tomorrow":new Date(t).getDay())}onPaymentClick(t){this.routeDataService.navigateWithRouteData(Ht.a.paymentList,{detailsId:t.id},["NORM"===t.paymentCategoryCode?"payments/single":"payments/orders"])}checkPaymentSystemCode(t){return["SEPA","SORB","SWFT","EXEL"].includes(t.paymentSystemCode)}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(s.h),s.Mb(M.a),s.Mb(be.a),s.Mb(Ht.b),s.Mb(nt.a))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-scheduled-payments-view"]],inputs:{paymentListResult:"paymentListResult"},features:[s.xb],decls:5,vars:5,consts:[[1,"h4"],["class","empty-payments",4,"ngIf"],["class","panel panel-default panel-mini",4,"ngIf"],[1,"empty-payments"],[1,"ca","ca-history"],[1,"panel","panel-default","panel-mini"],["role","button","data-toggle","collapse","data-target","#scheduledPaymentsDetails","aria-expanded","false","id","accountLimitsHeading",1,"panel-heading","clearfix","collapsed"],[1,"scheduled-period-name"],[1,"ca","ca-lista-platnosci"],[1,"period"],["class","summary",4,"ngIf"],["class","scheduled-amounts",4,"ngIf"],["id","scheduledPaymentsDetails","role","tabpanel","aria-labelledby","scheduledPaymentsDetailsHeading",1,"panel-body",3,"ngClass"],[1,"timeline"],[3,"click",4,"ngFor","ngForOf"],[1,"container-fluid","more","text-right"],["href","javascript:void(null);",3,"routerLink"],[1,"summary"],[1,"scheduled-amounts"],[1,"amounts"],["class","amount",4,"ngFor","ngForOf"],[1,"ca","ca-caret"],[1,"amount"],[1,"number"],[1,"currency"],[3,"click"],["aria-hidden","true"],[4,"ngIf"],["tabindex","0",1,"sr-only"]],template:function(t,e){1&t&&(s.Sb(0,"h2",0),s.Gc(1),s.dc(2,"translate"),s.Rb(),s.Ec(3,mi,5,3,"div",1),s.Ec(4,Ci,19,14,"div",2)),2&t&&(s.zb(1),s.Hc(s.ec(2,3,"view360.scheduledPayments.title.label")),s.zb(2),s.jc("ngIf",e.state.isEmptyList),s.zb(1),s.jc("ngIf",!e.state.isEmptyList))},directives:[d.m,d.k,d.l,i.g],pipes:[u.c,Mt.a,y.a,we.a],styles:[".timeline li dl{cursor:pointer}"],encapsulation:2,changeDetection:0}),t})();const zi=["viewOptsSwitch"],xi=["view360ScheduledPaymentsOpts"];function Ai(t,e){if(1&t){const t=s.Tb();s.Qb(0,4),s.Sb(1,"app-view360-scheduled-payments-opts",5,6),s.Zb("optsSubmit",function(e){return s.xc(t),s.cc().onOptsSubmit(e)}),s.Rb(),s.Pb()}if(2&t){const t=s.cc();s.zb(1),s.jc("optsData",t.state.data.optsData)}}function Di(t,e){if(1&t&&(s.Qb(0,7),s.Nb(1,"app-view360-scheduled-payments-view",8),s.Pb()),2&t){const t=s.cc();s.zb(1),s.jc("paymentListResult",t.state.data.paymentListResult)}}let ki=(()=>{class t{constructor(t,e,a){this.changeDetectorRef=t,this.view360Service=e,this.personalizationService=a,this.display="block",this.subscriptions=[],this.state={isDataLoaded:!1,data:{optsData:null,paymentListResult:null}}}ngOnInit(){this.state.isDataLoaded=!1,this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges(),this.subscriptions.push(k.a.minExecutionTime(this.view360Service.getOptsData().pipe(Object(Jn.a)(t=>{this.state.data.optsData=t}),Object(O.b)(t=>t.personalization.view360.payments.hide?Object(T.a)(null):this.view360Service.getPaymentList360View()))).subscribe(t=>{this.state.data.paymentListResult=t,this.display=this.state.data.optsData.personalization.view360.payments.hide?"none":"block",this.state.isDataLoaded=!0,this.viewOptsSwitch.switchAfterDataLoaded(),this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()}))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}onOptsCancel(){this.view360ScheduledPaymentsOpts.reset()}onOptsSubmit(t){this.viewOptsSwitch.switchAfterOuterOptsSubmit(),this.view360Service.resetScheduledPayments(),this.personalizationService.updatePayments(t).subscribe(()=>{this.ngOnInit()})}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(s.h),s.Mb(W),s.Mb(G.a))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360-scheduled-payments"]],viewQuery:function(t,e){if(1&t&&(s.Oc(zi,!0),s.Oc(xi,!0)),2&t){let t;s.tc(t=s.ac())&&(e.viewOptsSwitch=t.first),s.tc(t=s.ac())&&(e.view360ScheduledPaymentsOpts=t.first)}},hostVars:2,hostBindings:function(t,e){2&t&&s.Dc("display",e.display)},decls:4,vars:4,consts:[[3,"mainHtmlId","optsHtmlId","optsCancel"],["viewOptsSwitch",""],["viewType","opts",4,"ngIf"],["viewType","view",4,"ngIf"],["viewType","opts"],[3,"optsData","optsSubmit"],["view360ScheduledPaymentsOpts",""],["viewType","view"],[3,"paymentListResult"]],template:function(t,e){1&t&&(s.Sb(0,"app-view360-view-opts-switch",0,1),s.Zb("optsCancel",function(){return e.onOptsCancel()}),s.Ec(2,Ai,3,1,"ng-container",2),s.Ec(3,Di,2,1,"ng-container",3),s.Rb()),2&t&&(s.jc("mainHtmlId","scheduledPayments")("optsHtmlId","scheduledPaymentsOpts"),s.zb(2),s.jc("ngIf",e.state.isDataLoaded),s.zb(1),s.jc("ngIf",e.state.isDataLoaded))},directives:[bt,d.m,bi,Pi],styles:["#scheduledPayments .card-bg{min-height:250px}.theme-default #scheduledPayments .card-bg{background-color:hsla(0,0%,94.1%,.9)}.theme-hicontrast #scheduledPayments .card-bg{background-color:hsla(0,0%,100%,.125)}#scheduledPayments .panel{margin:30px 0 40px}#scheduledPayments .panel-heading{border-style:none;border-radius:4px;cursor:pointer;outline:0;width:calc(100% + 20px);margin:0 -10px;padding:10px;text-align:left}.theme-default #scheduledPayments .panel-heading,.theme-hicontrast #scheduledPayments .panel-heading{background:transparent}.theme-default #scheduledPayments .panel-heading:focus,.theme-default #scheduledPayments .panel-heading:hover{background:#fff}.theme-hicontrast #scheduledPayments .panel-heading:focus,.theme-hicontrast #scheduledPayments .panel-heading:hover{background:hsla(0,0%,100%,.1)}.theme-default #scheduledPayments .panel-heading:focus{box-shadow:inset 0 0 0 3px rgba(0,0,0,.1)}.theme-hicontrast #scheduledPayments .panel-heading:focus{box-shadow:inset 0 0 0 3px hsla(0,0%,100%,.4)}#scheduledPayments .panel-heading .scheduled-period-name{float:left}#scheduledPayments .panel-heading .scheduled-period-name .ca{font-size:2em;margin-lefT:-.125em;vertical-align:-.275em}.theme-default #scheduledPayments .panel-heading .scheduled-period-name .ca,.theme-hicontrast #scheduledPayments .panel-heading .scheduled-period-name .ca{color:#9c0}#scheduledPayments .panel-heading .scheduled-period-name .ca,#scheduledPayments .panel-heading .scheduled-period-name h6{display:inline-block;float:none}#scheduledPayments .panel-heading .scheduled-period-name h6{vertical-align:middle;font-weight:400;font-size:.875rem}#scheduledPayments .panel-heading .scheduled-period-name h6 .period,#scheduledPayments .panel-heading .scheduled-period-name h6 .summary{white-space:nowrap}#scheduledPayments .panel-heading .scheduled-amounts{float:right}#scheduledPayments .panel-heading .scheduled-amounts .amounts,#scheduledPayments .panel-heading .scheduled-amounts .ca-caret{display:inline-block;vertical-align:middle;float:none}#scheduledPayments .panel-heading .scheduled-amounts .amount{display:block;text-align:right}#scheduledPayments .panel-heading .scheduled-amounts .amount .number{font-size:1rem}#scheduledPayments .panel-heading .scheduled-amounts .amount .currency{font-size:.75rem}#scheduledPayments .panel-heading .scheduled-amounts .amount:first-child .number{font-size:1.125rem}#scheduledPayments .panel-heading .scheduled-amounts .amount:first-child .currency{font-size:.875rem}#scheduledPayments .panel-heading .scheduled-amounts .amount+.amount{margin-top:-.375rem}#scheduledPayments .panel-heading .ca-caret{border:0;background:none;padding:0;font-size:1.5em;cursor:pointer}.theme-default #scheduledPayments .panel-heading .ca-caret{color:#007e90}.theme-hicontrast #scheduledPayments .panel-heading .ca-caret{color:#9c0}#scheduledPayments .panel-heading .ca-caret:focus,#scheduledPayments .panel-heading .ca-caret:hover{outline:0}.theme-default #scheduledPayments .panel-heading .ca-caret:focus,.theme-default #scheduledPayments .panel-heading .ca-caret:hover{color:#009597}.theme-hicontrast #scheduledPayments .panel-heading .ca-caret:focus,.theme-hicontrast #scheduledPayments .panel-heading .ca-caret:hover{color:#9c0}#scheduledPayments .panel-body{font-size:.875rem}#scheduledPayments .panel-body time{font-size:.875rem;line-height:1.375}#scheduledPayments .panel-body .amount{font-weight:700;margin-top:.25rem}#scheduledPayments .panel-body .amount .number{font-size:1rem}#scheduledPayments .panel-body .amount .currency{font-size:.75rem}#scheduledPayments .more{margin:0;font-size:.875rem;position:absolute;bottom:40px;right:0}#scheduledPayments .more a{font-weight:600}.theme-default #scheduledPayments .more a{color:#007e90}.theme-hicontrast #scheduledPayments .more a{color:#9c0}.theme-default #scheduledPayments .more a:focus,.theme-default #scheduledPayments .more a:hover{color:#006675}.theme-hicontrast #scheduledPayments .more a:focus,.theme-hicontrast #scheduledPayments .more a:hover{color:#ad1}#scheduledPayments .panel.single-mode{margin:0 0 1.375rem}#scheduledPayments .panel.single-mode>.panel-heading{margin-bottom:-1rem;padding-bottom:0}.empty-payments{min-height:12.75rem;display:flex;align-items:center;juztify-content:center;flex-flow:column nowrap}.empty-payments .ca{font-size:4rem}.theme-default .empty-payments .ca,.theme-hicontrast .empty-payments .ca{color:#9c0}.empty-payments p{font-size:1.125rem;font-weight:300;text-align:center}"],encapsulation:2,changeDetection:0}),t})();function Ti(t,e){1&t&&(s.Qb(0),s.Nb(1,"app-view360-scheduled-payments"),s.Pb())}function Oi(t,e){if(1&t&&(s.Qb(0),s.Nb(1,"h1"),s.dc(2,"translate"),s.Sb(3,"div",1),s.Sb(4,"div",2),s.Sb(5,"div",3),s.Nb(6,"app-view360-default-product"),s.Nb(7,"app-view360-my-finances"),s.Nb(8,"app-view360-monthly-spent"),s.Rb(),s.Rb(),s.Sb(9,"div",4),s.Sb(10,"div",3),s.Nb(11,"app-view360-banner"),s.Nb(12,"app-view360-history-mini"),s.Ec(13,Ti,2,0,"ng-container",0),s.Rb(),s.Rb(),s.Rb(),s.Sb(14,"div",1),s.Sb(15,"div",5),s.Nb(16,"app-view360-financial-calendar"),s.Rb(),s.Rb(),s.Pb()),2&t){const t=s.cc();s.zb(1),s.Ab("aria-label",s.ec(2,2,"breadcrumb.start")),s.zb(12),s.jc("ngIf",t.hasPaymentPassiveAccess())}}const Ni=[{path:"home",component:(()=>{class t{constructor(t,e,a,n){this.router=t,this.translateService=e,this.view360Service=a,this.permissionService=n,this.subscriptions=[],this.state={showView360:!0}}ngOnInit(){this.view360Service.reset(),this.subscriptions.push(this.router.events.pipe(Object(et.a)(t=>t instanceof i.b)).subscribe(t=>{this.view360Service.reset(),this.state.showView360=!1,setTimeout(()=>this.state.showView360=!0)}))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}hasPaymentPassiveAccess(){return this.permissionService.hasPaymentPassiveAccess()}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(i.d),s.Mb(u.d),s.Mb(W),s.Mb(Q.a))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-view360"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"row","no-gutters","assym-card-columns"],[1,"col-12","col-md-6","col-lg-8"],["appStickyForIE11","",1,"sticky-widget-container"],[1,"col-12","col-md-6","col-lg-4"],[1,"col-12"]],template:function(t,e){1&t&&s.Ec(0,Oi,17,4,"ng-container",0),2&t&&s.jc("ngIf",e.state.showView360)},directives:[d.m,at.a,de,fn,X,wn,Kn,ui,ki],pipes:[u.c],styles:['.assym-card-columns .card{padding:0;vertical-align:top;width:100%;border:0;position:relative;background:none}.assym-card-columns .card.collapsing-mode{overflow:hidden}.assym-card-columns .card.preload{box-shadow:inset 0 0 0 1px hsla(0,0%,100%,.5)}.assym-card-columns .card.preload:before{content:"";background:transparent 50% 50% no-repeat;display:block;position:absolute;top:0;height:0;opacity:1;width:100%;height:100%}.theme-default .assym-card-columns .card.preload:before{background-image:url(/web-ca24/ca-preload.b469978470831a62efbf.gif),radial-gradient(circle at 50%,#fff 0,#fff 19px,rgba(0,0,0,.1) 20px,transparent 25px)}.theme-hicontrast .assym-card-columns .card.preload:before{background-image:url(/web-ca24/ca-preload-hi-contrast.fc8d1864bf8935517e27.gif),radial-gradient(circle at 50%,#000 0,#000 19px,transparent 20px)}.assym-card-columns .card .card-bg{width:100%;opacity:1}.assym-card-columns .card .card-inner{will-change:transform;-webkit-backface-visibility:hidden;backface-visibility:hidden;transform:translateX(0);opacity:1}.assym-card-columns .card .card-inner h2>a{color:inherit}.assym-card-columns .card .card-inner h2>a:focus,.assym-card-columns .card .card-inner h2>a:hover{text-decoration:underline}.assym-card-columns .card .opts{background:none;border:0;position:absolute;right:0;top:0;cursor:pointer;padding:4px 9px;text-align:center;z-index:2}.theme-default .assym-card-columns .card .opts{font-size:1.25em;color:#727d84}.theme-hicontrast .assym-card-columns .card .opts{font-size:1.5rem;color:hsla(0,0%,100%,.8)}.assym-card-columns .card .opts:active,.assym-card-columns .card .opts:focus,.assym-card-columns .card .opts:hover{box-shadow:none;outline:0}.theme-default .assym-card-columns .card .opts:active,.theme-default .assym-card-columns .card .opts:focus,.theme-default .assym-card-columns .card .opts:hover{transform:none;color:#a8afb4}.theme-hicontrast .assym-card-columns .card .opts:active,.theme-hicontrast .assym-card-columns .card .opts:focus,.theme-hicontrast .assym-card-columns .card .opts:hover{transform:scale(1.25);color:#fff}.assym-card-columns .card .card-opts{position:absolute;top:0;right:0;padding-top:40px;padding-bottom:40px;height:100%!important;width:100%;z-index:1;opacity:1;will-change:transform;-webkit-backface-visibility:hidden;backface-visibility:hidden;transform:translateX(0)}.theme-default .assym-card-columns .card .card-opts:not(.settings-auth){background:#b3d9f6;color:#4a4e51}.theme-hicontrast .assym-card-columns .card .card-opts:not(.settings-auth){background:#1f1f1f;color:#fff}.assym-card-columns .card .card-opts.collapsing{transform:translateX(100%);opacity:0}.assym-card-columns .card .card-opts.collapsing~.card-inner{transform:translateX(-100%);opacity:0;position:absolute;left:0;top:0}.assym-card-columns .card .card-opts.collapse.show,.assym-card-columns .card .card-opts.collapsing{position:relative}.assym-card-columns .card .card-opts.collapse.show~.card-inner{display:none}.assym-card-columns .card .card-opts .opts-header{position:relative;padding-left:3rem}.assym-card-columns .card .card-opts .opts-header:before{content:"\\f036";font-family:cawebfont;position:absolute;font-size:2.625rem;left:0;top:-.75rem}.theme-default .assym-card-columns .card .card-opts .opts-header:before{color:#727d84}.theme-hicontrast .assym-card-columns .card .card-opts .opts-header:before{color:#fff}.assym-card-columns .card .card-opts .opts-header .opts-title{margin-bottom:2.125rem}.assym-card-columns .card .card-opts .opts-header .opts-subtitle{display:block;font-weight:400;margin-top:2px}.assym-card-columns .card.opts-mode,.assym-card-columns .card.opts-mode#defaultProduct{z-index:3}.assym-card-columns .card.opts-mode .opts{padding:0;top:0;font-size:2.75em;width:44px;height:44px;line-height:44px}.assym-card-columns .card.opts-mode .opts:before{content:"\\f01d"}.theme-default .assym-card-columns .card.opts-mode .opts:before,.theme-hicontrast .assym-card-columns .card.opts-mode .opts:before{color:#999}.assym-card-columns .card .opts.ca-close{padding:0;top:0;font-size:2.75em;width:44px;height:44px;line-height:44px}.assym-card-columns .card .opts.ca-close:before{content:"\\f01d"}.theme-default .assym-card-columns .card .opts.ca-close:before,.theme-hicontrast .assym-card-columns .card .opts.ca-close:before{color:#999}@media (max-width:1159.98px){.assym-card-columns{padding-left:0}.assym-card-columns .card{width:auto}}@media (max-width:767.98px){.assym-card-columns .card,.assym-card-columns .sticky-widget-container{margin-bottom:.75rem}.assym-card-columns .card:last-child{margin-bottom:0}.assym-card-columns .card .card-inner{padding:30px}}'],encapsulation:2}),t})(),canActivate:[tt.a],runGuardsAndResolvers:"always"}];let Fi=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(e){return new(e||t)},imports:[[i.h.forChild(Ni)],i.h]}),t})(),Ii=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(e){return new(e||t)},providers:[W],imports:[[c.a,i.h,n.n,n.A,Fi]]}),t})();s.Ac(X,[bt,d.m,b,A],[])},"9ACH":function(t,e,a){"use strict";a.d(e,"a",function(){return c});var n=a("8Y7J"),i=a("V7XX");let c=(()=>{class t{constructor(t){this.formatHelper=t}transform(t,e){return this.formatHelper.decorateNrb(t)}}return t.\u0275fac=function(e){return new(e||t)(n.Mb(i.a))},t.\u0275pipe=n.Lb({name:"nrbDecorated",type:t,pure:!0}),t.\u0275prov=n.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},ANok:function(t,e,a){"use strict";a.d(e,"a",function(){return s});var n=a("CjBK"),i=a("8Y7J"),c=a("V7XX");let s=(()=>{class t{constructor(t){this.formatHelper=t}transform(t,e){return this.formatHelper.formatAccountNumber(t,[n.a.IBAN])}}return t.\u0275fac=function(e){return new(e||t)(i.Mb(c.a))},t.\u0275pipe=i.Lb({name:"iban",type:t,pure:!0}),t.\u0275prov=i.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},EfnF:function(t,e,a){"use strict";a.d(e,"a",function(){return c});var n=a("8Y7J"),i=a("TSSN");let c=(()=>{class t{constructor(t){this.translateService=t}toTypeSelectorOption(t,e,a){const n=e.map(t=>t?this.translateService.instant(t):t),i=(a||e).slice().map(t=>t?this.translateService.instant(t):t);return{id:t,enabled:n,disabled:i,enabledHtml:this.labelsToDefaultHtml(n),disabledHtml:this.labelsToDefaultHtml(i),isDisabled:!1,isVisible:!0}}labelsToDefaultHtml(t){var e,a,n;return`<span class="first-row">${null!==(e=t[0])&&void 0!==e?e:""}</span>\n                <span class="second-row">${null!==(a=t[1])&&void 0!==a?a:""}</span>\n                <span class="third-row">${null!==(n=t[2])&&void 0!==n?n:""}</span>`}toCustomTypeSelectorOption(t,e,a){return{id:t,enabled:[],disabled:[],enabledHtml:e,disabledHtml:null!=a?a:e,isDisabled:!1,isVisible:!0}}}return t.\u0275fac=function(e){return new(e||t)(n.Wb(i.d))},t.\u0275prov=n.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},JAmJ:function(t,e,a){"use strict";a.d(e,"a",function(){return s});var n=a("8Y7J"),i=a("IbkX"),c=a("TSSN");let s=(()=>{class t{constructor(t,e,a,n){this.elementRef=t,this.clipboardService=e,this.ngZone=a,this.translateService=n,this.textToCopy=""}ngOnInit(){this.elementRef.nativeElement.setAttribute("aria-label",this.translateService.instant("clipboardTooltip.label")),this.createTooltip(this.copyTitle)}ngOnChanges(t){t.copyTitle&&this.updateTitle(t.copyTitle.currentValue)}ngOnDestroy(){this.changeTitleTimeout&&clearTimeout(this.changeTitleTimeout),this.disposeTooltip()}onCopyAccountNumber(){this.clipboardService.copyFromContent(this.textToCopy),this.close(),this.updateTitle(this.copiedTitle),this.open(),jQuery(this.elementRef.nativeElement).tooltip().focus(),this.changeTitleTimeout&&clearTimeout(this.changeTitleTimeout),this.changeTitleTimeout=setTimeout(()=>{this.close(),this.updateTitle(this.copyTitle)},2e3)}createTooltip(t){this.ngZone.runOutsideAngular(()=>{jQuery(this.elementRef.nativeElement).tooltip({animation:!1,title:t})})}open(){this.ngZone.runOutsideAngular(()=>{jQuery(this.elementRef.nativeElement).tooltip("show")})}close(){this.ngZone.runOutsideAngular(()=>{jQuery(this.elementRef.nativeElement).tooltip("hide")})}updateTitle(t){this.ngZone.runOutsideAngular(()=>{jQuery(this.elementRef.nativeElement).attr("data-original-title",t)})}disposeTooltip(){this.ngZone.runOutsideAngular(()=>{jQuery(this.elementRef.nativeElement).tooltip("dispose")})}}return t.\u0275fac=function(e){return new(e||t)(n.Mb(n.l),n.Mb(i.b),n.Mb(n.z),n.Mb(c.d))},t.\u0275dir=n.Hb({type:t,selectors:[["","appClipboardTooltip",""]],hostBindings:function(t,e){1&t&&n.Zb("click",function(){return e.onCopyAccountNumber()})},inputs:{textToCopy:["appClipboardTooltip","textToCopy"],copyTitle:"copyTitle",copiedTitle:"copiedTitle"},features:[n.xb]}),t})()},LECB:function(t,e,a){"use strict";a.d(e,"a",function(){return d});var n=a("8Y7J"),i=a("EfnF"),c=a("SVse"),s=a("s7LF");const o=function(t){return{active:t}};function r(t,e){if(1&t){const t=n.Tb();n.Sb(0,"li",5),n.Sb(1,"input",6),n.Zb("change",function(){n.xc(t);const e=n.cc().$implicit;return n.cc().onSelect(e.id)})("ngModelChange",function(e){return n.xc(t),n.cc(2).selectedType=e}),n.Rb(),n.Nb(2,"label",7),n.Rb()}if(2&t){const t=n.cc(),e=t.$implicit,a=t.index,i=n.cc();n.jc("ngClass",n.pc(11,o,e===i.selectedType)),n.zb(1),n.mc("id","",i.elementId,"_input_",a,""),n.lc("name","type_",i.elementId,""),n.jc("value",e)("ngModel",i.selectedType)("disabled",i.disabled||e.isDisabled),n.zb(1),n.mc("for","",i.elementId,"_input_",a,""),n.jc("ngClass",e.isDisabled?"disabled":"enabled")("innerHTML",e.isDisabled?e.disabledHtml:e.enabledHtml,n.yc)}}function l(t,e){if(1&t&&(n.Qb(0),n.Ec(1,r,3,13,"li",4),n.Pb()),2&t){const t=e.$implicit;n.zb(1),n.jc("ngIf",t.isVisible)}}let d=(()=>{class t{constructor(e){this.typeSelectorHelper=e,this.select=new n.n,this.elementId="type_selector_"+t.NEXT_ID++,this.emptyDefaultHtml=e.labelsToDefaultHtml(["","",""])}ngOnInit(){}ngOnChanges(t){this.types&&(this.selectedType=this.types.find(t=>t.id===this.selectedId))}onSelect(t){this.select.emit(t)}}return t.NEXT_ID=0,t.\u0275fac=function(e){return new(e||t)(n.Mb(i.a))},t.\u0275cmp=n.Gb({type:t,selectors:[["app-type-selector"]],inputs:{types:"types",selectedId:"selectedId",disabled:"disabled"},outputs:{select:"select"},features:[n.xb],decls:4,vars:5,consts:[[1,"dropdown","type-selector",3,"id"],["type","button","data-toggle","dropdown",1,"btn","dropdown-toggle","type-label",3,"disabled","ngClass","innerHTML"],[1,"dropdown-menu"],[4,"ngFor","ngForOf"],["class","dropdown-item",3,"ngClass",4,"ngIf"],[1,"dropdown-item",3,"ngClass"],["type","radio",3,"id","value","name","ngModel","disabled","change","ngModelChange"],[1,"type-label",3,"for","ngClass","innerHTML"]],template:function(t,e){1&t&&(n.Sb(0,"div",0),n.Nb(1,"button",1),n.Sb(2,"ul",2),n.Ec(3,l,2,1,"ng-container",3),n.Rb(),n.Rb()),2&t&&(n.kc("id",e.elementId),n.zb(1),n.jc("disabled",e.disabled)("ngClass",e.selectedType?e.selectedType.isDisabled?"disabled":"enabled":"")("innerHTML",e.selectedType?e.selectedType.isDisabled?e.selectedType.disabledHtml:e.selectedType.enabledHtml:e.emptyDefaultHtml,n.yc),n.zb(2),n.jc("ngForOf",e.types))},directives:[c.k,c.l,c.m,s.z,s.c,s.t,s.w],styles:['.type-selector{margin-bottom:1rem}.type-selector>.dropdown-toggle{border-radius:0;border:none;display:block;width:100%;min-height:2.5rem}@media (-ms-high-contrast:none){.type-selector>.dropdown-toggle>*{position:relative}}.type-selector>.dropdown-toggle:after{font-size:1.5rem}.type-selector>.dropdown-toggle:focus:after{opacity:.5}.theme-default .type-selector>.dropdown-toggle,.theme-hicontrast .type-selector>.dropdown-toggle{background-color:#009597;color:#fff}@media (max-width:767.98px){.type-selector>.dropdown-toggle{min-height:60px}}.type-selector>.dropdown-menu{width:100%;padding:0;border-radius:0}@media (min-width:768px){.type-selector>.dropdown-menu{margin-bottom:-.875rem!important}}.type-selector>.dropdown-menu>.dropdown-item{padding:0;background-color:transparent!important}.type-selector>.dropdown-menu>.dropdown-item input[type=radio]{position:absolute;opacity:0}.type-selector>.dropdown-menu>.dropdown-item input[type=radio]:checked+.type-label{cursor:auto}.theme-default .type-selector>.dropdown-menu>.dropdown-item input[type=radio]:checked+.type-label{background-color:#009597}.theme-hicontrast .type-selector>.dropdown-menu>.dropdown-item input[type=radio]:checked+.type-label{background-color:#9c0}.theme-default .type-selector>.dropdown-menu>.dropdown-item input[type=radio]:checked+.type-label{color:#fff}.theme-hicontrast .type-selector>.dropdown-menu>.dropdown-item input[type=radio]:checked+.type-label{color:#000}.theme-default .type-selector>.dropdown-menu>.dropdown-item input[type=radio]:checked+.type-label a,.theme-default .type-selector>.dropdown-menu>.dropdown-item input[type=radio]:checked+.type-label a:focus,.theme-default .type-selector>.dropdown-menu>.dropdown-item input[type=radio]:checked+.type-label a:hover,.theme-hicontrast .type-selector>.dropdown-menu>.dropdown-item input[type=radio]:checked+.type-label a{color:inherit}.theme-hicontrast .type-selector>.dropdown-menu>.dropdown-item input[type=radio]:checked+.type-label a:focus,.theme-hicontrast .type-selector>.dropdown-menu>.dropdown-item input[type=radio]:checked+.type-label a:hover{color:#fff}.theme-default .type-selector>.dropdown-menu>.dropdown-item input[type=radio]:focus+.type-label,.theme-default .type-selector>.dropdown-menu>.dropdown-item input[type=radio]:focus:checked+.type-label{border-color:#009597}.theme-hicontrast .type-selector>.dropdown-menu>.dropdown-item input[type=radio]:focus+.type-label,.theme-hicontrast .type-selector>.dropdown-menu>.dropdown-item input[type=radio]:focus:checked+.type-label{border-color:#9c0}.type-selector>.dropdown-menu>.dropdown-item input[type=radio]:disabled+.type-label{cursor:auto;background-color:#e3e4e6}.theme-default .type-selector>.dropdown-menu>.dropdown-item input[type=radio]:disabled+.type-label{background-color:#e3e4e6;opacity:1}.theme-hicontrast .type-selector>.dropdown-menu>.dropdown-item input[type=radio]:disabled+.type-label{background-color:transparent;opacity:.5}.type-selector>.dropdown-menu>.dropdown-item>.type-label{padding:.5rem 1rem;display:block;cursor:pointer;transition:background-color .15s ease-in-out,color .15s ease-in-out,padding-top .15s ease-in-out}@media (max-width:767.98px){.theme-default .type-selector>.dropdown-menu>.dropdown-item>.type-label:hover{background-color:#f5f5f5}.theme-hicontrast .type-selector>.dropdown-menu>.dropdown-item>.type-label:hover{background-color:#fff}}@media (max-width:767.98px){.type-selector>.dropdown-menu>.dropdown-item>.type-label{min-height:60px}}.type-selector>.dropdown-menu>.dropdown-item.hidden{display:none}.type-selector .type-label{text-align:left;margin:0}.type-selector .type-label>span{display:block;line-height:1.3!important;font-size:.75rem;white-space:normal}.type-selector .type-label>span.first-row,.type-selector .type-label>span.title{font-size:.75rem;font-weight:600}.type-selector .type-label>span.second-row{font-size:.875rem;font-weight:700}.type-selector .type-label>span.desc,.type-selector .type-label>span.third-row{font-size:.75rem;font-weight:400}.type-selector .type-label>span.bottom-row{padding:0 0 1.125rem}.type-selector .type-label>span.bottom-row a{position:absolute;right:1rem;bottom:10px}.type-selector .type-label>span.icon{float:left;font-size:3.25rem;margin:-.325em -3.25rem -.35em 0}.type-selector .type-label>span.icon~span{padding-left:3.25rem}@media (min-width:768px){.type-selector{margin-bottom:1.1875rem}.type-selector>.dropdown-toggle{display:none}.type-selector>.dropdown-menu{position:static!important;transform:none!important;will-change:auto!important;float:none;display:flex;flex-wrap:wrap;width:100%;border:none;background-color:transparent;margin:0 -.4375rem;width:calc(100% + .875rem)}.type-selector>.dropdown-menu>.dropdown-item{padding:0 .4375rem;margin-bottom:.875rem}}@media (min-width:768px) and (min-width:768px){.type-selector>.dropdown-menu>.dropdown-item:not(.expanded){flex:0 0 calc(100% / 3);max-width:calc(100% / 3 - .1px)}.one-col.expanded .type-selector>.dropdown-menu>.dropdown-item:not(.expanded),.one-col .type-selector>.dropdown-menu>.dropdown-item:not(.expanded){flex:0 0 100%;max-width:100%}.two-cols.expanded .type-selector>.dropdown-menu>.dropdown-item:not(.expanded),.two-cols .type-selector>.dropdown-menu>.dropdown-item:not(.expanded){flex:0 0 calc(100% / 2);max-width:calc(100% / 2 - .1px)}}@media (min-width:768px){.type-selector>.dropdown-menu>.dropdown-item>input[type=radio]:checked+.type-label:before{background-color:#fff;box-shadow:none;height:8px}.type-selector>.dropdown-menu>.dropdown-item>input[type=radio]:checked+.type-label:after{border-top-color:#fff}.type-selector>.dropdown-menu>.dropdown-item>input[type=radio]:disabled+.type-label:before{background-color:transparent;box-shadow:0 0 1px 1px transparent}.type-selector>.dropdown-menu>.dropdown-item>input[type=radio]:disabled+.type-label:after{border-color:transparent}.type-selector>.dropdown-menu>.dropdown-item>.type-label{border:1px solid #d8d8d8;position:relative;padding:1.375rem 1rem .75rem;height:100%}.theme-default .type-selector>.dropdown-menu>.dropdown-item>.type-label{background-color:#fff}.theme-hicontrast .type-selector>.dropdown-menu>.dropdown-item>.type-label{color:#fff;background-color:#000}.type-selector>.dropdown-menu>.dropdown-item>.type-label:before{content:"";position:absolute;left:0;right:0;top:0;height:7px;margin:0;transition:background-color .15s ease-in-out,box-shadow .15s ease-in-out}.theme-default .type-selector>.dropdown-menu>.dropdown-item>.type-label:before{background-color:#009597}.theme-hicontrast .type-selector>.dropdown-menu>.dropdown-item>.type-label:before{background-color:#9c0}.theme-default .type-selector>.dropdown-menu>.dropdown-item>.type-label:before{box-shadow:0 0 1px 1px #009597}.theme-hicontrast .type-selector>.dropdown-menu>.dropdown-item>.type-label:before{box-shadow:0 0 1px 1px #9c0}.type-selector>.dropdown-menu>.dropdown-item>.type-label:after{content:"";position:absolute;top:7px;left:50%;transform:translateX(-50%);width:24px;height:24px;border:12px solid;border-left-color:transparent!important;border-right-color:transparent!important;border-bottom-color:transparent!important;transition:border-color .15s ease-in-out}.theme-default .type-selector>.dropdown-menu>.dropdown-item>.type-label:after{border-color:#009597}.theme-hicontrast .type-selector>.dropdown-menu>.dropdown-item>.type-label:after{border-color:#9c0}.type-selector .type-label>span.first-row,.type-selector .type-label>span.title{font-size:.875rem;margin-top:.25rem}.type-selector .type-label>span.second-row{font-size:1rem;line-height:.9}.type-selector .type-label>span.desc,.type-selector .type-label>span.third-row{font-size:.75rem;margin-top:.25rem}.type-selector .type-label>span.icon{float:left;font-size:3.75rem;margin:-.25em -3.75rem -.25em 0}.type-selector .type-label>span.icon~span{padding-left:3.75rem}}.expanded .type-selector{margin-bottom:1.1875rem}.expanded .type-selector>.dropdown-toggle{display:none}.expanded .type-selector>.dropdown-menu{position:static!important;transform:none!important;will-change:auto!important;float:none;display:flex;flex-wrap:wrap;width:100%;border:none;background-color:transparent;margin:0 -.4375rem;width:calc(100% + .875rem)}.expanded .type-selector>.dropdown-menu>.dropdown-item{padding:0 .4375rem;margin-bottom:.875rem}@media (min-width:768px){.expanded .type-selector>.dropdown-menu>.dropdown-item:not(.expanded){flex:0 0 calc(100% / 3);max-width:calc(100% / 3 - .1px)}.one-col.expanded .expanded .type-selector>.dropdown-menu>.dropdown-item:not(.expanded),.one-col .expanded .type-selector>.dropdown-menu>.dropdown-item:not(.expanded){flex:0 0 100%;max-width:100%}.two-cols.expanded .expanded .type-selector>.dropdown-menu>.dropdown-item:not(.expanded),.two-cols .expanded .type-selector>.dropdown-menu>.dropdown-item:not(.expanded){flex:0 0 calc(100% / 2);max-width:calc(100% / 2 - .1px)}}.expanded .type-selector>.dropdown-menu>.dropdown-item>input[type=radio]:checked+.type-label:before{background-color:#fff;box-shadow:none;height:8px}.expanded .type-selector>.dropdown-menu>.dropdown-item>input[type=radio]:checked+.type-label:after{border-top-color:#fff}.expanded .type-selector>.dropdown-menu>.dropdown-item>input[type=radio]:disabled+.type-label:before{background-color:transparent;box-shadow:0 0 1px 1px transparent}.expanded .type-selector>.dropdown-menu>.dropdown-item>input[type=radio]:disabled+.type-label:after{border-color:transparent}.expanded .type-selector>.dropdown-menu>.dropdown-item>.type-label{border:1px solid #d8d8d8;position:relative;padding:1.375rem 1rem .75rem;height:100%}.theme-default .expanded .type-selector>.dropdown-menu>.dropdown-item>.type-label{background-color:#fff}.theme-hicontrast .expanded .type-selector>.dropdown-menu>.dropdown-item>.type-label{color:#fff;background-color:#000}.expanded .type-selector>.dropdown-menu>.dropdown-item>.type-label:before{content:"";position:absolute;left:0;right:0;top:0;height:7px;margin:0;transition:background-color .15s ease-in-out,box-shadow .15s ease-in-out}.theme-default .expanded .type-selector>.dropdown-menu>.dropdown-item>.type-label:before{background-color:#009597}.theme-hicontrast .expanded .type-selector>.dropdown-menu>.dropdown-item>.type-label:before{background-color:#9c0}.theme-default .expanded .type-selector>.dropdown-menu>.dropdown-item>.type-label:before{box-shadow:0 0 1px 1px #009597}.theme-hicontrast .expanded .type-selector>.dropdown-menu>.dropdown-item>.type-label:before{box-shadow:0 0 1px 1px #9c0}.expanded .type-selector>.dropdown-menu>.dropdown-item>.type-label:after{content:"";position:absolute;top:7px;left:50%;transform:translateX(-50%);width:24px;height:24px;border:12px solid;border-left-color:transparent!important;border-right-color:transparent!important;border-bottom-color:transparent!important;transition:border-color .15s ease-in-out}.theme-default .expanded .type-selector>.dropdown-menu>.dropdown-item>.type-label:after{border-color:#009597}.theme-hicontrast .expanded .type-selector>.dropdown-menu>.dropdown-item>.type-label:after{border-color:#9c0}.expanded .type-selector .type-label>span.first-row,.expanded .type-selector .type-label>span.title{font-size:.875rem;margin-top:.25rem}.expanded .type-selector .type-label>span.second-row{font-size:1rem;line-height:.9}.expanded .type-selector .type-label>span.desc,.expanded .type-selector .type-label>span.third-row{font-size:.75rem;margin-top:.25rem}.expanded .type-selector .type-label>span.icon{float:left;font-size:3.75rem;margin:-.25em -3.75rem -.25em 0}.expanded .type-selector .type-label>span.icon~span{padding-left:3.75rem}@media (max-width:767.98px){.fixed-payment-type-selector .type-selector>.dropdown-toggle{display:flex;align-items:center;height:2.5rem}.fixed-payment-type-selector .type-selector>.dropdown-toggle i.ca{font-size:2rem;margin-bottom:-.75rem;margin-right:.5rem}}.fixed-payment-type-selector .type-selector>.dropdown-menu>.dropdown-item>.type-label{display:flex;align-items:center}.fixed-payment-type-selector .type-selector>.dropdown-menu>.dropdown-item>.type-label i.ca{font-size:2rem;margin-right:.5rem}@media (min-width:768px){.fixed-payment-type-selector .type-selector>.dropdown-menu>.dropdown-item>.type-label{padding:2.5rem 1rem 1.75rem}.fixed-payment-type-selector .type-selector>.dropdown-menu>.dropdown-item>.type-label i.ca{font-size:5rem;line-height:0;margin-right:1.25rem}.fixed-payment-type-selector .type-selector>.dropdown-menu>.dropdown-item>.type-label .title{margin-top:0}}'],encapsulation:2}),t})()},MXWy:function(t,e,a){"use strict";a.d(e,"a",function(){return u});var n=a("u6dq"),i=a("kyhl"),c=a("0+e1"),s=a("0E6W"),o=a("DH9u"),r=a("8Y7J"),l=a("X22t"),d=a("TSSN");let u=(()=>{class t{constructor(t,e){this.dictionaryService=t,this.translateService=e}getAccountName(t){return t.customName?t.customName:t.name}getCreditCardAccountName(t){return t.customName?t.customName:this.dictionaryService.getEntryValue("PRODUCT_TYPE",t.productTypeCode)}getLoanName(t){return t.customName?t.customName:this.dictionaryService.getEntryShortyValue("PRODUCT_TYPE",t.productTypeCode)}getSavingName(t){return t.ownName?t.ownName:this.dictionaryService.getEntryValue("PRODUCT_TYPE",t.productTypeCode)}getCardName(t){return this.dictionaryService.getEntryValue("CARD_PRODUCT_TYPE",t.cardProductTypeCode)}getInsuranceName(t){return t.customName?t.customName:this.dictionaryService.getEntryValue("PRODUCT_TYPE",t.productTypeCode)}getFundIkeName(t){return t.customName?t.customName:this.dictionaryService.getEntryValue("PRODUCT_TYPE",t.productTypeCode)}accListToAccountEntryList(t){return t.map(t=>this.accToAccountEntryDTO(t))}ccaListToAccountEntryList(t){return t.map(t=>this.ccaToAccountEntryDTO(t))}saListToAccountEntryList(t){return t.map(t=>this.saToAccountEntryDTO(t))}psoListToAccountEntryList(t){return t.map(t=>this.psoToAccountEntryDTO(t))}loListToAccountEntryList(t){return t.map(t=>this.loToAccountEntryDTO(t))}accToAccountEntryDTO(t){return{dto:t,type:n.a.ACCOUNT,id:t.id,parentNrbNumber:t.parentNrbNumber,leadingNrbNumber:t.leadingNrbNumber,nrbNumber:t.nrbNumber,availFunds:t.availFunds,productName:this.getAccountName(t),currency:t.currency,vatAccIndicator:t.vatAccIndicator,isDisabled:!1,accountFlags:t.accountFlags,isAccount:!0,isCreditCardAccount:!1,isSavingAccount:!1,isLoan:!1,isFund:!1}}ccaToAccountEntryDTO(t){return{dto:t,type:n.a.CREDIT_CARD_ACCOUNT,id:t.id,parentNrbNumber:null,nrbNumber:t.nrbNumber,availFunds:t.availFunds,productName:this.getCreditCardAccountName(t),currency:t.currency,vatAccIndicator:!1,isDisabled:!1,accountFlags:t.accountFlags,isAccount:!1,isCreditCardAccount:!0,isSavingAccount:!1,isLoan:!1,isFund:!1}}saToAccountEntryDTO(t){return{dto:t,type:n.a.SAVING_ACCOUNT,id:t.id,parentNrbNumber:t.parentNrbNumber,nrbNumber:t.nrbNumber,availFunds:t.availFunds,productName:this.getSavingName(t),currency:t.currency,vatAccIndicator:!1,isDisabled:!1,accountFlags:t.accountFlags,isAccount:!1,isCreditCardAccount:!1,isSavingAccount:!0,isLoan:!1,isFund:!1}}loToAccountEntryDTO(t){return{dto:t,type:n.a.LOAN,id:t.id,parentNrbNumber:null,nrbNumber:t.nrbNumber,availFunds:t.bookBalance,productName:this.getLoanName(t),currency:t.currency,vatAccIndicator:!1,isDisabled:!1,accountFlags:t.loanFlags,isAccount:!1,isCreditCardAccount:!1,isSavingAccount:!1,isLoan:!0,isFund:!1,loanDueBalance:t.dueBalance,earlyRepaymentNumber:t.earlyRepaymentNumber}}psoToAccountEntryDTO(t){return{dto:t,type:n.a.SAVING_PROGRAM,id:t.id,parentNrbNumber:t.parentNrbNumber,nrbNumber:t.nrbNumber,availFunds:t.balance,productName:this.getSavingName(t),currency:t.currency,vatAccIndicator:!1,isDisabled:!1,accountFlags:t.accountFlags,isAccount:!1,isCreditCardAccount:!1,isSavingAccount:!0,isLoan:!1,isFund:!1}}dpToAccountEntryDTO(t){return{dto:t,type:n.a.DEPOSIT,id:t.id,parentNrbNumber:t.parentNrbNumber,nrbNumber:t.nrbNumber,availFunds:t.balance,productName:this.getSavingName(t),currency:t.balance.currency,vatAccIndicator:!1,isDisabled:!1,accountFlags:[],isAccount:!1,isCreditCardAccount:!1,isSavingAccount:!0,isLoan:!1,isFund:!1}}fundToAccountEntryDTO(t){return{dto:t,type:n.a.FUND,id:t.id,parentNrbNumber:null,nrbNumber:null,availFunds:t.totalValue,productName:t.name,currency:t.totalValue.currency,vatAccIndicator:!1,isDisabled:!1,accountFlags:[],isAccount:!1,isCreditCardAccount:!1,isSavingAccount:!1,isLoan:!1,isFund:!0}}structuredProductToAccountEntryDTO(t){var e;return{dto:t,type:n.a.STRUCTURED_PRODUCT,id:t.id,parentNrbNumber:null,nrbNumber:t.policyNumber,availFunds:t.investmentAmount,productName:this.getInsuranceName(t),currency:null===(e=t.investmentAmount)||void 0===e?void 0:e.currency,vatAccIndicator:!1,isDisabled:!1,accountFlags:[],isAccount:!1,isCreditCardAccount:!1,isSavingAccount:!1,isLoan:!1,isFund:!0}}toSavingEntryDTO(t){const e=o.a.isNullOrUndefined(t.nrbNumber),a=e?t:null,n=e?null:t;return{id:t.id,parentNrbNumber:t.parentNrbNumber,ownName:t.ownName,nrbNumber:e?null:n.nrbNumber,shortNrbNumber:t.shortNrbNumber,balance:e?a.amount:n.balance,productTypeCode:t.productTypeCode,plannedEndDate:t.plannedEndDate,plannedOpeningDate:e?a.plannedOpeningDate:null,isDepositOrder:e}}toHoldFieldValuesDetails(t){const e=new c.a,a=new s.a(this.dictionaryService),n=new i.a,o=[];return this.addFieldValue(o,"history.tran.list.hold.details.startDate.label",t.startDate,t=>e.transform(t)),this.addFieldValue(o,"history.tran.list.hold.details.expiryDate.label",t.expiryDate,t=>e.transform(t)),this.addFieldValue(o,"history.tran.list.hold.details.holdCode.label",t.holdCode,t=>a.transform(t,"HOLD")),this.addFieldValue(o,"history.tran.list.hold.details.amount.label",t.amount,t=>n.transform(t.amount)+" "+t.currency),this.addFieldValue(o,"history.tran.list.hold.details.maskedCardNumber.label",t.maskedCardNumber,null),this.addFieldValue(o,"history.tran.list.hold.details.tranAmount.label",t.tranAmount,t=>n.transform(t.amount)+" "+t.currency),this.addFieldValue(o,"history.tran.list.hold.details.tranAddressLocation.label",t.tranAddressLocation+" "+t.tranAddressStreetCity+" "+a.transform(t.tranAddressCountryCode,"COUNTRY"),null),this.addFieldValue(o,"history.tran.list.hold.details.feeAmountDesc.label",t.feeAmountDesc,null),this.addFieldValue(o,"history.tran.list.hold.details.creditorName.label",t.creditorName,null),this.addFieldValue(o,"history.tran.list.hold.details.paymentTypeCode.label",t.paymentTypeCode,t=>a.transform(t,"PAYMENT_TYPE")),this.addFieldValue(o,"history.tran.list.hold.details.creditorAccNumber.label",t.creditorAccNumber,null),this.addFieldValue(o,"history.tran.list.hold.details.documentDate.label",t.documentDate,t=>e.transform(t)),this.addFieldValue(o,"history.tran.list.hold.details.holdDescription.label",t.holdDescription,null),this.addFieldValue(o,"history.tran.list.hold.details.holdBeneficiary.label",t.holdBeneficiary,null),o}addFieldValue(t,e,a,n){a&&t.push({label:this.translateService.instant(e),value:n?n(a):a,format:"STRING"})}isFirstLevelAccount(t){return this.isMainAccount(t)&&!this.isForeignCurrencyAccount(t)||this.isMainVatAccount(t)}isChildAccount(t,e){return!this.isFirstLevelAccount(e)&&(e.parentNrbNumber===t.nrbNumber||e.leadingNrbNumber===t.nrbNumber)}isMainAccount(t){return t.nrbNumber===t.parentNrbNumber}isMainVatAccount(t){return o.a.isNullOrUndefined(t.parentNrbNumber)&&t.vatAccIndicator}isVatAccount(t){return t.vatAccIndicator}isSubAccount(t){return!this.isMainAccount(t)&&!this.isMainVatAccount(t)}isForeignCurrencyAccount(t){return"PLN"!==t.currency}isVatOrAuxAccount(t){return this.isVatAccount(t)||this.isSubAccount(t)&&!this.isForeignCurrencyAccount(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(l.a),r.Wb(d.d))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},N5T3:function(t,e,a){"use strict";a.d(e,"a",function(){return c});var n=a("8Y7J"),i=a("Z+cv");let c=(()=>{class t{constructor(t){this.pfmCategoryService=t}transform(t,e){let a=null;return t&&(a=this.pfmCategoryService.getCategoryName(t)),a||t}}return t.\u0275fac=function(e){return new(e||t)(n.Mb(i.a))},t.\u0275pipe=n.Lb({name:"categoryName",type:t,pure:!0}),t.\u0275prov=n.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},NAEP:function(t,e,a){"use strict";a.d(e,"a",function(){return d});var n=a("XNiG"),i=a("u6dq"),c=a("8Y7J"),s=a("X22t"),o=a("MXWy"),r=a("TSSN"),l=function(t){return t.OTHER="OTHER",t.FOREIGN="FOREIGN",t.VAT="VAT",t}({});let d=(()=>{class t{constructor(t,e,a){this.dictionaryService=t,this.productHelper=e,this.translateService=a,this.cardListChange=new n.a}toAccountEntryDTOTreeSorted(t){return this.toAccountDTOTree(this.productHelper.accListToAccountEntryList(t),!0)}toAccountEntryDTOTreeNotSorted(t){return this.toAccountDTOTree(this.productHelper.accListToAccountEntryList(t),!1)}toView360AccountEntryDTOTreeSorted(t,e=null){return this.toView360AccountDTOTree(this.productHelper.accListToAccountEntryList(t),!0,e)}flattenAccountEntryDTOTree(t){const e=[];return t.forEach(t=>{e.push(t.account),t.children.forEach(t=>e.push(t.account))}),e}flattenView360AccountEntryDTOTree(t){const e=[];return t.forEach(t=>{e.push(t.account),t.groups.forEach(t=>t.children.forEach(t=>e.push(t.account))),t.children.forEach(t=>e.push(t.account))}),e}toAccountDTOTree(t,e){const a=t.filter(t=>this.productHelper.isFirstLevelAccount(t)||t.isCreditCardAccount).map(a=>{const n={account:a,children:[]};return t.filter(t=>this.productHelper.isChildAccount(n.account,t)).forEach(t=>n.children.push({account:t,children:[]})),e&&n.children.sort((t,e)=>this.sortAccountsByCurrencyAndAmount(t,e)),n});return e&&a.sort((t,e)=>this.sortAccountsByCurrencyAndAmount(t,e)),a}toView360AccountDTOTree(t,e,a=null){const n=[],i=t.filter(t=>this.productHelper.isMainAccount(t)||this.productHelper.isMainVatAccount(t));e&&i.sort((t,e)=>this.sortAccountsByCurrencyAndAmount(t,e)),a&&i.map(t=>t.nrbNumber).indexOf(a)>-1&&i.splice(0,0,i.splice(i.map(t=>t.nrbNumber).indexOf(a),1)[0]);let c=0;return i.forEach(a=>{c++;const i={account:a,groups:[],children:[]},s=t.filter(t=>!this.productHelper.isMainAccount(t)&&t.parentNrbNumber===i.account.nrbNumber);for(const t in l){let a=[];switch(t){case l.OTHER:a=s.filter(t=>!this.productHelper.isVatAccount(t)&&!this.productHelper.isForeignCurrencyAccount(t));break;case l.FOREIGN:a=s.filter(t=>this.productHelper.isForeignCurrencyAccount(t));break;case l.VAT:a=s.filter(t=>this.productHelper.isVatAccount(t))}if(a.length>0)if(a.length>1&&c<5){const n={type:l[t],name:this.getAccountGroupName(t),children:[]};let s=0;const o=[];a.forEach(t=>{n.children.push({account:t,children:[]}),o.includes(t.currency)||o.push(t.currency),s+=t.availFunds.amount}),t===l.FOREIGN?n.currencies=o.sort((t,e)=>t.localeCompare(e)):n.availFunds={amount:s,currency:a[0].currency},e&&n.children.sort((t,e)=>this.sortAccountsByCurrencyAndAmount(t,e)),i.groups.push(n),c++}else a.forEach(t=>{c<5&&(i.children.push({account:t,children:[]}),c++)}),e&&i.children.sort((t,e)=>this.sortAccountsByCurrencyAndAmount(t,e))}c<=5&&n.push(i)}),n}getAccountGroupName(t){return this.translateService.instant("view360.myFinances.accounts.group."+l[t].toLowerCase())}sortAccountsByCurrencyAndAmount(t,e){const a=t=>t.hasOwnProperty("dto"),n=a(t)?t:t.account,i=a(e)?e:e.account,c=this.dictionaryService.getCurrencyOrderMap().get(n.currency),s=this.dictionaryService.getCurrencyOrderMap().get(i.currency);let o=c>s?1:c<s?-1:0;if(0===o){const t=n.availFunds.amount,e=i.availFunds.amount;o=e>t?1:e<t?-1:0}return o}toAccountCardsTree(t,e,a){return[].concat(t.map(t=>({account:t,type:i.a.ACCOUNT,cards:a.filter(e=>e.nrbNumber===t.nrbNumber)}))).concat(e.map(t=>({account:t,type:i.a.CREDIT_CARD_ACCOUNT,cards:a.filter(e=>e.nrbNumber===t.nrbNumber)})))}creditCardToAccountEntryDTOTreeNotSorted(t){return this.toAccountDTOTree(this.productHelper.ccaListToAccountEntryList(t),!1)}getAccountTypeStyle(t){if(t){if(t.type===i.a.ACCOUNT)return"account-type1";if([i.a.SAVING_ACCOUNT,i.a.DEPOSIT,i.a.SAVING_PROGRAM].includes(t.type))return"account-type2";if(t.type===i.a.CREDIT_CARD_ACCOUNT)return"account-type3";if(t.type===i.a.LOAN)return"account-type4";if(t.type===i.a.INSURANCE)return"account-type6";if([i.a.FUND_IKE,i.a.FUND,i.a.STRUCTURED_PRODUCT].includes(t.type))return"account-type7"}return""}getAccountBigStyle(t){return t===i.a.ACCOUNT?"big-account-accounts":[i.a.SAVING_ACCOUNT,i.a.DEPOSIT,i.a.SAVING_PROGRAM].includes(t)?"big-account-savings":[i.a.CREDIT_CARD,i.a.CREDIT_CARD_ACCOUNT].includes(t)?"big-account-cards":t===i.a.LOAN?"big-account-loans":t===i.a.INSURANCE?"big-account-insurances":[i.a.FUND,i.a.STRUCTURED_PRODUCT].includes(t)?"big-account-funds":""}}return t.\u0275fac=function(e){return new(e||t)(c.Wb(s.a),c.Wb(o.a),c.Wb(r.d))},t.\u0275prov=c.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"O+J8":function(t,e,a){"use strict";a.d(e,"a",function(){return h});var n=a("iInd"),i=a("XNiG"),c=a("cp0P"),s=a("LRne"),o=a("pLZG"),r=a("5+tZ"),l=a("lJxs"),d=a("8Y7J"),u=a("bWdP"),p=a("6rCG"),b=a("NAEP"),m=a("HO8t");let h=(()=>{class t{constructor(t,e,a,c,s){this.snapshotCacheService=t,this.router=e,this.apiService=a,this.accountHelper=c,this.permissionService=s,this.registerFromList=new i.a,this.router.events.pipe(Object(o.a)(t=>t instanceof n.b)).subscribe(t=>{t.url.indexOf("/products/funds")&&this.reset(),this._isFundSell=t.url.indexOf("fund-sell")>=0})}reset(){this.snapshotCacheService.invalidateEntriesWithKeyPrefix(t.cacheKeyPrefix)}isFundSell(){return this._isFundSell}initSellExchange(){return Object(c.a)([this.getFundsProgramsRegistersList(),this.isFundSell()?this.prepareInvestmentFundSell():this.prepareInvestmentFundConversion(),this.isFundSell()?this.getAccountData():Object(s.a)([])]).pipe(Object(r.b)(t=>Object(s.a)(this.toInitSellExchangeData(t))))}getFundsProgramsRegistersList(){return Object(c.a)([this.getInvestmentList(),this.getFundRegisterList()]).pipe(Object(r.b)(t=>Object(s.a)(this.toFundsProgramsRegistersList(t[0],t[1]))))}getInvestmentList(){return this.snapshotCacheService.getInvestmentList(t.cacheKeyPrefix,t.cacheMaxAge)}getFundProgramListSnapshot(){return this.snapshotCacheService.getInvestmentListSnapshot().pipe(Object(l.a)(t=>t.investmentList.umbrellaFundList),Object(l.a)(t=>this.getPrograms(t)),Object(r.b)(t=>Object(s.a)(t)))}getFundRegisterList(){return this.snapshotCacheService.getFundRegisterList(t.cacheKeyPrefix,t.cacheMaxAge)}getRegisterDetails(e,a){return this.snapshotCacheService.getRegisterDetails(e,a,t.cacheKeyPrefix,t.cacheMaxAge)}getFundIkeList(){return this.permissionService.hasRetirementInsuranceAccess()&&this.permissionService.isPensionInsuranceEnabled()?this.snapshotCacheService.getFundIkeList(t.cacheKeyPrefix,t.cacheMaxAge):Object(s.a)({header:{status:"OK"},retirementInsurance:[],retirementInsuranceCount:0,insuranceAccessUserConsent:!1})}getFundIkeDetails(e){return this.snapshotCacheService.getFundIkeDetails(e,t.cacheKeyPrefix,t.cacheMaxAge)}getAccountList(){return this.snapshotCacheService.getAccountList(t.cacheKeyPrefix,t.cacheMaxAge)}prepareInvestmentFundSell(){return this.apiService.prepareInvestmentFundSell()}prepareInvestmentFundConversion(){return this.apiService.prepareInvestmentFundConversion()}getPrograms(t){const e=t.map(t=>t.investmentProgramList);return[].concat.apply([],e)}toFundsProgramsRegistersList(t,e){return{list:(t&&t.investmentList?t.investmentList.umbrellaFundList:[]).map(t=>({umbrellaFund:t,programsList:t.investmentProgramList.map(a=>({program:a,registerList:e.filter(e=>e.umbrellaFundId===t.id&&e.registryTypeCode===a.registryTypeCode&&e.programId===a.id)}))})),isFundsAvailable:t.fundsAvailable}}getAccountData(){return Object(c.a)([this.getAccountList()]).pipe(Object(l.a)(t=>this.getFilteredFromAccounts(t[0])),Object(l.a)(t=>this.accountHelper.toAccountEntryDTOTreeNotSorted(t)),Object(r.b)(t=>Object(s.a)(t)))}getFilteredFromAccounts(t){return t.filter(t=>t.accountFlags.indexOf("PAYMENT_TFI_DEBIT")>=0)}toInitSellExchangeData(t){return{programsListFrom:t[0].list,prepareData:t[1],accountTree:t[2]}}}return t.cacheKeyPrefix="Funds",t.cacheMaxAge=36e5,t.\u0275fac=function(e){return new(e||t)(d.Wb(u.a),d.Wb(n.d),d.Wb(p.a),d.Wb(b.a),d.Wb(m.a))},t.\u0275prov=d.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},Y0x6:function(t,e,a){"use strict";a.d(e,"a",function(){return l});var n=a("0Aji"),i=a("8Y7J"),c=a("V7XX"),s=a("V6Ot"),o=a("X22t"),r=a("XwgE");let l=(()=>{class t{constructor(t,e,a,n){this.formatHelper=t,this.pfmLayoutHelper=e,this.dictionaryService=a,this.appDateService=n}toOperationDataWrappers(t,e){return t.map(t=>this.toOperationDataWrapper(t))}toOperationDataWrapper(t){const e=this.formatHelper.formatIsoDate(t.operationDate);return{operation:t,date:this.formatHelper.fromIsoDate(e),shortDateNameKey:this.getShortDayNameKey(this.formatHelper.fromIsoDate(e)),isShowDetailsSplitRow:!1,isLoadingDetails:!1,isSavingCategories:!1,isShowDetails:!1,isShowSplit:!1,fieldValueDetails:[],base64SafeId:this.formatHelper.toBase64SafeId(t.id),paymentStatusShortCode:this.dictionaryService.getPaymentStatusMap().get(t.paymentStatusCode),typeClass:this.getOperationTypeClass(t),pfmOperationClass:this.getPfmOperationClass(t),isRejected:this.isOperationRejected(t),isCancelled:this.isOperationCancelled(t),isHold:t.type===n.a.HOLD,isPayment:t.type===n.a.PAYMENT,isTransaction:t.type===n.a.TRANSACTION,isSplit:this.isSplit(t),isCategorized:this.isCategorized(t),categoryCode:t.type===n.a.TRANSACTION?t.categoryCode:t.type===n.a.PAYMENT?t.paymentTypeCode:t.holdCode,categoryDictionary:t.type===n.a.TRANSACTION?"TRANSACTION_CATEGORY":t.type===n.a.PAYMENT?"PAYMENT_TYPE":"HOLD",reversible:!1,duplicable:!1}}getShortDayNameKey(t){return this.formatHelper.formatDate(t),this.formatHelper.formatDate(this.formatHelper.addDays(this.appDateService.now(),1)),"dict.day.short."+new Date(t).getDay()}getOperationTypeClass(t){let e="";return this.isOperationRejected(t)&&(e="tr-type-rejected"),this.isOperationCancelled(t)&&(e="tr-type-cancelled"),""===e&&(e=t.amount.amount>0?"tr-type-in":t.amount.amount<0?"tr-type-out":""),e}getPfmOperationClass(t){return this.pfmLayoutHelper.getPfmCategoryClassByCode(t.pfmCategoryCode)}isSplit(t){return this.pfmLayoutHelper.isSplit(t)}isCategorized(t){return this.pfmLayoutHelper.isCategorized(t)}isOperationRejected(t){return"SBEREJD"===this.dictionaryService.getPaymentStatusMap().get(t.paymentStatusCode)}isOperationCancelled(t){return"SBECANC"===this.dictionaryService.getPaymentStatusMap().get(t.paymentStatusCode)}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(c.a),i.Wb(s.a),i.Wb(o.a),i.Wb(r.a))},t.\u0275prov=i.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},mJiO:function(t,e,a){"use strict";a.d(e,"a",function(){return d});var n=a("8Y7J"),i=a("s7LF"),c=a("mdbc"),s=a("SVse"),o=a("TSSN");function r(t,e){if(1&t){const t=n.Tb();n.Sb(0,"a",4),n.Zb("click",function(){n.xc(t);const a=e.$implicit;return n.cc().onOptionClick(a.key)}),n.Gc(1),n.dc(2,"translate"),n.Rb()}if(2&t){const t=e.$implicit;n.zb(1),n.Hc(n.ec(2,1,t.i18text))}}const l=function(t){return{"dropdown-menu-right":t}};let d=(()=>{class t{constructor(e){this.elementRef=e,this.labelId="dropdownMenu_"+t.NEXT_ID++,this.options=[],this.dropdownMenuRight=!1,this.buttonClass="",this.promptText="",this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){}getSelectedI18Text(){return this.options.filter(t=>t.key===this._value).map(t=>t.i18text)[0]||this.promptText}onOptionClick(t){t!==this._value&&(this.value=t)}get value(){return this._value}set value(t){this._value=t,this.onChange(t),this.onTouched(),this.emitEvent("change")}writeValue(t){this._value=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.isDisabled=t}emitEvent(t){this.elementRef.nativeElement.dispatchEvent(new CustomEvent(t,{bubbles:!0}))}}return t.NEXT_ID=0,t.\u0275fac=function(e){return new(e||t)(n.Mb(n.l))},t.\u0275cmp=n.Gb({type:t,selectors:[["app-dropdown"]],inputs:{labelId:"labelId",options:"options",dropdownMenuRight:"dropdownMenuRight",buttonClass:"buttonClass",promptText:"promptText"},features:[n.yb([{provide:i.r,useExisting:Object(n.T)(()=>t),multi:!0}])],decls:6,vars:12,consts:[["appFocusBlurEmitter","",1,"dropdown"],["type","button","data-toggle","dropdown","aria-expanded","false",1,"btn","btn-default","form-control","dropdown-toggle",3,"id","ngClass","disabled"],[1,"dropdown-menu",3,"ngClass"],["href","javascript:void(null);","class","dropdown-item",3,"click",4,"ngFor","ngForOf"],["href","javascript:void(null);",1,"dropdown-item",3,"click"]],template:function(t,e){1&t&&(n.Sb(0,"div",0),n.Sb(1,"button",1),n.Gc(2),n.dc(3,"translate"),n.Rb(),n.Sb(4,"div",2),n.Ec(5,r,3,3,"a",3),n.Rb(),n.Rb()),2&t&&(n.zb(1),n.kc("id",e.labelId+".Button"),n.jc("ngClass",e.buttonClass)("disabled",e.isDisabled),n.Ab("aria-labelledby",e.labelId+" "+e.labelId+".Button"),n.zb(1),n.Ic(" ",n.ec(3,8,e.getSelectedI18Text())," "),n.zb(2),n.jc("ngClass",n.pc(10,l,e.dropdownMenuRight)),n.Ab("aria-labelledby",e.labelId),n.zb(1),n.jc("ngForOf",e.options))},directives:[c.a,s.k,s.l],pipes:[o.c],styles:["app-dropdown .dropdown-item{font-size:.875rem!important;font-weight:400!important}.theme-default app-dropdown .dropdown-item{background:transparent;color:#4a4e51}.theme-hicontrast app-dropdown .dropdown-item{background:transparent;color:#fff}"],encapsulation:2}),t})()},rsEA:function(t,e,a){"use strict";a.d(e,"a",function(){return m});var n=a("8Y7J"),i=a("s7LF"),c=a("u6dq"),s=a("CjBK"),o=a("V7XX"),r=a("TSSN"),l=a("NAEP"),d=a("mdbc"),u=a("SVse");const p=["selectpicker"];function b(t,e){if(1&t&&(n.Sb(0,"option"),n.Gc(1),n.Rb()),2&t){const t=e.$implicit,a=n.cc();n.Ab("value",a.escapeHtml(t.nrbNumber))("title",a.escapeHtml(t.name))("data-content",a.dataContent(t)),n.zb(1),n.Hc(t.name)}}let m=(()=>{class t{constructor(t,e,a,n,i){this.ngZone=t,this.formatHelper=e,this.translateService=a,this.elementRef=n,this.accountHelper=i,this.dataWidth="fit",this.dataStyle="btn-default dropdown-accounts",this.dataTitle="",this.dataCountSelectedText="",this.labelledby="",this.isShown=!1,this.subscriptions=[],this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this.subscriptions.push(this.translateService.onLangChange.subscribe(()=>{setTimeout(()=>{this.selectPickerRefresh()})}))}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{this.jQuerySelectElement=jQuery(this.selectpickerElementRef.nativeElement),this.jQuerySelectElement.selectpicker({mobile:!1,container:"body"}),this.jQuerySelectElement.on("loaded.bs.select",this.onSelectLoaded.bind(this)),this.jQuerySelectElement.on("changed.bs.select",this.onSelectChange.bind(this)),this.jQuerySelectElement.on("show.bs.select",this.onSelectShow.bind(this)),this.jQuerySelectElement.on("hide.bs.select",this.onSelectHide.bind(this)),this.jQuerySelectElement.prop("disabled",this._isDisabled),this.selectPickerVal(this._value)}),this._isAfterViewInit=!0}ngOnChanges(t){t.options&&t.options.currentValue&&setTimeout(()=>this.setDisabledState(0===t.options.currentValue.length))}selectPickerRefresh(){this.jQuerySelectElement&&this.ngZone.runOutsideAngular(()=>{this.jQuerySelectElement.selectpicker("refresh"),this.selectPickerVal(this._value)})}selectPickerVal(t){this.jQuerySelectElement&&this.ngZone.runOutsideAngular(()=>{const e=Array.isArray(t)?t:[t];this.options&&this.options.some(t=>e.indexOf(t.nrbNumber)>=0)?this.jQuerySelectElement.selectpicker("val",t):e&&0!==e.length||this.jQuerySelectElement.selectpicker("val",t)})}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.jQuerySelectElement&&(this.jQuerySelectElement.off("changed.bs.select",this.onSelectChange.bind(this)),this.jQuerySelectElement.selectpicker("destroy"))}escapeHtml(t){return $("<div>").text(t).html()}dataContent(t){const e=[c.a.FUND_IKE,c.a.INSURANCE,c.a.STRUCTURED_PRODUCT].includes(t.type)?`<div class="account-number">${t.policyNumber}</div>`:"",a=[c.a.FUND_IKE,c.a.FUND,c.a.INSURANCE,c.a.STRUCTURED_PRODUCT].includes(t.type)?"":`<div class="account-number"> ${this.formatHelper.decorateNrb(this.escapeHtml(t.nrbNumber))}</div>`,n=[c.a.INSURANCE,c.a.STRUCTURED_PRODUCT].includes(t.type)?"":`<div class="amount">\n                  <span class="number">${this.formatHelper.formatAmount(t.availFunds.amount)}</span>&nbsp;<span class="currency">${this.escapeHtml(t.availFunds.currency)}</span>\n               </div>`;return`<div class="account" role="option" aria-label="${this.escapeHtml(this.getAriaLabelByProductType(t))}">\n                    <div class="account-type ${this.getAccountTypeStyle(t)}"></div>\n                    <div class="account-inner">\n                        <div class="name"> ${this.escapeHtml(t.name)} </div>\n                        ${e}\n                        ${a}\n                        ${n}\n                    </div>\n                </div>`}getAccountTypeStyle(t){return this.accountHelper.getAccountTypeStyle(t)}getAriaLabelByProductType(t){const e=t.availFunds?this.formatHelper.formatAmount(t.availFunds.amount,2)+" "+t.availFunds.currency:"",a=this.formatHelper.formatAccountNumber(t.nrbNumber,[s.a.NRB]);return t.type===c.a.CREDIT_CARD_ACCOUNT?`Karta kredytowa: ${t.name}, Dost\u0119pne \u015brodki: ${e}, Numer karty: ${a}`:t.type===c.a.ACCOUNT?`Konto: ${t.name}, Dost\u0119pne \u015brodki: ${e}, Numer konta: ${a}`:t.type===c.a.LOAN?`Kredyt: ${t.name}, Pozosta\u0142o do sp\u0142aty: ${e}, Numer kredytu: ${a}`:t.type===c.a.DEPOSIT?`Lokata: ${t.name}, Kwota lokaty: ${e}, Numer lokaty: ${a}`:t.type===c.a.SAVING_ACCOUNT?`Rachunek oszcz\u0119dno\u015bciowy: ${t.name}, Zgromadzone oszcz\u0119dno\u015bci: ${e}, Numer rachunku: ${a}`:t.type===c.a.SAVING_PROGRAM?`Program Systematycznego Oszcz\u0119dzania: ${t.name}, Docelowa kwota: ${e}, Numer programu: ${a}`:t.type===c.a.FUND?`Fundusz: ${t.name}, Aktualna warto\u015b\u0107: ${e}`:t.type===c.a.STRUCTURED_PRODUCT?`Ubezpieczenie z elementem inwestycyjnym: ${t.name}, Aktualna warto\u015b\u0107: ${e}`:t.type===c.a.INSURANCE?"Ubezpieczenie: "+t.name:t.type===c.a.FUND_IKE?`Ubezpieczeniowy produkt emerytalny: ${t.name}, Aktualna warto\u015b\u0107: ${e}`:""}onSelectLoaded(){const t=this.labelledby;t&&this.jQuerySelectElement.siblings(".dropdown-toggle").eq(0).each(function(){$(this).attr("aria-labelledby",t)})}onSelectChange(t){this.ngZone.run(()=>{const t=this.jQuerySelectElement.val();this.isValueChanged(this._value,t)&&(this._value=t,this.onChange(this._value),this.onTouched())})}onSelectShow(t){this.isShown=!0}onSelectHide(t){this.isShown=!1}isValueChanged(t,e){return t&&e?Array.isArray(t)&&Array.isArray(e)?t.length!==e.length||t.some((t,a)=>-1===e.indexOf(t)):!(!Array.isArray(t)&&!Array.isArray(e))||t!==e:t!==e}writeValue(t){this.isValueChanged(this._value,t)&&(this._value=t,this.selectPickerVal(this._value))}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._isDisabled=t,this._isAfterViewInit&&(this.jQuerySelectElement.prop("disabled",t),this.selectPickerRefresh())}isActiveElementInTarget(t){return this.isShown||this.elementRef.nativeElement.contains(t.target)}}return t.\u0275fac=function(e){return new(e||t)(n.Mb(n.z),n.Mb(o.a),n.Mb(r.d),n.Mb(n.l),n.Mb(l.a))},t.\u0275cmp=n.Gb({type:t,selectors:[["app-selectpicker-accounts"]],viewQuery:function(t,e){if(1&t&&n.Oc(p,!0),2&t){let t;n.tc(t=n.ac())&&(e.selectpickerElementRef=t.first)}},inputs:{options:"options",multiple:"multiple",dataWidth:"dataWidth",dataStyle:"dataStyle",dataTitle:"dataTitle",dataCountSelectedText:"dataCountSelectedText",labelledby:"labelledby"},features:[n.yb([{provide:i.r,useExisting:Object(n.T)(()=>t),multi:!0}]),n.xb],decls:5,vars:10,consts:[["appFocusBlurEmitter","",3,"isActiveElementInTargetFn"],[1,"selectpicker","dropdown-accounts",3,"title"],["selectpicker",""],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(n.Sb(0,"div",0),n.Sb(1,"select",1,2),n.dc(3,"translate"),n.Ec(4,b,2,4,"option",3),n.Rb(),n.Rb()),2&t&&(n.jc("isActiveElementInTargetFn",e.isActiveElementInTarget.bind(e)),n.zb(1),n.jc("title",n.ec(3,8,e.dataTitle)),n.Ab("multiple",e.multiple)("data-style",e.dataStyle)("data-width",e.dataWidth)("data-selected-text-format",e.dataCountSelectedText?"count":"")("data-count-selected-text",e.dataCountSelectedText),n.zb(3),n.jc("ngForOf",e.options))},directives:[d.a,u.l,i.x,i.E],pipes:[r.c],encapsulation:2,changeDetection:0}),t})()},thZx:function(t,e,a){"use strict";a.d(e,"a",function(){return c});var n=a("8Y7J"),i=a("BdrW");let c=(()=>{class t{constructor(t,e){this.elementRef=t,this.layoutHelper=e,this.align="top",this.minVpSize=2,this.options={align:this.align,minVpSize:this.minVpSize}}onResize(){this.vpSize=this.layoutHelper.checkVPSize(),this.stickyAvailable||this.redraw()}onScroll(){if(!this.stickyAvailable){if(this.vpSize<this.options.minVpSize)return;this.validatePosition()}}ngOnInit(){this.$element=$(this.elementRef.nativeElement),this.$parent=this.getParent(this.$element),this.vpSize=this.layoutHelper.checkVPSize(),this.stickyAvailable=!$("html").hasClass("no-csspositionsticky"),this.onResize()}ngOnChanges(t){t.align&&t.align.currentValue&&(this.options.align=t.align.currentValue),t.minVpSize&&t.minVpSize.currentValue&&(this.options.minVpSize=t.minVpSize.currentValue)}getParent(t){let e=$(t).parent();for(;"NAV"!==e[0].nodeName&&"DIV"!==e[0].nodeName&&"ARTICLE"!==e[0].nodeName;)e=$(e).parent();return e}redraw(){this.vpSize<this.options.minVpSize?this.setPosition(void 0):(this.measure(),this.validatePosition())}setPosition(t){if(this.position!==t&&(this.position=t,this.$element.removeAttr("style"),this.$parent.removeAttr("style"),void 0!==this.position))switch(this.$parent.css({height:this.$parent.outerHeight()}),t){case"fixed":this.$element.css("top"===this.options.align?{position:this.position,width:this.elWidth+"px",left:this.parentLeft+this.parentPaddingLeft,"margin-top":0,bottom:"auto"}:{position:this.position,width:this.elWidth+"px",left:this.parentLeft+this.parentPaddingLeft,"margin-bottom":0,top:"auto"});break;case"absolute":this.$parent.css({position:"relative"}),this.$element.css("top"===this.options.align?{position:this.position,width:this.elWidth+"px",left:this.parentPaddingLeft,top:"auto",bottom:0}:{position:this.position,width:this.elWidth+"px",left:this.parentPaddingLeft,top:0,bottom:"auto"})}}validatePosition(){window.pageYOffset<this.scrollTop?this.setPosition("top"===this.options.align?void 0:"absolute"):window.pageYOffset<=this.scrollBottom?this.setPosition("fixed"):this.setPosition("top"===this.options.align?"absolute":void 0)}measure(){this.setPosition(void 0);const t=this.$parent.offset();this.parentLeft=t.left,this.parentPaddingLeft=this.getElPixels(this.$parent,"padding-left");const e=t.top;"top"===this.options.align?(this.scrollTop=e+this.getElPixels(this.$parent,"border-top-width")+this.getElPixels(this.$parent,"padding-top")+this.getElPixels(this.$element,"margin-top")-this.getElPixels(this.$element,"top"),this.scrollBottom=e+this.$parent.outerHeight()-this.getElPixels(this.$parent,"border-bottom-width")-this.getElPixels(this.$parent,"padding-bottom")-this.getElPixels(this.$element,"margin-bottom")-this.$element.outerHeight()-this.getElPixels(this.$element,"top")):(this.scrollTop=e+this.getElPixels(this.$parent,"border-top-width")+this.getElPixels(this.$parent,"padding-top")+this.getElPixels(this.$element,"margin-top")+this.$element.outerHeight()+this.getElPixels(this.$element,"bottom")-window.innerHeight,this.scrollBottom=e+this.$parent.outerHeight()-this.getElPixels(this.$parent,"border-bottom-width")-this.getElPixels(this.$parent,"padding-bottom")-this.getElPixels(this.$element,"margin-bottom")+this.getElPixels(this.$element,"bottom")-window.innerHeight),this.elWidth=this.$element.outerWidth()}getElPixels(t,e){const a=t.css(e);return"auto"===a?0:this.getPixels(a)}getPixels(t){return parseFloat(t.replace(/[^\d\.]/g,""))}}return t.\u0275fac=function(e){return new(e||t)(n.Mb(n.l),n.Mb(i.a))},t.\u0275dir=n.Hb({type:t,selectors:[["","appStickyForIE11",""]],hostBindings:function(t,e){1&t&&n.Zb("resize",function(){return e.onResize()},!1,n.wc)("ie11stickyredraw.ca",function(){return e.onResize()},!1,n.vc)("scroll",function(){return e.onScroll()},!1,n.wc)},inputs:{align:"align",minVpSize:"minVpSize"},features:[n.xb]}),t})()},xy7A:function(t,e,a){"use strict";a.d(e,"a",function(){return o});var n=a("cp0P"),i=a("LRne"),c=a("3E0/"),s=a("5+tZ");class o{static minExecutionTime(t,e=100){return Object(n.a)([Object(i.a)(!0).pipe(Object(c.a)(e)),t]).pipe(Object(s.b)(t=>Object(i.a)(t[1])))}}},"z2+Z":function(t,e,a){"use strict";a.d(e,"a",function(){return d});var n=a("8Y7J"),i=a("s7LF"),c=a("TSSN"),s=a("mdbc"),o=a("SVse");const r=["selectpicker"];function l(t,e){if(1&t&&(n.Sb(0,"option",4),n.Gc(1),n.dc(2,"translate"),n.Rb()),2&t){const t=e.$implicit,a=n.cc();n.jc("ngClass",a.optionStyle),n.Ab("value",a.escapeHtml(t.key)),n.zb(1),n.Hc(a.escapeHtml(n.ec(2,3,t.i18text)))}}let d=(()=>{class t{constructor(t,e,a){this.ngZone=t,this.elementRef=e,this.translateService=a,this.dataWidth="fit",this.dataStyle="btn-default",this.placeholder="",this.optionStyle=null,this.autoSelectSingle=!1,this.labelledby="",this.isShown=!1,this.subscriptions=[],this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this.subscriptions.push(this.translateService.onLangChange.subscribe(()=>{setTimeout(()=>{this.selectPickerRefresh()})}))}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{this.jQuerySelectElement=jQuery(this.selectpickerElementRef.nativeElement),this.jQuerySelectElement.selectpicker({mobile:!this.multiple,container:"body",noneSelectedText:""}),this.jQuerySelectElement.on("loaded.bs.select",this.onSelectLoaded.bind(this)),this.jQuerySelectElement.on("changed.bs.select",this.onSelectChange.bind(this)),this.jQuerySelectElement.on("show.bs.select",this.onSelectShow.bind(this)),this.jQuerySelectElement.on("hide.bs.select",this.onSelectHide.bind(this)),this.jQuerySelectElement.prop("disabled",this._isDisabled),this.selectPickerVal(this._value)}),this.selectPickerRefresh(),this._isAfterViewInit=!0}ngOnChanges(t){setTimeout(()=>{this._isAfterViewInit&&t.options&&t.options.currentValue&&(this.autoSelectSingle&&(this._value=1===t.options.currentValue.length?this.options[0].key:null),this.selectPickerRefresh())})}selectPickerRefresh(){this.jQuerySelectElement&&this.ngZone.runOutsideAngular(()=>{this.jQuerySelectElement.selectpicker("refresh"),this.selectPickerVal(this._value)})}selectPickerVal(t){this.jQuerySelectElement&&this.ngZone.runOutsideAngular(()=>{Array.isArray(t),this.jQuerySelectElement.selectpicker("val",t)})}getUnifiedSelectPickerValue(){const t=this.jQuerySelectElement.val();return t&&t.length>0?t:null}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.jQuerySelectElement&&(this.jQuerySelectElement.off("changed.bs.select",this.onSelectChange.bind(this)),this.jQuerySelectElement.selectpicker("destroy"))}escapeHtml(t){return $("<div>").text(t).html()}onSelectLoaded(){const t=this.labelledby;t&&this.jQuerySelectElement.siblings(".dropdown-toggle").eq(0).each(function(){$(this).attr("aria-labelledby",t)})}onSelectChange(t){this.ngZone.run(()=>{const t=this.getUnifiedSelectPickerValue();t!==this._value&&(this._value=t,this.onChange(this._value),this.onTouched())})}onSelectShow(t){this.isShown=!0}onSelectHide(t){this.isShown=!1}writeValue(t){setTimeout(()=>{const e=t?this.options.find(e=>e.key===t):null,a=e?e.key:null;a!==this._value&&(this._value=a,this.selectPickerVal(this._value))})}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._isDisabled=t,this._isAfterViewInit&&(this.jQuerySelectElement.prop("disabled",t),this.selectPickerRefresh())}isActiveElementInTarget(t){return this.isShown||this.elementRef.nativeElement.contains(t.target)}}return t.\u0275fac=function(e){return new(e||t)(n.Mb(n.z),n.Mb(n.l),n.Mb(c.d))},t.\u0275cmp=n.Gb({type:t,selectors:[["app-selectpicker"]],viewQuery:function(t,e){if(1&t&&n.Oc(r,!0),2&t){let t;n.tc(t=n.ac())&&(e.selectpickerElementRef=t.first)}},inputs:{options:"options",dataWidth:"dataWidth",dataStyle:"dataStyle",placeholder:"placeholder",optionStyle:"optionStyle",autoSelectSingle:"autoSelectSingle",labelledby:"labelledby"},features:[n.yb([{provide:i.r,useExisting:Object(n.T)(()=>t),multi:!0}]),n.xb],decls:5,vars:8,consts:[["appFocusBlurEmitter","",3,"isActiveElementInTargetFn"],[1,"selectpicker",3,"title"],["selectpicker",""],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(t,e){1&t&&(n.Sb(0,"div",0),n.Sb(1,"select",1,2),n.dc(3,"translate"),n.Ec(4,l,3,5,"option",3),n.Rb(),n.Rb()),2&t&&(n.jc("isActiveElementInTargetFn",e.isActiveElementInTarget.bind(e)),n.zb(1),n.jc("title",n.ec(3,6,e.placeholder)),n.Ab("multiple",e.multiple)("data-style",e.dataStyle)("data-width",e.dataWidth),n.zb(3),n.jc("ngForOf",e.options))},directives:[s.a,o.l,i.x,i.E,o.k],pipes:[c.c],encapsulation:2,changeDetection:0}),t})()}}]);