function logCampaignModalShown(n){var t=$('input[name="__RequestVerificationToken"]').val(),i={__RequestVerificationToken:t,container:"HomePage_Popup"},r=n+"/LogCampaignsShown";$.post(r,i)}function logSpouseModalShown(n){var t=$('input[name="__RequestVerificationToken"]').val(),i={__RequestVerificationToken:t,productCode:"SpousePopup"},r=n+"/LogSpouseShown";$.post(r,i)}function initCampaignModalTooltip(){var n=$(".ModalInnerContainer > .body");n.jScrollPane({showArrows:!1,autoReinitialise:!1,maintainPosition:!1,verticalGutter:0,horizontalGutter:0});_jScrollPaneApi=n.data("jsp");n.find(".scroll-panel a").click(function(n){n.stopPropagation()});onCampaignModalTooltipShow();$("#HomePageCampaignsModal > .Balloon > .Content #legalnotelbl").attr("wtrendsId",createWebTrendsClickValue("popup_LegalNoteLink"));$("#HomePageCampaignsModal > .Balloon > .Content #footerBtn").attr("wtrendsId",createWebTrendsClickValue("popup_FooterButton"));$(window).resize(function(){clearTimeout(resizeTimer);resizeTimer=setTimeout(function(){applyResponsiveToModal(!1)},200)});setTimeout(function(){applyResponsiveToModal(!0)},200)}function initSpouseModal(){var n=$(".ModalInnerContainer > .body");n.jScrollPane({showArrows:!1,autoReinitialise:!1,maintainPosition:!1,verticalGutter:0,horizontalGutter:0});_jScrollPaneApi=n.data("jsp");n.find(".scroll-panel a").click(function(n){n.stopPropagation()});onSpouseModalShow();$(window).resize(function(){clearTimeout(resizeTimer);resizeTimer=setTimeout(function(){applyResponsiveToModal(!1)},200)});setTimeout(function(){applyResponsiveToModal(!0)},200)}function applyResponsiveToModal(n){var t=$("#HomePageCampaignsModal > .Balloon"),i,r=t.find(".CloseButton"),f,u;r!==null&&r!==undefined&&r.length>0&&$(r[0]).css("z-index","999");f=$(t).find("> .Header").outerHeight(!0)+$(t).find("> .Footer").outerHeight(!0);u=getModalHeights(f);u.isXs?($(t).css("height","90%").css("max-height","90%"),i=u.modalHeightXsMax-f):($(t).css("height","auto"),i=mnUtils.viewportIs("xs")?u.contentHeight:"225px");$(t).find("> .Content, .ModalInnerContainer, .ModalInnerContainer > .body").outerHeight(i).css("max-height",i);n||$("#HomePageCampaignsModal").mnModalPanel().mnModalPanel("setPosition");_jScrollPaneApi.reinitialise()}function getModalHeights(n){var t=$(window).height(),i=window.innerHeight,r=t>i?t:i,u=$("#HomePageCampaignsModal .jspPane").outerHeight(),f=r*.9,e=f-n;return{isXs:u>e,modalHeightXsMax:f,contentHeight:u,vpHeight:r}}function initLegalNoteTooltip(){$("#legalNoteTooltip").mnBalloonClosable("show");$("#legalNoteTextContainer").jScrollPane({showArrows:!1,autoReinitialise:!1,maintainPosition:!1,verticalGutter:20,horizontalGutter:0})}function onCampaignModalTooltipClose(){dcsMultiTrack("DCS.dcsuri","/onsite.ad","WT.w_click","Popup_close");delete _tag.WT.w_event;delete _tag.WT.w_click}function onCampaignModalTooltipShow(){dcsMultiTrack("DCS.dcsuri","/onsite.ad","WT.w_event",createWebTrendsClickValue(),"WT.w_click","Popup_open");delete _tag.WT.w_click}function createWebTrendsClickValue(){var n=$('#HomePageCampaignsModal input[name="campaignPopupProperty"]').val(),t=$('#HomePageCampaignsModal input[name="campaignPopupPriority"]').val();return"Popup_"+n+"_"+t}function onSpouseModalShow(){dcsMultiTrack("DCS.dcsuri","/onsite.ad","WT.w_event","SpousePopup")}function BindCurrentAccounts(){var t=$(".Retail_HomePage_List"),n,i=function(i){var k,a,e,y,o,s,h,p,f,w,b,d,c,l,g;for(n=t.find("#ListAccountsContainer"),k=t.find("#ListAccountsTemplateContainer .MainPanelItem"),a=0;a<i.Accounts.length;a++){var r=i.Accounts[a],u=k.clone(),v=u.find('[data-template="Description"]');v.text(r.Description);v.attr("href",v.attr("href")+"/Params/"+r.AccountNumber+";"+r.CurrencyCode);v.removeAttr("data-template");r.Alias!==""?(e=u.find('[data-template="Alias"]'),e.text(r.Alias),e.attr("href",e.attr("href")+"/Params/"+r.AccountNumber+";"+r.CurrencyCode),e.removeAttr("data-template")):u.find(".AliasContent").remove();y=u.find('[data-template="AccountNumber"]');y.mnText();y.mnText("text",r.FullAccountNumber);y.removeAttr("data-template");o=u.find('[data-template="CurrentBalance"]');o.mnText();o.mnText("text",r.Balance);o.mnText("currency",r.CurrencyName);o.removeAttr("data-template");s=u.find('[data-template="AvailableBalance"]');s.mnText();s.mnText("text",r.AvailableBalance);s.mnText("currency",r.CurrencyName);s.removeAttr("data-template");h=u.find('[data-template="BlockedFunds"]');h.mnText();h.mnText("text",r.BlockedFunds);h.mnText("currency",r.CurrencyName);h.removeAttr("data-template");p=u.find('[data-template="TransactionsHistory"]');p.attr("href",p.attr("href")+"/Params/"+r.AccountNumber+";"+r.CurrencyCode+";H");p.removeAttr("data-template");f=r.ProductCode===750||r.ProductCode===755;w=u.find('[data-template="NewDomesticTransfer"]');w.removeAttr("data-template");w.attr("account",r.AccountNumber);b=u.find('[data-template="NewForeignTransfer"]');b.attr("account",r.AccountNumber);b.removeAttr("data-template");d=u.find('[data-template="NewDeposit"]');d.removeAttr("data-template");(!r.IsSaving||r.CurrencyName!=="PLN"||f)&&w.parent().remove();(!r.IsForeign||f)&&b.parent().remove();(r.IsPendingClose||!r.IsSaving||f)&&d.parent().remove();c=u.find('[data-template="NewOverdraft"]');c.attr("href",r.CampaignLink+"/Params/"+r.FullAccountNumber);c.removeAttr("data-template");l=u.find('[data-template="OverdraftIncrease"]');l.attr("href",r.CampaignLink);l.removeAttr("data-template");r.CanPerformOverdraft||f?l.parent().remove():c.parent().remove();r.CanPerformOverdraftIncrease||f?c.parent().remove():l.parent().remove();g=u.find('[data-template="AccountConversion"]');g.removeAttr("data-template");(!r.CanConvertAccount||f)&&g.parent().remove();u.show();u.appendTo(n)}k.remove()},r=function(i){var o,l,s,a,v,f,h,e,y,p,w,d,b,k;if(i.Accounts.length===0&&i.IsMarketingAvailable?(n=t.find("#ListAccountsContainer"),o=t.find("#ListAccountsCampaignTemplateContainer").find(".LargeCampaignContainer")):(n=t.find("#ListAccountsCampaignContainer"),o=t.find("#ListAccountsCampaignTemplateContainer").find(".SmallCampaignContainer")),i.AccountsCampaigns!==null&&i.AccountsCampaigns.length!==0){var u=o.clone(),g,r=i.AccountsCampaigns[0],c=t.attr("data-tokenUpToNew");c===undefined&&(c="");g=r.ProductLink;l=r.ProductName+" "+c;s=u.find('[data-template="ProductNameUpTo"]');s.text(l);s.attr("href",r.ProductLink);s.removeAttr("data-template");a=u.find('[data-template="MoreInfo"]');a.attr("href",r.ProductLink);a.removeAttr("data-template");v=u.find('[data-template="ProductName"]');v.text(r.ProductName);v.removeAttr("data-template");f=u.find('[data-template="ProposedAmount"]');f.mnText();f.mnText("text",r.ProposedAmount);f.mnText("currency",r.CurrencyName);f.removeAttr("data-template");h=u.find('[data-template="ExpiryDate"]');h.mnText();h.mnText("text",r.ExpiryDate);h.removeAttr("data-template");e=u.find('[data-template="AccountImage"]');r.ImagePath!==null?(e.mnImage(),e.attr("src",r.ImagePath).attr("alt",r.ProductName),e.removeAttr("data-template")):e.remove();r.RRSO!==null&&r.RRSO!==""?(y=u.find('[data-template="RRSO"]'),y.text(r.RRSO),y.removeAttr("data-template"),p=u.find('[data-template="LegalNote"]'),p.text(r.LegalNoteLabel),p.removeAttr("data-template"),w=u.find('[class="Scrollable"]'),w.append("<p>"+r.LegalNoteDescription+"<\/p>"),w.removeAttr("data-template")):(d=u.find('[id="AccountsInterestRateSection"]'),d.remove());u.show();u.appendTo(n);i.Accounts.length!==0&&u.attr("wttrace",l)}b=i.Accounts.length!==0;k=i.AccountsCampaigns!==null&&i.AccountsCampaigns.length!==0;!b&&k&&i.IsMarketingAvailable&&(n.children().first().attr("style","border: none"),n.closest(".MNPanel").find(".WrapperBodyFooter").css("background-color","#F7F7F7"));b&&k&&i.IsMarketingAvailable&&(n.closest(".MNPanel").mnPanel(),n.closest(".MNPanel").mnPanel("displayBottomContainer","true"));o.parent().remove()},u=function(i){if(n=t.find("#ListAccountsInfoContentContainer"),i.Accounts.length>0){n.remove();return}if(i.AccountsCampaigns.length>0&&i.IsMarketingAvailable){n.remove();return}n.show()};if(n=t.find("#ListAccountsContainer"),n.length>0){var f=t.attr("data-baseUrl"),e=f+"/Accounts",o=$('input[name="__RequestVerificationToken"]').val(),s={__RequestVerificationToken:o},h=function(f){n.empty();i(f);r(f);u(f);n.fadeIn(100);jl.run(t.find("#ListAccountsContainer"))};$.post(e,s,h)}}function BindSavingAccounts(){var n=$(".Retail_HomePage_List"),t,i=function(t){for(var u,h,f,e,o,c,l,y=n.find("#ListSavingAccountsContainer"),v=n.find("#SavingAccountsTemplateContainer .MainPanelItem"),a=0;a<t.SavingAccounts.length;a++){var i=t.SavingAccounts[a],r=v.clone(),s=r.find('[data-template="Description"]');s.text(i.Description);s.attr("href",s.attr("href")+"/Params/"+i.AccountNumber+";"+i.CurrencyCode);s.removeAttr("data-template");i.Alias!==null&&i.Alias.length>0&&(u=r.find('[data-template="Alias"]'),u.text(i.Alias),u.attr("href",u.attr("href")+"/Params/"+i.AccountNumber+";"+i.CurrencyCode),u.removeAttr("data-template"));h=r.find('[data-template="AccountNumber"]');h.mnText();h.mnText("text",i.FullAccountNumber);h.removeAttr("data-template");f=r.find('[data-template="CurrentBalance"]');f.mnText();f.mnText("text",i.Balance);f.mnText("currency",i.CurrencyName);f.removeAttr("data-template");e=r.find('[data-template="AvailableBalance"]');e.mnText();e.mnText("text",i.AvailableBalance);e.mnText("currency",i.CurrencyName);e.removeAttr("data-template");o=r.find('[data-template="BlockedFunds"]');o.mnText();o.mnText("text",i.BlockedFunds);o.mnText("currency",i.CurrencyName);o.removeAttr("data-template");c=r.find('[data-template="SavingAccountDetails"]');c.attr("href",c.attr("href")+"/Params/"+i.AccountNumber+";"+i.CurrencyCode);c.removeAttr("data-template");l=r.find('[data-template="AddInternalTransfer"]');l.attr("href",l.attr("href")+"/Params/"+i.AccountNumber+"|"+i.CurrencyCode);l.removeAttr("data-template");r.show();r.appendTo(y)}v.remove()},r=function(t){for(var c,f,g,tt,u,nt,l,e,o,a,it,rt,v,y,p,ut,ft,et,ot,st,s,w,b,ht=n.find("#ListSavingAccountsContainer"),k=n.find("#SavingGoalAccountsTemplateContainer .MainPanelItem"),ct=k.attr("data-goalImagesPath"),d=0;d<t.SavingGoalAccounts.length;d++){var r=t.SavingGoalAccounts[d],i=k.clone(),h=i.find('[data-template="GoalName"]');if(h.text(r.AccountName),h.attr("href",h.attr("href")+"/Params/"+r.ReferenceAccount),h.removeAttr("data-template"),c=i.find('[data-template="GoalType"]'),c.mnText(),c.mnText("text",mapGoalAccountType(r.GoalType)),c.removeAttr("data-template"),f=i.find('[data-template="GoalImage"]'),f.mnImage(),f.parent().find(".Content").remove(),r.ImageId!==null&&r.ImageId.length>0)g=n.attr("data-rootUrl"),g!==undefined&&(tt=g+"Goal.img?type=Goal&Code="+r.ImageId,f.mnImage("imageSource",tt));else{switch(r.GoalType){case"BuyAHome":case"ImproveMyHome":u="home.png";break;case"Trip":u="travel.png";break;case"BuyACar":u="car.png";break;case"SaveForChildEducation":u="education.png";break;case"SaveForElectronics":u="electronics.png";break;case"SaveForRetirement":u="retirement.png";break;case"EmergencySaving":u="bills.png";break;case"Other":u="other.png"}f.mnImage("imageSource",ct+u)}f.removeAttr("data-template");nt=i.find('[data-template="GoalImageLink"]');nt.attr("href",nt.attr("href")+"/Params/"+r.ReferenceAccount);l=i.find('[data-template="AccountNumber"]');l.mnText();l.mnText("text",r.FullReferenceAccount);l.removeAttr("data-template");e=i.find('[data-template="CreateGoal"]');e.attr("href",e.attr("href")+"/Point/AddGoal/Params/"+r.ReferenceAccount);e.removeAttr("data-template");o=i.find('[data-template="EditGoal"]');o.attr("href",o.attr("href")+"/Params/"+r.ReferenceAccount);o.removeAttr("data-template");a=i.find('[data-template="AddInternalTransfer"]');a.attr("href",a.attr("href")+"/Params/"+r.ReferenceAccount+"|"+r.CurrencyCode);a.removeAttr("data-template");r.HasGoal?(et=i.find('[data-template="CurrentBalanceContainer"]'),et.remove(),ot=i.find('[data-template="AvailableBalanceContainer"]'),ot.remove(),st=i.find('[data-template="BlockedAmountContainer"]'),st.remove(),s=i.find('[data-template="YouSaved"]'),s.mnText(),s.mnText("text",r.YouSaved),r.YouSaved>=1e5&&s.mnText().addClass("GoalSavingAmountOver"),s.removeAttr("data-template"),w=i.find('[data-template="GoalTarget"]'),w.mnText(),w.mnText("text",r.GoalTarget),w.removeAttr("data-template"),e.parent().remove()):(it=i.find('[data-template="GoalTypeContainer"]'),it.remove(),rt=i.find('[data-template="GoalImageContainer"]'),rt.remove(),v=i.find('[data-template="CurrentBalance"]'),v.mnText(),v.mnText("text",r.CurrentBalance),v.removeAttr("data-template"),y=i.find('[data-template="AvailableBalance"]'),y.mnText(),y.mnText("text",r.AvailableBalance),y.removeAttr("data-template"),p=i.find('[data-template="BlockedAmount"]'),p.mnText(),p.mnText("text",r.BlockedAmount),p.removeAttr("data-template"),ut=i.find('[data-template="YouSavedContainer"]'),ut.remove(),ft=i.find('[data-template="GoalTargetContainer"]'),ft.remove(),o.parent().remove());b=i.find('[data-template="SavingAccountDetails"]');b.attr("href",b.attr("href")+"/Params/"+r.ReferenceAccount);b.removeAttr("data-template");i.show();i.appendTo(ht)}k.remove();ResizeGoals()},u=function(i){var y,e,rt=i.SavingAccounts.length!==0||i.SavingGoalAccounts.length!==0,d=i.SavingAccountsCampaigns!==null&&i.SavingAccountsCampaigns.length!==0,r,u,g,o,p,s,w,h,c,b,l,f,nt,tt,a,k,v,it;if(i.SavingAccounts.length===0&&i.SavingGoalAccounts.length===0?(y=n.find("#ListSavingAccountsContainer"),e=n.find("#ListSavingAccountsCampaignTemplateContainer").find(".LargeCampaignContainer")):(y=n.find("#ListSavingAccountsCampaignContainer"),e=n.find("#ListSavingAccountsCampaignTemplateContainer").find(".SmallCampaignContainer")),i.SavingAccountsCampaigns!==null&&i.SavingAccountsCampaigns.length!==0){if(r=i.SavingAccountsCampaigns[0],r.ProductType==="Deposit"&&(u=e.clone(),o=n.attr("data-tokenUpTo"),o===undefined&&(o=""),g=r.ProductLink,p=r.ProductName+" "+o,s=u.find('[data-template="ProductNameUpTo"]'),s.text(p),s.attr("href",r.ProductLink),s.removeAttr("data-template"),w=u.find('[data-template="ProductName"]'),w.text(r.ProductName),w.removeAttr("data-template"),h=u.find('[data-template="ProposedInterest"]'),h.mnText(),h.mnText("text",r.ProposedAmount+" %"),h.removeAttr("data-template"),c=u.find('[data-template="ExpiryDate"]'),c.mnText(),c.mnText("text",r.ExpiryDate),c.removeAttr("data-template"),b=u.find('[data-template="MoreInfo"]'),b.attr("href",r.ProductLink),b.removeAttr("data-template"),l=u.find('[data-template="SavingCampaignImage"]'),l.mnImage(),l.attr("src",r.ImagePath).attr("alt",r.ProductName),l.removeAttr("data-template"),u.show(),u.appendTo(y),i.SavingAccounts.length!==0&&i.SavingGoalAccounts.length!==0)){u.attr("wttrace",p);u.parent().parent().on("click",function(){window.location.href=g})}(r.ProductType==="ProfitSavingCreate"||r.ProductType==="ProfitSavingTransfer")&&(f=n.find("#SavingAccountsNewCampaignContainer .ContainerLink"),f.text(),f.append("<span>"+r.ProfitAccountDescription+" <\/span>"),f.append(r.LinkDescription),r.AccountNumber!==""&&r.CurrencyCode!==""&&r.ProductType!=="ProfitSavingCreate"?f.attr("href",r.ProductLink+"/Params/"+r.AccountNumber+"|"+r.CurrencyCode):f.attr("href",r.ProductLink),nt=n.find(".SavingsGridScrollableContent").find('[class="Scrollable"]'),nt.append("<p>"+r.LegalNoteDescription+"<\/p>"),tt=$(".LegalNoteText").text(),a="",a=a.concat(tt," ",r.ExpiryDate),$(".LegalNoteText").text(a),r.ProductType==="ProfitSavingTransfer"&&(k=$("#footerBtn"),v=k.attr("href"),d&&v!==""&&typeof v!=typeof undefined&&(it=v.indexOf("AddInternalTransfer"),it>-1&&k.attr("href",r.ProductLink+"/Params/"+r.AccountNumber+"|"+r.CurrencyCode))))}rt&&d&&i.IsMarketingAvailable&&(t.closest(".MNPanel").mnPanel(),t.closest(".MNPanel").mnPanel("displayBottomContainer","true"));e.parent().remove()},f=function(t){var i=n.find("#ListSavingAccountsInfoContentContainer");if(t.SavingAccounts.length>0){i.remove();return}if(t.SavingGoalAccounts.length>0){i.remove();return}i.show()};if(t=n.find("#ListSavingAccountsContainer"),t.length>0){var e=n.attr("data-baseUrl"),o=e+"/SavingAccounts",s=$('input[name="__RequestVerificationToken"]').val(),h={__RequestVerificationToken:s},c=function(e){t.empty();i(e);r(e);u(e);f(e);t.fadeIn(100);jl.run(n.find("#ListSavingAccountsContainer"))};$.post(o,h,c)}}function BindCards(){var n=$(".Retail_HomePage_List"),t,i=function(i){var ut,tt,r,o,s,h,rt,f,e,ft,a,c,v,y,p,w,b,k,d,g,nt,pt,et;if(i.Cards){for(t=n.find("#ListCardsContainer"),ut=n.find("#ListCardsTemplateContainer .MainPanelItem"),tt=0;tt<i.Cards.length;tt++){r=i.Cards[tt];r.IsDebitCard=r.CardType==="Debit";r.IsPrepaidCard=r.CardType==="Prepaid";r.IsMainCreditCard=r.CardType==="Credit"&&r.CreditCardType==="Main";r.IsSupplementary=r.CardType==="Credit"&&r.CreditCardType==="Supplementary";var u=ut.clone(),l=u.find('[data-template="CardNameLink"]'),it=u.find('[data-template="CardNameText"]');l.removeAttr("data-template");it.removeAttr("data-template");(r.IsActive||r.AllowDetails||!r.IsActive&&!r.IsCardEmbossed||!r.IsActive&&r.IsCardEmbossed)&&r.CardStatus2!=="ICBS_ONLY"?(l.text(r.CardName),l.attr("href",l.attr("href")+"/Params/"+r.CardIndex),it.remove()):(it.mnText(),it.mnText("text",r.CardName),l.remove());o=u.find('[data-template="CardType"]');r.IsCreditCardTypeSpecified&&r.CardType!=="Debit"&&r.CardType!=="Prepaid"?(o.mnText(),o.mnText("text",mapCardType(r.CreditCardType))):(o.mnText(),o.mnText("text",mapCardType(r.CardType)));o.removeAttr("data-template");s=u.find('[data-template="AvailableCreditTitle"]');r.IsCreditCardTypeSpecified&&r.CardType!=="Debit"&&r.CardType!=="Prepaid"?(s.mnText(),s.mnText("text",mapCardTitleAvailable(r.CreditCardType))):(s.mnText(),s.mnText("text",mapCardTitleAvailable(r.CardType)));s.removeAttr("data-template");h=u.find('[data-template="UsedCreditTitle"]');r.IsCreditCardTypeSpecified&&r.CardType!=="Debit"&&r.CardType!=="Prepaid"?(h.mnText(),h.mnText("text",mapCardTitleUsed(r.CreditCardType))):(h.mnText(),h.mnText("text",mapCardTitleUsed(r.CardType)));h.removeAttr("data-template");rt=u.find('[data-template="CardNumber"]');rt.mnText();rt.mnText("text",r.CardNumber);rt.removeAttr("data-template");e=u.find('[data-template="CardImageLink"]');r.TemporaryBlockage?(f=u.find('[data-template="CardImageTemporaryBlockage"]'),f.find(".Image").attr("src",r.CardImagePath).attr("alt",r.CardName),u.find('[data-template="CardImageInactive"]').remove(),u.find('[data-template="CardImageEmbossed"]').remove(),u.find('[data-template="CardImageBlocked"]').remove(),u.find('[data-template="CardImage"]').remove(),u.find('[data-template="CardImageReissued"]').remove()):r.CardType==="Credit"&&r.IsTemporarilyBlocked===!0?(f=u.find('[data-template="CardImageBlocked"]'),f.find(".Image").attr("src",r.CardImagePath).attr("alt",r.CardName),u.find('[data-template="CardImage"]').remove(),u.find('[data-template="CardImageReissued"]').remove(),u.find('[data-template="CardImageEmbossed"]').remove(),u.find('[data-template="CardImageInactive"]').remove(),u.find('[data-template="CardImageTemporaryBlockage"]').remove(),r.IsPendingClose===!0&&(ft=n.attr("data-pendingCloseString"),ft!==undefined&&e.find(".BlockedText").find("div").text(ft))):r.IsActive&&r.Reissued?(f=u.find('[data-template="CardImageReissued"]'),f.find(".Image").attr("src",r.CardImagePath).attr("alt",r.CardName),u.find('[data-template="CardImageInactive"]').remove(),u.find('[data-template="CardImageEmbossed"]').remove(),u.find('[data-template="CardImageBlocked"]').remove(),u.find('[data-template="CardImage"]').remove(),u.find('[data-template="CardImageTemporaryBlockage"]').remove()):r.IsActive||r.IsCardEmbossed?!r.IsActive&&r.IsCardEmbossed?(f=u.find('[data-template="CardImageInactive"]'),f.find(".Image").attr("src",r.CardImagePath).attr("alt",r.CardName),u.find('[data-template="CardImageEmbossed"]').remove(),u.find('[data-template="CardImageReissued"]').remove(),u.find('[data-template="CardImageBlocked"]').remove(),u.find('[data-template="CardImage"]').remove(),u.find('[data-template="CardImageTemporaryBlockage"]').remove()):(f=u.find('[data-template="CardImage"]'),f.attr("src",r.CardImagePath).attr("alt",r.CardName),u.find('[data-template="CardImageInactive"]').remove(),u.find('[data-template="CardImageBlocked"]').remove(),u.find('[data-template="CardImageReissued"]').remove(),u.find('[data-template="CardImageEmbossed"]').remove(),u.find('[data-template="CardImageTemporaryBlockage"]').remove()):(f=u.find('[data-template="CardImageEmbossed"]'),f.find(".Image").attr("src",r.CardImagePath).attr("alt",r.CardName),u.find('[data-template="CardImageInactive"]').remove(),u.find('[data-template="CardImageReissued"]').remove(),u.find('[data-template="CardImageBlocked"]').remove(),u.find('[data-template="CardImage"]').remove(),u.find('[data-template="CardImageTemporaryBlockage"]').remove());a=e.find(".BlockedText");r.IsPendingClose?$(a).addClass("pendingClose"):r.IsTemporarilyBlocked?$(a).addClass("temporarilyBlocked"):r.Reissued&&$(a).removeClass("BlockedText").addClass("BlockedTextNoIcon reissue");u.find(".ErrorMessage").text(a.text());f.removeAttr("data-template");(r.IsActive||r.AllowDetails||!r.IsActive&&!r.IsCardEmbossed||!r.IsActive&&r.IsCardEmbossed)&&r.CardStatus2!=="ICBS_ONLY"?e.attr("href",e.attr("href")+"/Params/"+r.CardIndex):e.removeAttr("href");e.removeAttr("data-template");c=u.find('[data-template="UsedCredit"]');c.mnText();r.CardType==="Credit"&&r.UsedCredit<0?c.mnText("text",0):c.mnText("text",r.UsedCredit);c.mnText("currency",r.Currency!==""?r.Currency:"PLN");c.removeAttr("data-template");v=u.find('[data-template="AvailableCredit"]');v.mnText();v.mnText("text",r.AvailableCredit);v.mnText("currency",r.Currency!==""?r.Currency:"PLN");v.removeAttr("data-template");y=u.find('[data-template="TransactionsHistory"]');y.attr("href",y.attr("href")+"/Params/"+r.CardIndex);y.removeAttr("data-template");p=u.find('[data-template="CardDetails"]');p.attr("href",p.attr("href")+"/Params/"+r.CardIndex);p.removeAttr("data-template");w=u.find('[data-template="ChangeDailyLimits"]');w.attr("href",w.attr("href")+"/Params/"+r.CardIndex+"|Debit");w.removeAttr("data-template");b=u.find('[data-template="ChangePin"]');b.attr("href",b.attr("href")+"/Params/"+r.CardIndex);b.removeAttr("data-template");k=u.find('[data-template="EarlyRepayment"]');k.attr("href",k.attr("href")+"/Params/"+r.CardIndex);k.removeAttr("data-template");d=u.find('[data-template="CashAdvance"]');d.attr("href",d.attr("href")+"/Params/"+r.CardIndex);d.removeAttr("data-template");g=u.find('[data-template="Activate"]');g.attr("href",g.attr("href")+"/Params/"+r.CardNumberForActivation);g.removeAttr("data-template");nt=u.find('[data-template="TransferMoneyToPrepaid"]');nt.attr("href",nt.attr("href")+"/Params/"+r.CardIndex);nt.removeAttr("data-template");var ot=!r.IsSupplementary||r.IsSupplementary&&!r.IsActive||r.TemporaryBlockage,st=!(r.IsMainCreditCard||r.IsSupplementary||r.IsDebitCard||r.IsPrepaidCard)&&r.IsCardEmbossed||r.CardStatus2==="ICBS_ONLY",ht=!r.IsActive||!r.IsDebitCard||r.Reissued||r.TemporaryBlockage,ct=!r.IsActive||!(r.IsDebitCard||r.IsSupplementary)||r.TemporaryBlockage,lt=!r.IsActive||!r.IsMainCreditCard||r.TemporaryBlockage,at=!r.IsActive||r.IsDebitCard||r.IsPrepaidCard||r.IsSupplementary||r.IsMainCreditCard&&r.IsTemporarilyBlocked||r.IsActive&&r.Reissued||r.IsMainCreditCard&&r.RetainedAccount||r.TemporaryBlockage,vt=r.IsActive&&!r.Reissued||r.IsPendingClose||!r.IsCardEmbossed||r.TemporaryBlockage,yt=!r.IsActive||!r.IsPrepaidCard||!r.IsCardOwner||r.IsPendingClose||!r.IsActive&&!r.Reissued||r.TemporaryBlockage;ot&&y.parent().remove();st&&p.parent().remove();ht&&w.parent().remove();ct&&b.parent().remove();lt&&k.parent().remove();at&&d.parent().remove();vt&&g.parent().remove();yt&&nt.parent().remove();ot&&st&&ht&&ct&&lt&&at&&vt&&yt&&(pt=u.find('[data-template="CommandList"]'),pt.remove());et=u.find('[data-template="IncreaseLimit"]');et.attr("href",r.CampaignLink);r.CanIncrease||et.parent().remove();u.show();u.appendTo(t)}ut.remove();ResizeCards()}},r=function(t){var u,o,r,nt,i,e,s,h,a,v,f,y,c,l,p,w,b,g,k,d;t.Cards&&t.CardsCampaigns&&(t.Cards.length===0?(u=n.find("#ListCardsContainer"),o=n.find("#ListCardsCampaignTemplateContainer").find(".LargeCampaignContainer")):(u=n.find("#ListCardsCampaignContainer"),o=n.find("#ListCardsCampaignTemplateContainer").find(".SmallCampaignContainer")),t.CardsCampaigns!==null&&t.CardsCampaigns.length!==0&&(r=o.clone(),i=t.CardsCampaigns[0],nt=i.ProductLink,e="",s=r.find('[data-template="ProductNameUpTo"]'),i.ProposedAmount===-1?e=i.ProductName:(h=n.attr("data-tokenUpTo"),h===undefined&&(h=""),e=i.ProductName+" "+h),s.text(e),s.attr("href",i.ProductLink),s.removeAttr("data-template"),a=r.find('[data-template="MoreInfo"]'),a.attr("href",i.ProductLink),a.removeAttr("data-template"),v=r.find('[data-template="ProductName"]'),v.text(i.ProductName),v.removeAttr("data-template"),f=r.find('[data-template="ProposedAmount"]'),f.mnText(),f.mnText("text",i.ProposedAmount),f.mnText("currency",i.CurrencyName),f.removeAttr("data-template"),y=r.find('[data-template="AmountUpTo"]'),y.removeAttr("data-template"),i.ProposedAmount===-1&&(f.remove(),y.remove()),c=r.find('[data-template="ExpiryDate"]'),c.mnText(),c.mnText("text",i.ExpiryDate),c.removeAttr("data-template"),l=r.find('[data-template="CardCampaignImage"]'),l.mnImage(),l.attr("src",i.ImagePath).attr("alt",i.ProductName),l.removeAttr("data-template"),i.RRSO!==null&&i.RRSO!==""?(p=r.find('[data-template="RRSO"]'),p.text(i.RRSO),p.removeAttr("data-template"),w=r.find('[data-template="LegalNote"]'),w.text(i.LegalNoteLabel),w.removeAttr("data-template"),b=r.find('[class="Scrollable"]'),b.append("<p>"+i.LegalNoteDescription+"<\/p>"),b.removeAttr("data-template")):(g=r.find('[id="CardsInterestRateSection"]'),g.remove()),r.show(),r.appendTo(u),t.Cards.length!==0&&r.attr("wttrace",e)),k=t.Cards.length!==0,d=t.CardsCampaigns!==null&&t.CardsCampaigns.length!==0,!k&&d&&t.IsMarketingAvailable&&(u.children().first().attr("style","border: none"),u.closest(".MNPanel").find(".WrapperBodyFooter").css("background-color","#F7F7F7")),k&&d&&t.IsMarketingAvailable&&(u.closest(".MNPanel").mnPanel(),u.closest(".MNPanel").mnPanel("displayBottomContainer","true"),$(".NoConsentForCampaignInfoBox").hide()),o.parent().remove())},u=function(t){if(t.Cards&&t.CardsCampaigns){var i=n.find("#ListCardsInfoContentContainer");if(t.Cards.length>0){i.remove();return}if(t.CardsCampaigns.length>0){i.remove();return}i.show()}},f=function(){var t=n.attr("data-missingCardImage");$(".CardImage img").error(function(){t!==undefined&&$(this).attr("src",t)})};if(t=n.find("#ListCardsContainer"),t.length>0){var e=n.attr("data-baseUrl"),o=e+"/Cards",s=$('input[name="__RequestVerificationToken"]').val(),h={__RequestVerificationToken:s},c=function(e){t.empty();i(e);r(e);u(e);f();t.fadeIn(100);jl.run(n.find("#ListCardsContainer"))};$.post(o,h,c)}}function BindInsurances(){var n=$(".Retail_HomePage_List"),t,i=function(i){var tt,h,a,v,y,p,w,it,b,f,o,rt,ut,k,d,g,nt,e,s;if(i.Insurances){for(t=n.find("#ListInsurancesContainer"),tt=n.find("#ListInsurancesTemplateContainer .MainPanelItem"),h=0;h<i.Insurances.length;h++){var r=i.Insurances[h],u=tt.clone(),c=r.ProductType!==null&&r.ProductType===9?"T":"V",l=u.find('[data-template="InsuranceDescription"]');l.text(r.InsuranceDescription);l.attr("href",l.attr("href")+"/Params/"+r.InsuranceNumber+"|D|"+i.Insurances.length+"|"+c);l.removeAttr("data-template");a=u.find('[data-template="CarBrand"]');a.text(r.CarBrand+" "+r.CarModel+" "+r.RegistrationNumber);a.removeAttr("data-template");v=u.find('[data-template="TravelArea"]');v.text("Region: "+r.Area);v.removeAttr("data-template");r.Area!==null&&r.Area!==""?a.remove():v.remove();y=u.find('[data-template="ExpirationDateTitle"]');y.mnText();y.mnText("text",r.ExpirationDate);y.removeAttr("data-template");p=u.find('[data-template="PolicyNumberTitle"]');p.mnText();p.mnText("text",r.PolicyNumber);p.removeAttr("data-template");w=u.find('[data-template="InsuranceNumber"]');w.mnText();w.mnText("text",r.InsuranceNumber);w.removeAttr("data-template");it=u.find('[data-template="InsuranceImage"]');b=u.find('[data-template="InsuranceImageLink"]');it.attr("src",r.InsuranceImagePath).attr("alt",r.InsuranceName);b.attr("href",b.attr("href")+"/Params/"+r.InsuranceNumber+"|D|"+i.Insurances.length+"|"+c);it.removeAttr("data-template");b.removeAttr("data-template");f=u.find('[data-template="RenewalInsurance"]');f.attr("href",f.attr("href")+"/Params/"+r.InsuranceNumber);f.attr("data-id","RenewalLink");f.removeAttr("data-template");o=u.find('[data-template="StartDate"]');o.mnText();o.mnText("text",r.StartDate);o.removeAttr("data-template");rt=u.find(".TravelInsuranceColumn");ut=u.find(".CarInsuranceColumn");r.ProductType!==null&&r.ProductType===9?(ut.remove(),f.parent().remove()):(o.remove(),rt.remove(),r.ActiveRenewal||f.parent().remove());k=u.find('[data-template="EndDate"]');k.mnText();k.mnText("text",r.EndDate);k.removeAttr("data-template");d=u.find('[data-template="PolicyNumber"]');d.mnText();d.mnText("text",r.PolicyNumber);d.removeAttr("data-template");g=u.find('[data-template="InsuranceDetails"]');g.attr("href",g.attr("href")+"/Params/"+r.InsuranceNumber+"|D|"+i.Insurances.length+"|"+c);g.removeAttr("data-template");nt=u.find('[data-template="DamageReporting"]');nt.attr("href",nt.attr("href")+"/Params/"+r.InsuranceNumber+"|R|"+i.Insurances.length+"|"+c);nt.removeAttr("data-template");e=u.find('[data-template="NewInsurance"]');e.attr("href",e.attr("href"));e.removeAttr("data-template");s=u.find('[data-template="NewTravelInsurance"]');s.attr("href",s.attr("href"));s.removeAttr("data-template");r.ProductType!==null&&r.ProductType===9?e.parent().remove():(s.parent().remove(),r.ActiveRenewal&&e.parent().remove());u.show();u.appendTo(t)}tt.remove()}},r=function(t){var u,f,e,o;if(t.Insurances){var i=n.find("#ListInsurancesListMotorInfoContentContainer"),s=n.find("#ListInsurancesListInfoContentContainer"),r=n.find("#ListInsurancesListTravelInfoContentContainer"),h=n.find("#ListInsurancesMotorTravelSeparator");if(t.Insurances.length>0?(s.remove(),h.remove()):(s.show(),r.remove(),i.remove()),u=n.find("#ListInsurancesMotorInfoContentContainer"),t.Insurances.length>0)for(u.show(),i.show(),f=0;f<=t.Insurances.length-1;f++)t.Insurances[f].ProductType===8&&(u.remove(),i.remove());else u.show(),i.show();if(e=n.find("#ListInsurancesTravelInfoContentContainer"),t.Insurances.length>0)for(e.show(),r.show(),o=0;o<=t.Insurances.length-1;o++)t.Insurances[o].ProductType===9&&(e.remove(),r.remove());else e.show(),r.show()}},u=function(){var t=n.attr("data-missingInsuranceImage");$(".InsuranceImage img").error(function(){t!==undefined&&$(this).attr("src",t)})};if(t=n.find("#ListInsurancesContainer"),t.length>0){var f=n.attr("data-baseUrl"),e=f+"/Insurances",o=$('input[name="__RequestVerificationToken"]').val(),s={__RequestVerificationToken:o},h=function(f){t.empty();i(f);r(f);u();t.fadeIn(100);jl.run(n.find("#ListInsurancesContainer"))};$.post(e,s,h)}}function BindFrequentBeneficiaries(){var t=$(".Retail_HomePage_List"),n=t.find("#ListFrequentBeneficiariesContainer"),i=function(i){n=t.find("#ListFrequentBeneficiariesContainer");n.append(i)};if(n.length>0){var r=t.attr("data-baseUrl"),u=r+"/FrequentBeneficiaries",f=$('input[name="__RequestVerificationToken"]').val(),e={__RequestVerificationToken:f},o=function(r){n.empty();i(r);n.fadeIn(100);jl.run(t.find("#ListInsurancesContainer"))};$.post(u,e,o)}}function ResizeGoals(){var i=$(window).width(),n,t;i<767?(n=$(".ItemDetailsImageSaving").closest(".MainPanelItem"),n.each(function(){var n=$(this).find(".ItemDetails .ItemDetailsImageSaving img");n!==null&&$(this).find(".InfoContainer .ItemInfoImageSaving").append(n)})):(t=$(".ItemInfoImageSaving").closest(".MainPanelItem"),t.each(function(){var n=$(this).find(".InfoContainer .ItemInfoImageSaving img");n!==null&&$(this).find(".ItemDetails .ItemDetailsImageSaving").append(n)}))}function ResizeCards(){var i=$(window).width(),n,t;i<767?(n=$(".ItemDetailsImageCards").closest(".MainPanelItem"),n.each(function(){var n;n=$(this).find(".ItemDetails .ItemDetailsImageCards").next().is("img")?$(this).find(".ItemDetails .ItemDetailsImageCards img"):$(this).find(".ItemDetails .ItemDetailsImageCards a");n!==undefined&&n!==null&&(n.removeClass(),$(this).find(".InfoContainer .ItemInfoImageCards").append(n))})):(t=$(".ItemInfoImageCards").closest(".MainPanelItem"),t.each(function(){var n;n=$(this).find(".InfoContainer .ItemInfoImageCards").next().is("img")?$(this).find(".InfoContainer .ItemInfoImageCards img"):$(this).find(".InfoContainer .ItemInfoImageCards a");n!==undefined&&n!==null&&(n.addClass("CardImage ItemDetailsImageCards col-xs-4 col-sm-4 hidden-xs"),$(this).find(".ItemDetails .ItemDetailsImageCards").append(n))}))}function BindPlaner(){var t=$(".Retail_HomePage_List"),n=t.find(".MNTimelineRwd");if(n&&n.length!==0){var i=null,r=0,o=!1,e=0,s=!1,c=function(n){var u=new Date,f,i,h,t;for(u.setDate(u.getDate()+7),f=u.getTime(),i=new Date,i.setDate(i.getDate()+30),h=i.getTime(),r=0,e=0,t=0;t<n.length;++t){if(Date.parse(n[t].Date)>f)break;r=t}for(o=t>0,t=r;t<n.length;++t){if(Date.parse(n[t].Date)>h)break;e=t}s=t>r},u=function(i,r){var u=t.find(".PlannerNoOperations");if(i===null){if(r){$(n).hide();t.find(".PlannerInactive").show();return}$(n).find(".HomePage .jspContainer").hide();$(n).show();$(n).find(".ScrollSection").css("width","");$(u).show();$(n).find(".TotalAmount").hide()}else t.find(".PlannerInactive").hide(),$(u).hide(),$(n).show(),$(n).find(".HomePage .jspContainer").show(),$(n).find(".TotalAmount").show();$(n).fadeIn(100);n.mnTimelineRwd("bindData",i)},h=function(n){var t,f;i&&(n==="CurrentWeek"?(t=o?i.slice(0,r+1):null,u(t,!1)):n==="CurrentMonth"?(f=s?i.slice(0,e+1):null,u(f,!1)):u(i.length===0?null:i,!0))},f=t.find("#PlanerLoading");f.mnLoading();f.mnLoading("start");var l="CurrentMonth",a=t.attr("data-baseUrl"),v=$('input[name="__RequestVerificationToken"]').val(),y=a+"/Planer",p={__RequestVerificationToken:v,timePeriod:"ThreeMonths"},w=function(r){if(r.length===0)u(null,!0);else{n.mnTimelineRwd();n.mnTimelineRwd("selectedPeriod","CurrentMonth");var e=t.find(".PlannerNoOperations");$(e).appendTo($(n).find(".HomePage"));i=r;c(r);h(l);n.mnTimelineRwd({onSelectChange:function(n,t){h(t.selectedValue)}})}f.mnLoading("stop")},b=function(){t.find(".StaticPanelRight").hide();t.find(".StaticPanelLeft").hide();f.mnLoading("stop")};$.post(y,p,w).fail(b)}}function BindOnboarding(){var n=$(".Retail_HomePage_List"),t=n.attr("data-baseUrl"),i=t+"/Onboarding",r=$('input[name="__RequestVerificationToken"]').val(),u={__RequestVerificationToken:r};$.post(i,u,function(n){if($("#OnboardingContainerPartial").html(n),$("#OnboardingLoading").hide(),ShowMGM(!1),$("#HidePanel").val()!==undefined&&$("#HidePanel").val().toUpperCase()==="TRUE"&&($("#OnboardingContainerPartial").hide(),ShowMGM(!0)),$("#SelectedAction_DisplayedAnswerParameters").val()!==undefined&&$("#SelectedAction_DisplayedAnswerParameters").val()!==null&&$("#SelectedAction_DisplayedAnswerParameters").val()!==""){var t=JSON.parse($("#SelectedAction_DisplayedAnswerParameters").val());OnboardingSetAnswer(t[0].ActionCode,t[0].Priority,t[0].ProductCode,t[0].ProductStatusId,t[0].ResultId)}jl.run()}).fail(function(){$("#OnboardingLoading").hide();$("#OnboardingContainerPartial").hide();ShowMGM(!0)})}function ShowMGM(n){var t=$("#MgmPermanentPanelContainer"),i=$("#MgmPermanentPanelFooterContainer");t!==null&&t!==undefined&&(t.toggle(n),i!==null&&i!==undefined&&i.parent().toggle(!n))}function OnboardingChangeProduct(n){var r=JSON.parse($("#AllActions").val()),t=GetOnboardingAction(r,n),i;if(t!==null&&t!==undefined&&(i=GetOnboardingAnswerTree(t.AnswerTree,"NTC"),i!==null&&i!==undefined)){var u=$(".Retail_HomePage_List"),f=u.attr("data-baseUrl"),e=f+"/OnboardingAnswerSet",o=$('input[name="__RequestVerificationToken"]').val(),s={__RequestVerificationToken:o,actionCode:t.ActionCode,priority:t.Priority,productCode:t.ProductCode,productStatusId:t.ProductStatusId,answerResultId:i.ResultId};$.post(e,s,function(){}).fail(function(){$("#OnboardingLoading").hide()})}}function GetOnboardingAction(n,t){for(var i=0;i<n.length;i++)if(n[i].ProductCode===t)return n[i];return null}function GetOnboardingAnswerTree(n,t){for(var i=0;i<n.length;i++)if(n[i].AnswerType===t)return n[i];return null}function OnboardingRedirectToProcess(n,t){var u=JSON.parse($("#AllActions").val()),i=GetOnboardingAction(u,t),r;if(i!==null&&i!==undefined)if(r=GetOnboardingAnswerTree(i.AnswerTree,"TAP"),r!==null&&r!==undefined){var f=$(".Retail_HomePage_List"),e=f.attr("data-baseUrl"),o=e+"/OnboardingAnswerSet",s=$('input[name="__RequestVerificationToken"]').val(),h={__RequestVerificationToken:s,actionCode:i.ActionCode,priority:i.Priority,productCode:i.ProductCode,productStatusId:i.ProductStatusId,answerResultId:r.ResultId};$.post(o,h,function(){$(location).attr("href",n)}).fail(function(){$("#OnboardingLoading").hide()})}else $(location).attr("href",n)}function OnboardingSetAnswer(n,t,i,r,u){var f=$(".Retail_HomePage_List"),e=f.attr("data-baseUrl"),o=e+"/OnboardingAnswerSet",s=$('input[name="__RequestVerificationToken"]').val(),h={__RequestVerificationToken:s,actionCode:n,priority:t,productCode:i,productStatusId:r,answerResultId:u};$.post(o,h,function(){}).fail(function(){$("#OnboardingLoading").hide()})}(function(n,t){n.widget("millenet.Retail_ContactOptionsList_ContactOptions",{options:{},_create:function(){var n=this;this.window.ready(function(){n._resize()});this.window.resize(function(){n._resize()})},chatAvailability:function(){var i=n("body").mnBasePage("option","baseUrl"),r=i+"/CheckActivityHours",u=n('input[name="__RequestVerificationToken"]').val(),f=this;n.post(r,{__RequestVerificationToken:u},function(i){if(i.RedirectToUrl)return t.location.replace(i.RedirectToUrl),!1;n("#ContactChat").click()}).fail(function(t){handleAjaxError(t,n("#ContactOptionsListContainer"))})},chatError:function(){var i=n("body").mnBasePage("option","baseUrl"),r=i+"/ChatLoadingError",u=n('input[name="__RequestVerificationToken"]').val(),f=this;n.post(r,{__RequestVerificationToken:u},function(n){if(n.RedirectToUrl)return t.location.replace(n.RedirectToUrl),!1}).fail(function(t){handleAjaxError(t,n("#ContactOptionsListContainer"))})},_resize:function(){var t=0,i,r;n("ul.ItemsContainer li > .ItemInnerContent > .MainContent").each(function(){if(n(this).find(".NoFooter")[0])i=n(this).height();else{var r=n(this).height();r>t&&(t=r)}});t=t+40+72;i=i+40;r=t>i?t:i;n("ul.ItemsContainer li > .ItemInnerContent > .MainContent").each(function(){n(this).find(".NoFooter")[0]?n(this).css("height",r):n(this).css("height",r-72)})}})})(jQuery,window,document),function(n,t,i){n.widget("millenet.Retail_CreditDocumentsUpload_Success",{options:{product:""},_antiforgeryToken:null,_create:function(){var t=this;n(i).ready(function(){t._initialize()})},_initialize:function(){var t=this.options.product,n="";switch(t){case"CashLoan":n="Virtual_CashLoanDocumentsReuploadSuccess";break;case"CashLoanTopup":n="Virtual_CashLoanTopupDocumentsReuploadSuccess";break;case"Overdraft":n="Virtual_OverdraftDocumentsReuploadSuccess";break;case"OverdraftIncrease":n="Virtual_OverdraftIncreaseDocumentsReuploadSuccess";break;case"CreditCard":n="Virtual_CreditCardDocumentsReuploadSuccess";break;case"CreditCardIncrease":n="Virtual_CreditCardIncreaseDocumentsReuploadSuccess"}try{dcsMultiTrack("DCS.dcsuri","/onsite.ad","WT.w_event",n,"WT.w_value","VP","WT.dl",400,"WT.w_click","","DCSext.w_click","");dcsMultiTrack("WT.w_event","","WT.w_value","","WT.dl","","WT.w_click","","DCSext.w_click","");ClickStreamLog(n,["VP","400"])}catch(i){}}})}(jQuery,window,document),function(n,t,i,r){n.widget("millenet.Retail_CreditDocumentsUpload_UploadDocuments",{options:{product:""},_antiforgeryToken:null,_create:function(){var t=this;n(".CertificateDownloadLink").attr("target","_blank");n(".CertificateDownloadLink").attr("download","");n(i).ready(function(){t.selectDocumentOption();t._registerWebTrendsVirtualPage(t.options.product)});t._blockFileDragAndDropOutsideDropzone();t._antiforgeryToken=n('input[name="__RequestVerificationToken"]').val()},_registerWebTrendsVirtualPage:function(n){var t="";switch(n){case"CashLoan":t="Virtual_CashLoanDocumentsReupload";break;case"CashLoanTopup":t="Virtual_CashLoanTopupDocumentsReupload";break;case"Overdraft":t="Virtual_OverdraftDocumentsReupload";break;case"OverdraftIncrease":t="Virtual_OverdraftIncreaseDocumentsReupload";break;case"CreditCard":t="Virtual_CreditCardDocumentsReupload";break;case"CreditCardIncrease":t="Virtual_CreditCardIncreaseDocumentsReupload"}try{dcsMultiTrack("DCS.dcsuri","/onsite.ad","WT.w_event",t,"WT.w_value","VP","WT.dl",400,"WT.w_click","","DCSext.w_click","");dcsMultiTrack("WT.w_event","","WT.w_value","","WT.dl","","WT.w_click","","DCSext.w_click","");ClickStreamLog(t,["VP","501"])}catch(i){}},toggleConsents:function(){this.element.find(".Consents").toggle()},addFile:function(t,i){var u=this,f=i.id.split("_"),r=new FormData;r.append("__RequestVerificationToken",n('input[name="__RequestVerificationToken"]').val());r.append("id",f[1]);r.append("documentCode",f[0]);r.append("file",i.file);r.append("fileId",i.file.fileId);n.ajax({url:this.options.baseUrl+"/SaveDocument",data:r,type:"POST",processData:!1,contentType:!1,enctype:"multipart/form-data",cache:!1,success:function(t){if(t==="True")u._onFileUploaded(i),u._initializeValidation();else{var r="#"+i.id,f=n("#FileValidationError")[0].innerHTML;n(r).mnFilesUpload("showError",i.file,f)}},error:function(t){handleAjaxError(t,n("#ResultsContainerJson"))}})},removeFileModal:function(t,i){var r=n("#RemoveFileModal");r.mnModalPanel("show");r.find("#ConfirmRemove").off().on("click",function(){n(".Retail_CreditDocumentsUpload_UploadDocuments").Retail_CreditDocumentsUpload_UploadDocuments("removeFile",t,i);r.mnModalPanel("hide")})},removeFile:function(t,i){var r=this,u="#"+i.id;n(u).mnFilesUpload("showLoading",i.file,"Loading");var f=i.id.split("_")[1],e={__RequestVerificationToken:this._antiforgeryToken,documentId:f,fileName:i.file.name,fileId:i.file.fileId},o=this.options.baseUrl+"/RemoveDocument";n.post(o,e,function(){r._onImageRemoved(i)}).fail(function(t){handleAjaxError(t,n("#ResultsContainerJson"))}).success(function(){r._initializeValidation()})},onDocumentOptionSelect:function(t,i,r){var u=this;n(".DocumentAttachments"+r).hide();n("#"+i.selectedItem).show();n(".arrows-"+r+" > div > .arrow-up").hide();n("."+i.selectedItem).show();var f=i.selectedItem,e={__RequestVerificationToken:this._antiforgeryToken,documentOption:f},o=this.options.baseUrl+"/SelectDocumentOption";n.post(o,e,function(){u._onDocumentSelected(i)}).fail(function(t){handleAjaxError(t,n("#ResultsContainerJson"))})},selectDocumentOption:function(){var t=this,u,i;if(t.options.selectedDocumentsOptions!==r&&t.options.selectedDocumentsOptions!==null){u=n("#ScanVerificationError")[0].innerHTML;for(i in t.options.selectedDocumentsOptions)t.options.selectedDocumentsOptions.hasOwnProperty(i)&&(n("#DocumentOptions"+i).find(".MNRadioList").mnRadioList("val",t.options.selectedDocumentsOptions[i]),n("#"+t.options.selectedDocumentsOptions[i]).find(".MNFilesUpload").mnFilesUpload("showRequiredError",u))}},_initializeValidation:function(){var t=this,r=n("#ScanVerificationError")[0].innerHTML;for(var i in t.options.selectedDocumentsOptions)t.options.selectedDocumentsOptions.hasOwnProperty(i)&&n("#"+t.options.selectedDocumentsOptions[i]).find(".MNFilesUpload").mnFilesUpload("showRequiredError",r)},_onDocumentSelected:function(){n(".LogoutCounter").mnLogoutCounter("resetClientCounter")},_onFileUploaded:function(t){n(".LogoutCounter").mnLogoutCounter("resetClientCounter");var i="#"+t.id;n(i).mnFilesUpload("imageUploaded",t.file)},_onImageRemoved:function(t){n(".LogoutCounter").mnLogoutCounter("resetClientCounter");var i="#"+t.id;n(i).mnFilesUpload("imageRemoved",t.file,!0)},_onError:function(t){handleAjaxError(t,n("#ResultsContainer"))},_blockFileDragAndDropOutsideDropzone:function(){t.addEventListener("dragover",function(n){n=n||event;n.preventDefault()},!1);t.addEventListener("drop",function(n){n=n||event;n.preventDefault()},!1)},validate:function(){var e=n("#DocumentsAttachmentError").html(),i=n(".DocumentsRadioList").find('div[aria-checked="true"]'),r,t,f,u;if(i.length<=0)return!1;for(r=!0,t=0;t<i.length;t++)f="#"+n(i[t]).data().value,u=n(f+" .MNFilesUpload"),n(u).find('div[data-required="true"]').length>0&&(u.mnFilesUpload("showRequiredError",n("#DocumentsAttachmentError").text()),r=!1);return r},validatedocumentoption:function(){var t=n(".DocumentsRadioList").find('div[aria-checked="true"]');return t.length<=0?!1:!0}});n.validator.addMethod("requireddocuments",function(){return n(".Retail_CreditDocumentsUpload_UploadDocuments").Retail_CreditDocumentsUpload_UploadDocuments("validate")});n.validator.unobtrusive.adapters.add("requireddocuments",function(n){n.rules.requireddocuments={};n.messages.requireddocuments=n.message});n.validator.addMethod("requireddocumentsoption",function(){return n(".Retail_CreditDocumentsUpload_UploadDocuments").Retail_CreditDocumentsUpload_UploadDocuments("validatedocumentoption")});n.validator.unobtrusive.adapters.add("requireddocumentsoption",function(n){n.rules.requireddocumentsoption={};n.messages.requireddocumentsoption=n.message})}(jQuery,window,document);var _jScrollPaneApi,resizeTimer;!function(){function gr(n,t){for(var i in t)Object.defineProperty(n.prototype,i,{value:t[i],enumerable:!1})}function k(){this._=Object.create(null)}function rt(n){return(n+="")===nu||n[0]===ct?ct+n:n}function lt(n){return(n+="")[0]===ct?n.slice(1):n}function tu(n){return rt(n)in this._}function iu(n){return(n=rt(n))in this._&&delete this._[n]}function ru(){var n=[];for(var t in this._)n.push(lt(t));return n}function uu(){var n=0;for(var t in this._)++n;return n}function fu(){for(var n in this._)return!1;return!0}function to(n){for(var t=1;n*t%1;)t*=10;return t}function ai(n){var t=n[0],i=n[n.length-1];return t<i?[t,i]:[i,t]}function io(n){return n.rangeExtent?n.rangeExtent():ai(n.range())}function eu(t,i){function r(n){return u[((e.get(n)||(i.t==="range"?e.set(n,t.push(n)):NaN))-1)%u.length]}function o(i,r){return n.range(t.length).map(function(n){return i+r*n})}var e,u,f;return r.domain=function(n){if(!arguments.length)return t;t=[];e=new k;for(var f=-1,o=n.length,u;++f<o;)e.has(u=n[f])||e.set(u,t.push(u));return r[i.t].apply(r,i.a)},r.range=function(n){return arguments.length?(u=n,f=0,i={t:"range",a:arguments},r):u},r.rangePoints=function(n,e){arguments.length<2&&(e=0);var s=n[0],h=n[1],c=t.length<2?(s=(s+h)/2,0):(h-s)/(t.length-1+e);return u=o(s+c*e/2,c),f=0,i={t:"rangePoints",a:arguments},r},r.rangeRoundPoints=function(n,e){arguments.length<2&&(e=0);var s=n[0],h=n[1],c=t.length<2?(s=h=Math.round((s+h)/2),0):(h-s)/(t.length-1+e)|0;return u=o(s+Math.round(c*e/2+(h-s-(t.length-1+e)*c)/2),c),f=0,i={t:"rangeRoundPoints",a:arguments},r},r.rangeBands=function(n,e,s){arguments.length<2&&(e=0);arguments.length<3&&(s=e);var h=n[1]<n[0],l=n[+h],a=n[1-h],c=(a-l)/(t.length-e+2*s);return u=o(l+c*s,c),h&&u.reverse(),f=c*(1-e),i={t:"rangeBands",a:arguments},r},r.rangeRoundBands=function(n,e,s){arguments.length<2&&(e=0);arguments.length<3&&(s=e);var h=n[1]<n[0],c=n[+h],a=n[1-h],l=Math.floor((a-c)/(t.length-e+2*s));return u=o(c+Math.round((a-c-(t.length-e)*l)/2),l),h&&u.reverse(),f=Math.round(l*(1-e)),i={t:"rangeRoundBands",a:arguments},r},r.rangeBand=function(){return f},r.rangeExtent=function(){return ai(i.a[0])},r.copy=function(){return eu(t,i)},r.domain(t)}function ro(n,t,i){return function(){var r=i.apply(t,arguments);return r===t?n:r}}function nt(){}function c(n,t,i){return this instanceof c?void(this.h=+n,this.s=+t,this.l=+i):arguments.length<2?n instanceof c?new c(n.h,n.s,n.l):yu(""+n,pu,c):new c(n,t,i)}function ou(n,t,i){function e(n){return(n>360?n-=360:n<0&&(n+=360),n<60)?r+(u-r)*n/60:n<180?u:n<240?r+(u-r)*(240-n)/60:r}function f(n){return Math.round(e(n)*255)}var r,u;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)?0:t<0?0:t>1?1:t,i=i<0?0:i>1?1:i,u=i<=.5?i*(1+t):i+t-i*t,r=2*i-u,new o(f(n+120),f(n),f(n-120))}function s(t,i,r){return this instanceof s?void(this.h=+t,this.c=+i,this.l=+r):arguments.length<2?t instanceof s?new s(t.h,t.c,t.l):t instanceof h?au(t.l,t.a,t.b):au((t=wu((t=n.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new s(t,i,r)}function su(n,t,i){return isNaN(n)&&(n=0),isNaN(t)&&(t=0),new h(i,Math.cos(n*=uo)*t,Math.sin(n)*t)}function h(n,t,i){return this instanceof h?void(this.l=+n,this.a=+t,this.b=+i):arguments.length<2?n instanceof h?new h(n.l,n.a,n.b):n instanceof s?su(n.h,n.c,n.l):wu((n=o(n)).r,n.g,n.b):new h(n,t,i)}function fo(n,t,i){var r=(n+16)/116,u=r+t/500,f=r-i/200;return u=bi(u)*hu,r=bi(r)*cu,f=bi(f)*lu,new o(di(3.2404542*u-1.5371385*r-.4985314*f),di(-.969266*u+1.8760108*r+.041556*f),di(.0556434*u-.2040259*r+1.0572252*f))}function au(n,t,i){return n>0?new s(Math.atan2(i,t)*pi,Math.sqrt(t*t+i*i),n):new s(NaN,NaN,n)}function bi(n){return n>.206893034?n*n*n:(n-4/29)/7.787037}function ki(n){return n>.008856?Math.pow(n,1/3):7.787037*n+4/29}function di(n){return Math.round(255*(n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function o(n,t,i){return this instanceof o?void(this.r=~~n,this.g=~~t,this.b=~~i):arguments.length<2?n instanceof o?new o(n.r,n.g,n.b):yu(""+n,o,ou):new o(n,t,i)}function vu(n){return new o(n>>16,n>>8&255,n&255)}function gi(n){return n<16?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function yu(n,t,i){var f=0,e=0,o=0,s,u,r;if(s=/([a-z]+)\((.*)\)/.exec(n=n.toLowerCase()),s){u=s[2].split(",");switch(s[1]){case"hsl":return i(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return t(tr(u[0]),tr(u[1]),tr(u[2]))}}return(r=ot.get(n))?t(r.r,r.g,r.b):(n==null||n.charAt(0)!=="#"||isNaN(r=parseInt(n.slice(1),16))||(n.length===4?(f=(r&3840)>>4,f=f>>4|f,e=r&240,e=e>>4|e,o=r&15,o=o<<4|o):n.length===7&&(f=(r&16711680)>>16,e=(r&65280)>>8,o=r&255)),t(f,e,o))}function pu(n,t,i){var f=Math.min(n/=255,t/=255,i/=255),r=Math.max(n,t,i),u=r-f,e,s,o=(r+f)/2;return u?(s=o<.5?u/(r+f):u/(2-r-f),e=(n==r?(t-i)/u+(t<i?6:0):t==r?(i-n)/u+2:(n-t)/u+4)*60):(e=NaN,s=o>0&&o<1?0:e),new c(e,s,o)}function wu(n,t,i){n=nr(n);t=nr(t);i=nr(i);var u=ki((.4124564*n+.3575761*t+.1804375*i)/hu),r=ki((.2126729*n+.7151522*t+.072175*i)/cu),f=ki((.0193339*n+.119192*t+.9503041*i)/lu);return h(116*r-16,500*(u-r),200*(r-f))}function nr(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function tr(n){var t=parseFloat(n);return n.charAt(n.length-1)==="%"?Math.round(t*2.55):t}function bu(n,t){var u={},r={};for(var i in n)i in t?u[i]=tt(n[i],t[i]):r[i]=n[i];for(i in t)i in n||(r[i]=t[i]);return function(n){for(i in u)r[i]=u[i](n);return r}}function ku(n,t){for(var u=[],r=[],e=n.length,o=t.length,f=Math.min(n.length,t.length),i=0;i<f;++i)u.push(tt(n[i],t[i]));for(;i<e;++i)r[i]=n[i];for(;i<o;++i)r[i]=t[i];return function(n){for(i=0;i<f;++i)r[i]=u[i](n);return r}}function y(n,t){return n=+n,t=+t,function(i){return n*(1-i)+t*i}}function du(n,t){var e=pt.lastIndex=wt.lastIndex=0,s,f,u,r=-1,i=[],o=[];for(n=n+"",t=t+"";(s=pt.exec(n))&&(f=wt.exec(t));)(u=f.index)>e&&(u=t.slice(e,u),i[r]?i[r]+=u:i[++r]=u),(s=s[0])===(f=f[0])?i[r]?i[r]+=f:i[++r]=f:(i[++r]=null,o.push({i:r,x:y(s,f)})),e=wt.lastIndex;return e<t.length&&(u=t.slice(e),i[r]?i[r]+=u:i[++r]=u),i.length<2?o[0]?(t=o[0].x,function(n){return t(n)+""}):function(){return t}:(t=o.length,function(n){for(var r=0,u;r<t;++r)i[(u=o[r]).i]=u.x(n);return i.join("")})}function tt(t,i){for(var r=n.interpolators.length,u;--r>=0&&!(u=n.interpolators[r](t,i)););return u}function gu(n,t){return t-=n,function(i){return Math.round(n+t*i)}}function eo(n,t){return t=(t-=n=+n)||1/t,function(i){return(i-n)/t}}function oo(n,t){return t=(t-=n=+n)||1/t,function(i){return Math.max(0,Math.min(1,(i-n)/t))}}function it(n){return n}function ir(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}function so(n,t){var i=Math.pow(10,v(8-t)*3);return{scale:t>8?function(n){return n/i}:function(n){return n*i},symbol:n}}function ho(t){var e=t.decimal,r=t.thousands,i=t.grouping,u=t.currency,f=i&&r?function(n,t){for(var f=n.length,o=[],s=0,u=i[0],e=0;f>0&&u>0;){if(e+u+1>t&&(u=Math.max(1,t-e)),o.push(n.substring(f-=u,f+u)),(e+=u+1)>t)break;u=i[s=(s+1)%i.length]}return o.reverse().join(r)}:it;return function(t){var o=rr.exec(t),y=o[1]||" ",s=o[2]||">",b=o[3]||"-",k=o[4]||"",l=o[5],p=+o[6],w=o[7],r=o[8],i=o[9],h=1,a="",c="",d=!1,g=!0,v;r&&(r=+r.substring(1));(l||y==="0"&&s==="=")&&(l=y="0",s="=");switch(i){case"n":w=!0;i="g";break;case"%":h=100;c="%";i="f";break;case"p":h=100;c="%";i="r";break;case"b":case"o":case"x":case"X":k==="#"&&(a="0"+i.toLowerCase());case"c":g=!1;case"d":d=!0;r=0;break;case"s":h=-1;i="r"}return k==="$"&&(a=u[0],c=u[1]),i!="r"||r||(i="g"),r!=null&&(i=="g"?r=Math.max(1,Math.min(21,r)):(i=="e"||i=="f")&&(r=Math.max(0,Math.min(20,r)))),i=tf.get(i)||co,v=l&&w,function(t){var ft=c,k,ut,it,u,nt,rt,tt,o;return d&&t%1?"":(k=t<0||t===0&&1/t<0?(t=-t,"-"):b==="-"?"":b,h<0?(ut=n.formatPrefix(t,r),t=ut.scale(t),ft=ut.symbol+c):t*=h,t=i(t,r),it=t.lastIndexOf("."),it<0?(rt=g?t.lastIndexOf("e"):-1,rt<0?(u=t,nt=""):(u=t.substring(0,rt),nt=t.substring(rt))):(u=t.substring(0,it),nt=e+t.substring(it+1)),!l&&w&&(u=f(u,Infinity)),tt=a.length+u.length+nt.length+(v?0:k.length),o=tt<p?new Array(tt=p-tt+1).join(y):"",v&&(u=f(o+u,o.length?p-nt.length:Infinity)),k+=a,t=u+nt,(s==="<"?k+t+o:s===">"?o+k+t:s==="^"?o.substring(0,tt>>=1)+k+t+o.substring(tt):k+(v?t:o+t))+ft)}}}function co(n){return n+""}function ur(n,t,i){function o(t){var i=n(t),r=e(i,1);return t-i<r-t?i:r}function u(i){return t(i=n(new f(i-1)),1),i}function e(n,i){return t(n=new f(+n),i),n}function s(n,r,f){var e=u(n),o=[];if(f>1)while(e<r)i(e)%f||o.push(new Date(+e)),t(e,1);else while(e<r)o.push(new Date(+e)),t(e,1);return o}function h(n,t,i){try{f=p;var r=new p;return r._=n,s(r,t,i)}finally{f=Date}}n.floor=n;n.round=o;n.ceil=u;n.offset=e;n.range=s;var r=n.utc=bt(n);return r.floor=r,r.round=bt(o),r.ceil=bt(u),r.offset=bt(e),r.range=h,n}function bt(n){return function(t,i){try{f=p;var r=new p;return r._=t,n(r,i)._}finally{f=Date}}}function p(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function lo(t){function r(n){function t(t){for(var e=[],r=-1,o=0,f,s,h;++r<i;)n.charCodeAt(r)===37&&(e.push(n.slice(o,r)),(s=uf[f=n.charAt(++r)])!=null&&(f=n.charAt(++r)),(h=u[f])&&(f=h(t,s==null?f==="e"?" ":"0":s)),e.push(f),o=r+1);return e.push(n.slice(o,r)),e.join("")}var i=n.length;return t.parse=function(t){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},e=o(i,n,t,0),u,r;return e!=t.length?null:("p"in i&&(i.H=i.H%12+i.p*12),u=i.Z!=null&&f!==p,r=new(u?p:f),"j"in i?r.setFullYear(i.y,0,i.j):"w"in i&&("W"in i||"U"in i)?(r.setFullYear(i.y,0,1),r.setFullYear(i.y,0,"W"in i?(i.w+6)%7+i.W*7-(r.getDay()+5)%7:i.w+i.U*7-(r.getDay()+6)%7)):r.setFullYear(i.y,i.m,i.d),r.setHours(i.H+(i.Z/100|0),i.M+i.Z%100,i.S,i.L),u?r._:r)},t.toString=function(){return n},t}function o(n,t,i,r){for(var f,e,o,u=0,s=t.length,h=i.length;u<s;){if(r>=h)return-1;if(f=t.charCodeAt(u++),f===37){if(o=t.charAt(u++),e=d[o in uf?t.charAt(u++):o],!e||(r=e(n,i,r))<0)return-1}else if(f!=i.charCodeAt(r++))return-1}return r}function et(n,t,i){w.lastIndex=0;var r=w.exec(t.slice(i));return r?(n.w=rt.get(r[0].toLowerCase()),i+r[0].length):-1}function ot(n,t,i){y.lastIndex=0;var r=y.exec(t.slice(i));return r?(n.w=it.get(r[0].toLowerCase()),i+r[0].length):-1}function st(n,t,i){k.lastIndex=0;var r=k.exec(t.slice(i));return r?(n.m=ft.get(r[0].toLowerCase()),i+r[0].length):-1}function ht(n,t,i){b.lastIndex=0;var r=b.exec(t.slice(i));return r?(n.m=ut.get(r[0].toLowerCase()),i+r[0].length):-1}function ct(n,t,i){return o(n,u.c.toString(),t,i)}function lt(n,t,i){return o(n,u.x.toString(),t,i)}function at(n,t,i){return o(n,u.X.toString(),t,i)}function vt(n,t,i){var r=v.get(t.slice(i,i+=2).toLowerCase());return r==null?-1:(n.p=r,i)}var g=t.dateTime,nt=t.date,tt=t.time,a=t.periods,s=t.days,h=t.shortDays,c=t.months,l=t.shortMonths,u,d;r.utc=function(n){function i(n){try{f=p;var i=new f;return i._=n,t(i)}finally{f=Date}}var t=r(n);return i.parse=function(n){try{f=p;var i=t.parse(n);return i&&i._}finally{f=Date}},i.toString=t.toString,i};r.multi=r.utc.multi=es;var v=n.map(),y=kt(s),it=dt(s),w=kt(h),rt=dt(h),b=kt(c),ut=dt(c),k=kt(l),ft=dt(l);return a.forEach(function(n,t){v.set(n.toLowerCase(),t)}),u={a:function(n){return h[n.getDay()]},A:function(n){return s[n.getDay()]},b:function(n){return l[n.getMonth()]},B:function(n){return c[n.getMonth()]},c:r(g),d:function(n,t){return e(n.getDate(),t,2)},e:function(n,t){return e(n.getDate(),t,2)},H:function(n,t){return e(n.getHours(),t,2)},I:function(n,t){return e(n.getHours()%12||12,t,2)},j:function(n,t){return e(1+i.dayOfYear(n),t,3)},L:function(n,t){return e(n.getMilliseconds(),t,3)},m:function(n,t){return e(n.getMonth()+1,t,2)},M:function(n,t){return e(n.getMinutes(),t,2)},p:function(n){return a[+(n.getHours()>=12)]},S:function(n,t){return e(n.getSeconds(),t,2)},U:function(n,t){return e(i.sundayOfYear(n),t,2)},w:function(n){return n.getDay()},W:function(n,t){return e(i.mondayOfYear(n),t,2)},x:r(nt),X:r(tt),y:function(n,t){return e(n.getFullYear()%100,t,2)},Y:function(n,t){return e(n.getFullYear()%1e4,t,4)},Z:us,"%":function(){return"%"}},d={a:et,A:ot,b:st,B:ht,c:ct,d:ef,e:ef,H:of,I:of,j:ns,L:rs,m:go,M:ts,p:vt,S:is,U:vo,w:ao,W:yo,x:lt,X:at,y:wo,Y:po,Z:bo,"%":fs},r}function e(n,t,i){var u=n<0?"-":"",r=(u?-n:n)+"",f=r.length;return u+(f<i?new Array(i-f+1).join(t)+r:r)}function kt(t){return new RegExp("^(?:"+t.map(n.requote).join("|")+")","i")}function dt(n){for(var i=new k,t=-1,r=n.length;++t<r;)i.set(n[t].toLowerCase(),t);return i}function ao(n,t,i){r.lastIndex=0;var u=r.exec(t.slice(i,i+1));return u?(n.w=+u[0],i+u[0].length):-1}function vo(n,t,i){r.lastIndex=0;var u=r.exec(t.slice(i));return u?(n.U=+u[0],i+u[0].length):-1}function yo(n,t,i){r.lastIndex=0;var u=r.exec(t.slice(i));return u?(n.W=+u[0],i+u[0].length):-1}function po(n,t,i){r.lastIndex=0;var u=r.exec(t.slice(i,i+4));return u?(n.y=+u[0],i+u[0].length):-1}function wo(n,t,i){r.lastIndex=0;var u=r.exec(t.slice(i,i+2));return u?(n.y=ko(+u[0]),i+u[0].length):-1}function bo(n,t,i){return/^[+-]\d{4}$/.test(t=t.slice(i,i+5))?(n.Z=-t,i+5):-1}function ko(n){return n+(n>68?1900:2e3)}function go(n,t,i){r.lastIndex=0;var u=r.exec(t.slice(i,i+2));return u?(n.m=u[0]-1,i+u[0].length):-1}function ef(n,t,i){r.lastIndex=0;var u=r.exec(t.slice(i,i+2));return u?(n.d=+u[0],i+u[0].length):-1}function ns(n,t,i){r.lastIndex=0;var u=r.exec(t.slice(i,i+3));return u?(n.j=+u[0],i+u[0].length):-1}function of(n,t,i){r.lastIndex=0;var u=r.exec(t.slice(i,i+2));return u?(n.H=+u[0],i+u[0].length):-1}function ts(n,t,i){r.lastIndex=0;var u=r.exec(t.slice(i,i+2));return u?(n.M=+u[0],i+u[0].length):-1}function is(n,t,i){r.lastIndex=0;var u=r.exec(t.slice(i,i+2));return u?(n.S=+u[0],i+u[0].length):-1}function rs(n,t,i){r.lastIndex=0;var u=r.exec(t.slice(i,i+3));return u?(n.L=+u[0],i+u[0].length):-1}function us(n){var t=n.getTimezoneOffset(),i=t>0?"-":"+",r=v(t)/60|0,u=v(t)%60;return i+e(r,"0",2)+e(u,"0",2)}function fs(n,t,i){ff.lastIndex=0;var r=ff.exec(t.slice(i,i+1));return r?i+r[0].length:-1}function es(n){for(var i=n.length,t=-1;++t<i;)n[t][0]=this(n[t][0]);return function(t){for(var r=0,i=n[r];!i[1](t);)i=n[++r];return i[0](t)}}function os(n,t,i,r){var u=i(n[0],n[1]),f=r(t[0],t[1]);return function(n){return f(u(n))}}function ss(n,t){var i=0,r=n.length-1,u=n[i],f=n[r],e;return f<u&&(e=i,i=r,r=e,e=u,u=f,f=e),n[i]=t.floor(u),n[r]=t.ceil(f),n}function hs(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:hf}function gt(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function cf(n){return{left:function(t,i,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);r<u;){var f=r+u>>>1;n(t[f],i)<0?r=f+1:u=f}return r},right:function(t,i,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);r<u;){var f=r+u>>>1;n(t[f],i)>0?u=f:r=f+1}return r}}}function cs(t,i,r,u){var o=[],s=[],f=0,e=Math.min(t.length,i.length)-1;for(t[e]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++f<=e;)o.push(r(t[f-1],t[f])),s.push(u(i[f-1],i[f]));return function(i){var r=n.bisect(t,i,1,e)-1;return s[r](o[r](i))}}function lf(n,t,i,r){function f(){var f=Math.min(n.length,t.length)>2?cs:os,s=r?oo:eo;return e=f(n,t,s,i),o=f(t,n,s,tt),u}function u(n){return e(n)}var e,o;return u.invert=function(n){return o(n)},u.domain=function(t){return arguments.length?(n=t.map(Number),f()):n},u.range=function(n){return arguments.length?(t=n,f()):t},u.rangeRound=function(n){return u.range(n).interpolate(gu)},u.clamp=function(n){return arguments.length?(r=n,f()):r},u.interpolate=function(n){return arguments.length?(i=n,f()):i},u.ticks=function(t){return as(n,t)},u.tickFormat=function(t,i){return vs(n,t,i)},u.nice=function(t){return ls(n,t),f()},u.copy=function(){return lf(n,t,i,r)},f()}function ls(n,t){return ss(n,hs(er(n,t)[2]))}function er(n,t){t==null&&(t=10);var r=ai(n),f=r[1]-r[0],i=Math.pow(10,Math.floor(Math.log(f/t)/Math.LN10)),u=t/f*i;return u<=.15?i*=10:u<=.35?i*=5:u<=.75&&(i*=2),r[0]=Math.ceil(r[0]/i)*i,r[1]=Math.floor(r[1]/i)*i+i*.5,r[2]=i,r}function as(t,i){return n.range.apply(n,er(t,i))}function vs(t,i,r){var f=er(t,i),u,e;if(r){if(u=rr.exec(r),u.shift(),u[8]==="s")return e=n.formatPrefix(Math.max(v(f[0]),v(f[1]))),u[7]||(u[7]="."+ni(e.scale(f[2]))),u[8]="f",r=n.format(u.join("")),function(n){return r(e.scale(n))+e.symbol};u[7]||(u[7]="."+ys(u[8],f));r=u.join("")}else r=",."+ni(f[2])+"f";return n.format(r)}function ni(n){return-Math.floor(Math.log(n)/Math.LN10+.01)}function ys(n,t){var i=ni(t[2]);return n in af?Math.abs(i-ni(Math.max(v(t[0]),v(t[1]))))+ +(n!=="e"):i-(n==="%")*2}function ps(n){return n&&(n.ownerDocument||n.document||n).documentElement}function or(n){return n&&(n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView)}function yf(n,t){var i,u,r;if(t in n)return t;for(t=t.charAt(0).toUpperCase()+t.slice(1),i=0,u=sr.length;i<u;++i)if(r=sr[i]+t,r in n)return r}function g(n){return ii(n,t),n}function lr(n){return typeof n=="function"?n:function(){return hr(n,this)}}function pf(n){return typeof n=="function"?n:function(){return cr(n,this)}}function wf(t,i){function r(){this.removeAttribute(t)}function u(){this.removeAttributeNS(t.space,t.local)}function f(){this.setAttribute(t,i)}function e(){this.setAttributeNS(t.space,t.local,i)}function o(){var n=i.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}function s(){var n=i.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=n.ns.qualify(t),i==null?t.local?u:r:typeof i=="function"?t.local?s:o:t.local?e:f}function bf(n){return n.trim().replace(/\s+/g," ")}function kf(t){return new RegExp("(?:^|\\s+)"+n.requote(t)+"(?:\\s+|$)","g")}function df(n){return(n+"").trim().split(/^|\s+/)}function gf(n,t){function r(){for(var r=-1;++r<i;)n[r](this,t)}function u(){for(var r=-1,u=t.apply(this,arguments);++r<i;)n[r](this,u)}n=df(n).map(ws);var i=n.length;return typeof t=="function"?u:r}function ws(n){var t=kf(n);return function(i,r){if(u=i.classList)return r?u.add(n):u.remove(n);var u=i.getAttribute("class")||"";r?(t.lastIndex=0,t.test(u)||i.setAttribute("class",bf(u+" "+n))):i.setAttribute("class",bf(u.replace(t," ")))}}function ne(n,t,i){function r(){this.style.removeProperty(n)}function u(){this.style.setProperty(n,t,i)}function f(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,i)}return t==null?r:typeof t=="function"?f:u}function te(n,t){function i(){delete this[n]}function r(){this[n]=t}function u(){var i=t.apply(this,arguments);i==null?delete this[n]:this[n]=i}return t==null?i:typeof t=="function"?u:r}function ie(t){function i(){var n=this.ownerDocument,i=this.namespaceURI;return i?n.createElementNS(i,t):n.createElement(t)}function r(){return this.ownerDocument.createElementNS(t.space,t.local)}return typeof t=="function"?t:(t=n.ns.qualify(t)).local?r:i}function bs(){var n=this.parentNode;n&&n.removeChild(this)}function re(){this._=Object.create(null)}function ar(n){return{__data__:n}}function ue(n){return function(){return ri(this,n)}}function ks(n){return arguments.length||(n=gt),function(t,i){return t&&i?n(t.__data__,i.__data__):!t-!i}}function ds(){}function vr(){}function fe(n){function r(){for(var i=t,r=-1,f=i.length,u;++r<f;)(u=i[r].on)&&u.apply(this,arguments);return n}var t=[],i=new k;return r.on=function(r,u){var f=i.get(r),e;return arguments.length<2?f&&f.on:(f&&(f.on=null,t=t.slice(0,e=t.indexOf(f)).concat(t.slice(e+1)),i.remove(r)),u&&t.push(i.set(r,{on:u})),n)},r}function ee(t,i,r){function s(){var n=this[u];n&&(this.removeEventListener(t,n,n.$),delete this[u])}function h(){var n=o(i,ti(arguments));s.call(this);this.addEventListener(t,this[u]=n,n.$=r);n._=i}function c(){var f=new RegExp("^__on([^.]+)"+n.requote(t)+"$"),u,i,r;for(i in this)(u=i.match(f))&&(r=this[i],this.removeEventListener(u[1],r,r.$),delete this[i])}var u="__on"+t,f=t.indexOf("."),o=oe,e;return f>0&&(t=t.slice(0,f)),e=fi.get(t),e&&(t=e,o=gs),f?i?h:s:i?ds:c}function oe(t,i){return function(r){var u=n.event;n.event=r;i[0]=this.__data__;try{t.apply(this,i)}finally{n.event=u}}}function gs(n,t){var i=oe(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||r.compareDocumentPosition(t)&8)||i.call(t,n)}}function w(n,t){for(var i=0,u=n.length;i<u;i++)for(var f=n[i],r=0,o=f.length,e;r<o;r++)(e=f[r])&&t(e,r,i);return n}function se(n){return ii(n,a),n}function nh(n){var t,i;return function(r,u,f){var e=n[f].update,s=e.length,o;for(f!=i&&(i=f,t=0),u>=t&&(t=u+1);!(o=e[t])&&++t<s;);return o}}function th(){return!0}function pr(){var t=he(),n=ce()-t;n>24?(isFinite(n)&&(clearTimeout(hi),hi=setTimeout(pr,n)),si=0):(si=1,yr(pr))}function he(){var n=Date.now();for(b=ei;b;)n>=b.t&&(b.f=b.c(n-b.t)),b=b.n;return n}function ce(){for(var t,n=ei,i=Infinity;n;)n.f?n=t?t.n=n.n:ei=n.n:(n.t<i&&(i=n.t),n=(t=n).n);return oi=t,i}function ae(n){return function(){var t,i;(t=this[n])&&(i=t[t.active])&&(--t.count?delete t[t.active]:delete this[n],t.active+=.5,i.event&&i.event.interrupt.call(this,this.__data__,i.index))}}function st(n,t,i){return ii(n,u),n.namespace=t,n.id=i,n}function ve(n){var t=[n.a,n.b],i=[n.c,n.d],r=pe(t),u=ye(t,i),f=pe(ih(i,t,-u))||0;t[0]*i[1]<i[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,u*=-1);this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-i[0],i[1]))*pi;this.translate=[n.e,n.f];this.scale=[r,f];this.skew=f?Math.atan2(u,f)*pi:0}function ye(n,t){return n[0]*t[0]+n[1]*t[1]}function pe(n){var t=Math.sqrt(ye(n,n));return t&&(n[0]/=t,n[1]/=t),t}function ih(n,t,i){return n[0]+=i*t[0],n[1]+=i*t[1],n}function be(t,i){var r=[],o=[],s,c=n.transform(t),l=n.transform(i),a=c.translate,u=l.translate,h=c.rotate,f=l.rotate,w=c.skew,v=l.skew,p=c.scale,e=l.scale;return a[0]!=u[0]||a[1]!=u[1]?(r.push("translate(",null,",",null,")"),o.push({i:1,x:y(a[0],u[0])},{i:3,x:y(a[1],u[1])})):u[0]||u[1]?r.push("translate("+u+")"):r.push(""),h!=f?(h-f>180?f+=360:f-h>180&&(h+=360),o.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:y(h,f)})):f&&r.push(r.pop()+"rotate("+f+")"),w!=v?o.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:y(w,v)}):v&&r.push(r.pop()+"skewX("+v+")"),p[0]!=e[0]||p[1]!=e[1]?(s=r.push(r.pop()+"scale(",null,",",null,")"),o.push({i:s-4,x:y(p[0],e[0])},{i:s-2,x:y(p[1],e[1])})):(e[0]!=1||e[1]!=1)&&r.push(r.pop()+"scale("+e+")"),s=o.length,function(n){for(var t=-1,i;++t<s;)r[(i=o[t]).i]=i.x(n);return r.join("")}}function br(n,t,i,r){var u=n.id,f=n.namespace;return w(n,typeof i=="function"?function(n,e,o){n[f][u].tween.set(t,r(i.call(n,n.__data__,e,o)))}:(i=r(i),function(n){n[f][u].tween.set(t,i)}))}function rh(n){return n==null&&(n=""),function(){this.textContent=n}}function eh(n){return function(t){return t<=0?0:t>=1?1:n(t)}}function de(n){return function(t){return 1-n(1-t)}}function ge(n){return function(t){return.5*(t<.5?n(2*t):2-n(2-2*t))}}function oh(n){return n*n}function sh(n){return n*n*n}function hh(n){if(n<=0)return 0;if(n>=1)return 1;var t=n*n,i=t*n;return 4*(n<.5?i:3*(n-t)+i-.75)}function ch(n){return function(t){return Math.pow(t,n)}}function lh(n){return 1-Math.cos(n*yi)}function ah(n){return Math.pow(2,10*(n-1))}function vh(n){return 1-Math.sqrt(1-n*n)}function yh(n,t){var i;return arguments.length<2&&(t=.45),arguments.length?i=t/vi*Math.asin(1/n):(n=1,i=t/4),function(r){return 1+n*Math.pow(2,-10*r)*Math.sin((r-i)*vi/t)}}function ph(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}}function wh(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function kr(n){return n==null?"__transition__":"__transition_"+n+"__"}function li(t,i,r,u,f){var e=t[r]||(t[r]={active:0,count:0}),o=e[u],s;o||(s=f.time,o=e[u]={tween:new k,time:s,delay:f.delay,duration:f.duration,ease:f.ease,index:i},f=null,++e.count,n.timer(function(f){function y(r){if(e.active>u)return w();var f=e[e.active];f&&(--e.count,delete e[e.active],f.event&&f.event.interrupt.call(t,t.__data__,f.index));e.active=u;o.event&&o.event.start.call(t,t.__data__,i);o.tween.forEach(function(n,r){(r=r.call(t,t.__data__,i))&&l.push(r)});v=o.ease;a=o.duration;n.timer(function(){return c.c=p(r||1)?th:p,1},0,s)}function p(n){if(e.active!==u)return 1;for(var r=n/a,s=v(r),f=l.length;f>0;)l[--f].call(t,s);if(r>=1)return o.event&&o.event.end.call(t,t.__data__,i),w()}function w(){return--e.count?delete e[u]:delete t[r],1}var h=o.delay,a,v,c=b,l=[];if(c.t=h+s,h<=f)return y(f-h);c.c=y},0,s))}function bh(n,t,i){n.attr("transform",function(n){var r=t(n);return"translate("+(isFinite(r)?r:i(n))+",0)"})}function kh(n,t,i){n.attr("transform",function(n){var r=t(n);return"translate(0,"+(isFinite(r)?r:i(n))+")"})}var n={version:"3.5.6"},nu,ct,v,at,vt,et,ot,pt,wt,nf,rr,tf,rf,i,f,l,sf,hf,fr,af,ii,sr,t,ui,fi,a,ei,oi,si,hi,b,yr,le,u,wr,ht,ci,we,dr,no;n.map=function(n,t){var r=new k,i,u,e,f;if(n instanceof k)n.forEach(function(n,t){r.set(n,t)});else if(Array.isArray(n))if(i=-1,u=n.length,arguments.length===1)while(++i<u)r.set(i,n[i]);else while(++i<u)r.set(t.call(n,e=n[i],i),e);else for(f in n)r.set(f,n[f]);return r};nu="__proto__";ct="\0";gr(k,{has:tu,get:function(n){return this._[rt(n)]},set:function(n,t){return this._[rt(n)]=t},remove:iu,keys:ru,values:function(){var n=[];for(var t in this._)n.push(this._[t]);return n},entries:function(){var n=[];for(var t in this._)n.push({key:lt(t),value:this._[t]});return n},size:uu,empty:fu,forEach:function(n){for(var t in this._)n.call(this,lt(t),this._[t])}});v=Math.abs;n.range=function(n,t,i){if(arguments.length<3&&(i=1,arguments.length<2&&(t=n,n=0)),(t-n)/i==Infinity)throw new Error("infinite range");var f=[],r=to(v(i)),e=-1,u;if(n*=r,t*=r,i*=r,i<0)while((u=n+i*++e)>t)f.push(u/r);else while((u=n+i*++e)<t)f.push(u/r);return f};n.scale={};n.scale.ordinal=function(){return eu([],{t:"range",a:[[]]})};n.merge=function(n){for(var t=n.length,i,e=-1,r=0,u,f;++e<t;)r+=n[e].length;for(u=new Array(r);--t>=0;)for(f=n[t],i=f.length;--i>=0;)u[--r]=f[i];return u};n.rebind=function(n,t){for(var i=1,u=arguments.length,r;++i<u;)n[r=arguments[i]]=ro(n,t,t[r]);return n};n.color=nt;nt.prototype.toString=function(){return this.rgb()+""};n.hsl=c;at=c.prototype=new nt;at.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),new c(this.h,this.s,this.l/n)};at.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new c(this.h,this.s,n*this.l)};at.rgb=function(){return ou(this.h,this.s,this.l)};var ut=1e-6,dh=ut*ut,ft=Math.PI,vi=2*ft,gh=vi-ut,yi=ft/2,uo=ft/180,pi=180/ft;n.hcl=s;vt=s.prototype=new nt;vt.brighter=function(n){return new s(this.h,this.c,Math.min(100,this.l+yt*(arguments.length?n:1)))};vt.darker=function(n){return new s(this.h,this.c,Math.max(0,this.l-yt*(arguments.length?n:1)))};vt.rgb=function(){return su(this.h,this.c,this.l).rgb()};n.lab=h;var yt=18,hu=.95047,cu=1,lu=1.08883,wi=h.prototype=new nt;wi.brighter=function(n){return new h(Math.min(100,this.l+yt*(arguments.length?n:1)),this.a,this.b)};wi.darker=function(n){return new h(Math.max(0,this.l-yt*(arguments.length?n:1)),this.a,this.b)};wi.rgb=function(){return fo(this.l,this.a,this.b)};n.rgb=o;et=o.prototype=new nt;et.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var i=this.r,r=this.g,u=this.b,t=30;return!i&&!r&&!u?new o(t,t,t):(i&&i<t&&(i=t),r&&r<t&&(r=t),u&&u<t&&(u=t),new o(Math.min(255,i/n),Math.min(255,r/n),Math.min(255,u/n)))};et.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new o(n*this.r,n*this.g,n*this.b)};et.hsl=function(){return pu(this.r,this.g,this.b)};et.toString=function(){return"#"+gi(this.r)+gi(this.g)+gi(this.b)};ot=n.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ot.forEach(function(n,t){ot.set(n,vu(t))});n.interpolateObject=bu;n.interpolateArray=ku;n.interpolateNumber=y;n.interpolateString=du;pt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;wt=new RegExp(pt.source,"g");n.interpolate=tt;n.interpolators=[function(n,t){var i=typeof t;return(i==="string"?ot.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?d3_interpolateRgb:du:t instanceof nt?d3_interpolateRgb:Array.isArray(t)?ku:i==="object"&&isNaN(t)?bu:y)(n,t)}];n.interpolateRound=gu;n.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)};nf=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(so);n.formatPrefix=function(t,i){var r=0;return t&&(t<0&&(t*=-1),i&&(t=n.round(t,ir(t,i))),r=1+Math.floor(1e-12+Math.log(t)/Math.LN10),r=Math.max(-24,Math.min(24,Math.floor((r-1)/3)*3))),nf[8+r/3]};rr=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;tf=n.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(t,i){return(t=n.round(t,ir(t,i))).toFixed(Math.max(0,Math.min(20,ir(t*(1+1e-15),i))))}});n.requote=function(n){return n.replace(rf,"\\$&")};rf=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;i=n.time={};f=Date;p.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){l.setUTCDate.apply(this._,arguments)},setDay:function(){l.setUTCDay.apply(this._,arguments)},setFullYear:function(){l.setUTCFullYear.apply(this._,arguments)},setHours:function(){l.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){l.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){l.setUTCMinutes.apply(this._,arguments)},setMonth:function(){l.setUTCMonth.apply(this._,arguments)},setSeconds:function(){l.setUTCSeconds.apply(this._,arguments)},setTime:function(){l.setTime.apply(this._,arguments)}};l=Date.prototype;i.year=ur(function(n){return n=i.day(n),n.setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()});i.years=i.year.range;i.years.utc=i.year.utc.range;i.day=ur(function(n){var t=new f(2e3,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1});i.days=i.day.range;i.days.utc=i.day.utc.range;i.dayOfYear=function(n){var t=i.year(n);return Math.floor((n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5)};["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(n,t){t=7-t;var r=i[n]=ur(function(n){return(n=i.day(n)).setDate(n.getDate()-(n.getDay()+t)%7),n},function(n,t){n.setDate(n.getDate()+Math.floor(t)*7)},function(n){var r=i.year(n).getDay();return Math.floor((i.dayOfYear(n)+(r+t)%7)/7)-(r!==t)});i[n+"s"]=r.range;i[n+"s"].utc=r.utc.range;i[n+"OfYear"]=function(n){var r=i.year(n).getDay();return Math.floor((i.dayOfYear(n)+(r+t)%7)/7)}});i.week=i.sunday;i.weeks=i.sunday.range;i.weeks.utc=i.sunday.utc.range;i.weekOfYear=i.sundayOfYear;var uf={"-":"",_:" ","0":"0"},r=/^\s*\d+/,ff=/^%/;n.locale=function(n){return{numberFormat:ho(n),timeFormat:lo(n)}};sf=n.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});n.format=sf.numberFormat;hf={floor:it,ceil:it};n.ascending=gt;fr=cf(gt);n.bisectLeft=fr.left;n.bisect=n.bisectRight=fr.right;n.bisector=function(n){return cf(n.length===1?function(t,i){return gt(n(t),i)}:n)};n.scale.linear=function(){return lf([0,1],[0,1],tt,!1)};af={s:1,g:1,p:1,r:1,e:1};n.max=function(n,t){var r=-1,f=n.length,u,i;if(arguments.length===1){while(++r<f)if((i=n[r])!=null&&i>=i){u=i;break}while(++r<f)(i=n[r])!=null&&i>u&&(u=i)}else{while(++r<f)if((i=t.call(n,n[r],r))!=null&&i>=i){u=i;break}while(++r<f)(i=t.call(n,n[r],r))!=null&&i>u&&(u=i)}return u};n.min=function(n,t){var r=-1,f=n.length,u,i;if(arguments.length===1){while(++r<f)if((i=n[r])!=null&&i>=i){u=i;break}while(++r<f)(i=n[r])!=null&&u>i&&(u=i)}else{while(++r<f)if((i=t.call(n,n[r],r))!=null&&i>=i){u=i;break}while(++r<f)(i=t.call(n,n[r],r))!=null&&u>i&&(u=i)}return u};var vf=[].slice,ti=function(n){return vf.call(n)},d=this.document;ii={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var i in t)n[i]=t[i]};sr=["webkit","ms","moz","Moz","o","O"];var hr=function(n,t){return t.querySelector(n)},cr=function(n,t){return t.querySelectorAll(n)},ri=function(n,t){var i=n.matches||n[yf(n,"matchesSelector")];return ri=function(n,t){return i.call(n,t)},ri(n,t)};typeof Sizzle=="function"&&(hr=function(n,t){return Sizzle(n,t)[0]||null},cr=Sizzle,ri=Sizzle.matchesSelector);n.selection=function(){return n.select(d.documentElement)};t=n.selection.prototype=[];t.select=function(n){var o=[],i,f,e,t,r,s,u,h;for(n=lr(n),r=-1,s=this.length;++r<s;)for(o.push(i=[]),i.parentNode=(e=this[r]).parentNode,u=-1,h=e.length;++u<h;)(t=e[u])?(i.push(f=n.call(t,t.__data__,u,r)),f&&"__data__"in t&&(f.__data__=t.__data__)):i.push(null);return g(o)};t.selectAll=function(n){var u=[],f,t,i,e;for(n=pf(n),i=-1,e=this.length;++i<e;)for(var o=this[i],r=-1,s=o.length;++r<s;)(t=o[r])&&(u.push(f=ti(n.call(t,t.__data__,r,i))),f.parentNode=t);return g(u)};ui={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};n.ns={prefix:ui,qualify:function(n){var t=n.indexOf(":"),i=n;return t>=0&&(i=n.slice(0,t),n=n.slice(t+1)),ui.hasOwnProperty(i)?{space:ui[i],local:n}:n}};t.attr=function(t,i){if(arguments.length<2){if(typeof t=="string"){var r=this.node();return t=n.ns.qualify(t),t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}for(i in t)this.each(wf(i,t[i]));return this}return this.each(wf(t,i))};t.classed=function(n,t){if(arguments.length<2){if(typeof n=="string"){var r=this.node(),u=(n=df(n)).length,i=-1;if(t=r.classList){while(++i<u)if(!t.contains(n[i]))return!1}else for(t=r.getAttribute("class");++i<u;)if(!kf(n[i]).test(t))return!1;return!0}for(t in n)this.each(gf(t,n[t]));return this}return this.each(gf(n,t))};t.style=function(n,t,i){var r=arguments.length,u;if(r<3){if(typeof n!="string"){r<2&&(t="");for(i in n)this.each(ne(i,n[i],t));return this}if(r<2)return u=this.node(),or(u).getComputedStyle(u,null).getPropertyValue(n);i=""}return this.each(ne(n,t,i))};t.property=function(n,t){if(arguments.length<2){if(typeof n=="string")return this.node()[n];for(t in n)this.each(te(t,n[t]));return this}return this.each(te(n,t))};t.text=function(n){return arguments.length?this.each(typeof n=="function"?function(){var t=n.apply(this,arguments);this.textContent=t==null?"":t}:n==null?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent};t.html=function(n){return arguments.length?this.each(typeof n=="function"?function(){var t=n.apply(this,arguments);this.innerHTML=t==null?"":t}:n==null?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML};t.append=function(n){return n=ie(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})};t.insert=function(n,t){return n=ie(n),t=lr(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments)||null)})};t.remove=function(){return this.each(bs)};n.set=function(n){var i=new re,t,r;if(n)for(t=0,r=n.length;t<r;++t)i.add(n[t]);return i};gr(re,{has:tu,add:function(n){return this._[rt(n+="")]=!0,n},remove:iu,values:ru,size:uu,empty:fu,forEach:function(n){for(var t in this._)n.call(this,lt(t))}});t.data=function(n,t){function o(n,i){var r,e=n.length,a=i.length,b=Math.min(e,a),v=new Array(a),o=new Array(a),y=new Array(e),u,c,l,w,p;if(t){for(l=new k,w=new Array(e),r=-1;++r<e;)l.has(p=t.call(u=n[r],u.__data__,r))?y[r]=u:l.set(p,u),w[r]=p;for(r=-1;++r<a;)(u=l.get(p=t.call(i,c=i[r],r)))?u!==!0&&(v[r]=u,u.__data__=c):o[r]=ar(c),l.set(p,!0);for(r=-1;++r<e;)l.get(w[r])!==!0&&(y[r]=n[r])}else{for(r=-1;++r<b;)u=n[r],c=i[r],u?(u.__data__=c,v[r]=u):o[r]=ar(c);for(;r<a;++r)o[r]=ar(i[r]);for(;r<e;++r)y[r]=n[r]}o.update=v;o.parentNode=v.parentNode=y.parentNode=n.parentNode;s.push(o);f.push(v);h.push(y)}var i=-1,u=this.length,r,e;if(!arguments.length){for(n=new Array(u=(r=this[0]).length);++i<u;)(e=r[i])&&(n[i]=e.__data__);return n}var s=se([]),f=g([]),h=g([]);if(typeof n=="function")while(++i<u)o(r=this[i],n.call(r,r.parentNode.__data__,i));else while(++i<u)o(r=this[i],n);return f.enter=function(){return s},f.exit=function(){return h},f};t.datum=function(n){return arguments.length?this.property("__data__",n):this.property("__data__")};t.filter=function(n){var e=[],u,f,r,t,o,i,s;for(typeof n!="function"&&(n=ue(n)),t=0,o=this.length;t<o;t++)for(e.push(u=[]),u.parentNode=(f=this[t]).parentNode,i=0,s=f.length;i<s;i++)(r=f[i])&&n.call(r,r.__data__,i,t)&&u.push(r);return g(e)};t.order=function(){for(var i=-1,f=this.length;++i<f;)for(var r=this[i],u=r.length-1,n=r[u],t;--u>=0;)(t=r[u])&&(n&&n!==t.nextSibling&&n.parentNode.insertBefore(t,n),n=t);return this};t.sort=function(n){n=ks.apply(this,arguments);for(var t=-1,i=this.length;++t<i;)this[t].sort(n);return this.order()};n.dispatch=function(){for(var n=new vr,t=-1,i=arguments.length;++t<i;)n[arguments[t]]=fe(n);return n};vr.prototype.on=function(n,t){var r=n.indexOf("."),i="";if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n)return arguments.length<2?this[n].on(i):this[n].on(i,t);if(arguments.length===2){if(t==null)for(n in this)if(this.hasOwnProperty(n))this[n].on(i,null);return this}};n.event=null;t.on=function(n,t,i){var r=arguments.length;if(r<3){if(typeof n!="string"){r<2&&(t=!1);for(i in n)this.each(ee(i,n[i],t));return this}if(r<2)return(r=this.node()["__on"+n])&&r._;i=!1}return this.each(ee(n,t,i))};fi=n.map({mouseenter:"mouseover",mouseleave:"mouseout"});d&&fi.forEach(function(n){"on"+n in d&&fi.remove(n)});t.each=function(n){return w(this,function(t,i,r){n.call(t,t.__data__,i,r)})};t.call=function(n){var t=ti(arguments);return n.apply(t[0]=this,t),this};t.empty=function(){return!this.node()};t.node=function(){for(var i,n=0,r=this.length;n<r;n++)for(var u=this[n],t=0,f=u.length;t<f;t++)if(i=u[t],i)return i;return null};t.size=function(){var n=0;return w(this,function(){++n}),n};a=[];n.selection.enter=se;n.selection.enter.prototype=a;a.append=t.append;a.empty=t.empty;a.node=t.node;a.call=t.call;a.size=t.size;a.select=function(n){for(var i,h,e=[],r,o,s,t,u,f=-1,c=this.length;++f<c;)for(s=(t=this[f]).update,e.push(r=[]),r.parentNode=t.parentNode,i=-1,h=t.length;++i<h;)(u=t[i])?(r.push(s[i]=o=n.call(t.parentNode,u.__data__,i,f)),o.__data__=u.__data__):r.push(null);return g(e)};a.insert=function(n,i){return arguments.length<2&&(i=nh(this)),t.insert.call(this,n,i)};n.select=function(n){var t;return typeof n=="string"?(t=[hr(n,d)],t.parentNode=d.documentElement):(t=[n],t.parentNode=ps(n)),g([t])};n.selectAll=function(n){var t;return typeof n=="string"?(t=ti(cr(n,d)),t.parentNode=d.documentElement):(t=n,t.parentNode=null),g([t])};n.svg={};yr=this[yf(this,"requestAnimationFrame")]||function(n){setTimeout(n,17)};n.timer=function(n,t,i){var u=arguments.length,f,r;u<2&&(t=0);u<3&&(i=Date.now());f=i+t;r={c:n,t:f,f:!1,n:null};oi?oi.n=r:ei=r;oi=r;si||(hi=clearTimeout(hi),si=1,yr(pr))};n.timer.flush=function(){he();ce()};t.transition=function(n){for(var r=ht||++wr,u=kr(n),f=[],e,t,h=ci||{time:Date.now(),ease:hh,delay:0,duration:250},o=-1,c=this.length;++o<c;){f.push(e=[]);for(var s=this[o],i=-1,l=s.length;++i<l;)(t=s[i])&&li(t,i,u,r,h),e.push(t)}return st(f,u,r)};t.interrupt=function(n){return this.each(n==null?le:ae(kr(n)))};le=ae(kr());u=[];wr=0;u.call=t.call;u.empty=t.empty;u.node=t.node;u.size=t.size;n.transition=function(t,i){return t&&t.transition?ht?t.transition(i):t:n.selection().transition(t)};n.transition.prototype=u;u.select=function(n){var f=this.id,e=this.namespace,s=[],o,i,t,r,h;for(n=lr(n),r=-1,h=this.length;++r<h;){s.push(o=[]);for(var c=this[r],u=-1,l=c.length;++u<l;)(t=c[u])&&(i=n.call(t,t.__data__,u,r))?("__data__"in t&&(i.__data__=t.__data__),li(i,u,e,f,t[e][f]),o.push(i)):o.push(null)}return st(s,e,f)};u.selectAll=function(n){var u=this.id,f=this.namespace,h=[],c,e,t,o,l,i,a,r,y;for(n=pf(n),i=-1,a=this.length;++i<a;)for(var v=this[i],s=-1,p=v.length;++s<p;)if(t=v[s])for(l=t[f][u],e=n.call(t,t.__data__,s,i),h.push(c=[]),r=-1,y=e.length;++r<y;)(o=e[r])&&li(o,r,f,u,l),c.push(o);return st(h,f,u)};u.filter=function(n){var u=[],f,e,i,t,o;for(typeof n!="function"&&(n=ue(n)),t=0,o=this.length;t<o;t++){u.push(f=[]);for(var e=this[t],r=0,s=e.length;r<s;r++)(i=e[r])&&n.call(i,i.__data__,r,t)&&f.push(i)}return st(u,this.namespace,this.id)};n.transform=function(t){var i=d.createElementNS(n.ns.prefix.svg,"g");return(n.transform=function(n){if(n!=null){i.setAttribute("transform",n);var t=i.transform.baseVal.consolidate()}return new ve(t?t.matrix:we)})(t)};ve.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};we={a:1,b:0,c:0,d:1,e:0,f:0};n.interpolateTransform=be;u.tween=function(n,t){var i=this.id,r=this.namespace;return arguments.length<2?this.node()[r][i].tween.get(n):w(this,t==null?function(t){t[r][i].tween.remove(n)}:function(u){u[r][i].tween.set(n,t)})};u.attr=function(t,i){function f(){this.removeAttribute(r)}function e(){this.removeAttributeNS(r.space,r.local)}function o(n){return n==null?f:(n+="",function(){var t=this.getAttribute(r),i;return t!==n&&(i=u(t,n),function(n){this.setAttribute(r,i(n))})})}function s(n){return n==null?e:(n+="",function(){var t=this.getAttributeNS(r.space,r.local),i;return t!==n&&(i=u(t,n),function(n){this.setAttributeNS(r.space,r.local,i(n))})})}if(arguments.length<2){for(i in t)this.attr(i,t[i]);return this}var u=t=="transform"?be:tt,r=n.ns.qualify(t);return br(this,"attr."+t,i,r.local?s:o)};u.attrTween=function(t,i){function u(n,t){var u=i.call(this,n,t,this.getAttribute(r));return u&&function(n){this.setAttribute(r,u(n))}}function f(n,t){var u=i.call(this,n,t,this.getAttributeNS(r.space,r.local));return u&&function(n){this.setAttributeNS(r.space,r.local,u(n))}}var r=n.ns.qualify(t);return this.tween("attr."+t,r.local?f:u)};u.style=function(n,t,i){function u(){this.style.removeProperty(n)}function f(t){return t==null?u:(t+="",function(){var r=or(this).getComputedStyle(this,null).getPropertyValue(n),u;return r!==t&&(u=tt(r,t),function(t){this.style.setProperty(n,u(t),i)})})}var r=arguments.length;if(r<3){if(typeof n!="string"){r<2&&(t="");for(i in n)this.style(i,n[i],t);return this}i=""}return br(this,"style."+n,t,f)};u.styleTween=function(n,t,i){function r(r,u){var f=t.call(this,r,u,or(this).getComputedStyle(this,null).getPropertyValue(n));return f&&function(t){this.style.setProperty(n,f(t),i)}}return arguments.length<3&&(i=""),this.tween("style."+n,r)};u.text=function(n){return br(this,"text",n,rh)};u.remove=function(){var n=this.namespace;return this.each("end.transition",function(){var t;this[n].count<2&&(t=this.parentNode)&&t.removeChild(this)})};var ke=function(){return it},uh=n.map({linear:ke,poly:ch,quad:function(){return oh},cubic:function(){return sh},sin:function(){return lh},exp:function(){return ah},circle:function(){return vh},elastic:yh,back:ph,bounce:function(){return wh}}),fh=n.map({"in":it,out:de,"in-out":ge,"out-in":function(n){return ge(de(n))}});n.ease=function(n){var t=n.indexOf("-"),i=t>=0?n.slice(0,t):n,r=t>=0?n.slice(t+1):"in";return i=uh.get(i)||ke,r=fh.get(r)||it,eh(r(i.apply(null,vf.call(arguments,1))))};u.ease=function(t){var i=this.id,r=this.namespace;return arguments.length<1?this.node()[r][i].ease:(typeof t!="function"&&(t=n.ease.apply(n,arguments)),w(this,function(n){n[r][i].ease=t}))};u.delay=function(n){var t=this.id,i=this.namespace;return arguments.length<1?this.node()[i][t].delay:w(this,typeof n=="function"?function(r,u,f){r[i][t].delay=+n.call(r,r.__data__,u,f)}:(n=+n,function(r){r[i][t].delay=n}))};u.duration=function(n){var t=this.id,i=this.namespace;return arguments.length<1?this.node()[i][t].duration:w(this,typeof n=="function"?function(r,u,f){r[i][t].duration=Math.max(1,n.call(r,r.__data__,u,f))}:(n=Math.max(1,n),function(r){r[i][t].duration=n}))};u.each=function(t,i){var r=this.id,u=this.namespace,f,e;if(arguments.length<2){f=ci;e=ht;try{ht=r;w(this,function(n,i,f){ci=n[u][r];t.call(n,n.__data__,i,f)})}finally{ci=f;ht=e}}else w(this,function(f){var e=f[u][r];(e.event||(e.event=n.dispatch("start","end","interrupt"))).on(t,i)});return this};u.transition=function(){for(var h=this.id,f=++wr,r=this.namespace,e=[],o,s,t,n,u=0,c=this.length;u<c;u++){e.push(o=[]);for(var s=this[u],i=0,l=s.length;i<l;i++)(t=s[i])&&(n=t[r][h],li(t,i,r,f,{time:n.time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration})),o.push(t)}return st(e,r,f)};n.svg.axis=function(){function t(t){t.each(function(){var tt=n.select(this),l=this.__chart__||f,t=this.__chart__=f.copy(),ht=o==null?t.ticks?t.ticks.apply(t,e):t.domain():o,ct=s==null?t.tickFormat?t.tickFormat.apply(t,e):it:s,y=tt.selectAll(".tick").data(ht,t),a=y.enter().insert("g",".domain").attr("class","tick").style("opacity",ut),lt=n.transition(y.exit()).style("opacity",ut).remove(),k=n.transition(y.order()).style("opacity",1),rt=Math.max(i,0)+h,v,p=io(t),ft=tt.selectAll(".domain").data([0]),et=(ft.enter().append("path").attr("class","domain"),n.transition(ft)),nt,st;a.append("line");a.append("text");var at=a.select("line"),vt=k.select("line"),ot=y.select("text").text(ct),yt=a.select("text"),pt=k.select("text"),c=u==="top"||u==="left"?-1:1,d,g,w,b;u==="bottom"||u==="top"?(v=bh,d="x",w="y",g="x2",b="y2",ot.attr("dy",c<0?"0em":".71em").style("text-anchor","middle"),et.attr("d","M"+p[0]+","+c*r+"V0H"+p[1]+"V"+c*r)):(v=kh,d="y",w="x",g="y2",b="x2",ot.attr("dy",".32em").style("text-anchor",c<0?"end":"start"),et.attr("d","M"+c*r+","+p[0]+"H0V"+p[1]+"H"+c*r));at.attr(b,c*i);yt.attr(w,c*rt);vt.attr(g,0).attr(b,c*i);pt.attr(d,0).attr(w,c*rt);t.rangeBand?(nt=t,st=nt.rangeBand()/2,l=t=function(n){return nt(n)+st}):l.rangeBand?l=t:lt.call(v,t,l);a.call(v,l,t);k.call(v,t,t)})}var f=n.scale.linear(),u=dr,i=6,r=6,h=3,e=[10],o=null,s;return t.scale=function(n){return arguments.length?(f=n,t):f},t.orient=function(n){return arguments.length?(u=n in no?n+"":dr,t):u},t.ticks=function(){return arguments.length?(e=arguments,t):e},t.tickValues=function(n){return arguments.length?(o=n,t):o},t.tickFormat=function(n){return arguments.length?(s=n,t):s},t.tickSize=function(n){var u=arguments.length;return u?(i=+n,r=+arguments[u-1],t):i},t.innerTickSize=function(n){return arguments.length?(i=+n,t):i},t.outerTickSize=function(n){return arguments.length?(r=+n,t):r},t.tickPadding=function(n){return arguments.length?(h=+n,t):h},t.tickSubdivide=function(){return arguments.length&&t},t};dr="bottom";no={top:1,right:1,bottom:1,left:1};typeof define=="function"&&define.amd?define(n):typeof module=="object"&&module.exports&&(module.exports=n);this.d3=n}(),function(n,t,i,r){n.widget("millennium.mnFinancesManagerChart",{options:{currency:"PLN",currencyDecimalSeparator:".",currencyGroupSeparator:",",svgClassSelector:null,width:null,height:null,showGridLines:!0},_dataSource:null,_svgSelector:null,_svg:null,_margin:null,_width:null,_height:null,_canvas:null,_chartGroup:null,_xAxisGroup:null,_yAxisGroup:null,_yAxisTextWidth:null,_axisLegendHeight:null,_tickPaddingY:null,_xScale:null,_yScale:null,_create:function(){var i=this,t;this._margin=20;this._yAxisTextWidth=40;this._axisLegendHeight=20;this._tickPaddingY=10;this.window.resize(function(){clearTimeout(t);t=setTimeout(function(){n(i._svgSelector).mnFinancesManagerChart("bind")},200)})},_setupStack:function(){for(var i,n,f=this._dataSource.length,r=0,u=0,t=0;t<f;t++)for(r=0,u=0,i=0;i<this._dataSource[t].length;i++)n=this._dataSource[t][i],n.size=Math.abs(n.value),n.value<0?(n.y0=u,u-=n.size):(r+=n.size,n.y0=r)},_updateScales:function(){var t=.8-this._dataSource.length*.05,n;this._xScale=d3.scale.ordinal().domain(this._dataSource.map(function(n){return n[0].group})).rangeRoundBands([this._yAxisTextWidth,this._width+10],t);n=d3.merge(this._dataSource);this._yScale=d3.scale.linear().domain([d3.min(n,function(n){return n.y0-n.size}),d3.max(n,function(n){return n.y0})]).range([this._height-this._margin-this._axisLegendHeight,this._margin]).nice()},_xAxisCalculate:function(){return d3.svg.axis().scale(this._xScale).orient("bottom").tickSize(6,0).tickPadding(this._height-this._yScale(0)-this._axisLegendHeight-this._margin)},_yAxisCalculate:function(){var t=this.options.showGridLines?-(this._width-this._tickPaddingY-this._yAxisTextWidth):0,n=this;return d3.svg.axis().scale(this._yScale).tickFormat(function(t){return mnUtils.formatAmount(t,0,n.options.currencyDecimalSeparator,n.options.currencyGroupSeparator)}).tickSize(t,1).tickPadding(this._tickPaddingY).orient("left")},_renderXaxis:function(){this._xAxisGroup.attr("transform","translate ("+[0,this._yScale(0)]+")").call(this._xAxisCalculate())},_renderYaxis:function(){this._yAxisGroup.attr("transform","translate ("+[this._yAxisTextWidth+this._tickPaddingY,0]+")").call(this._yAxisCalculate())},_updateAxis:function(){this._renderYaxis();var t=0;n(this._svg.selectAll("text")[0]).each(function(i,r){var u=n('<span class="axisLabelWidth" style="display: none;"/>').append(r.textContent);n("#FinancesManagerChartContainer").append(u);u.width()>t&&(t=u.width());u.remove()});this._yAxisTextWidth=t;this._updateScales();this._renderYaxis();this._renderXaxis()},_updateBars:function(){var i=this._chartGroup.selectAll(".barGroup").data(this._dataSource),t,n;i.enter().append("svg:g").attr({"class":"barGroup"});t=i.selectAll(".bar").data(function(n){return n});n=this;t.enter().append("svg:rect").attr({"class":function(n){return"bar "+n.category},width:n._xScale.rangeBand(),x:function(t){return n._xScale(t.group)},y:function(t){var i=n._yScale(t.y0);return t.category==="Spending"&&(i+=1),i},height:function(t){var i=(n._yScale(0)-n._yScale(t.size))/2;return t.category==="Income"&&i>1&&(i-=1),i}}).on("mouseenter",function(t){var i=n._updateTooltip(this,t);i.show()}).on("mouseleave",function(t){var i=n._getTooltip(t);i.removeClass(t.category);i.hide()});t.transition().attr({width:n._xScale.rangeBand(),x:function(t){return n._xScale(t.group)},y:function(t){var i=n._yScale(t.y0);return t.category==="Spending"&&(i+=1),i},height:function(t){var i=n._yScale(0)-n._yScale(t.size);return t.category==="Income"&&i>1&&(i-=1),i}})},_updateTooltip:function(t,i){var o=5,r=this._getTooltip(i);r.find(".Content .Amount").html(mnUtils.formatAmount(i.value,2,this.options.currencyDecimalSeparator,this.options.currencyGroupSeparator));r.find(".Content .Currency").html(this.options.currency);r.find(".Content .Description").html(i.toolText);var f=r.find(".Tail"),e=0,s={width:parseInt(n(t).attr("width"),10),height:parseInt(n(t).attr("height"),10)},h=n(t).offset(),c=h.left-r.innerWidth()/2+s.width/2,u=h.top;return i.category==="Income"&&(u-=r.innerHeight(),u-=f.innerHeight(),u-=o,e=r.innerHeight()),i.category==="Spending"&&(u+=s.height,u+=f.innerHeight(),u+=o,e=-f.innerHeight()),r.css("left",c+"px"),r.css("top",u+"px"),f.css("left",r.innerWidth()/2-f.width()/2-1+"px"),f.css("top",e+"px"),r},_getTooltip:function(t){var i=n(".FinanceManagerChartTooltip"),u,f;if(i.length===0){u=n("<div/>").attr("class","Tail");f=n("<div/>").attr("class","Icon");u.append(f);var r=n("<div/>").attr("class","Content"),e=n("<div/>").attr("class","Description"),o=n("<span/>").attr("class","Amount"),s=n("<span/>").attr("class","Currency");r.append(e);r.append(o);r.append(s);i=n("<div />").attr("class","FinanceManagerChartTooltip").append(u).append(r);n("body").append(i)}return i.addClass(t.category),i},bind:function(n){this.options.svgClassSelector!==null&&(this._svgSelector="."+this.options.svgClassSelector,n!==null&&n!==r&&(this._dataSource=n),this._width=this.options.width===null?this.element.parent().width():this.options.width,this._height=this.options.height===null?this.element.parent().height():this.options.height,this.element.empty(),this._svg=d3.select(this._svgSelector).attr({width:this._width,height:this._height}),this._xAxisGroup=this._svg.append("g").attr("class","axis x"),this._yAxisGroup=this._svg.append("g").attr("class","axis y"),this._chartGroup=this._svg.append("g"),this._setupStack(),this._updateScales(),this._updateAxis(),this._updateBars())}})}(jQuery),function(n,t,i,r,u){n.widget("millenet.Retail_HomePage_List",{options:{rootUrl:null,baseUrl:null,defaultFinancesPeriod:"0",missingCardImage:null,tokenUpTo:null,tokenUpToNew:null,tokenCurrentMonth:null,tokenPastMonth:null,pendingCloseString:null,financesResultData:null,financesResultDataCount:null,juniorExpiryDateVisible:!1},_antiforgeryToken:null,_scrolled:!1,_lastScroll:100,_juniorStrings:["JuniorAccountUnder13","JuniorAccountOver13"],_getCreateOptions:function(){var n={},c=this.element.attr("data-rootUrl"),t,i,u,f,e,o,s,h;return c!==r&&(n.rootUrl=c),t=this.element.attr("data-baseUrl"),t!==r&&(n.baseUrl=t),i=this.element.attr("data-missingCardImage"),i!==r&&(n.missingCardImage=i),u=this.element.attr("data-tokenUpTo"),u!==r&&(n.tokenUpTo=u),f=this.element.attr("data-tokenUpToNew"),f!==r&&(n.tokenUpToNew=f),e=this.element.attr("data-tokenCurrentMonth"),e!==r&&(n.tokenCurrentMonth=e),o=this.element.attr("data-tokenPastMonth"),o!==r&&(n.tokenPastMonth=o),s=this.element.attr("data-pendingCloseString"),s!==r&&(n.pendingCloseString=s),h=this.element.attr("data-juniorexpirydatevisible"),h!==r&&(n.juniorExpiryDateVisible=h),n},_create:function(){var t=this,i;this._antiforgeryToken=n('input[name="__RequestVerificationToken"]').val();this._initializeLoaders();this._initializeAdvertisement();this._loadFollowUpData();i=n("#IsFinanceManagerPermanentVisible").val()==="True"?!0:!1;i&&this._loadFinancesData();this.window.resize(function(){t._resizeCards();t._resizeGoals();t._checkScrollLastPanels();t._resizeSetNewTextForInsurance()});this.window.scroll(function(){if(!t._scrolled&&!t._isSessionOut()){var i=n(this).scrollTop();i>t._lastScroll&&(t._scrolled=!0,t._loadLastPanels(),t._lastScroll=i)}});this.window.load(function(){t._checkScrollLastPanels()})},_checkScrollLastPanels:function(){if(n(t).height()+100>=n("body").height()){var i=this;i._scrolled||i._isSessionOut()||(i._scrolled=!0,i._loadLastPanels())}},_loadLastPanels:function(){var t=this,i=n("#IsFinanceManagerPermanentVisible").val()==="True"?!0:!1,r=n("#IsPlannerPermanentVisible").val()==="True"?!0:!1;i||(n(".TemporaryFinances").show(),t._loadFinancesData());r||(n(".TemporaryPlanner").show(),BindPlaner())},_initializeLoaders:function(){var n=this;setTimeout(function(){n.element.find("#AccountsLoading").mnLoading("start");n.element.find("#AccountsSavingLoading").mnLoading("start");n.element.find("#CardsLoading").mnLoading("start");n.element.find("#InsurancesLoading").mnLoading("start")},300)},_initializeAdvertisement:function(){var i=this;i.element.find("#AdvertisementModalButton").click(function(){var i=n("#AdvertisementModal");i!==null&&i!==r&&(i.mnModalPanel(),i.mnModalPanel("close"));n(t).scrollTop(0)})},_loadFollowUpData:function(){var i=this,t=n("#SidebarFollowUpContainer");if(t.length>0){var r=this.options.baseUrl+"/FollowUp",f={__RequestVerificationToken:this._antiforgeryToken},e=function(n){t.empty();i._bindFollowUpData(n);t.fadeIn(100);u.run(t)};n.post(r,f,e)}},_bindFollowUpData:function(t){var nt=n("#SidebarFollowUpContainer"),b=n("#SidebarFollowUpTemplateContainer").find(".SidebarCampaignContainer"),u,i,e,o,s,v,y,p,h,c,f,l,a,k,w,d,g;t.FollowUpCampaign!==r&&t.FollowUpCampaign!==null&&(u=b.clone(),i=t.FollowUpCampaign,u.find(".CampaignImageContainer").css({"background-image":'url("'+i.ImagePath+'")',"background-size":"cover"}),i.ProposedAmount!==-1?(e=u.find('[data-template="ProposedAmount"]'),e.mnText(),e.mnText("text",i.ProposedAmount),e.removeAttr("data-template"),o=u.find('[data-template="ProposedCurrency"]'),o.mnText(),o.mnText("text",i.CurrencyName),o.removeAttr("data-template")):u.find(".CampaignAmountContainer").remove(),i.AdditionalDescription!==r&&i.AdditionalDescription!==null&&i.AdditionalDescription!==""&&(s=u.find('[data-template="UpTo"]'),s.mnText(),s.mnText("text",i.AdditionalDescription),s.removeAttr("data-template"),u.find(".Amount2").remove(),u.find(".Amount3").remove()),i.MoreInfoButtonDescription!==r&&i.MoreInfoButtonDescription!==null&&i.MoreInfoButtonDescription!==""&&(v=u.find('[data-template="MoreInfo"]'),v.mnButton(),v.mnButton("text",i.MoreInfoButtonDescription)),i.OfferValidUntilDescription!==r&&i.OfferValidUntilDescription!==null&&i.OfferValidUntilDescription!==""&&(y=u.find('[data-template="OfferValidUntil"]'),y.mnText(),y.mnText("text",i.OfferValidUntilDescription)),this.options.juniorExpiryDateVisible==="false"&&(t.FollowUpCampaign.ProductType===this._juniorStrings[0]||t.FollowUpCampaign.ProductType===this._juniorStrings[1])&&u.find('[data-template="OfferValidUntil"]').remove(),p=u.find('[data-template="ProductName"]'),p.text(i.ProductName),p.removeAttr("data-template"),h=u.find('[data-template="RRSO"]'),i.RRSO!==null&&i.RRSO!==""?(h.text(i.RRSO),h.removeAttr("data-template")):h.remove(),c=u.find('[data-template="ExpiryDate"]'),(t.FollowUpCampaign.ProductType!==this._juniorStrings[0]&&t.FollowUpCampaign.ProductType!==this._juniorStrings[1]||this.options.juniorExpiryDateVisible==="true")&&(c.mnText(),c.mnText("text",i.ExpiryDate)),c.removeAttr("data-template"),f=u.find('[data-template="MoreInfo"]'),i.AccountNumber!==""&&i.CurrencyCode!==""?f.attr("href",i.ProductLink+"/Params/"+i.AccountNumber+"|"+i.CurrencyCode):f.attr("href",i.ProductLink),f.removeAttr("data-template"),i.OpenProductLinkInNewPage===!0?f.attr("target","_blank"):f.removeAttr("target"),l=u.find('[data-template="Increase"]'),l.attr("href",i.ProductLink),l.removeAttr("data-template"),a=u.find('[data-template="LegalNote"]'),k=u.find("[id=CardsSmallLegalNoteDescription]"),i.LegalNoteLabel!==null&&i.LegalNoteLabel!==""?(a.text(i.LegalNoteLabel),a.removeAttr("data-template"),w=u.find('[class="Scrollable"]'),w.append("<p>"+i.LegalNoteDescription+"<\/p>"),w.removeAttr("data-template")):(k.hide(),a.hide()),i.Increase?f.remove():l.remove(),u.show(),u.appendTo(nt),d=this.options.baseUrl+"/LogCampaignsShown",g={__RequestVerificationToken:this._antiforgeryToken,container:"HomePage_LeftBanner"},n.post(d,g));b.remove()},_loadFinancesData:function(t){var f=this,e=this.element.find("#ListFinancesManagerContainer"),i;if(t===r&&(t=5),e.length>0){i=this.element.find("#FinancesManagerPlanerLoading");i.mnLoading();i.mnLoading("start");var o=this.options.baseUrl+"/Finances",s={__RequestVerificationToken:this._antiforgeryToken},h=function(n){f._bindFinancesData(n,t);u.run(e);i.mnLoading("stop")},c=function(){f.element.find(".StaticPanelRight").hide();f.element.find(".StaticPanelLeft").hide();n(".Retail_HomePage_List").find("#PlanerLoading").mnLoading("stop")};n.post(o,s,h).fail(c)}},_bindFinancesData:function(t,i){var r=this,o,f,e,u;if(t.isEmpty&&(n("#FinancesManagerFilter").mnDropDownList("selectedValue")==="5"||n("#FinancesManagerFilter").mnDropDownList("selectedValue")===null)){r.element.find("#FinancesManagerLoadingContainer").hide();r.element.find(".ListFinancesManagerContainer").hide();r.element.find(".FinancesInactive").show();return}for(o=parseInt(i,10)+1;t.data.categories[0].category.length>o;)for(t.data.categories[0].category.shift(),f=0;f<t.data.dataSet.length;f++)t.data.dataSet[f].data.shift(),t.dataCount=t.data.dataSet[f].data.length;if(r.options.financesResultData=t.data,r.options.financesResultDataCount=t.dataCount,n("#FinancesManagerFilter").mnDropDownList("selectedValue")===null){for(e=[],u=0;u<t.dataCount;u++)e[u]=u===0?{Value:u,Text:r.options.tokenCurrentMonth}:u===1?{Value:u,Text:r.options.tokenPastMonth}:{Value:u,Text:mapMonthsToken(u)};r.element.find("#FinancesManagerFilter").mnDropDownList("bindListItems",e);r.element.find("#FinancesManagerFilter").mnDropDownList("selectedValue",t.dataCount-1)}r._setFinanceData(t.data.categories,t.data.dataSet,t.dataCount)},_setFinanceData:function(t,i,r){var u=this,e,f,o;r===0?(e=u.element.find("#FinancesManagerFilter").mnDropDownList("selectedValue"),e==="5"?(u.element.find("#FinancesManagerInfoContainer").show(),u.element.find("#FinancesManagerLoadingContainer").hide(),u.element.find(".FinancesNoOperations").hide()):(u.element.find(".FinancesNoOperations").show(),u.element.find("#FinancesManagerChartContainer").hide())):r===1?i[0].data[0].value===0&&i[1].data[0].value===0?(u.element.find(".FinancesNoOperations").show(),u.element.find("#FinancesManagerChartContainer").hide()):(u.element.find("#FinancesManagerDataContainer").show(),u.element.find("#FinancesManagerInfoContainer").hide(),u.element.find("#FinancesManagerLoadingContainer").hide(),u.element.find(".FinancesNoOperations").hide(),u.element.find("#FinancesManagerChartContainer").addClass("col-md-8"),u.element.find("#FinancesManagerChartContainer").show(),u.element.find("#FinancesManagerSummaryContainer").addClass("col-md-4"),u.element.find("#FinancesManagerSummaryContainer").show()):r>1&&(u.element.find("#FinancesManagerDataContainer").show(),u.element.find("#FinancesManagerInfoContainer").hide(),u.element.find("#FinancesManagerLoadingContainer").hide(),u.element.find(".FinancesNoOperations").hide(),u.element.find("#FinancesManagerChartContainer").removeClass("col-md-8"),u.element.find("#FinancesManagerChartContainer").show(),u.element.find("#FinancesManagerSummaryContainer").removeClass("col-md-4"),u.element.find("#FinancesManagerSummaryContainer").hide());f=Array();n(i[0].data).each(function(n,t){var r=Array(),e=t.value,u;r.push({value:e,name:"Inc",category:"Income"});u=i[1].data[n].value;r.push({value:u,name:"Spe",category:"Spending"});f.push(r)});n(t[0].category).each(function(n,t){f[n][0].name=f[n][0].name+t.label;f[n][1].name=f[n][1].name+t.label;f[n][0].group=t.label;f[n][1].group=t.label;f[n][0].toolText=t.toolText;f[n][1].toolText=t.toolText});o=u.element.find(".FinancesChart");o.mnFinancesManagerChart("bind",f);u.element.find("#FinancesManagerLoadingContainer").hide()},onFinancesFilterChanged:function(){var t=this,u,i;if(t.element.find("#FinancesManagerDataContainer").is(":visible")&&t.element.find("#FinancesManagerFilter").mnDropDownList("selectedValue")!==null)if(u=this.element.find("#FinancesManagerFilter").mnDropDownList("selectedValue"),t.options.financesResultData&&t.options.financesResultDataCount){for(var f=n.extend(!0,[],t.options.financesResultData.categories),r=n.extend(!0,[],t.options.financesResultData.dataSet),e=t.options.financesResultDataCount,o=parseInt(u,10)+1;f[0].category.length>o;)for(f[0].category.shift(),i=0;i<r.length;i++)r[i].data.shift(),e=r[i].data.length;t._setFinanceData(f,r,e)}else t._loadFinancesData(u)},redirectToForeignTransfer:function(t){var i=n(t).attr("account");n(location).attr("href",this.options.baseUrl+"/RedirectToForeignTransfer?account="+i)},redirectToDomesticTransfer:function(t){var i=n(t).attr("account");n(location).attr("href",this.options.baseUrl+"/RedirectToDomesticTransfer?account="+i)},_resizeCards:function(){var u=this.window.width(),t,i;u<767?(t=n(".ItemDetailsImageCards").closest(".MainPanelItem"),t.each(function(){var t;t=n(this).find(".ItemDetails .ItemDetailsImageCards").next().is("img")?n(this).find(".ItemDetails .ItemDetailsImageCards img"):n(this).find(".ItemDetails .ItemDetailsImageCards a");t!==r&&t!==null&&(t.removeClass(),n(this).find(".InfoContainer .ItemInfoImageCards").append(t))})):(i=n(".ItemInfoImageCards").closest(".MainPanelItem"),i.each(function(){var t;t=n(this).find(".InfoContainer .ItemInfoImageCards").next().is("img")?n(this).find(".InfoContainer .ItemInfoImageCards img"):n(this).find(".InfoContainer .ItemInfoImageCards a");t!==r&&t!==null&&(t.addClass("CardImage ItemDetailsImageCards col-xs-4 col-sm-4 hidden-xs"),n(this).find(".ItemDetails .ItemDetailsImageCards").append(t))}))},_resizeGoals:function(){var r=this.window.width(),t,i;r<767?(t=n(".ItemDetailsImageSaving").closest(".MainPanelItem"),t.each(function(){var t=n(this).find(".ItemDetails .ItemDetailsImageSaving img");t!==null&&n(this).find(".InfoContainer .ItemInfoImageSaving").append(t)})):(i=n(".ItemInfoImageSaving").closest(".MainPanelItem"),i.each(function(){var t=n(this).find(".InfoContainer .ItemInfoImageSaving img");t!==null&&n(this).find(".ItemDetails .ItemDetailsImageSaving").append(t)}))},_resizeSetNewTextForInsurance:function(){var i=this.element.find("#ListInsurancesContainer"),t,u;i.length<=0||(t=i.find(".MainPanelItem"),u=this.window.width(),u<767?t.each(function(){var t=n(this).find(".ItemComands .CarInsurance").attr("data-id");typeof t!=typeof r&&t!==!1?(n(this).find(".ItemDetails .InsuranceExpireDate").text(n(this).find(".ItemDetails .InsuranceExpireDate").attr("data-template-mobileexpiredate")),n(this).find(".ItemDetails .InsuranceExpireDate").addClass("RenewalLink")):(n(this).find(".ItemDetails .InsuranceExpireDate").text(n(this).find(".ItemDetails .InsuranceExpireDate").attr("data-template-normalexpiredate")),n(this).find(".ItemDetails .InsuranceExpireDate").removeClass("RenewalLink"))}):t.each(function(){n(this).find(".ItemDetails .InsuranceExpireDate").text(n(this).find(".ItemDetails .InsuranceExpireDate").attr("data-template-normalexpiredate"));n(this).find(".ItemDetails .InsuranceExpireDate").removeClass("RenewalLink")}))},loadTransaction:function(t,i){n("#canvas").hide();n("#waitMessage").mnLoading().mnLoading("start");n(location).attr("href",this.options.baseUrl+"/RedirectToPlannerTransaction?transactionId="+t+"&transactionType="+i)},_isSessionOut:function(){var t=n("#timeToLiveCounter"),i;if(t&&t.length>0)return i=parseInt(t[0].innerHTML,10)-1,i<=0?!0:!1}})}(jQuery,window,document,undefined,jl);$(window).resize(function(){$(".ToolTipStep").each(function(){$(this).hide()})}),function(n){n.widget("millenet.LoginFinishAuthentication",{options:{eventName:null,cif:null},removeLanguageIcon:function(){n(".culture-container").remove()},triggerScreenView:function(){AddWebTrendsScreenViewLoginAuthentication(this.options.eventName,this.options.cif)},triggerButtonNext:function(){AddWebTrendsButtonNextLoginAuthentication(this.options.eventName,this.options.cif)}})}(jQuery,window,document),function(n){n.widget("millenet.Retail_LoginFinishAuthentication_MobilePhoneMissingNotification",{_create:function(){var n=this;jl.addCallback(function(){n._initialize()})},_initialize:function(){n("#waitMessage").mnLoading("disableCloseBalloons",!0)}})}(jQuery,window,document),function(n){n.widget("millenet.Retail_LoginFinishAuthentication_ExpirationPersonalIdReminder",{_create:function(){var n=this;jl.addCallback(function(){n._initialize()})},_initialize:function(){n("#waitMessage").mnLoading("disableCloseBalloons",!0);var t=n("#expiration-personalId-notification-balloon").find(".CloseButton");n(t).on("click",function(t){t.stopImmediatePropagation();t.preventDefault();n(".left-button").click()})},postExpirationPersonalId:function(){n("form").submit()}})}(jQuery,window,document),function(n){n.widget("millenet.Retail_LoginFinishAuthentication_UpdatePersonalIdReminder",{_create:function(){var n=this;jl.addCallback(function(){n._initialize()})},_initialize:function(){n("#waitMessage").mnLoading("disableCloseBalloons",!0)},doPostAction:function(t){n("#SkipValidations").val(t);n("form").submit()},ChangedExpDateCheckBox:function(){var i=n(".ExpDateCheckBox"),r=i.mnCheckBox("val"),t;r===!0?(n(".ExpDateClass").hide(),t=new Date(9999,11,31),n(".ExpDateClass").mnDate("date",t)):(n(".ExpDateClass").show(),n(".ExpDateClass").mnDate("date",new Date))},PersonalIdValidation:function(){var u,r,o;if(n("#SkipValidations").val()==="true")return!0;if(u=n(".DocumentNumber").mnTextBox("val").toUpperCase(),u.length!==9)return!1;var i={A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:18,J:19,K:20,L:21,M:22,N:23,O:24,P:25,Q:26,R:27,S:28,T:29,U:30,V:31,W:32,X:33,Y:34,Z:35},t=u.toString(),s=!isNaN(t[3])&&!isNaN(t[4])&&!isNaN(t[5])&&!isNaN(t[6])&&!isNaN(t[7])&&!isNaN(t[8]),h=isNaN(t[0])&&i.hasOwnProperty(t[0])&&isNaN(t[1])&&i.hasOwnProperty(t[1])&&isNaN(t[2])&&i.hasOwnProperty(t[2]);if(!s&&!h)return!1;var f=[i[t[0]],i[t[1]],i[t[2]],t[3],t[4],t[5],t[6],t[7],t[8]],c=[7,3,1,9,7,3,1,7,3],e=0;for(r=0;r<f.length;r++)e+=f[r]*c[r];return(o=e%10,o!==0)?!1:!0}});n.validator.addMethod("validpersonalid",function(){return n(".Retail_LoginFinishAuthentication_UpdatePersonalIdReminder").Retail_LoginFinishAuthentication_UpdatePersonalIdReminder("PersonalIdValidation")});n.validator.unobtrusive.adapters.add("validpersonalid",function(n){n.rules.validpersonalid={};n.messages.validpersonalid=n.message})}(jQuery,window,document),function(n){n.widget("millenet.Retail_LoginFinishAuthentication_ChangePasswordOneReminder",{_create:function(){var n=this;jl.addCallback(function(){n._initialize()})},_initialize:function(){n("#waitMessage").mnLoading("disableCloseBalloons",!0)},postPasswordReminder:function(t){var i=t.attr("data-redirect");n("#Redirect").val(i);n("form").submit()}})}(jQuery,window,document),function(n,t,i,r){n.widget("millenet.Retail_LoginPasswordCheckSmsActivation_SmsActivation",{options:{baseUrl:null},_antiforgeryToken:null,_create:function(){var t=this;jl.addCallback(function(){t._initialize()});n(".Wrapper").find(".HorizontalSeparator").remove()},_initialize:function(){var t=this,i;t.options.baseUrl=n("body").mnBasePage("option","baseUrl");t._antiforgeryToken=n("input[name='__RequestVerificationToken']").val();n(".CountriesList").length&&t.prefixUpdate();n(".Password2Digits").length&&(i=n("form :input:visible:enabled:first"),i.data("makefocusonload")!==r&&i.data("makefocusonload")==="false"||i.focus());n(".MNPhoneNumber").length&&t.element.find("form").submit(function(){n(this).valid()&&n(".MNPhoneNumber").find(".Prefix > > input").removeAttr("disabled")})},prefixUpdate:function(){var t=n(".CountriesList").mnDropDownList().mnDropDownList("selectedValue");return t!==r&&n(".MNPhoneNumber").find(".Prefix").each(function(){n(this).mnTextBox("val","+"+t)}),n(".MNPhoneNumber").find(".Prefix").mnTextBox("val")},regenerateSms:function(){n.ajax({type:"POST",url:n("body").mnBasePage("option","baseUrl")+"/RegenerateSms",data:{__RequestVerificationToken:this._antiforgeryToken},success:function(t){n(".LoginPage").Website_LayoutLogin("showLeftSideModal",t.appearance,t.title,t.content,!1)},error:function(n){handleAjaxError(n)}})}});n.validator.addMethod("phonenumberlengthvalidator",function(t){var i=n(".Prefix").find("input").first().val(),u;return i===null||i===r?!0:i==="+48"&&t.length!==9?!1:(u=i+t,u.length<5&&u.length>15)?!1:!0});n.validator.unobtrusive.adapters.add("phonenumberlengthvalidator",function(n){n.rules.phonenumberlengthvalidator={};n.messages.phonenumberlengthvalidator=n.message});n.validator.addMethod("securitydigitsMinimumchallenge",function(t,i,u){var f=n('input[name$="'+u.targetname+'"]'),e=f!==null&&f!==r?f.val():"",o=e.replace(/;/g,"").length;return t.length===o?!0:!1});n.validator.unobtrusive.adapters.add("securitydigitsMinimumchallenge",["targetname"],function(n){n.rules.securitydigitsMinimumchallenge={};n.rules.securitydigitsMinimumchallenge.targetname=n.params.targetname;n.messages.securitydigitsMinimumchallenge=n.message})}(jQuery,window,document),function(n){n.widget("millenet.Retail_Login_ResetPasswordMobileToken",{options:{mobileTokenId:null,signalRUrl:null},_create:function(){var t=this;this.connectSignalR();this._tokenInterval=setInterval(function(){t._tokenHeartbeat()},1e3);this._showErrorImage(n(".MobileTokenDiv input[type=hidden][name=ShowErrorIcon]").val()==="True")},_tokenInterval:null,_tokenHeartbeat:function(){var t,i,r;n("#tokenSecondsCounter").length>0&&(t=parseInt(n("#tokenSecondsCounter")[0].innerHTML,10)-1,n("#tokenSecondsCounter")[0].innerHTML=t,i=this._tokenZeroPad(Math.floor(t/60),2),r=this._tokenZeroPad(t%60,2),n("#tokenCounter")[0].innerHTML=i+":"+r,t<=0&&this._tokenExpire())},_tokenZeroPad:function(n,t){for(n=""+n;n.length<t;)n="0"+n;return n},_tokenExpire:function(){clearInterval(this._tokenInterval);n(".CounterDiv").hide()},connectSignalR:function(){var t=this,r=this.options.mobileTokenId,i=n.hubConnection(),f=i.createHubProxy("extendedSecurityHub"),u=this.options.signalRUrl;f.on("broadcastMessage",function(n){t.digestMessage(n)});i.url=u+"/broadcast";i.qs={token:r};i.start({transport:["webSockets"]}).done(function(){setTimeout(t.ajaxPooling,3e4,u,r,t,3e4)}).fail(function(){t.ajaxPooling(u,r,t,2e3)})},ajaxPooling:function(t,i,r,u){var f=t+"/api/extendedSecurity/check";n.ajax({url:f,data:{token:i},cache:!1,success:function(n){n.exists?r.digestMessage(n.value):setTimeout(r.ajaxPooling,u,t,i,r,u)}})},digestMessage:function(t){t==="expired"?(this.changeScreen(n("#TokenExpired").text(),!1),this._tokenExpire()):t==="canceled"?(this.changeScreen(n("#TokenCanceled").text(),!0),this._tokenExpire()):(n("#TokenOutcome").val(t),n(".SuccessMobileToken").click())},changeScreen:function(t,i){n("#MobileTokenAuthorizationLabel").find("span").text(t);this._showErrorImage(i);i?(n("#MobileTokenAuthorizationLabel").hide(),n("#MobileTokenAuthorizationLabelCanceled").show(),n("#MobileTokenAuthorizationLabelExpired").hide()):(n("#MobileTokenAuthorizationLabel").hide(),n("#MobileTokenAuthorizationLabelCanceled").hide(),n("#MobileTokenAuthorizationLabelExpired").show());n(".MobileTokenInnerDiv ").addClass("MobileTokenError");n(".RegenerateMobileToken").show()},_showErrorImage:function(t){if(!n(".MNPanel.MobileTokenDiv")[0])return!0;t?n(".MobileTokenImageDiv").addClass("ErrorIcon"):n(".MobileTokenImageDiv").removeClass("ErrorIcon")}})}(jQuery,window,document),function(n){n.widget("millenet.Retail_Login_ResetPasswordAuthenticationSms",{_antiforgeryToken:null,_create:function(){var n=this;jl.addCallback(function(){n._initialize()})},_initialize:function(){var t=this;t._antiforgeryToken=n("input[name='__RequestVerificationToken']").val()},regenerateSms:function(t){n(".SmsPassword").each(function(){n(this).mnTextBox().mnTextBox("val","")});var i=n("body").mnBasePage("option","baseUrl")+(t==="True"||t==="true"?"/RegenerateSmsRetrieval":"/RegenerateSmsReset");n.ajax({type:"POST",url:i,data:{__RequestVerificationToken:this._antiforgeryToken},success:function(t){n(".reset-password-final-balloon-security").mnBalloon().mnBalloon("updateNotificationBalloon",t.appearance,t.title,t.content,!1);t.appearance!=="NotificationWarning"&&(n("#reset-password-final-balloon").addClass("ModalLayerTransparent"),n("#reset-password-abandon-proccess-ballon").addClass("ModalLayerTransparent"));setTimeout(function(){n(".reset-password-final-balloon-security").mnModalPanel("show")})},error:function(n){handleAjaxError(n)}})}})}(jQuery,window,document),function(n){n.widget("millenet.Retail_Login_CustomerAuthenticationSms",{_antiforgeryToken:null,_create:function(){var n=this;jl.addCallback(function(){n._initialize()})},_initialize:function(){var t=this;t._antiforgeryToken=n("input[name='__RequestVerificationToken']").val()},regenerateSms:function(t){n(".SmsPassword").each(function(){n(this).mnTextBox().mnTextBox("val","")});var i=t==="True"?n("body").mnBasePage("option","baseUrl")+"/RegenerateSmsPasswordRecovery":n("body").mnBasePage("option","baseUrl")+"/RegenerateSmsSca";n.ajax({type:"POST",url:i,data:{__RequestVerificationToken:this._antiforgeryToken},success:function(t){n(".LoginPage").Website_LayoutLogin("showLeftSideModal",t.appearance,t.title,t.content,!1)},error:function(n){handleAjaxError(n)}})}})}(jQuery,window,document),function(n,t,i){n.widget("millenet.Retail_Login_FirstLoginSteps",{_antiforgeryToken:null,_create:function(){var r=this,t;jl.addCallback(function(){r._initialize()});i.getElementById("PwdMeter")&&(t=n(".NewPassword.ValidateMeter"),t.length&&t.mnTextBox({onkeyup:function(){n(".Retail_Login_FirstLoginThirdStep").Common_Security_PasswordMeter("validatePasswordStrength",this)}}))},_initialize:function(){var t=this;t._antiforgeryToken=n("input[name='__RequestVerificationToken']").val()},regenerateSms:function(){n(".SmsPassword").each(function(){n(this).mnTextBox().mnTextBox("val","")});n.ajax({type:"POST",url:n("body").mnBasePage("option","baseUrl")+"/RegenerateSmsFirstLogin",data:{__RequestVerificationToken:this._antiforgeryToken},success:function(t){n(".LoginPage").Website_LayoutLogin("showLeftSideModal",t.appearance,t.title,t.content,!1)},error:function(n){handleAjaxError(n)}})}});n.validator.addMethod("mustbeequal",function(){var t=n(".NewPassword"),i=n(".NewPasswordConfirmation");return t&&i?t.mnTextBox("val")===i.mnTextBox("val"):!0});n.validator.unobtrusive.adapters.add("mustbeequal",function(n){n.rules.mustbeequal={};n.messages.mustbeequal=n.message})}(jQuery,window,document),function(n,t,i,r){n.widget("millenet.Retail_Login_CustomerAuthenticationMobileToken",{options:{mobileTokenId:null,signalRUrl:null},_create:function(){var t=this;this.connectSignalR();this._tokenInterval=setInterval(function(){t._tokenHeartbeat()},1e3);this._showErrorImage(n(".MobileTokenDiv input[type=hidden][name=ShowErrorIcon]").val()==="True")},_tokenInterval:null,_tokenHeartbeat:function(){var t,i,r;n("#tokenSecondsCounter").length>0&&(t=parseInt(n("#tokenSecondsCounter")[0].innerHTML,10)-1,n("#tokenSecondsCounter")[0].innerHTML=t,i=this._tokenZeroPad(Math.floor(t/60),2),r=this._tokenZeroPad(t%60,2),n("#tokenCounter")[0].innerHTML=i+":"+r,t<=0&&this._tokenExpire())},_tokenZeroPad:function(n,t){for(n=""+n;n.length<t;)n="0"+n;return n},_tokenExpire:function(){clearInterval(this._tokenInterval);n(".CounterDiv").hide()},connectSignalR:function(){var t=this,r=this.options.mobileTokenId,i=n.hubConnection(),f=i.createHubProxy("extendedSecurityHub"),u=this.options.signalRUrl;f.on("broadcastMessage",function(n){t.digestMessage(n)});i.url=u+"/broadcast";i.qs={token:r};i.start({transport:["webSockets"]}).done(function(){setTimeout(t.ajaxPooling,3e4,u,r,t,3e4)}).fail(function(){t.ajaxPooling(u,r,t,2e3)})},ajaxPooling:function(t,i,r,u){var f=t+"/api/extendedSecurity/check";n.ajax({url:f,data:{token:i},cache:!1,success:function(n){n.exists?r.digestMessage(n.value):setTimeout(r.ajaxPooling,u,t,i,r,u)}})},digestMessage:function(t){t==="expired"?(this.changeScreen(n("#TokenExpired").text(),!1),this._tokenExpire()):t==="canceled"?(this.changeScreen(n("#TokenCanceled").text(),!0),this._tokenExpire()):(n("#TokenOutcome").val(t),n(".MobileTokenDiv").closest("form").submit())},changeScreen:function(t,i){n("#MobileTokenAuthorizationLabel").find("span").text(t);this._showErrorImage(i);i?(n("#MobileTokenAuthorizationLabel").hide(),n("#MobileTokenAuthorizationLabelCanceled").show(),n("#MobileTokenAuthorizationLabelExpired").hide()):(n("#MobileTokenAuthorizationLabel").hide(),n("#MobileTokenAuthorizationLabelCanceled").hide(),n("#MobileTokenAuthorizationLabelExpired").show());n(".MobileTokenInnerDiv ").addClass("MobileTokenError");n(".RegenerateMobileToken").show()},RegenerateMobileToken:function(){var t=n("form");t!==r&&t!==null&&t.length&&(n("#RegenerateToken").val("True"),n("#CustomerAuthenticationMobileTokenViewModel_RegenerateToken").val("True"),t.submit())},_showErrorImage:function(t){if(!n(".MNPanel.MobileTokenDiv")[0])return!0;t?n(".MobileTokenImageDiv").addClass("ErrorIcon"):n(".MobileTokenImageDiv").removeClass("ErrorIcon")}})}(jQuery,window,document),function(n,t,i){n.widget("millenet.Retail_Login_PasswordOneRecoveryFirstLogin",{_antiforgeryToken:null,_create:function(){var r=this,t;jl.addCallback(function(){r._initialize()});i.getElementById("PwdMeter")&&(t=n(".NewPassword.ValidateMeter"),t.length&&t.mnTextBox({onkeyup:function(){n(".Retail_Login_PasswordOneRecoveryThirdStep").Common_Security_PasswordMeter("validatePasswordStrength",this)}}))},_initialize:function(){var t=this;t._antiforgeryToken=n("input[name='__RequestVerificationToken']").val()},openResetHelp:function(){n(".LoginPage").Website_LayoutLogin("showMainBallon")},regenerateSmsPasswordRecovery:function(t,i){n(".PasswordBox").each(function(){n(this).mnTextBox().mnTextBox("val","")});t&&(n(".RegenerateSmsBalloon >.IconDiv").hide(),n(".RegenerateSmsBalloon >.RegenerateSmsBalloonLink").hide(),n(".ExpiredLoading").mnLoading().mnLoading("start"));n.ajax({type:"POST",url:n("body").mnBasePage("option","baseUrl")+"/RegenerateSms",data:{__RequestVerificationToken:this._antiforgeryToken,isRecoverSms:i},success:function(i){t&&(n(".RegenerateSmsBalloon >.IconDiv").show(),n(".RegenerateSmsBalloon >.RegenerateSmsBalloonLink").show(),n(".ExpiredLoading").mnLoading().mnLoading("stop"));i.success?t?(n(".RegenerateSmsBalloon >.IconDiv").removeClass("ExpiredIcon"),n(".RegenerateSmsBalloon >.IconDiv").addClass("CheckIcon"),n(".RegenerateSmsBalloon >.RegenerateSmsBalloonMessage").show(),n(".RegenerateSmsBalloon >.RegenerateSmsBalloonResult").show(),n(".RegenerateSmsBalloon >.RegenerateSmsBalloonLink").hide()):n(".LoginPage").Website_LayoutLogin("showLeftSideModal",i.appearance,i.title,i.content,!1):n(".LoginPage").Website_LayoutLogin("showLeftSideModal",i.appearance,i.title,i.content)},error:function(i){t&&(n(".RegenerateSmsBalloon >.IconDiv").show(),n(".RegenerateSmsBalloon >.RegenerateSmsBalloonLink").show(),n(".ExpiredLoading").mnLoading().mnLoading("stop"));handleAjaxError(i)}})}})}(jQuery,window,document),function(n,t,i){n.widget("millenet.Retail_MigrationWizardLong_Statement",{options:{iscorrectuser:null},_create:function(){var r=this,t;n(".mainBodyContentMigration >>>> .MNTextBox").each(function(){n(this).find("input").attr("wtrendsId",this.id+"_LongMigrationWizardPwdField")});n(".MNRadioList >>> .MNRadio").each(function(){var t=n(this).attr("data-value");t==="Electronic"&&n(this).attr("wtrendsId",this.id+"_Electronic");t==="Paper"&&n(this).attr("wtrendsId",this.id+"_Paper")});AddWebTrendsMoreDetailsWizard();AddWebTrendsCheckboxWizard();AddWebTrendsTextBoxWizard();AddWebTrendsDateWizard();AddWebTrendsRadioWizard();jl.addCallback(function(){r._initialize()});i.getElementById("PwdMeter")&&(t=n(".NewPassword.ValidateMeter"),t.length&&t.mnTextBox({onkeyup:function(){n(".Retail_MigrationWizardLong_Statement").Common_Security_PasswordMeter("validatePasswordStrength",this)}}))},_initialize:function(){var t=this;t._antiforgeryToken=n("input[name='__RequestVerificationToken']").val();t.options.iscorrectuser==="true"&&n("#MigrationKeyBoard").mnKeyboard("focusForKeyboard",n(".Password").first(),!0,!0)},selectDeliveryType:function(){n("#DeliveryTypeHidden").val(n("#DeliveryType").mnRadioList("val"))},changePlaceholder:function(t){n(t).toggleClass("AbsolutePlaceholder")}});n.validator.addMethod("mustbeequal",function(){var t=n(".NewPassword"),i=n(".NewPasswordConfirmation");return t&&i?t.mnTextBox("val")===i.mnTextBox("val"):!0});n.validator.unobtrusive.adapters.add("mustbeequal",function(n){n.rules.mustbeequal={};n.messages.mustbeequal=n.message})}(jQuery,window,document),function(n){n.widget("millenet.LoginProblemsWebTrends",{options:{eventName:null,processName:null},triggerScreenView:function(){AddWebTrendsScreenView(this.options.eventName,this.options.processName)},triggerButtonNext:function(){AddWebTrendsButtonNext(this.options.eventName,this.options.processName)},triggerLink:function(){AddWebTrendsLink(this.options.eventName)}})}(jQuery,window,document),function(n){n.widget("millenet.Retail_MigrationWizard",{options:{},_create:function(){var n=this}});n.validator.addMethod("deliverytypevalidator",function(t,i,r){function u(){return n('input[name$="'+r.targetname+'"][type="hidden"]')}function f(n){return n.length&&n.val().toLowerCase()!==r.targetvalue}return n(i).val()!==""?!0:f(u())?(n(".validatorBox").hide(),!0):(n("html, body").animate({scrollTop:n(".validatorBox").offset().top-100},500),n(".validatorBox").show(),!1)});n.validator.unobtrusive.adapters.add("deliverytypevalidator",["targetname","targetvalue"],function(n){n.rules.deliverytypevalidator={};n.rules.deliverytypevalidator.targetname=n.params.targetname;n.rules.deliverytypevalidator.targetvalue=n.params.targetvalue})}(jQuery,window,document),function(n){n.widget("millenet.Retail_QuickMigrationWizard_Statement",{options:{},_create:function(){var n=this;AddWebTrendsMoreDetailsWizard();AddWebTrendsCheckboxWizard();AddWebTrendsTextBoxWizard();AddWebTrendsDateWizard();AddWebTrendsRadioWizard()},selectDeliveryType:function(){n("#DeliveryTypeHidden").val(n("#DeliveryType").mnRadioList("val"))}})}(jQuery,window,document),function(n,t,i,r){n.widget("millenet.Retail_Login_Malware",{options:{baseUrl:null},_create:function(){var n=this;jl.addCallback(function(){n._initialize()})},_initialize:function(){this._validateElements();this._checkFrameworkCache()},_validateElements:function(){var t=[],i=[];n("input").each(function(){var n=this.name.length===0?this.id:"";t.push({Name:this.name,Type:this.type,Id:n})});n("select").each(function(){var n=this.name.length===0?this.id:"";i.push({Name:this.name,Id:n})});n.ajax({url:this.options.baseUrl+"script/malware/ClientXSideService.jsa/Validate",type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({inputElements:JSON.stringify(t),selectElements:JSON.stringify(i)}),success:function(){}})},_checkFrameworkCache:function(){n("#FrameworkCache").val("1");n("div.login-content.envelopePassword").length>0&&n.ajax({url:this.options.baseUrl+"script/malware/ClientXSideService.jsa/Register",type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",success:function(u){if(n("#FrameworkCache").val("2"),u!==null&&u!==r&&u!==""&&u.d!==""){u.d&&(u=u.d);var f=i.createElement("script");f.id="clientXSideServiceCheckScript";f.text=u;i.body.appendChild(f);t.clientXSideServiceCheck()}}})}})}(jQuery,window,document),function(n,t,i){n.widget("millenet.Retail_Login_PasswordOneFirstUsage",{_antiforgeryToken:null,_create:function(){var r=this,t;jl.addCallback(function(){r._initialize()});i.getElementById("PwdMeter")&&(t=n(".NewPassword.ValidateMeter"),t.length&&t.mnTextBox({onkeyup:function(){n(".Retail_Login_PasswordOneFirstUsageSecondStep").Common_Security_PasswordMeter("validatePasswordStrength",this)}}))},_initialize:function(){var t=this;t._antiforgeryToken=n("input[name='__RequestVerificationToken']").val()},regenerateSms:function(t,i){n(".Password").each(function(){n(this).mnTextBox().mnTextBox("val","")});t&&(n(".RegenerateSmsBalloon >.IconDiv").hide(),n(".RegenerateSmsBalloon >.RegenerateSmsBalloonLink").hide(),n(".ExpiredLoading").mnLoading().mnLoading("start"));n.ajax({type:"POST",url:n("body").mnBasePage("option","baseUrl")+"/RegenerateSms",data:{__RequestVerificationToken:this._antiforgeryToken,isRecoverSms:i},success:function(i){t&&(n(".RegenerateSmsBalloon >.IconDiv").show(),n(".RegenerateSmsBalloon >.RegenerateSmsBalloonLink").show(),n(".ExpiredLoading").mnLoading().mnLoading("stop"));i.success?t?(n(".RegenerateSmsBalloon >.IconDiv").removeClass("ExpiredIcon"),n(".RegenerateSmsBalloon >.IconDiv").addClass("CheckIcon"),n(".RegenerateSmsBalloon >.RegenerateSmsBalloonMessage").show(),n(".RegenerateSmsBalloon >.RegenerateSmsBalloonResult").show(),n(".RegenerateSmsBalloon >.RegenerateSmsBalloonLink").hide()):n(".LoginPage").Website_LayoutLogin("showLeftSideModal",i.appearance,i.title,i.content,!1):n(".LoginPage").Website_LayoutLogin("showLeftSideModal",i.appearance,i.title,i.content)},error:function(i){t&&(n(".RegenerateSmsBalloon >.IconDiv").show(),n(".RegenerateSmsBalloon >.RegenerateSmsBalloonLink").show(),n(".ExpiredLoading").mnLoading().mnLoading("stop"));handleAjaxError(i)}})}});n.validator.addMethod("mustbeequal",function(){var t=n(".NewPassword"),i=n(".NewPasswordConfirmation");return t&&i?t.mnTextBox("val")===i.mnTextBox("val"):!0});n.validator.unobtrusive.adapters.add("mustbeequal",function(n){n.rules.mustbeequal={};n.messages.mustbeequal=n.message})}(jQuery,window,document),function(n){n.widget("millenet.Retail_Login_MulticodeRequest",{_create:function(){var n=this;jl.addCallback(function(){n._initialize()})},_initialize:function(){var i=this,t=i.element.find(".Multicode");t.mnTextBox({onblur:function(){i.factorMulticode(this)}});n("input[type=text]").on("keydown",function(n){n.which===13&&t.mnTextBox().mnTextBox("val",t.mnTextBox().mnTextBox("val").replace(/ /g,""))})},factorMulticode:function(t){n(t).mnTextBox().mnTextBox("val",n(t).mnTextBox("val").replace(/ /g,""))},openResetHelp:function(){n(".LoginPage").Website_LayoutLogin("showMainBallon")}})}(jQuery,window,document),function(n){n.widget("millenet.Retail_Login_EyePassword",{options:{focusedElement:null},_create:function(){var t=this;n(".EyeLink ").addClass("InactiveColor");n("input").on("focus",function(){t.options.focusedElement=n(this)})},_initialize:function(){},revealPasswords:function(){var i=this,u=i.element.find("input"),t,r;u.each(function(){var t=this;switch(n(t).attr("type")){case"password":n(t).attr("type","text");break;case"text":n(t).attr("type","password")}});n(".EyeLink ").hasClass("InactiveColor")||n(".EyeLink ").hasClass("ActiveColor")?n(".EyeLink ").hasClass("InactiveColor")?n(".EyeLink ").removeClass("InactiveColor").addClass("ActiveColor"):n(".EyeLink ").removeClass("ActiveColor").addClass("InactiveColor"):n(".EyeLink ").addClass("ActiveColor");t=n(i.options.focusedElement);r=t.val();t.focus().val("");t.val(r)},changePlaceholder:function(t){n(t).toggleClass("AbsolutePlaceholder")}})}(jQuery,window,document),function(n,t,i){n.widget("millenet.Retail_Login_PasswordOneRecovery",{_antiforgeryToken:null,_create:function(){var r=this,t;jl.addCallback(function(){r._initialize()});i.getElementById("PwdMeter")&&(t=n(".PasswordBox.ValidateMeter"),t.length&&t.mnTextBox({onkeyup:function(){n(".Retail_Login_PasswordOneSetNew").Common_Security_PasswordMeter("validatePasswordStrength",this)}}))},_initialize:function(){var t=this;t._antiforgeryToken=n("input[name='__RequestVerificationToken']").val()},openResetHelp:function(){n(".LoginPage").Website_LayoutLogin("showMainBallon")},regenerateSms:function(t,i){n(".PasswordBox").each(function(){n(this).mnTextBox().mnTextBox("val","")});t&&(n(".RegenerateSmsBalloon >.IconDiv").hide(),n(".RegenerateSmsBalloon >.RegenerateSmsBalloonLink").hide(),n(".ExpiredLoading").mnLoading().mnLoading("start"));n.ajax({type:"POST",url:n("body").mnBasePage("option","baseUrl")+"/RegenerateSms",data:{__RequestVerificationToken:this._antiforgeryToken,isRecoverSms:i},success:function(i){t&&(n(".RegenerateSmsBalloon >.IconDiv").show(),n(".RegenerateSmsBalloon >.RegenerateSmsBalloonLink").show(),n(".ExpiredLoading").mnLoading().mnLoading("stop"));i.success?t?(n(".RegenerateSmsBalloon >.IconDiv").removeClass("ExpiredIcon"),n(".RegenerateSmsBalloon >.IconDiv").addClass("CheckIcon"),n(".RegenerateSmsBalloon >.RegenerateSmsBalloonMessage").show(),n(".RegenerateSmsBalloon >.RegenerateSmsBalloonResult").show(),n(".RegenerateSmsBalloon >.RegenerateSmsBalloonLink").hide()):n(".LoginPage").Website_LayoutLogin("showLeftSideModal",i.appearance,i.title,i.content,!1):n(".LoginPage").Website_LayoutLogin("showLeftSideModal",i.appearance,i.title,i.content)},error:function(i){t&&(n(".RegenerateSmsBalloon >.IconDiv").show(),n(".RegenerateSmsBalloon >.RegenerateSmsBalloonLink").show(),n(".ExpiredLoading").mnLoading().mnLoading("stop"));handleAjaxError(i)}})}})}(jQuery,window,document),function(n,t,i){n.widget("millenet.Retail_Login_PasswordOneRequest",{_create:function(){var t=this;jl.addCallback(function(){t._initialize()});n(i).ready(function(){n(".PasswordOne").find("input").focus();t._setCursorToLastPosition()})},_setCursorToLastPosition:function(){var t=n("[name='PasswordOne']").val();t!==""&&setTimeout(function(){n("[name='PasswordOne']").val(t)},500)},_initialize:function(){n.ajax({type:"POST",url:n("body").mnBasePage("option","baseUrl")+"/PreloadData",data:{__RequestVerificationToken:n('input[name="__RequestVerificationToken"]').val()}});n("form").submit(function(){var r=n(".MNRadioList").mnRadioList("checkedValue"),t=n(this),i;t.validate();i=t.valid();i||n(".field-validation-error:first").parent().parent().find(".Content").find('[id*="'+r+'"]:enabled').first().focus()})}})}(jQuery,window,document),function(n,t,i,r){n.widget("millenet.Retail_Login_SecurityDigits",{options:{pid:null,pesel:null,regon:null,nip:null,focusedElement:null},_create:function(){var n=this;jl.addCallback(function(){n._initialize()})},_initialize:function(){var i=this,t=n("form :input:visible:enabled:first");t.data("makefocusonload")!==r&&t.data("makefocusonload")==="false"||t.focus();this._showHintMessage()},_setFocusOnDocument:function(){n(".DocumentTypesRadio").mnRadioList();var t="#Password_"+n(".DocumentTypesRadio").mnRadioList("checkedValue")+"_Container";n(n(t).find("input:not([disabled])")[0]).focus()},_showHintMessage:function(){n(".hintMessageContainer").find(".MNInfoBox.DocumentType").hide();var t=n(".DocumentTypesRadio").mnRadioList("checkedValue");n(".MNInfoBox."+t).show()},changeDocumentType:function(){var t=this;n(".DocumentTypeArea").show();n(".DocumentTypeSelected").hide();n(".IdentificatorHelpIcon").hide();this.updateDocumentTypeForm()},updateDocumentTypeForm:function(){this._showHintMessage();var t=n(".DocumentTypesRadio").mnRadioList("checkedValue");n(".Password").mnMaskedPassword("active",t)}});n.validator.addMethod("securitydigitsMinimumchallenge",function(t,i,u){var f=n('input[name$="'+u.targetname+'"]'),e=f!==null&&f!==r?f.val():"",o=e.replace(/;/g,"").length;return t.length===o?!0:!1});n.validator.unobtrusive.adapters.add("securitydigitsMinimumchallenge",["targetname"],function(n){n.rules.securitydigitsMinimumchallenge={};n.rules.securitydigitsMinimumchallenge.targetname=n.params.targetname;n.messages.securitydigitsMinimumchallenge=n.message})}(jQuery,window,document),function(n,t,i,r){n.widget("millenet.Retail_Login_LoginProblemsHelp",{options:{loginHelpProcess:null,millecodeRetrievalAvailable:!1},_antiforgeryToken:null,_mainContainer:null,_ResetActive:!1,_advancedResetProcess:!1,_loader:null,_loaderDiv:null,_mainProblemsHelpBalloon:null,_isLastPanel:!1,_create:function(){var t=this,i,r;if(jl.addCallback(function(){t._initialize()}),t._mainProblemsHelpBalloon=n(".login-problems-help-balloon"),i=t._mainProblemsHelpBalloon.find(".CloseButton")[1],n(i).length)n(i).on("click",function(n){t._executeWebtrends();t.initAbandonResetProcess(n)});if(r=t._retrieveFinalBallonClose(),n(r).length)n(r).on("click",function(n){t._executeWebtrends();t.initFinalBallonProcess(n)});t._infoContentRedirect(t)},_infoContentRedirect:function(t){var i=n(".RetrieveMillecodeProcessStart"),r=n(".RetrieveMillecodeMBManual");if(!this.options.millecodeRetrievalAvailable){i.prop("disabled",!0);return}if(i.length)i.on("click",function(){t.getPartialView("PhoneNumberVerification")});if(r.length)r.on("click",function(){t.getPartialView("MobileAppInstructions")})},_executeWebtrends:function(){switch(this.options.loginHelpProcess){case"ResetPassword":DoResetPasswordWebTrends();break;case"MillecodeRetrieval":DoRetrievalWebTrends();break;default:return}},_retrieveFinalBallonClose:function(){switch(this.options.loginHelpProcess){case"ResetPassword":return n("#reset-password-final-balloon_Content").find(".CloseButton");case"MillecodeRetrieval":return n("#retrieval-final-balloon_Content").find(".CloseButton");default:n("#reset-password-final-balloon_Content").find(".CloseButton")}},_advancedResetProcessElement:function(t){var i=null,r=null;switch(this.options.loginHelpProcess){case"ResetPassword":n(".reset-password-final-balloon").find(".reset-footer").addClass("reset-footer-show");n("#login-problems-help-container").find(".ResetZeroNext").first().mnButton().mnButton("enabled",!1);n("#QuestionAnswer").mnRadioList("enabled",!1);i=n(".reset-password-final-balloon").first().attr("data-template-abandonProcessTitle");r=n(".reset-password-final-balloon").first().attr("data-template-abandonProcessContent");break;case"MillecodeRetrieval":n(".retrieval-final-balloon").find(".retrieval-footer").addClass("retrieval-footer-show");n("#QuestionAnswer").mnRadioList("enabled",!1);i=n(".retrieval-final-balloon").first().attr("data-template-abandonProcessTitleRetrieval");r=n(".retrieval-final-balloon").first().attr("data-template-abandonProcessContentRetrieval")}t._showNotification("NotificationWarning",i,r,!1)},_initialize:function(){var t=this;t._antiforgeryToken=n("input[name='__RequestVerificationToken']").val();t._loader=n("#waitResetMessage");t._loaderDiv=n("#LoaderDiv");t._loader.mnLoading("stop");t._loaderDiv.hide()},_initializeMainContainer:function(){this._mainContainer===null&&(this._ResetActive=!0,this._mainContainer=n("#login-problems-help-container"),this._mainProblemsHelpBalloon.find(".MNInfoContent").empty(),this._mainProblemsHelpBalloon.find(".Scrollable").removeClass("Scrollable"),this._mainProblemsHelpBalloon.find(".Header").hide(),this._mainProblemsHelpBalloon.find(".Footer").hide(),n("#abandonResetProcess").hide(),this._advancedResetProcess=!0);switch(this.options.loginHelpProcess){case"ResetPassword":this._mainProblemsHelpBalloon.addClass("ResetPassword");this._mainProblemsHelpBalloon.find(".jspContainer").addClass("jspContainerResetPW");n(".jspContainerResetPW").find(".jspVerticalBar").remove();this._mainProblemsHelpBalloon.removeClass("MillecodeRetrieval");break;case"MillecodeRetrieval":this._mainProblemsHelpBalloon.addClass("MillecodeRetrieval");this._mainProblemsHelpBalloon.find(".jspContainer").addClass("jspContainerRetrievalPW");n(".jspContainerRetrievalPW").find(".jspVerticalBar").remove();this._mainProblemsHelpBalloon.removeClass("ResetPassword")}},_loadPartialView:function(t){if(this._mainProblemsHelpBalloon.find(".login-reset-container").empty(),t.success!==r){this._processConcluded(t);return}this._mainContainer.html(t);jl.run();this._loader.removeClass("Balloon");this._setupLoader(!1);n("#support-balloon-mobile-container").find(".MNBalloonClosable").first().children(".Balloon").last().show()},_processFail:function(n){handleAjaxError(n,this._mainContainer);this._loader.removeClass("Balloon");this._setupLoader(!1)},_setupLoader:function(n){n?(this._loader.mnLoading().mnLoading("start"),this._loaderDiv.show(),this._mainContainer.hide()):(this._loader.mnLoading().mnLoading("stop"),this._loaderDiv.hide(),this._mainContainer.show())},_showNotification:function(t,i,r){switch(this.options.loginHelpProcess){case"ResetPassword":n(".reset-password-final-balloon").mnBalloon().mnBalloon("updateNotificationBalloon",t,r,i,!1);t!=="NotificationWarning"&&(n("#reset-password-final-balloon").addClass("ModalLayerTransparent"),n("#reset-password-abandon-proccess-ballon").addClass("ModalLayerTransparent"),n("#reset-password-final-balloon_Footer").hide());setTimeout(function(){n(".reset-password-final-balloon").mnModalPanel("show")});break;case"MillecodeRetrieval":n(".retrieval-final-balloon").mnBalloon().mnBalloon("updateNotificationBalloon",t,r,i,!1);t!=="NotificationWarning"&&(n("#retrieval-final-balloon").addClass("ModalLayerTransparent"),n("#retrieval-abandon-proccess-ballon").addClass("ModalLayerTransparent"),n("#retrieval-final-balloon_Footer").hide());setTimeout(function(){n(".retrieval-final-balloon").mnModalPanel("show")})}},_processConcluded:function(n){var t=this;t._mainProblemsHelpBalloon.mnBalloonClosable().mnBalloonClosable("hide");t._showNotification(n.appearance,n.content,n.header)},_resetPasswordNotValid:function(){var u=this,t=!1,r=!1,f=n(".ResetPasswordTextBox"),i=n(".ConfirmResetPasswordTextBox"),o,e;return u._validateTextBoxRequired(f)===!1&&(t=!0),t===!1&&u._validateTextBoxLength(f,4)===!1&&(t=!0),u._validateTextBoxRequired(i)===!1&&(r=!0),r===!1&&u._validateTextBoxLength(i,4)===!1&&(r=!0),t===!1&&r===!1&&f.mnTextBox("val")!==i.mnTextBox("val")&&(t=!0,o=i.find("input").attr("data-val-mustbeequal"),e=i.find("span[data-valmsg-for='ConfirmResetPassword']"),i.addClass("has-error"),e.removeClass("field-validation-valid").addClass("field-validation-error"),e.append("<span class='has-error'>"+o+"<\/span>")),t||r},_validateTextBoxRequired:function(n){var i=n.find("input"),r=i.attr("data-val-required"),t;return(n.removeClass("has-error"),t=n.find("span[data-valmsg-for='"+i.prop("name")+"']"),t.removeClass("field-validation-error").addClass("field-validation-valid"),t.empty(),n.mnTextBox().mnTextBox("val")==="")?(n.addClass("has-error"),t.removeClass("field-validation-valid").addClass("field-validation-error"),t.append("<span class='has-error'>"+r+"<\/span>"),!1):!0},_validateTextBoxPhoneNumberRequired:function(t){var r=t,u=r.find("input"),f=u.attr("data-val-required"),i;return(r.removeClass("has-error"),i=n(".MNPhoneNumber").find("span[data-valmsg-for='"+u.prop("name")+"']"),i.removeClass("field-validation-error").addClass("field-validation-valid"),i.empty(),r.mnTextBox().mnTextBox("val")==="")?(r.addClass("has-error"),i.removeClass("field-validation-valid").addClass("field-validation-error"),i.append("<span class='has-error'>"+f+"<\/span>"),!1):!0},_validateTextBoxPhoneNumberLength:function(t,i){var u=t,f=u.find("input"),e=f.attr("data-val-phonenumberlengthvalidator"),r;return(u.removeClass("has-error"),r=n(".MNPhoneNumber").find("span[data-valmsg-for='"+f.prop("name")+"']"),r.removeClass("field-validation-error").addClass("field-validation-valid"),r.empty(),u.mnTextBox().mnTextBox("val").length!==i)?(u.addClass("has-error"),r.removeClass("field-validation-valid").addClass("field-validation-error"),r.append("<span class='has-error'>"+e+"<\/span>"),!1):!0},_validateAdditionalInformation:function(){var i=this,t=!1,r=n(".RetrievalTextBoxMother"),u=n("#birthDate");return i._validateTextBoxRequired(r)===!1&&(t=!0),i._validateBirthDate(u)===!1&&(t=!0),t},_validateBirthDate:function(t){var f=t.find("input[class='hasDatepicker']"),o=f.attr("data-val-required"),i;t.removeClass("has-error");i=t.find("span[data-valmsg-for='"+f.prop("name")+"']");i.removeClass("field-validation-error").addClass("field-validation-valid");i.empty();var r=n("#birthDate").mnDate("val").split("-"),e=new Date(r[0],parseFloat(r[1])-1,r[2]),u=new Date,s=new Date(u.getFullYear(),u.getMonth(),u.getDate());return isNaN(e)||e>=s?(t.addClass("has-error"),i.removeClass("field-validation-valid").addClass("field-validation-error"),i.append("<span class='has-error'>"+o+"<\/span>"),!1):!0},_validateTextBoxLength:function(n,t){var r=n.find("input"),u=r.attr("data-val-minlength"),i;return(n.removeClass("has-error"),i=n.find("span[data-valmsg-for='"+r.prop("name")+"']"),i.removeClass("field-validation-error").addClass("field-validation-valid"),i.empty(),n.mnTextBox().mnTextBox("val").length!==t)?(n.addClass("has-error"),i.removeClass("field-validation-valid").addClass("field-validation-error"),i.append("<span class='has-error'>"+u+"<\/span>"),!1):!0},_resetNewPasswordNotValid:function(){var i=this,t=!1,r=n(".PasswordBox");return i._validateTextBoxRequired(r)===!1&&(t=!0),t===!1&&i._validateTextBoxLength(r,6)===!1&&(t=!0),t},_retrievalPhoneNumberNotValid:function(){var i=this,t=!1,r=n(".PhoneNumber"),u=n("#PhoneNumberPrefix");return i._validateTextBoxPhoneNumberRequired(r)===!1&&(t=!0),t===!1&&i._validateTextBoxPhoneNumberLength(r,9)===!1&&(t=!0),i._validateTextBoxPhoneNumberRequired(u)===!1&&(t=!0),t},_validateSecurityDigits:function(t){var u=!1,i=n(t);i.removeClass("has-error");var f=n(t).find('input[id*="hiddenValue"]'),e=f.attr("data-val-securitydigitsminimumchallenge"),r=i.find("span[data-valmsg-for='"+f.prop("name")+"']");return r.removeClass("field-validation-error").addClass("field-validation-valid"),r.empty(),i.find(".ItemContainer.Active").find(".MNTextBox").each(function(){n(this).hasClass("Disabled")===!1&&n(this).mnTextBox().mnTextBox("val")===""&&(u=!0,i.hasClass("has-error")===!1&&(i.addClass("has-error"),r.removeClass("field-validation-valid").addClass("field-validation-error"),r.append("<span class='has-error'>"+e+"<\/span>")))}),u},getPartialView:function(i){var r=this,u=n("#support-balloon-mobile-container").find(".MNBalloonClosable").first().children(".Balloon").last();n(t).scrollTop(0);r._initializeMainContainer();this._mainProblemsHelpBalloon.find(".jspPane").css("top","0px");this._mainProblemsHelpBalloon.find(".jspContainerResetPW").off();this._mainProblemsHelpBalloon.find(".jspContainerRetrievalPW").off();this._loader.addClass("Balloon");n(".LoginPage").Website_LayoutLogin("showMainModal");this._setupLoader(!0);this._mainProblemsHelpBalloon.is(":visible")||n(u).hide();setTimeout(function(){n.get(i,{__RequestVerificationToken:r._antiforgeryToken},function(t){if(t.unavailable)r._showNotification(t.appearance,t.content,t.header);else{if(t.replace(/(\r\n|\n|\r)/gm,"").indexOf("<!--mobiletoken")===0){var i=t.substring(6,t.indexOf("-->")).split(";");n("#login-problems-help-container").Retail_Login_ResetPasswordMobileToken({mobileTokenId:i[1],signalRUrl:i[2]})}r._loadPartialView(t);r._initializeMainContainer()}}).fail(function(n){r._processFail(n)})},500)},showResetInfoBox:function(){n(".ResetPassInfoBox").is(":visible")!==!0&&(n(".ResetPassInfoBox").show(),n(".KeyIconParent").hide(),n(".MNButtonsBarParent").hide())},successMobileToken:function(t,i){var r=this;r._initializeMainContainer();n.ajax({type:"post",url:i,data:{__RequestVerificationToken:r._antiforgeryToken},success:function(n){r._isLastPanel=!0;r._loadPartialView(n)},error:function(n){r._processFail(n)}})},setTemporaryPassword:function(t,i){var r=this,u,f;(r._initializeMainContainer(),r._resetPasswordNotValid()!==!0)&&(u=n(".ResetPasswordTextBox").mnTextBox("val"),f=n(".ConfirmResetPasswordTextBox").mnTextBox("val"),n.ajax({type:"post",url:i,data:{__RequestVerificationToken:r._antiforgeryToken,password1:u,password2:f},success:function(n){r._loadPartialView(n)},error:function(n){r._processFail(n)}}))},resetPasswordSubmit:function(t,i){var r=this,u;(r._initializeMainContainer(),u=n(".SmsPassword").mnTextBox().mnTextBox("val"),r._resetNewPasswordNotValid()!==!0)&&n.ajax({type:"post",url:i,data:{__RequestVerificationToken:r._antiforgeryToken,answer:u},success:function(n){r._isLastPanel=!0;r._loadPartialView(n)},error:function(n){r._processFail(n)}})},answerQuestion:function(t,i,r,u,f){var e=this,o,s;e._initializeMainContainer();o=n(r).mnRadioList("val");s=f+"_Click_"+o;LogEventInDsc(s,null);n("#QuestionAnswer").off();isNaN(u)||u!=="4"||e._setupLoader(!0);n.ajax({type:"post",url:i,data:{__RequestVerificationToken:e._antiforgeryToken,answer:o},success:function(n){e._loadPartialView(n)},error:function(n){e._processFail(n);t.preventDefault()}})},changeDocumentType:function(){var t=this;switch(this.options.loginHelpProcess){case"ResetPassword":n(".ResetDocumentTypeArea").show();n(".ResetDocumentTypeSelected").hide();break;case"MillecodeRetrieval":n(".RetrievalDocumentTypeArea").show();n(".RetrievalDocumentTypeSelected").hide();break;default:return}this.updateDocumentTypeForm()},updateDocumentTypeForm:function(){var t=null;switch(this.options.loginHelpProcess){case"ResetPassword":t=n(".ResetDocumentTypesRadio").mnRadioList("checkedValue");n(".ResetDocumentPassword").mnMaskedPassword("active",t);return;case"MillecodeRetrieval":t=n(".RetrievalDocumentTypesRadio").mnRadioList("checkedValue");n(".RetrievalDocumentPassword").mnMaskedPassword("active",t);return;default:return}},validateDocument:function(t,i){var r=this,u=null,f=null,e=null,o=!0,s=n(".ResetDocumentPassword").find(".MNMaskedPasswordItem.Active").attr("data-id"),h=n(".RetrievalDocumentPassword").find(".MNMaskedPasswordItem.Active").attr("data-id");switch(this.options.loginHelpProcess){case"ResetPassword":o=this._validateSecurityDigits(n(".ResetDocumentPassword"));u=n(".ResetDocumentPassword").find('input[id*="hiddenValue"]');f=s;e=u.val();break;case"MillecodeRetrieval":o=this._validateSecurityDigits(n(".RetrievalDocumentPassword"));u=n(".RetrievalDocumentPassword").find('input[id*="hiddenValue"]');f=h;e=u.val();break;default:return}o!==!0&&(r._setupLoader(!0),n.ajax({type:"post",url:i,data:{__RequestVerificationToken:r._antiforgeryToken,documentType:f,loginPassword:e},success:function(n){n.unavailable&&(r._mainProblemsHelpBalloon.hide(),r._showNotification(n.appearance,n.content,n.header));r._loadPartialView(n)},error:function(n){r._processFail(n)}}))},initAbandonResetProcess:function(t){var i=this;if(i._isLastPanel===!0){i.abandonResetPasswordProcess();return}i._advancedResetProcess?(i._advancedResetProcessElement(i),t.stopImmediatePropagation(),t.preventDefault()):n("#login-modal-panel").find(".ModalLayer").first().css("display","none")},abandonResetPasswordProcess:function(){n(".LoginPage").Website_LayoutLogin("redirectLogin")},closeAbandonNotification:function(){switch(this.options.loginHelpProcess){case"ResetPassword":n(".reset-password-final-balloon").find(".reset-footer").removeClass("reset-footer-show");n(".reset-password-final-balloon").mnModalPanel("hide");n("#QuestionAnswer").mnRadioList("enabled",!0);n("#login-problems-help-container").find(".ResetZeroNext").first().mnButton().mnButton("enabled",!0);break;case"MillecodeRetrieval":n(".retrieval-final-balloon").find(".retrieval-footer").removeClass("retrieval-footer-show");n(".retrieval-final-balloon").mnModalPanel("hide");n("#QuestionAnswer").mnRadioList("enabled",!0)}},initFinalBallonProcess:function(){this.options.loginHelpProcess==="ResetPassword"&&n(".reset-password-final-balloon").hasClass("NotificationWarning")||this.options.loginHelpProcess==="MillecodeRetrieval"&&n(".retrieval-final-balloon").hasClass("NotificationWarning")?this.closeAbandonNotification():n(".LoginPage").Website_LayoutLogin("redirectLogin")},regenerateMobileToken:function(t){var i=this,r=n.get(t,{__RequestVerificationToken:i._antiforgeryToken});r.done(function(t){n("#login-problems-help-container").Retail_Login_ResetPasswordMobileToken("destroy");i._loadPartialView(t)});r.fail(function(n){handleAjaxError(n)})},MKRPhoneNumberVerification:function(t,i){var r=this,f=n("#ResultsContainer"),e,o,u;(f.hide(),r._retrievalPhoneNumberNotValid()!==!0)&&(e=n(".PhoneNumberControl").mnPhoneNumber("number"),o=n(".PhoneNumberControl").mnPhoneNumber("prefix"),r._setupLoader(!0),u=n.post(t,{__RequestVerificationToken:r._antiforgeryToken,phoneNumber:e,prefix:o}),u.done(function(n){r._loadPartialView(n)}),u.fail(function(n){f.show();handleAjaxError(n);i.preventDefault()}))},MKRAdditionalInfoVerification:function(t,i){var r=this,f=n("#ResultsContainer"),e,o,u;(f.hide(),r._validateAdditionalInformation()!==!0)&&(e=n(".RetrievalTextBoxMother"),o=n("#birthDate").mnDate("val"),r._setupLoader(!0),u=n.post(t,{__RequestVerificationToken:r._antiforgeryToken,birthDate:o,motherMaidenName:e.mnTextBox("val")}),u.done(function(n){r._loadPartialView(n)}),u.fail(function(n){f.show();handleAjaxError(n);i.preventDefault()}))},MKRBackNavigation:function(t){var i=this,u=n("#ResultsContainer"),r;u.hide();i._setupLoader(!0);r=n.get(t,{__RequestVerificationToken:i._antiforgeryToken});r.done(function(n){i._loadPartialView(n)});r.fail(function(n){u.show();handleAjaxError(n)})},MKRSmsPasswordSubmit:function(t){var i=this,r;(i._initializeMainContainer(),r=n(".SmsPassword").mnTextBox().mnTextBox("val"),i._resetNewPasswordNotValid()!==!0)&&(i._setupLoader(!0),n.ajax({type:"post",url:t,data:{__RequestVerificationToken:i._antiforgeryToken,password:r},success:function(n){i._isLastPanel=!0;i._loadPartialView(n)},error:function(n){i._processFail(n)}}))},copyMillecode:function(){var r=this.element.find(".yourMillecode").data("clipboard-text"),t=n("<input>");n("body").append(t);t.val(r).select();i.execCommand("copy");t.remove();n(".CopiedInfo").mnTooltip("executeTooltip")},executeWebtrendsZeroScreen:function(){n("#helpInfo--3").prop("checked",!0);LogEventInDsc("",["WT.MillecodeRecover_ScreenView","Login_LoginHelper"]);n(".RetrieveMillecodeProcessStart").on("click",function(){LogEventInDsc("Login_LoginHelper_Click_MillecodeRecover_Btn",null)});n(".RetrieveMillecodeMBManual").on("click",function(){LogEventInDsc("Login_LoginHelper_Click_MillecodeInApp_Link",null)});n("#helpInfo--3").on("click",function(){LogEventInDsc("Login_LoginHelper_Click_Millecodefail_Option",null)})}})}(jQuery,window,document),function(n,t,i,r){n.widget("millenet.MigrationWizardMobileToken",{options:{mobileTokenId:null,signalRUrl:null},_create:function(){var t=this;t._antiforgeryToken=n("input[name='__RequestVerificationToken']").val();this.connectSignalR();this._tokenInterval=setInterval(function(){t._tokenHeartbeat()},1e3);this._showErrorImage(n(".MobileTokenDiv input[type=hidden][name=ShowErrorIcon]").val()==="True")},_tokenInterval:null,_tokenHeartbeat:function(){var t,i,r;n("#tokenSecondsCounter").length>0&&(t=parseInt(n("#tokenSecondsCounter")[0].innerHTML,10)-1,n("#tokenSecondsCounter")[0].innerHTML=t,i=this._tokenZeroPad(Math.floor(t/60),2),r=this._tokenZeroPad(t%60,2),n("#tokenCounter")[0].innerHTML=i+":"+r,t<=0&&this._tokenExpire())},_tokenZeroPad:function(n,t){for(n=""+n;n.length<t;)n="0"+n;return n},_tokenExpire:function(){clearInterval(this._tokenInterval);n(".CounterDiv").hide()},connectSignalR:function(){var t=this,r=this.options.mobileTokenId,i=n.hubConnection(),f=i.createHubProxy("extendedSecurityHub"),u=this.options.signalRUrl;f.on("broadcastMessage",function(n){t.digestMessage(n)});i.url=u+"/broadcast";i.qs={token:r};i.start({transport:["webSockets"]}).done(function(){setTimeout(t.ajaxPooling,3e4,u,r,t,3e4)}).fail(function(){t.ajaxPooling(u,r,t,2e3)})},ajaxPooling:function(t,i,r,u){var f=t+"/api/extendedSecurity/check";n.ajax({url:f,data:{token:i},cache:!1,success:function(n){n.exists?r.digestMessage(n.value):setTimeout(r.ajaxPooling,u,t,i,r,u)}})},digestMessage:function(t){t==="expired"?(this.changeScreen(n("#TokenExpired").text(),!1),this._tokenExpire()):t==="canceled"?(this.changeScreen(n("#TokenCanceled").text(),!0),this._tokenExpire()):(n("#TokenOutcome").val(t),n(".MobileTokenDiv").closest("form").submit())},changeScreen:function(t,i){n("#MobileTokenAuthorizationLabel").find("span").text(t);this._showErrorImage(i);i?(n("#MobileTokenAuthorizationLabel").hide(),n("#MobileTokenAuthorizationLabelCanceled").show(),n("#MobileTokenAuthorizationLabelExpired").hide()):(n("#MobileTokenAuthorizationLabel").hide(),n("#MobileTokenAuthorizationLabelCanceled").hide(),n("#MobileTokenAuthorizationLabelExpired").show());n(".MobileTokenInnerDiv ").addClass("MobileTokenError");n(".RegenerateMobileToken").show()},RegenerateMobileToken:function(){var t=n("form");t!==r&&t!==null&&t.length&&(n("#RegenerateMobileToken").val("True"),t.submit())},_showErrorImage:function(t){if(!n(".MNPanel.MobileTokenDiv")[0])return!0;t?n(".MobileTokenImageDiv").addClass("ErrorIcon"):n(".MobileTokenImageDiv").removeClass("ErrorIcon")}})}(jQuery,window,document),function(n){n.widget("millenet.MigrationWizardSms",{_antiforgeryToken:null,_create:function(){var n=this;jl.addCallback(function(){n._initialize()})},_initialize:function(){var t=this;t._antiforgeryToken=n("input[name='__RequestVerificationToken']").val();t._showError()},regenerateSms:function(){n(".SmsPassword").each(function(){n(this).mnTextBox().mnTextBox("val","")});var t=n("body").mnBasePage("option","baseUrl")+"/RegenerateSmsPassword";n.ajax({type:"POST",url:t,data:{__RequestVerificationToken:this._antiforgeryToken},success:function(t){n(".RegenerateSmsResult").text(t.message);n(".RegenerateSmsResult").show();t.success?n(".RegenerateSmsResult").removeClass("RedColor").addClass("GreenColor"):n(".RegenerateSmsResult").removeClass("GreenColor").addClass("RedColor")},error:function(n){handleAjaxError(n)}})},_showError:function(){var f=this,e=n("#FailedSms"),t,r,i,u;return e.length&&(t=f.element.find(".SmsPassword"),t[0])?(n(t).addClass("has-error"),r=n(t).find(".errorA "),r.removeClass("col-sm-offset-3").addClass("col-sm-offset-0"),i=n(t).find(".errorA > span"),n(i).hasClass("field-validation-valid")&&n(i).removeClass("field-validation-valid"),n(i).addClass("field-validation-error"),u=n("<span>").addClass("has-error").html(n("#FailedSmsText").val()),n(i).append(u),!1):!1}})}(jQuery,window,document),function(n,t,i,r){n.widget("millenet.Retail_StatementsDeliveryUpdate_DeliveryFormPreferences",{options:{selectToken:"",selectedToken:""},_create:function(){var t=this;n(".ExpandText, .CollapseText").on("click",function(){setTimeout(function(){t._resizeOnConsentsExpand()},0)})},_resizeOnConsentsExpand:function(){n(".login-right-side").height(n(".login-left-side").innerHeight()+"px")},updateRadios:function(t){var r=this,i=n(t),u=i.mnRadioList("checkedValue");i.find(".MNText.textRadio.textSelected.Standard.Text").removeClass("textSelected").addClass("textSelect");i.find(".MNText.textRadio.textSelect.Standard.Text").text(r.options.selectToken);i.find("[data-value='"+u+"']").find(".MNText.textRadio.textSelect.Standard.Text").text(r.options.selectedToken);i.find("[data-value='"+u+"']").find(".MNText.textRadio.textSelect.Standard.Text").removeClass("textSelect").addClass("textSelected")},selectMode:function(t){n("#DeliveryTypeHidden").val(n(t.target).mnRadioList("val"))}});n.validator.addMethod("consentacceptedrequiredcheckedvalidator",function(t,i,u){var f=n('input[name$="'+u.fieldtocheck+'"]');return f.length>0&&f.val().toUpperCase()==="FALSE"?!0:n('[name="'+u.fieldtocheck+'"]:checkbox').prop("checked")===!1?!0:t!==r&&t!==null&&t.toString().toUpperCase()==="TRUE"?!0:!1});n.validator.unobtrusive.adapters.add("consentacceptedrequiredcheckedvalidator",["fieldtocheck"],function(n){n.rules.consentacceptedrequiredcheckedvalidator={};n.rules.consentacceptedrequiredcheckedvalidator.fieldtocheck=n.params.fieldtocheck;n.messages.consentacceptedrequiredcheckedvalidator=n.message})}(jQuery,window,document),function(n){n.widget("millenet.Retail_StatementsDeliveryUpdate_PaperStatementsList",{options:{},_isClear:!1,_create:function(){var n=this;jl.addCallback(function(){n._initialize()})},_initialize:function(){var t=this;n(".StatementCheckBox").on("change",function(){t._isClear=!0;n(".SelectAll").mnCheckBox("val",!1)})},selectAndDeselectAll:function(){if(this._isClear){this._isClear=!1;return}var t=n(".Statements").find(".MNCheckBox"),i=n(".StatementsContainer").find(".MNCheckBox.MNField.SelectAll").mnCheckBox("val");t.each(function(){n(this).mnCheckBox("val")!==!0&&(i=!0)});t.each(function(){i?n(this).mnCheckBox("val",!0):n(this).mnCheckBox("val",!1)})}})}(jQuery,window,document);