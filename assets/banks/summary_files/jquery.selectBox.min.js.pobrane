jQuery&&function(e){e.extend(e.fn,{selectBox:function(t,s){var a,o="",l=function(t,s){if(navigator.userAgent.match(/iPad|iPhone/i))return!1;if("select"!==t.tagName.toLowerCase())return!1;if(t=e(t),t.data("selectBox-control"))return!1;var a=e('<a class="selectBox" />'),o=t.attr("multiple")||parseInt(t.attr("size"))>1,l=s||{};if(a.addClass(t.attr("class")).attr("style",t.attr("style")||"").attr("title",t.attr("title")||"").attr("tabindex",parseInt(t.attr("tabindex"))).css("display","inline-block").bind("focus.selectBox",function(){this!==document.activeElement&&e(document.activeElement).blur(),a.hasClass("selectBox-active")||(a.addClass("selectBox-active"),t.trigger("focus"))}).bind("blur.selectBox",function(){a.hasClass("selectBox-active")&&(a.removeClass("selectBox-active"),t.trigger("blur"))}),t.attr("disabled")&&a.addClass("selectBox-disabled"),o){var c=n(t,"inline");if(a.append(c).data("selectBox-options",c).addClass("selectBox-inline").addClass("selectBox-menuShowing").bind("keydown.selectBox",function(e){f(t,e)}).bind("keypress.selectBox",function(e){p(t,e)}).bind("mousedown.selectBox",function(t){e(t.target).is("A.selectBox-inline")&&t.preventDefault(),a.hasClass("selectBox-focus")||a.focus()}).insertAfter(t),!t[0].style.height){var r=t.attr("size")?parseInt(t.attr("size")):5,x=a.clone().removeAttr("id").css({position:"absolute",top:"-9999em"}).show().appendTo("body");x.find(".selectBox-options").html("<li><a> </a></li>"),optionHeight=parseInt(x.find(".selectBox-options A:first").html("&nbsp;").outerHeight()),x.remove(),a.height(optionHeight*r)}m(a)}else{var h=e('<span class="selectBox-label" />'),B=e('<span class="selectBox-arrow" />');h.text(e(t).find("OPTION:selected").text()||" ");var c=n(t,"dropdown");c.appendTo("BODY"),a.data("selectBox-options",c).addClass("selectBox-dropdown").append(h).append(B).bind("mousedown.selectBox",function(e){a.hasClass("selectBox-menuShowing")?d():(e.stopPropagation(),c.data("selectBox-down-at-x",e.screenX).data("selectBox-down-at-y",e.screenY),i(t))}).bind("keydown.selectBox",function(e){f(t,e)}).bind("keypress.selectBox",function(e){p(t,e)}).insertAfter(t),m(a)}t.addClass("selectBox").data("selectBox-control",a).data("selectBox-settings",l).hide()},n=function(t,s){var a;switch(s){case"inline":return a=e('<ul class="selectBox-options" />'),t.find("OPTGROUP").length?t.find("OPTGROUP").each(function(){var t=e('<li class="selectBox-optgroup" />');t.text(e(this).attr("label")),a.append(t),e(this).find("OPTION").each(function(){var t=e("<li />"),s=e("<a />");t.addClass(e(this).attr("class")),s.attr("rel",e(this).val()).text(e(this).text()),t.append(s),e(this).attr("disabled")&&t.addClass("selectBox-disabled"),e(this).attr("selected")&&t.addClass("selectBox-selected"),a.append(t)})}):t.find("OPTION").each(function(){var t=e("<li />"),s=e("<a />");t.addClass(e(this).attr("class")),s.attr("rel",e(this).val()).text(e(this).text()),t.append(s),e(this).attr("disabled")&&t.addClass("selectBox-disabled"),e(this).attr("selected")&&t.addClass("selectBox-selected"),a.append(t)}),a.find("A").bind("mouseover.selectBox",function(s){x(t,e(this).parent())}).bind("mouseout.selectBox",function(s){h(t,e(this).parent())}).bind("mousedown.selectBox",function(e){e.preventDefault(),t.selectBox("control").hasClass("selectBox-active")||t.selectBox("control").focus()}).bind("mouseup.selectBox",function(s){d(),r(t,e(this).parent(),s)}),m(a),a;case"dropdown":return a=e('<ul class="selectBox-dropdown-menu selectBox-options" />'),t.find("OPTGROUP").length?t.find("OPTGROUP").each(function(){var t=e('<li class="selectBox-optgroup" />');t.text(e(this).attr("label")),a.append(t),e(this).find("OPTION").each(function(){var t=e("<li />"),s=e("<a />");t.addClass(e(this).attr("class")),s.attr("rel",e(this).val()).text(e(this).text()),t.append(s),e(this).attr("disabled")&&t.addClass("selectBox-disabled"),e(this).attr("selected")&&t.addClass("selectBox-selected"),a.append(t)})}):t.find("OPTION").length>0?t.find("OPTION").each(function(){var t=e("<li />"),s=e("<a />");t.addClass(e(this).attr("class"));e(this).text();s.attr("rel",e(this).val()).text(e(this).text()),t.append(s),e(this).attr("disabled")&&t.addClass("selectBox-disabled"),e(this).attr("selected")&&t.addClass("selectBox-selected"),a.append(t)}):a.append("<li> </li>"),a.data("selectBox-select",t).css("display","none").appendTo("BODY").find("A").bind("mousedown.selectBox",function(e){e.preventDefault(),e.screenX===a.data("selectBox-down-at-x")&&e.screenY===a.data("selectBox-down-at-y")&&(a.removeData("selectBox-down-at-x").removeData("selectBox-down-at-y"),d())}).bind("mouseup.selectBox",function(s){(s.screenX!==a.data("selectBox-down-at-x")||s.screenY!==a.data("selectBox-down-at-y"))&&(a.removeData("selectBox-down-at-x").removeData("selectBox-down-at-y"),r(t,e(this).parent()),d())}).bind("mouseover.selectBox",function(s){x(t,e(this).parent())}).bind("mouseout.selectBox",function(s){h(t,e(this).parent())}),m(a),a}},c=function(t){t=e(t);var s=t.data("selectBox-control");if(s){var a=s.data("selectBox-options");a.remove(),s.remove(),t.removeClass("selectBox").removeData("selectBox-control").removeData("selectBox-settings").show()}},i=function(t){t=e(t);var s=t.data("selectBox-control"),a=t.data("selectBox-settings"),o=s.data("selectBox-options");if(s.hasClass("selectBox-disabled"))return!1;switch(d(),o.css({width:s.outerWidth()-(parseInt(s.css("borderLeftWidth"))+parseInt(s.css("borderLeftWidth"))),top:s.offset().top+s.outerHeight()-parseInt(s.css("borderBottomWidth")),left:s.offset().left}),a.menuTransition){case"fade":o.fadeIn(a.menuSpeed);break;case"slide":o.slideDown(a.menuSpeed);break;default:o.show(a.menuSpeed)}var l=o.find(".selectBox-selected:first");B(t,l,!0),x(t,l),s.addClass("selectBox-menuShowing"),e(document).bind("mousedown.selectBox",function(t){e(t.target).parents().andSelf().hasClass("selectBox-options")||d()})},d=function(){0!==e(".selectBox-dropdown-menu").length&&(e(document).unbind("mousedown.selectBox"),e(".selectBox-dropdown-menu").each(function(){var t=e(this),s=t.data("selectBox-select"),a=s.data("selectBox-control"),o=s.data("selectBox-settings");switch(o.menuTransition){case"fade":t.fadeOut(o.menuSpeed);break;case"slide":t.slideUp(o.menuSpeed);break;default:t.hide(o.menuSpeed)}a.removeClass("selectBox-menuShowing")}))},r=function(t,s,a){t=e(t),s=e(s);var o=t.data("selectBox-control");t.data("selectBox-settings");if(o.hasClass("selectBox-disabled"))return!1;if(0===s.length||s.hasClass("selectBox-disabled"))return!1;if(t.attr("multiple"))if(a.shiftKey&&o.data("selectBox-last-selected")){s.toggleClass("selectBox-selected");var l;l=s.index()>o.data("selectBox-last-selected").index()?s.siblings().slice(o.data("selectBox-last-selected").index(),s.index()):s.siblings().slice(s.index(),o.data("selectBox-last-selected").index()),l=l.not(".selectBox-optgroup, .selectBox-disabled"),s.hasClass("selectBox-selected")?l.addClass("selectBox-selected"):l.removeClass("selectBox-selected")}else a.metaKey?s.toggleClass("selectBox-selected"):(s.siblings().removeClass("selectBox-selected"),s.addClass("selectBox-selected"));else s.siblings().removeClass("selectBox-selected"),s.addClass("selectBox-selected");o.hasClass("selectBox-dropdown")&&o.find(".selectBox-label").text(s.text());var n=0,c=[];return t.attr("multiple")?o.find(".selectBox-selected A").each(function(){c[n++]=e(this).attr("rel")}):c=s.find("A").attr("rel"),o.data("selectBox-last-selected",s),t.val()!==c&&(t.val(c),t.trigger("change")),!0},x=function(t,s){t=e(t),s=e(s);var a=t.data("selectBox-control"),o=a.data("selectBox-options");o.find(".selectBox-hover").removeClass("selectBox-hover"),s.addClass("selectBox-hover")},h=function(t,s){t=e(t),s=e(s);var a=t.data("selectBox-control"),o=a.data("selectBox-options");o.find(".selectBox-hover").removeClass("selectBox-hover")},B=function(t,s,a){if(s&&0!==s.length){t=e(t);var o=t.data("selectBox-control"),l=o.data("selectBox-options"),n=o.hasClass("selectBox-dropdown")?l:l.parent(),c=parseInt(s.offset().top-n.position().top);parseInt(c+s.outerHeight());n.scrollTop(s.offset().top-n.offset().top+n.scrollTop())}},f=function(t,s){t=e(t);var a=t.data("selectBox-control"),l=a.data("selectBox-options"),n=0,c=0;if(!a.hasClass("selectBox-disabled"))switch(s.keyCode){case 8:s.preventDefault(),o="";break;case 9:case 27:d(),h(t);break;case 13:a.hasClass("selectBox-menuShowing")?(r(t,l.find("LI.selectBox-hover:first"),s),a.hasClass("selectBox-dropdown")&&d()):i(t);break;case 38:case 37:if(s.preventDefault(),a.hasClass("selectBox-menuShowing")){var f=l.find(".selectBox-hover").prev("LI");for(n=l.find("LI:not(.selectBox-optgroup)").length,c=0;(0===f.length||f.hasClass("selectBox-disabled")||f.hasClass("selectBox-optgroup"))&&(f=f.prev("LI"),0===f.length&&(f=l.find("LI:last")),!(++c>=n)););x(t,f),B(t,f)}else i(t);break;case 40:case 39:if(s.preventDefault(),a.hasClass("selectBox-menuShowing")){var p=l.find(".selectBox-hover").next("LI");for(n=l.find("LI:not(.selectBox-optgroup)").length,c=0;(0===p.length||p.hasClass("selectBox-disabled")||p.hasClass("selectBox-optgroup"))&&(p=p.next("LI"),0===p.length&&(p=l.find("LI:first")),!(++c>=n)););x(t,p),B(t,p)}else i(t)}},p=function(t,s){t=e(t);var l=t.data("selectBox-control"),n=l.data("selectBox-options");if(!l.hasClass("selectBox-disabled"))switch(s.keyCode){case 9:case 27:case 13:case 38:case 37:case 40:case 39:break;default:l.hasClass("selectBox-menuShowing")||i(t),s.preventDefault(),clearTimeout(a),o+=String.fromCharCode(s.charCode||s.keyCode),n.find("A").each(function(){return e(this).text().substr(0,o.length).toLowerCase()===o.toLowerCase()?(x(t,e(this).parent()),B(t,e(this).parent()),!1):void 0}),a=setTimeout(function(){o=""},1e3)}},u=function(t){t=e(t),t.attr("disabled",!1);var s=t.data("selectBox-control");s&&s.removeClass("selectBox-disabled")},v=function(t){t=e(t),t.attr("disabled",!0);var s=t.data("selectBox-control");s&&s.addClass("selectBox-disabled")},b=function(t,s){t=e(t),t.val(s),s=t.val();var a=t.data("selectBox-control");if(a){var o=t.data("selectBox-settings"),l=a.data("selectBox-options");a.find(".selectBox-label").text(e(t).find("OPTION:selected").text()||" "),l.find(".selectBox-selected").removeClass("selectBox-selected"),l.find("A").each(function(){if("object"==typeof s)for(var t=0;t<s.length;t++)e(this).attr("rel")==s[t]&&e(this).parent().addClass("selectBox-selected");else e(this).attr("rel")==s&&e(this).parent().addClass("selectBox-selected")}),o.change&&o.change.call(t)}},g=function(t,a){t=e(t);var o=t.data("selectBox-control");t.data("selectBox-settings");switch(typeof s){case"string":t.html(s);break;case"object":t.html("");for(var l in s)if(null!==s[l])if("object"==typeof s[l]){var c=e('<optgroup label="'+l+'" />');for(var i in s[l])c.append('<option value="'+i+'">'+s[l][i]+"</option>");t.append(c)}else{var d=e('<option value="'+l+'">'+s[l]+"</option>");t.append(d)}}if(o){o.data("selectBox-options").remove();var r=o.hasClass("selectBox-dropdown")?"dropdown":"inline",a=n(t,r);switch(o.data("selectBox-options",a),r){case"inline":o.append(a);break;case"dropdown":o.find(".selectBox-label").text(e(t).find("OPTION:selected").text()||" "),e("BODY").append(a)}}},m=function(t){e(t).css("MozUserSelect","none").bind("selectstart",function(e){e.preventDefault()})};switch(t){case"control":return e(this).data("selectBox-control");case"settings":if(!s)return e(this).data("selectBox-settings");e(this).each(function(){e(this).data("selectBox-settings",e.extend(!0,e(this).data("selectBox-settings"),s))});break;case"options":e(this).each(function(){g(this,s)});break;case"value":if(!s)return e(this).val();e(this).each(function(){b(this,s)});break;case"enable":e(this).each(function(){u(this)});break;case"disable":e(this).each(function(){v(this)});break;case"destroy":e(this).each(function(){c(this)});break;default:e(this).each(function(){l(this,t)})}return e(this)}})}(jQuery);