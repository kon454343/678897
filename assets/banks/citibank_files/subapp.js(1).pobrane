this["JST"]=this["JST"]||{};this["JST"]["cbol/apps/auth/signout/subapp/templates/signout-layout.hbs"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(d,b,a,c){return'<style>\r\n.cbolui-ddl #signout_body .img{\r\n    display:none;\r\n}\r\n.cbolui-ddl .signoutspacer1 {\r\n    padding-bottom: 1.4rem;\r\n}\r\n.cbolui-ddl .signoutspacer2 {\r\n    padding-bottom: 0.7rem;\r\n}\r\n.cbolui-ddl .signoutspacer3 {\r\n    padding-bottom: 1.75rem;\r\n}\r\n.cbolui-ddl .signoutLock {\r\n    width: 10%;\r\n}\r\n@media screen and (max-width:319px) {\r\n\r\n}\r\n@media screen and (max-width:359px) and (min-width:320px){\r\n	.cbolui-ddl .signoutspacer1 {\r\n	    padding-bottom: 1rem;\r\n	}\r\n	.cbolui-ddl .signoutspacer2 {\r\n	    padding-bottom: 0.7rem;\r\n	}\r\n	.cbolui-ddl .signoutspacer3 {\r\n	    padding-bottom: 1.5rem;\r\n	}\r\n	.cbolui-ddl .signoutLock {\r\n	    width: 15%;\r\n	}	\r\n}\r\n@media screen and (max-width:374px) and (min-width:360px){\r\n	.cbolui-ddl .signoutspacer1 {\r\n	    padding-bottom: 1rem;\r\n	}\r\n	.cbolui-ddl .signoutspacer2 {\r\n	    padding-bottom: 0.7rem;\r\n	}\r\n	.cbolui-ddl .signoutspacer3 {\r\n	    padding-bottom: 1.5rem;\r\n	}\r\n	.cbolui-ddl .signoutLock {\r\n	    width: 15%;\r\n	}	\r\n}\r\n@media screen and (max-width:411px) and (min-width:375px){\r\n	.cbolui-ddl .signoutspacer1 {\r\n	    padding-bottom: 1rem;\r\n	}\r\n	.cbolui-ddl .signoutspacer2 {\r\n	    padding-bottom: 0.7rem;\r\n	}\r\n	.cbolui-ddl .signoutspacer3 {\r\n	    padding-bottom: 1.5rem;\r\n	}\r\n	.cbolui-ddl .signoutLock {\r\n	    width: 15%;\r\n	}\r\n}\r\n@media screen and (max-width:413px) and (min-width:412px){\r\n	.cbolui-ddl .signoutspacer1 {\r\n	    padding-bottom: 1rem;\r\n	}\r\n	.cbolui-ddl .signoutspacer2 {\r\n	    padding-bottom: 0.7rem;\r\n	}\r\n	.cbolui-ddl .signoutspacer3 {\r\n	    padding-bottom: 1.5rem;\r\n	}\r\n	.cbolui-ddl .signoutLock {\r\n	    width: 15%;\r\n	}\r\n}\r\n@media screen and (max-width:767px) and (min-width:414px) {\r\n	.cbolui-ddl .signoutspacer1 {\r\n	    padding-bottom: 1rem;\r\n	}\r\n	.cbolui-ddl .signoutspacer2 {\r\n	    padding-bottom: 0.7rem;\r\n	}\r\n	.cbolui-ddl .signoutspacer3 {\r\n	    padding-bottom: 1.5rem;\r\n	}\r\n	.cbolui-ddl .signoutLock {\r\n	    width: 15%;\r\n	}\r\n}\r\n@media screen and (max-width:991px) and (min-width:768px) {\r\n\r\n}\r\n</style>\r\n<div id="signout_body" class="full-height">\r\n    <div class="jamp loading">\r\n        <span class="img"></span>\r\n    </div>\r\n</div>\r\n\r\n'},useData:true});this["JST"]["cbol/apps/auth/signout/subapp/templates/step-view-signout.hbs"]=Handlebars.template({"1":function(f,c,a,d){var b=c.helperMissing,e=this.escapeExpression;return'               		<div class="title text-center fontWhite titleFontSize">'+e(((c.Comment||(f&&f.Comment)||b).call(f,{name:"Comment",hash:{name:("pageTitleOTPFatal")},data:d})))+"</div>\r\n"},"3":function(f,c,a,d){var b=c.helperMissing,e=this.escapeExpression;return'					<div class="title text-center fontWhite titleFontSize">'+e(((c.Comment||(f&&f.Comment)||b).call(f,{name:"Comment",hash:{name:("pageTitle")},data:d})))+"</div>\r\n"},"5":function(f,d,b,e){var c,a="";c=d["if"].call(f,((c=(f!=null?f.model:f))!=null?c.sessionlastTime:c),{name:"if",hash:{},fn:this.program(6,e),inverse:this.noop,data:e});if(c!=null){a+=c}return a},"6":function(h,e,b,f){var d,c=e.helperMissing,g=this.escapeExpression,a=this.lambda;return'						<div class="fontWhite text-center sessionFontSize div_allinline">\r\n							<div class="subdiv_allinline">\r\n								'+g(((e.Comment||(h&&h.Comment)||c).call(h,{name:"Comment",hash:{name:("sessionLastTime")},data:f})))+'\r\n							</div>\r\n							<div class="subdiv_allinline">\r\n								&nbsp;\r\n							</div>\r\n							<div class="subdiv_allinline">\r\n								'+g(a(((d=(h!=null?h.model:h))!=null?d.sessionlastTime:d),h))+'\r\n							</div>\r\n						</div>\r\n						<div class="signoutspacer2"></div>									\r\n						\r\n'},"8":function(f,c,a,d){var b=c.helperMissing,e=this.escapeExpression;return'	               		<div class="col-md-8 col-sm-10 col-xs-10 col-md-offset-2 col-sm-offset-1 col-xs-offset-1 text-center fontWhite">\r\n							'+e(((c.Comment||(f&&f.Comment)||b).call(f,{name:"Comment",hash:{name:("errMsgMaxTries1")},data:d})))+'\r\n						</div>\r\n	               		<div class="col-md-8 col-sm-10 col-xs-10 col-md-offset-2 col-sm-offset-1 col-xs-offset-1 text-center fontWhite">\r\n							'+e(((c.Comment||(f&&f.Comment)||b).call(f,{name:"Comment",hash:{name:("errMsgMaxTries2")},data:d})))+'\r\n						</div>\r\n						<div class="row signoutspacer1"></div>\r\n'},"10":function(f,c,a,d){var b=c.helperMissing,e=this.escapeExpression;return'		                <div class="row nomargin text-center">\r\n							'+e(((c.Link||(f&&f.Link)||b).call(f,{name:"Link",hash:{name:("signinPage")},data:d})))+'\r\n						</div>\r\n						<div class="row nomargin text-center">\r\n							'+e(((c.Link||(f&&f.Link)||b).call(f,{name:"Link",hash:{name:("bankOnline")},data:d})))+'\r\n						</div>\r\n						<div class="row signoutspacer1"></div>\r\n'},"12":function(f,c,a,d){var b=c.helperMissing,e=this.escapeExpression;return'				<div id="campaign" class="">\r\n					'+e(((c.EmbedApp||(f&&f.EmbedApp)||b).call(f,{name:"EmbedApp",hash:{appPath:("cbol/apps/customerservice/signoffcampaign/signoffcampaign/signoffcampaign"),name:("campaign")},data:d})))+"\r\n				</div>\r\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(f,d,b,e){var c,a='<style>\r\n	.cbolui-ddl .backgroundColorBlue{\r\n		background-color: #002a54;\r\n	}\r\n	\r\n	.cbolui-ddl .fontWhite{\r\n		color: white;\r\n	}\r\n	\r\n	.cbolui-ddl .checkOutfontSize{\r\n		font-size: 27px;\r\n	}\r\n	.cbolui-ddl .sessionFontSize {\r\n		font-size: 12px;\r\n	}\r\n	.cbolui-ddl .centerAlign {\r\n		align: center;\r\n	}\r\n	.cbolui-ddl #signinPage_body {\r\n	    color: white;\r\n	    background-image: url(cbol/images/icons/svgs/arrows/arrow-btn-next-white-sm.svg);\r\n	    background-position: 100% 50%;\r\n	}\r\n	.cbolui-ddl #bankOnline_body {\r\n	    color: white;\r\n	    background-image: url(cbol/images/icons/svgs/arrows/arrow-btn-next-white-sm.svg);\r\n	    background-position: 100% 50%;\r\n	}\r\n	.cbolui-ddl .space5rem{\r\n		padding-bottom:5rem;\r\n	}\r\n	.cbolui-ddl .space1rem{\r\n		padding-bottom: 1rem;\r\n	}\r\n	.cbolui-ddl .space2rem{\r\n		padding-bottom: 2rem;\r\n	}\r\n	.cbolui-ddl .space1p5rem{\r\n		padding-bottom: 1.5rem;\r\n	}\r\n	.cbolui-ddl .space0p2rem{\r\n		padding-bottom: 0.2rem;\r\n	}\r\n	.cbolui-ddl .div_allinline\r\n	{\r\n	    margin:0 auto;\r\n	    padding:0;  \r\n 	}\r\n  \r\n	.cbolui-ddl .subdiv_allinline\r\n	{  \r\n	    margin:0;\r\n	    padding:0;  \r\n	    display:inline-block;  \r\n	}\r\n	.cbolui-ddl .citi-gold .bg-colored.contactus-header, .citi-gold.postLogin .bg-colored-postLogin.contactus-header {\r\n        background-color: #333333;\r\n    }\r\n</style>\r\n<div id="SIGNINForm1">\r\n		\r\n		<div class="row nomargin">\r\n			<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 col-custom-padding theme-light bg-colored-postLogin bg-colored">\r\n				<div class="signoutspacer1"></div>\r\n				\r\n				<div class="text-center">\r\n					<img class="signoutLock" src="/content/cbol/images/lock.svg"/>\r\n				</div>\r\n				<div class="row signoutspacer1"></div>									\r\n				\r\n';c=d["if"].call(f,((c=(f!=null?f.model:f))!=null?c.OTPFatalError:c),{name:"if",hash:{},fn:this.program(1,e),inverse:this.program(3,e),data:e});if(c!=null){a+=c}a+='				\r\n			  	\r\n				<div class="signoutspacer1"></div>\r\n';
c=d.unless.call(f,((c=(f!=null?f.model:f))!=null?c.OTPFatalError:c),{name:"unless",hash:{},fn:this.program(5,e),inverse:this.noop,data:e});if(c!=null){a+=c}a+='				\r\n				<div class="space0p2rem"></div>\r\n                \r\n';c=d["if"].call(f,((c=(f!=null?f.model:f))!=null?c.OTPFatalError:c),{name:"if",hash:{},fn:this.program(8,e),inverse:this.program(10,e),data:e});if(c!=null){a+=c}a+='			\r\n				\r\n			</div>\r\n		</div>		\r\n		<div id="signout_segment">\r\n';c=d["if"].call(f,((c=(f!=null?f.model:f))!=null?c.SOFoffer:c),{name:"if",hash:{},fn:this.program(12,e),inverse:this.noop,data:e});if(c!=null){a+=c}return a+"		\r\n		\r\n		</div>\r\n</div>"},useData:true});
define("cbol/apps/auth/signout/subapp/routers/signout-router",["c3"],function(a){return a.AppRouter.extend({appRoutes:{"auth/signout/signout":"signout"}})});define("cbol/apps/auth/signout/subapp/layouts/signout-layout",["c3","templates"],function(b,a){return b.Layout.extend({name:"signout.Layout",template:a["cbol/apps/auth/signout/subapp/templates/signout-layout.hbs"],regions:{body:"#signout_body"}})});define("cbol/apps/auth/signout/subapp/views/step-view-signout",["c3","templates","backbone.radio","handlebars"],function(b,a,c,d){return b.View.extend({initialize:function(g){this.templateData=g.templateData;this.screenId=g.screenId;this.template=a["cbol/apps/auth/signout/subapp/templates/step-view-signout.hbs"];var f=c.channel("common");f.trigger("view:created")},render:function(){this.templateData.viewEL=this.el;this.$el.html(this.template(this.templateData))},onShow:function(){var g=c.channel("common");g.trigger("view:shown",{viewEL:this.el});var h=b.SessionModel.get("notshowsessionlasttimeflag");b.SessionModel.unset("notshowsessionlasttimeflag");if(h){$(".sessionFontSize").hide()}try{b.WebAnalystUtils.send({prop1:"",pageName:"redesign logout",pageCategory:"pre-login sign off page",transactionRefId:this.model.get("txnRefId")})}catch(f){}},onBeforeDestroy:function(){var e=c.channel("common");e.trigger("view:destroyed",{viewEL:this.el})}})});define("cbol/apps/auth/signout/subapp/models/signout-model",["c3"],function(a){return a.Model.extend({screenId:"signout",defaults:{},url:"/JSO/signoff/SignoffRD.do"})});define("cbol/apps/auth/signout/subapp/models/step-model",["c3"],function(b,d,a,c){return b.Model.extend({screenid:"",getDynaWgtData:function(h){var i=null;if(h=="userIds"){i={};var j=new Array();i.options=j;var g=this.attributes.bizModel.usernames;for(var f=0;f<g.length;f++){i.options.push({value:g[f],displayValue:g[f]})}}else{if(h="checkboxusernamelist"){i={};var j=new Array();i.options=j;var e=b.CookieUtils.getCookie("remembered_usernamelist");var g=e.split("|");for(var f=0;f<g.length;f++){i.options.push({value:g[f],displayValue:g[f]})}i.size="md"}}return i}})});define("cbol/apps/auth/signout/subapp/handlers/handler-signout",["cbol/apps/common/widgetsfactory/utils/handler/handler","backbone"],function(a,b){return a.extend({signinPage_click:function(){C3.navigate("/apps/auth/signin/")},remind_click:function(){var c="https://www.online.citibank.pl/formularz/konto/gold/mgm/?prID=LOGOUTGOLD&_ga=1.88289243.1747131381.1414765614";if(C3.SessionModel.get("locale")!="undefined"){if(C3.SessionModel.get("locale")=="en"){c="https://www.online.citibank.pl/formularz/konto/gold/mgm/en/index.html"}}window.open(c,"_blank","toolbar=0,location=0,menubar=0,fullscreen=yes")},bankOnline_click:function(){var c="https://www.online.citibank.pl/polish/services/Bezpieczenstwo.htm";if(C3.SessionModel.get("locale")!="undefined"){if(C3.SessionModel.get("locale")=="en"){c="https://www.online.citibank.pl/english/services/Bezpieczenstwo.htm"}}window.open(c,"_blank","toolbar=0,location=0,menubar=0,fullscreen=yes")}})});define("cbol/apps/auth/signout/subapp/controllers/signout-controller",["underscore","c3","msgbus","c3helpers","cbol/apps/common/widgetsfactory/widgetsfactory","cbol/apps/auth/signout/subapp/routers/signout-router","cbol/apps/auth/signout/subapp/layouts/signout-layout","cbol/apps/auth/signout/subapp/views/step-view-signout","cbol/apps/auth/signout/subapp/models/signout-model","cbol/apps/auth/signout/subapp/models/step-model","cbol/apps/auth/signout/subapp/handlers/handler-signout",],function(j,d,c,g,i,k,h,e,a,b,f){return d.SubAppController.extend({name:"signout.Controller",appId:"signout",layoutClass:h,initialize:function(l){this.region=l.region;this.widgetsFactory=new i({appId:"signout",moduleId:"auth",lazyLoad:true,language:d.SessionModel.get("locale")});c.reqres.setHandler("signout:SOFoffer",function(){return undefined})},start:function(){this.region.show(this.getLayout());this.region=this.getLayout().body;this.signoutRouter=new k({controller:this});Backbone.history.loadUrl("auth/signout/signout")},signout:function(){var l=this;var o=undefined;var m="/PLGCB/REST/offers?placement=SOF";var n=new a();C3Widgets.Blocker.blockPage();$.ajax({type:"GET",url:m,data:undefined,async:true,success:function(r){var p=r.offerList;if(p&&p.length>0){for(var q=0;q<p.length;q++){if(o!=undefined){if(p[q].priority<o.priority){o=p[q]}}else{o=p[q]}}}if(o){c.reqres.setHandler("signout:SOFoffer",function(){return o})}},complete:function(){n.fetch({type:"POST",success:function(p){var q=p.attributes.SignOutStatus.custId;d.SessionModel.set("signout:txnRefId",p.attributes.SignOutStatus.transactionRefId);if(q){c.reqres.setHandler("signout:custId",function(){return q})}},error:function(){},complete:function(){$.ajax({type:"POST",url:"/PLGCB/JSO/signoff/SummaryRecord.do?logOff=true",async:true,success:function(q,p,r){},error:function(){},complete:function(){l.showSignoutPage();C3Widgets.Blocker.unblockPage()}})}})}})},showSignoutPage:function(B){var H=this.region;var n=this.widgetsFactory;d.SessionModel.unset("signin:sessionInitailTime");var J;var u=d.SessionModel.get("loginSuccessTime");var w=d.SessionModel.get("signout:txnRefId");if(u){var D=new Date().getTime();var l=D-u;var A=1000*60*60;var z=1000*60;var m=1000;var C=parseInt(l/A);var p=parseInt((l-C*A)/z);var o=parseInt((l-C*A-p*z)/m);var q=C>99?"99":C<10?"0"+C:C;var y=C>99?"59":p<10?"0"+p:p;var v=C>99?"59":o<10?"0"+o:o;J=q+":"+y+":"+v;d.SessionModel.unset("loginSuccessTime")}else{d.SessionModel.set("notshowsessionlasttimeflag","true")}if(B=="error"){d.SessionModel.set("notshowsessionlasttimeflag","true")}try{c.commands.execute("portal:userprofile:refresh",{signoff:true})}catch(F){}var G=new b({screenId:"signout",sessionlastTime:J,SOFoffer:c.reqres.request("signout:SOFoffer"),OTPFatalError:c.reqres.request("OTP:FatalError"),txnRefId:w});var t=new f({screenId:"signout"});var I=n.getViewData("signout",G,t);var x=new e(I);H.show(x);var E=c.reqres.request("signout:SOFoffer");if(!E){var s=d.CookieUtils.getCookie("citiSegment");this.signoutSegmentRegion=new Marionette.Region({el:self.$("#signout_segment")});var r=this.signoutSegmentRegion;if(!s){s="default"}require(["cbol/apps/portal/pageloader/subapp/subapp"],function(K){var L=new K({region:r});var M=s.replace(" ","-");L.start("signinout/signinout-"+M+".html")})}}})});define("cbol/apps/auth/signout/subapp/subapp",["c3","c3helpers","cbol/apps/auth/signout/subapp/controllers/signout-controller"],function(b,a,c){return b.SubApp.extend({name:"auth.signout.subApp",controllerClass:c})});
